{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 6c096c5ff45e63659944","webpack:///./src/utils/helpers.js","webpack:///./src/utils/events.js","webpack:///./src/core/vffData.js","webpack:///./src/utils/messenger.js","webpack:///./src/core/ui/uiElement.js","webpack:///./src/components/clocks/basic-clock.js","webpack:///./src/core/consts.js","webpack:///./src/core/interactionEvents.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/core/handlers/updateHandler.js","webpack:///./src/index.js","webpack:///./src/core/vffSetup.js","webpack:///./src/utils/docRefs.js","webpack:///./src/core/vffTemplate.js","webpack:///./src/utils/super-proxy.js","webpack:///./src/core/ui/uiMultiselect.js","webpack:///./src/core/ui/uiDropdown.js","webpack:///./src/core/ui/uiRadio.js","webpack:///./src/core/ui/uiRange.js","webpack:///./src/utils/listener.js","webpack:///./src/core/handlers.js","webpack:///./src/utils/xpath.js","webpack:///./src/core/handlers/pagesHandler.js","webpack:///./src/core/handlers/queryParamsHandler.js","webpack:///./src/core/handlers/reloadHandler.js","webpack:///./src/core/handlers/vfDataHandler.js","webpack:///./src/core/webrtc/webrtc.js","webpack:///./src/core/webrtc/simplewebrtc.bundle.js","webpack:///./src/core/initDOM.js","webpack:///./src/core/vffElement.js","webpack:///./src/observer/htmlAccessorObserver.js","webpack:///./src/core/defaultExpose.js","webpack:///./src/components/components.js","webpack:///./scripts/custom-elements.min.js","webpack:///./scripts/custom-elements-es5-adapter.exec.js","webpack:///./src/components/emoji.js","webpack:///./src/components/drag-area.js","webpack:///./src/components/telestrator/telestrator-element.js","webpack:///./src/components/telestrator/telestrator-element.scss?523a","webpack:///./src/components/telestrator/telestrator-element.scss","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./src/components/clocks/clock-simple.js","webpack:///./src/components/clocks/clock-worker.js","webpack:///./src/components/clocks/system-clock.js","webpack:///./src/components/clocks/interval-worker.js","webpack:///./src/components/clocks/countdown.js","webpack:///./src/components/clocks/stopwatch.js","webpack:///./src/core/api/events.js","webpack:///./src/core/api/player.js","webpack:///./src/core/api/visibility.js","webpack:///./src/core/api/http.js"],"names":["findKey","data","keyToFind","keys","Object","i","length","toLowerCase","trim","str","charList","undefined","replace","RegExp","isObject","obj","Array","isArray","HTMLElement","getByPath","path","split","result","setByPath","value","arguments","Error","camelize","$1","toUpperCase","decamelize","uuid","s4","Math","floor","random","toString","substring","mobilecheck","check","a","test","substr","navigator","userAgent","vendor","window","opera","controllerCheck","frameElement","ownerDocument","defaultView","hasAttribute","err","extend","b","key","hasOwnProperty","deepExtend","destination","source","property","modeCheck","mode","frame","getAttribute","docRef","anchor","deepCompare","l","leftChain","rightChain","compare2Objects","x","y","p","isNaN","Date","String","Number","isPrototypeOf","constructor","prototype","indexOf","startsWith","push","pop","broadcast","event","document","dispatchEvent","CustomEvent","detail","on","listener","addEventListener","off","removeEventListener","defer","resolve","noop","reject","promise","Promise","res","rej","getQueryParams","queryString","search","location","href","JSON","parse","decodeURIComponent","module","exports","isMobile","isController","VffData","_templates","_pages","_pagesDefer","_updateCB","angular","$body","element","body","$injector","injector","get","$apply","cb","name","REGISTER_TEMPLATE","_update","VffTemplate","ADD","channel","options","_options","values","template","getTemplate","show","hide","toggle","pages","concat","PAGES_UPDATE","updateCB","params","_queryParams","vffData","global","REQUEST_TIMEOUT","sendMessage","type","payload","message","postMessage","request","rid","_rid","timeout","handler","removeHandler","clearTimeout","setTimeout","w","parent","stringify","send","UIElement","defaults","assign","Interval","require","BasicClock","self","_time","init","running","_visibility","interval","onInterval","style","display","innerHTML","autorun","start","format","stop","time","visibility","run","updateOn","Event","UI","MULTISELECT","DROPDOWN","RADIO","RANGE","events","touchesToJson","touches","touchArray","touch","touchData","clientX","clientY","pageX","pageY","sync","e","ctrlKey","metaKey","altKey","shiftKey","webrtc","msg","deltaX","deltaY","deltaZ","deltaMode","target","targetTouches","changedTouches","bindSyncEvents","forEach","elementFromPoint","bubbles","cancelable","view","TouchEvent","slice","handleTouchEvent","WheelEvent","MouseEvent","console","log","createTouchArray","map","identifier","now","Touch","isInteractionEvent","update","promises","templateName","deferred","_runMiddleware","then","registerTemplate","updateDom","__timecode__","VFF_EVENT","all","updateInteraction","control","timecode","dom","$element","EXPOSE_DELIMITER","eventsApi","playerApi","visibilityApi","httpApi","READY","vff","selector","vffElement","addTemplate","getTemplates","onUpdate","getPages","onPages","setup","extension","define","customElements","VF_SETUP","defaultListenerOptions","changeOnly","throttle","defaultTemplateOptions","Template","_name","_middleware","_createUIElements","_proxy","SuperProxy","_traps","_element","_proxies","_timeouts","querySelector","_setValue","_getValue","query","OUTGOING_EVENT","args","_arguments","callback","runCB","_runCallback","equals","$show","$hide","$toggle","$on","$emit","tmp","USER_UPDATE","traps","set","_sendUserUpdateEvent","reduce","prev","curr","d","arg1","arg2","arg3","consolidate","callbacks","WeakMap","ui","UIMultiselect","UIDropdown","UIRadio","UIRange","Proxy","prop","expose","findExposed","BYPASS_PREFIX","PARENT_ID","PARENT_KEY","PROXY_ID","IS_PROXY","SELF","isInternalName","endsWith","isInternalProperty","cleanInternal","object","noBypass","_parents","_parentIDs","_copy","toUpdate","o","prefix","output","v","unshift","trapFuncs","bypass","_getPath","proxy","parentID","has","_set","proxyID","config","clearOnChange","itemsInView","min","max","step","handlers","messageHandler","messageData","cid","ACK","UPDATE","PAGES","QUERY_PARAMS","queryParams","RELOAD","reload","VF_DATA","handleVFData","isSVGChild","elm","tagName","parentNode","createXPathFromElement","allNodes","getElementsByTagName","segs","sib","svg","nodeType","uniqueIdCount","n","id","join","localName","previousSibling","lookupElementByXPath","evaluator","XPathEvaluator","evaluate","documentElement","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","getElementByXpath","addPages","addQueryParams","settings","WebRTC","token","onMessage","SimpleWebRTC","signalingServer","maxParticipants","onVideoAdded","onVideoRemoved","onCreatedPeer","room","connected","url","stunServer","urls","username","credential","localVideoEl","remoteVideosEl","autoRequestMedia","debug","detectSpeakingEvents","autoAdjustMic","setInfo","connection","joinRoom","participants","clients","close","video","peer","strongId","nickName","label","leaveRoom","disconnect","sendDirectlyToAll","f","g","adapter","t","r","s","u","code","call","SDPUtils","generateIdentifier","localCName","splitLines","blob","line","splitSections","parts","part","index","matchPrefix","filter","parseCandidate","candidate","foundation","component","parseInt","protocol","priority","ip","port","relatedAddress","relatedPort","tcpType","writeCandidate","sdp","parseIceOptions","parseRtpMap","parsed","payloadType","shift","clockRate","numChannels","writeRtpMap","codec","pt","preferredPayloadType","parseExtmap","direction","uri","writeExtmap","headerExtension","preferredId","parseFmtp","kv","j","writeFmtp","parameters","param","parseRtcpFb","parameter","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","sp","ssrc","colon","attribute","getMid","mediaSection","mid","parseFingerprint","algorithm","getDtlsParameters","sessionpart","role","fingerprints","writeDtlsParameters","setupType","fp","getIceParameters","iceParameters","usernameFragment","password","writeIceParameters","parseRtpParameters","description","codecs","headerExtensions","fecMechanisms","rtcp","mline","rtpmapline","fmtps","writeRtpDescription","kind","caps","maxptime","parseRtpEncodingParameters","encodingParameters","hasRed","hasUlpfec","ssrcs","primarySsrc","secondarySsrc","flows","apt","encParam","codecPayloadType","rtx","fec","mechanism","bandwidth","maxBitrate","parseRtcpParameters","rtcpParameters","cname","remoteSsrc","rsize","reducedSize","compound","mux","parseMsid","spec","stream","track","planB","writeSessionBoilerplate","writeMediaSection","transceiver","iceGatherer","getLocalParameters","dtlsTransport","rtpSender","rtpReceiver","msid","sendEncodingParameters","getDirection","getKind","isRejected","adapterFactory","dependencies","utils","logging","browserDetails","detectBrowser","extractVersion","disableLog","chromeShim","edgeShim","firefoxShim","safariShim","browser","shimPeerConnection","browserShim","shimGetUserMedia","shimMediaStream","shimCreateObjectURL","shimSourceObject","shimOnTrack","shimGetSendersWithDtmf","shimReplaceTrack","shimCallbacksAPI","shimAddStream","shimOnAddStream","MediaStream","webkitMediaStream","RTCPeerConnection","defineProperty","_ontrack","_ontrackpoly","te","receiver","getReceivers","find","streams","getTracks","bind","getSenders","_senders","origAddStream","addStream","origRemoveStream","removeStream","addTrack","pc","signalingState","DOMException","alreadyExists","_streams","oldStream","newStream","sender","dtmf","_dtmf","createDTMFSender","apply","splice","URL","HTMLMediaElement","_srcObject","src","revokeObjectURL","createObjectURL","pcConfig","pcConstraints","iceTransportPolicy","iceTransports","webkitRTCPeerConnection","generateCertificate","OrigPeerConnection","iceServers","newIceServers","server","warn","origGetStats","getStats","successCallback","errorCallback","fixChromeStats_","response","standardReport","reports","report","standardStats","timestamp","localcandidate","remotecandidate","names","stat","makeMapStats","stats","Map","successCallbackWrapper_","version","method","nativeMethod","opts","RTCIceCandidate","RTCSessionDescription","nativeAddIceCandidate","addIceCandidate","constraintsToChrome_","c","mandatory","optional","cc","ideal","exact","oldname_","charAt","oc","mix","advanced","shimConstraints_","constraints","func","audio","remap","face","facingMode","getSupportedFacingModeLies","mediaDevices","getSupportedConstraints","matches","enumerateDevices","devices","dev","some","match","deviceId","shimError_","PermissionDeniedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","constraint","constraintName","getUserMedia_","onSuccess","onError","webkitGetUserMedia","getUserMedia","getUserMediaPromise_","kinds","MediaStreamTrack","getSources","device","groupId","echoCancellation","frameRate","height","width","origGetUserMedia","cs","getAudioTracks","getVideoTracks","shimRTCPeerConnection","RTCIceGatherer","origMSTEnabled","getOwnPropertyDescriptor","ev","enabled","RTCRtpSender","replaceTrack","setTrack","catch","sortTracks","tracks","audioTracks","videoTracks","filterIceServers","edgeVersion","hasTurn","isString","validTurn","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","findCodecByPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","rCodec","lHeaderExtension","rHeaderExtension","isActionAllowedInSignalingState","action","offer","setLocalDescription","setRemoteDescription","answer","_eventTarget","createDocumentFragment","needNegotiation","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","canTrickleIceCandidates","localStreams","remoteStreams","getLocalStreams","getRemoteStreams","localDescription","remoteDescription","iceConnectionState","iceGatheringState","iceOptions","gatherPolicy","usingBundle","bundlePolicy","_config","transceivers","_localIceCandidatesBuffer","_emitGatheringStateChange","_emitBufferedCandidates","sections","end","sdpMLineIndex","complete","every","state","iceGatheringStateChange","getConfiguration","_createTransceiver","hasBundleTransport","iceTransport","recvEncodingParameters","wantReceive","transports","_createIceAndDtlsTransports","_maybeFireNegotiationNeeded","clonedStream","clone","idx","clonedTrack","_createIceGatherer","onlocalcandidate","evt","sdpMid","cand","_pendingOffer","RTCIceTransport","onicestatechange","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","writable","_disposeIceAndDtlsTransports","ondtlssttatechange","_transceive","recv","encodings","receive","isIceLite","rejected","isDatachannel","remoteIceParameters","remoteDtlsParameters","_updateSignalingState","TypeError","hasCallback","receiverList","remoteMsid","isComplete","cands","setTransport","setRemoteCandidates","RTCRtpReceiver","getCapabilities","default","sid","item","trackEvent","getRemoteCandidates","addRemoteCandidate","newState","states","closed","connecting","checking","completed","disconnected","failed","new","createOffer","offerOptions","numAudioTracks","numVideoTracks","offerToReceiveAudio","offerToReceiveVideo","desc","createAnswer","localTrack","hasRtx","mLineIndex","fixStatsType","inboundrtp","outboundrtp","candidatepair","results","mozSrcObject","mozRTCPeerConnection","newServer","mozRTCSessionDescription","mozRTCIceCandidate","modernStatsTypes","nativeGetStats","onSucc","onErr","InternalError","NotSupportedError","SecurityError","constraintsToFF37_","mozGetUserMedia","infos","orgEnumerateDevices","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","_onaddstream","_onaddstreampoly","failureCallback","withCallback","errcb","logDisabled_","bool","uastring","expr","pos","nativeCreateObjectURL","nativeRevokeObjectURL","newId","delete","dsc","srcObject","nativeSetAttribute","setAttribute","after","count","err_cb","bail","arraybuffer","bytes","byteLength","ArrayBuffer","abv","Uint8Array","ii","buffer","el","autoplay","mirror","muted","disableContextMenu","createElement","oncontextmenu","preventDefault","styleName","legacyStats","back","_getCommonCapabilities","Backoff","ms","factor","jitter","attempts","duration","pow","rand","deviation","reset","setMin","setMax","setJitter","chars","encode","len","base64","decode","bufferLength","encoded1","encoded2","encoded3","encoded4","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","Blob","size","blobSupportsArrayBufferView","blobBuilderSupported","append","getBlob","mapArrayBufferViews","ary","chunk","buf","copy","byteOffset","BlobBuilderConstructor","bb","BlobConstructor","fn","Emitter","mixin","_callbacks","once","removeListener","removeAllListeners","emit","listeners","hasListeners","fmt","coerce","humanize","Function","skips","enable","localStorage","disable","sec","hour","toFixed","val","stack","parser","parseuri","parsejson","parseqs","Socket","host","secure","pieces","hostname","agent","upgrade","forceJSONP","jsonp","forceBase64","enablesXDR","timestampParam","timestampRequests","readyState","writeBuffer","callbackBuffer","policyPort","rememberUpgrade","binaryType","onlyBinaryUpgrades","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","open","priorWebsocketSuccess","Transport","createTransport","EIO","transport","socket","onDrain","packet","onPacket","onClose","probe","onTransportOpen","upgradeLosesBinary","supportsBinary","upgrading","pause","cleanup","flush","freezeTransport","error","onTransportClose","onclose","onupgrade","to","onOpen","upgrades","onHandshake","setPing","filterUpgrades","pingInterval","pingTimeout","onHeartbeat","pingTimeoutTimer","pingIntervalTimer","ping","sendPacket","prevBufferLen","write","cleanupAndClose","waitForUpgrade","reason","filteredUpgrades","timestamps","doOpen","doClose","packets","onData","decodePacket","XMLHttpRequest","XHR","JSONP","websocket","polling","xhr","xd","xs","isSSL","xdomain","xscheme","Polling","inherit","JSONPPolling","rNewline","rEscapedNewline","empty","___eio","script","removeChild","form","iframe","doPoll","async","insertAt","insertBefore","isUAgecko","appendChild","doWrite","area","iframeId","className","position","top","left","initIframe","html","submit","attachEvent","onreadystatechange","onload","Request","isBinary","req","sendXhr","pollXhr","create","responseType","setRequestHeader","withCredentials","hasXDR","onLoad","responseText","status","requestsCount","requests","fromError","abort","contentType","getResponseHeader","XDomainRequest","unloadHandler","hasXHR2","poll","onPause","pending","total","decodePayload","callbackfn","encodePayload","schema","b64","WebSocket","WS","protocols","ws","addEventListeners","onopen","onmessage","encodePacket","ondrain","hasCORS","ActiveXObject","formatArgs","save","load","useColors","colors","firebug","exception","table","formatters","namespace","diff","color","lastC","namespaces","removeItem","prevColor","prevTime","selectColor","disabled","formatter","logFn","re","m","exec","authority","ipv6uri","hasBinary","sliceBuffer","base64encoder","utf8","isAndroid","isPhantomJS","dontSendBlobs","pong","packetslist","utf8encode","encodeArrayBuffer","encodeBlob","encodeBase64Object","encoded","encodeBase64Packet","contentArray","resultBuffer","encodeBlobAsArrayBuffer","fr","FileReader","readAsArrayBuffer","readAsDataURL","b64data","fromCharCode","typed","basic","btoa","utf8decode","decodeBase64Packet","asArray","rest","encodePayloadAsBlob","encodePayloadAsArrayBuffer","setLengthHeader","encodeOne","doneCallback","each","done","next","eachWithIndex","decodePayloadAsBinary","chr","ret","encodedPackets","totalLength","acc","resultArray","bufferIndex","ab","charCodeAt","lenStr","binaryIdentifier","lengthAry","bufferTail","buffers","numberTooLong","tailArray","msgLength","arr","WildEmitter","util","Sender","chunksize","pacing","file","inherits","usePoll","bufferedAmountLowThreshold","offset","sliceFile","reader","bufferedAmount","Receiver","receiveBuffer","received","metadata","support","File","cache","hasConstraints","chromever","maxver","isCef","chrome","webstore","sessionStorage","getScreenMediaJSExtensionId","runtime","sourceId","chromeMediaSource","maxWidth","screen","maxHeight","maxFrameRate","chromeMediaSourceId","cefGetScreenMedia","googLeakyBucket","googTemporalLayeredScreencast","ffver","mozMediaSource","mediaSource","lastTime","currentTime","polly","setInterval","clearInterval","onended","origin","getMaxVolume","analyser","fftBins","maxVolume","Infinity","getFloatFrequencyData","audioContextType","AudioContext","webkitAudioContext","audioContext","harker","smoothing","threshold","play","history","sourceNode","createAnalyser","fftSize","smoothingTimeConstant","Float32Array","frequencyBinCount","jquery","HTMLAudioElement","HTMLVideoElement","createMediaElementSource","createMediaStreamSource","connect","speaking","setThreshold","speakingHistory","looper","currentVolume","_hasBinary","Buffer","isBuffer","toJSON","getClass","isProperty","undef","isLoader","amd","nativeJSON","JSON3","isExtended","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","isSupported","serialized","stringifySupported","parseSupported","functionClass","dateClass","numberClass","stringClass","arrayClass","booleanClass","charIndexBuggy","Months","getDay","year","month","members","__proto__","original","PrimitiveTypes","isHostType","Properties","valueOf","isFunction","hasProperty","isConstructor","Escapes","leadingZeroes","toPaddedString","unicodePrefix","quote","isLarge","symbols","charCode","serialize","properties","whitespace","indentation","date","hours","minutes","seconds","milliseconds","Unescapes","Index","Source","SyntaxError","lex","begin","isSigned","hasMembers","walk","hark","getScreenMedia","mockconsole","isAllTracksEnded","shouldWorkAroundFirefoxStopStream","LocalMedia","audioFallback","media","harkOptions","logger","_log","_logerror","localScreens","_audioMonitors","_stopAudioMonitor","mediaConstraints","_setupAudioMonitor","_removeStream","stopStream","stopScreenShare","startScreenShare","mute","_audioEnabled","unmute","pauseVideo","_videoEnabled","resumeVideo","resume","isAudioEnabled","isVideoEnabled","volume","monitors","LARGE_ARRAY_SIZE","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","arrayTag","boolTag","dateTag","errorTag","funcTag","genTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reRegExpChar","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","freeSelf","root","freeExports","freeModule","moduleExports","addMapEntry","pair","addSetEntry","add","arrayEach","array","iteratee","arrayPush","arrayReduce","accumulator","initAccum","baseTimes","getValue","isHostObject","mapToArray","overArg","transform","arg","setToArray","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","uid","IE_PROTO","funcToString","objectToString","reIsNative","Symbol","getPrototype","getPrototypeOf","objectCreate","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","nativeKeys","DataView","getNative","Set","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","Hash","entries","clear","entry","hashClear","__data__","hashDelete","hashGet","hashHas","hashSet","ListCache","listCacheClear","listCacheDelete","assocIndexOf","lastIndex","listCacheGet","listCacheHas","listCacheSet","MapCache","mapCacheClear","mapCacheDelete","getMapData","mapCacheGet","mapCacheHas","mapCacheSet","Stack","stackClear","stackDelete","stackGet","stackHas","stackSet","pairs","arrayLikeKeys","inherited","isArguments","skipIndexes","isIndex","assignValue","objValue","eq","baseAssign","copyObject","baseClone","isDeep","isFull","customizer","isArr","initCloneArray","copyArray","tag","getTag","isFunc","cloneBuffer","initCloneObject","copySymbols","initCloneByTag","stacked","props","getAllKeys","subValue","baseCreate","proto","baseGetAllKeys","keysFunc","symbolsFunc","baseGetTag","baseIsNative","isMasked","pattern","baseKeys","isPrototype","cloneArrayBuffer","arrayBuffer","cloneDataView","dataView","cloneMap","cloneFunc","cloneRegExp","regexp","cloneSet","cloneSymbol","symbol","cloneTypedArray","typedArray","newValue","getSymbols","isKeyable","stubArray","Ctor","ctorString","input","cloneDeep","other","isArrayLikeObject","isArrayLike","isLength","isObjectLike","stubFalse","methods","h","long","short","parseFloat","round","plural","ceil","vals","merge","isEmpty","rvalidchars","rvalidescape","rvalidtokens","rvalidbraces","rtrimLeft","rtrimRight","encodeURIComponent","qs","qry","process","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","nextTick","Item","title","env","argv","versions","addListener","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","SJJ","PeerConnection","enableChromeNativeSimulcast","appVersion","enableMultiStreamHacks","restrictBandwidth","andyetRestrictBandwidth","batchIceCandidates","andyetBatchIce","batchedIceCandidates","andyetFasterICE","eliminateDuplicateCandidates","andyetDontSignalCandidates","dontSignalCandidates","assumeSetLocalSuccess","andyetAssumeSetLocalSuccess","wtFirefox","andyetFirefoxMakesMeSad","firefoxcandidatebuffer","vidEncoder","vidBitrate","audEncode","audEncoder","audBitrate","removeTrack","onremovetrack","_onIce","_onDataChannel","contents","isInitiator","sdpSessionID","useJingle","iceCredentials","local","remote","hadLocalStunCandidate","hadRemoteStunCandidate","hadLocalRelayCandidate","hadRemoteRelayCandidate","hadLocalIPv6Candidate","hadRemoteIPv6Candidate","_remoteDataChannels","_localDataChannels","_candidateBuffer","_role","localStream","_checkLocalCandidate","toCandidateJSON","_checkRemoteCandidate","processIce","jingle","contentNames","content","candidates","remoteContent","processCandidates","iceCandidate","toCandidateSDP","ufrag","pwd","toSessionSDP","ua","addTransceiver","expandedOffer","toSessionJSON","strCodecId","nFound","strBegin","strSDP","strEnd","strSAVPF","includes","handleOffer","application","googConferenceFlag","sources","hasBw","answerAudioOnly","OfferToReceiveAudio","OfferToReceiveVideo","_answer","answerBroadcastOnly","handleAnswer","z","sim","groups","sourceGroups","hasSim","group","semantics","newssrc","rtxssrc","expandedAnswer","ice","expandedCandidate","already","address","rtcpMuxPolicy","creator","transportType","newCand","createDataChannel","toSDP","toIncomingSDPOffer","session","toOutgoingSDPOffer","toIncomingSDPAnswer","toOutgoingSDPAnswer","toIncomingMediaSDPOffer","toMediaSDP","toOutgoingMediaSDPOffer","toIncomingMediaSDPAnswer","toOutgoingMediaSDPAnswer","toIncomingJSONOffer","creators","toOutgoingJSONOffer","toIncomingJSONAnswer","toOutgoingJSONAnswer","toIncomingMediaJSONOffer","toMediaJSON","toOutgoingMediaJSONOffer","toIncomingMediaJSONAnswer","toOutgoingMediaJSONAnswer","findLine","mediaLines","sessionLines","prefixLength","findLines","formats","rtpmap","clockrate","channels","sctpmap","number","fmtp","crypto","cipherSuite","keyParams","sessionParams","fingerprint","hash","extmap","idpart","senders","rtcpfb","subtype","generation","relAddr","relPort","network","mslabel","initiator","incoming","responder","both","none","recvonly","sendonly","sendrecv","inactive","outgoing","SENDERS","parsers","idCounter","_setIdCounter","counter","groupLines","applicationType","payloads","encryption","feedback","sctp","trans","rtpmapLines","fmtpLines","fbLines","cryptoLines","extLines","ext","ssrcGroupLines","ssrcLines","msidLine","found","fingerprintLines","ufragLine","pwdLine","candidateLines","sctpmapLines","hasSources","pushedSetup","hdrExts","hdr","ssrcGroups","ssrcGroup","Manager","lookup","managers","io","forceNew","multiplex","eio","nsps","subs","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","encoding","packetBuffer","encoder","Encoder","decoder","Decoder","autoConnect","emitAll","nsp","updateSocketIds","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","reconnecting","reconnect","skipReconnect","openSub","errorSub","timer","destroy","ondata","ondecoded","processPacketQueue","pack","sub","delay","onreconnect","attempt","toArray","hasBin","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","json","ids","acks","sendBuffer","subEvents","parserType","EVENT","BINARY_EVENT","CONNECT","onpacket","onconnect","onevent","onack","BINARY_ACK","DISCONNECT","ondisconnect","ERROR","ack","sent","emitBuffered","loc","isBuf","deconstructPacket","packetData","_deconstructPacket","placeholder","_placeholder","num","newData","attachments","reconstructPacket","curPlaceHolder","_reconstructPacket","removeBlobs","_removeBlobs","curKey","containingObject","pendingBlobs","fileReader","bloblessData","binary","types","encodeAsBinary","encodeAsString","writeEncoding","deconstruction","reconstructor","decodeString","BinaryReconstructor","reconPack","takeBinaryData","finishedReconstruction","binData","list","stringFromCharCode","ucs2decode","string","extra","ucs2encode","checkScalarValue","codePoint","createByte","encodeCodePoint","codePoints","byteString","readContinuationByte","byteIndex","byteCount","continuationByte","byteArray","decodeSymbol","byte1","byte2","byte3","byte4","ctor","superCtor","super_","enumerable","configurable","TempCtor","fill","readUInt8","formatRegExp","objects","inspect","_","isNull","deprecate","isUndefined","noDeprecation","warned","deprecated","throwDeprecation","traceDeprecation","trace","debugs","debugEnviron","debuglog","NODE_DEBUG","pid","ctx","seen","stylize","stylizeNoColor","depth","isBoolean","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styles","styleType","arrayToHash","recurseTimes","primitive","formatPrimitive","visibleKeys","getOwnPropertyNames","isError","formatError","isRegExp","isDate","base","braces","toUTCString","formatArray","formatProperty","reduceToSingleString","simple","isNumber","numLinesEst","cur","ar","isNullOrUndefined","isSymbol","isPrimitive","pad","months","getHours","getMinutes","getSeconds","getDate","getMonth","PC","IceCandidate","SessionDescription","screenSharing","videoEl","supportVp8","canPlayType","msGetUserMedia","browserVersion","supportRTCPeerConnection","supportGetUserMedia","supportDataChannel","supportWebAudio","supportMediaStream","supportScreenSharing","isWildEmitter","groupName","hasGroup","_groupName","releaseGroup","specialCallbacks","getWildcardCallbacks","eventName","MozWebSocket","instance","webrtcSupport","FileTransfer","INBAND_FILETRANSFER_V1","Peer","chunkedMessages","oneway","sharemyscreen","browserPrefix","enableDataChannels","receiveMedia","peerConnectionConfig","peerConnectionConstraints","onIceCandidate","nick","handleRemoteStreamAdded","handleDataChannelAdded","handleStreamRemoved","broadcaster","handleMessage","sessionDescription","from","mLines","mLine","messageType","roomType","sendDirectly","dc","getDataChannel","splitted","guid","messageId","chunksCount","_observeDataChannel","nChunksCount","nChunk","temp","icerestart","IceRestart","success","peerIndex","peers","sendFile","getTime","attachMediaStream","SocketIoConnection","socketio","autoRemoveVideos","adjustPeerVolume","peerVolumeWhenSpeaking","localVideo","capabilities","getSessionid","sessionReady","testReadiness","getPeers","createPeer","fromNickName","removePeers","handlePeerStreamAdded","handlePeerStreamRemoved","setVolumeForAll","sendToAll","container","getRemoteVideoContainer","existingPeer","getLocalScreen","startLocalVideo","roomName","sendDataChannelMessageToAll","sendDataChannelMessageToPeer","peerId","foundId","getDomId","roomDescription","client","multicastType","janusLisnterMsg","toName","getEl","idOrEl","getElementById","getLocalVideoContainer","stopLocalVideo","shareScreen","createRoom","dataChannel","getNickName","setNickName","multicast","sId","mod","mc","localMedia","iceServersiceServers","hardMuted","treshold","val1","val2","sessionId","initDOM","untitledTemplateCount","templates","querySelectorAll","controls","closest","controlName","exposed","newVal","initSync","parentElement","elements","_init","VffElement","_observe","nodeName","getExposed","provider","stringifyPath","observePrimitive","dispatcher","pathString","exposedPath","observeObject","observe","HTMLHeadingElement","text","HTMLSpanElement","HTMLParagraphElement","HTMLImageElement","DragArea","Emoji","Telestrator","Clock","SystemClock","Countdown","Stopwatch","MyElement","cursor","userSelect","render","onClick","happy","removeAttribute","_dragging","_result","mouseDown","touchStart","mouseUp","touchEnd","mouseMove","touchMove","bounds","getBoundingClientRect","screenX","screenY","minValueX","maxValueX","minValueY","maxValueY","precision","calc","originalEvent","xValue","yValue","clickX","clickY","clickDrag","lastStroke","canvas","context","getContext","mouseLeave","clearRect","dragging","strokeStyle","lineJoin","lineCap","lineWidth","beginPath","moveTo","lineTo","closePath","stroke","mouseX","mouseY","paint","addClick","redraw","Color","Size","work","createWorker","blobURL","worker","Worker","_worker","initial","_memo","limit","formatTime","cmd","Run","Reset","Initial","Limit","Show","wasRunning","isInteger","vis","startedAt","delayed","timeoutId","isLive","tick","tickedAt","elapsed","drifted","_pad","_limit","_initial","_reset","timeouts","onEvent","TRACK_EVENT","go","GO","previous","home","xmlHttp"],"mappings":"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,CAAkB,MAAlB,CAAT,KAAuC,CAA9C;AACH,S;0BACQzC,K,EAAO;AACZ,iBAAKs5B,YAAL,CAAkB,MAAlB,EAA0Bt5B,KAA1B;AACH;;;4BAlB+B;AAC5B,mBAAO,EAAP;AACH;;;;EA1HoCN,W;;kBAApByrE,W;;;;;;;ACArB,cAAc,mBAAO,CAAC,EAAwH;;AAE9I,4CAA4C,QAAS;;AAErD;AACA;;;;AAIA,eAAe;;AAEf;AACA;;AAEA,aAAa,mBAAO,CAAC,EAAsD;;AAE3E;;AAEA,GAAG,KAAU;AACb;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,GAAG;;AAEH;;AAEA;AACA,EAAE;;AAEF,gCAAgC,UAAU,EAAE;AAC5C,C;;;;;;AC5CA,2BAA2B,mBAAO,CAAC,EAAkD;AACrF;;;AAGA;AACA,cAAc,QAAS,4CAA4C,uBAAuB,WAAW,YAAY,gBAAgB,iBAAiB,EAAE;;AAEpJ;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;AC3EA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,EAAQ;;AAE9B;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;ACtXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACxFA,IAAI2D,OAAOtlE,mBAAOA,CAAC,EAAR,CAAX;;AAEA,SAASulE,YAAT,GAAuB;AACnB,QAAIC,UAAUjoD,IAAIK,eAAJ,CAAqB,IAAIuV,IAAJ,CAAS,CAAE,GAAF,EAAOmyC,KAAKluE,QAAL,EAAP,EAAuB,KAAvB,CAAT,EAAyC,EAAEwH,MAAM,wBAAR,EAAzC,CAArB,CAAd;AACA,QAAI6mE,SAAS,IAAIC,MAAJ,CAAYF,OAAZ,CAAb;AACAjoD,QAAII,eAAJ,CAAqB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","file":"vff.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vff\"] = factory();\n\telse\n\t\troot[\"vff\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6c096c5ff45e63659944","function findKey(data, keyToFind) {\n    let keys = Object.keys(data);\n    for(let i = 0 ; i < keys.length ; i++){\n        if(keys[i].toLowerCase() === keyToFind.toLowerCase()){\n            return keys[i];\n        }\n    }\n}\nfunction trim(str, charList) {\n    if (charList === undefined) {\n        charList = \"\\\\s\";\n    }\n    return str\n        .replace(new RegExp(\"^[\" + charList + \"]+\"), \"\")\n        .replace(new RegExp(\"[\" + charList + \"]+$\"), \"\");\n}\n\nfunction isObject(obj){\n    return obj === Object(obj) && !Array.isArray(obj) && !(obj instanceof HTMLElement);\n}\n\nfunction getByPath(obj, path){\n    path = path? trim(path, '.').split('.') : [\"\"];\n\n    let result = obj;\n    for (let i = 0; i < path.length; i++) {\n        result = result[path[i]];\n        if(result === undefined){\n            return result;\n        }\n    }\n\n    return result;\n}\nfunction setByPath(obj, path, value){\n    if(arguments.length !== 3){\n        throw new Error('Missing Arguments!');\n    }\n    path = path? trim(path, '.').split('.') : [\"\"];\n    let result = obj;\n    for (let i = 0; i < path.length; i++) {\n        if(i === path.length -1){\n            result[path[i]] = value;\n        } else {\n            if(result[path[i]] !== undefined){\n                result = result[path[i]];\n            }else {\n                return;\n            }\n        }\n    }\n}\n\nfunction camelize(str) {\n    return str\n        .replace(/\\s(.)/g, function($1) { return $1.toUpperCase(); })\n        .replace(/\\s/g, '')\n        .replace(/^(.)/, function($1) { return $1.toLowerCase(); });\n    // return str.replace(/(?:^\\w|[A-Z]|\\b\\w)/g, function(letter, index) {\n    //     return index == 0 ? letter.toLowerCase() : letter.toUpperCase();\n    // }).replace(/\\s+/g, '');\n}\nfunction decamelize(str) {\n    return str.replace(/([A-Z])/g, ' $1').trim();\n}\n\nfunction uuid() {\n    function s4() {\n        return Math.floor((1 + Math.random()) * 0x10000)\n            .toString(16)\n            .substring(1);\n    }\n    return s4() + s4() + s4() + s4() + s4() + s4() + s4() + s4();\n}\n\nfunction mobilecheck() {\n    let check = false;\n    (function (a) {\n        if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|Tablet|iPad|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4)))check = true; // eslint-disable-line no-useless-escape\n    })(navigator.userAgent || navigator.vendor || window.opera);\n    return check;\n}\nfunction controllerCheck(){\n    try{\n        return window.frameElement.ownerDocument.defaultView.frameElement.hasAttribute('controller');\n    } catch (err){\n        return false;\n    }\n}\n\nfunction extend(a, b){\n    for(let key in b)\n        if(b.hasOwnProperty(key))\n            a[key] = b[key];\n    return a;\n}\n\nfunction deepExtend(destination, source) {\n    for (let property in source) {\n        // if (source[property] && source[property].constructor && source[property].constructor === Object) {\n        if (source[property] && isObject(source[property])) {\n            destination[property] = (destination[property] && isObject(destination[property]))?\n                destination[property] : {};\n            deepExtend(destination[property], source[property]);\n        } else {\n            destination[property] = source[property];\n        }\n    }\n    return destination;\n}\n\n\nfunction modeCheck(){\n    //\"controller_preview\" \"controller_program\" \"editor\" \"player_external\" \"player_internal\"\n    let mode = 'normal';\n\n    try{\n        let frame = window.frameElement.ownerDocument.defaultView.frameElement;\n        mode = frame.getAttribute('vff-mode') || mode;\n    } catch (err){\n        // not in iframe\n    }\n    return mode;\n}\nfunction docRef(anchor){\n    return 'https://www.videoflow.io/documentation/api/vff?id=' + anchor;\n}\n\n\n//compares only properties from lhs and ignores properties that start with _\nfunction deepCompare () {\n    var i, l, leftChain, rightChain;\n\n    function compare2Objects (x, y) {\n        var p;\n\n        // remember that NaN === NaN returns false\n        // and isNaN(undefined) returns true\n         if (isNaN(x) && isNaN(y) && typeof x === 'number' && typeof y === 'number') {\n            return true;\n        }\n\n        // Compare primitives and functions.\n        // Check if both arguments link to the same object.\n        // Especially useful on the step where we compare prototypes\n        if (x === y) {\n            return true;\n        }\n\n        // Works in case when functions are created in constructor.\n        // Comparing dates is a common scenario. Another built-ins?\n        // We can even handle functions passed across iframes\n        if ((typeof x === 'function' && typeof y === 'function') ||\n            (x instanceof Date && y instanceof Date) ||\n            (x instanceof RegExp && y instanceof RegExp) ||\n            (x instanceof String && y instanceof String) ||\n            (x instanceof Number && y instanceof Number)) {\n            return x.toString() === y.toString();\n        }\n\n        // At last checking prototypes as good as we can\n        if (!(x instanceof Object && y instanceof Object)) {\n            return false;\n        }\n\n        if (x.isPrototypeOf(y) || y.isPrototypeOf(x)) {\n            return false;\n        }\n\n        if (x.constructor !== y.constructor) {\n            return false;\n        }\n\n        if (x.prototype !== y.prototype) {\n            return false;\n        }\n\n        // Check for infinitive linking loops\n        if (leftChain.indexOf(x) > -1 || rightChain.indexOf(y) > -1) {\n            return false;\n        }\n\n        // Quick checking of one object being a subset of another.\n        // todo: cache the structure of arguments[0] for performance\n        // for (p in y) {\n        //     if(!p.startsWith('_')){\n        //         if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\n        //             return false;\n        //         }\n        //         else if (typeof y[p] !== typeof x[p]) {\n        //             return false;\n        //         }\n        //     }\n        //\n        // }\n\n        for (p in x) {\n            if(!p.startsWith('_')) {\n                if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\n                    return false;\n                }\n                else if (typeof y[p] !== typeof x[p]) {\n                    return false;\n                }\n\n\n                switch (typeof (x[p])) {\n                    case 'object':\n                    case 'function':\n\n                        leftChain.push(x);\n                        rightChain.push(y);\n\n                        if (!compare2Objects(x[p], y[p])) {\n                            return false;\n                        }\n\n                        leftChain.pop();\n                        rightChain.pop();\n                        break;\n\n                    default:\n                        if (x[p] !== y[p]) {\n                            return false;\n                        }\n                        break;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    if (arguments.length < 1) {\n        return true;\n    }\n\n    for (i = 1, l = arguments.length; i < l; i++) {\n\n        leftChain = []; //Todo: this can be cached\n        rightChain = [];\n\n        if (!compare2Objects(arguments[0], arguments[i])) {\n            return false;\n        }\n    }\n\n    return true;\n}\nfunction broadcast(event, data){\n    document.dispatchEvent(new CustomEvent(event, { detail: data }));\n}\nfunction on(event, listener){\n    document.addEventListener(event, listener);\n}\nfunction off(event, listener){\n    document.removeEventListener(event, listener);\n}\nfunction defer(){\n    let resolve = noop, reject = noop;\n    let promise =  new Promise(function(res, rej) {\n        resolve = res;\n        reject  = rej;\n    });\n    return {\n        promise : promise,\n        resolve : resolve,\n        reject  : reject\n    };\n}\nfunction getQueryParams(queryString){\n\n    let search = queryString || location.href.split(\"?\")[1] || location.search.substring(1);\n    try{\n        return JSON.parse('{\"' + search.replace(/&/g, '\",\"').replace(/=/g,'\":\"') + '\"}', (key, value) => { return key === \"\" ? value : decodeURIComponent(value); });\n    } catch (err){\n        return {};\n    }\n}\nfunction noop(){}\n\n\n\nmodule.exports = {\n    findKey         : findKey,\n    trim            : trim,\n    getByPath       : getByPath,\n    setByPath       : setByPath,\n    camelize        : camelize,\n    decamelize      : decamelize,\n    uuid            : uuid,\n    extend          : extend,\n    deepExtend      : deepExtend,\n    deepCompare     : deepCompare,\n    isMobile        : mobilecheck(),\n    isController    : controllerCheck(),\n    mode            : modeCheck(),\n    docRef          : docRef,\n    broadcast       : broadcast,\n    on              : on,\n    off             : off,\n    defer           : defer,\n    noop            : noop,\n    getQueryParams  : getQueryParams\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils/helpers.js","module.exports = {\n    \"READY\"         : \"taco-ready\",\n    \"GO\"            : \"taco-go\",\n    \"NEXT\"          : \"taco-next\",\n    \"PREV\"          : \"taco-previous\",\n    \"ADD\"           : \"taco-addtemplate\",\n    \"UPDATE\"        : \"taco-update\",\n    \"PAGES\"         : \"taco-pages\",\n    \"USER_UPDATE\"   : \"taco-user-update\",\n    \"QUERY_PARAMS\"  : \"taco-query-params\",\n    \"OUTGOING_EVENT\": \"taco-event-sent\",\n    \"VFF_EVENT\"     : \"taco-event-received\",\n    \"ACK\"           : \"taco-ack\",\n    \"TRACK_EVENT\"   : \"vff-track-event\",\n    \"RELOAD\"        : \"vff-reload\",\n    \"VF_DATA\"       : \"vff-vf-data\",\n    \"VF_SETUP\"      : \"vff-vf-setup\",\n\n\n    \"TOUCH\"         : \"taco-touch-element\",\n    \"MOUSE_MOVE\"    : \"taco-mouse-move\",\n    \"BUBBLE_UP\"     : \"taco-bubble-up\",\n\n    \"PAGES_UPDATE\"  : \"vff-pages-update\"\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/events.js","import {ADD, PAGES_UPDATE} from \"../utils/events\";\nimport {docRef, broadcast, on, defer} from '../utils/helpers.js';\nimport {send} from '../utils/messenger';\nimport {REGISTER_TEMPLATE} from '../utils/docRefs';\nimport VffTemplate from './vffTemplate';\n\nclass VffData {\n    constructor(){\n        this._templates = {};\n        this._pages = [];\n        this._pagesDefer = defer();\n    }\n\n    updateCB(){\n        if(this._updateCB) {\n            this._updateCB();\n        } else if(window.angular){\n            let $body = window.angular.element(document.body);\n            let $injector = $body.injector();\n            if($injector){\n                $injector.get('$rootScope').$apply();\n            }\n        }\n    }\n\n    onUpdate(cb){\n        this._updateCB = cb;\n    }\n\n    registerTemplate(name, data, element){\n        if(arguments.length < 2){\n            throw new Error('Missing Arguments, please refer to: ' + docRef(REGISTER_TEMPLATE));\n        }\n\n        data = data || {};\n        name = name.toLowerCase();\n\n        if(this._templates[name]){\n            this._templates[name]._update(data);\n        } else {\n            this._templates[name] = new VffTemplate(name, data, element);\n        }\n\n        send(ADD,{\n            channel : name,\n            options : this._templates[name]._options,\n            data    : data\n        });\n\n        return this._templates[name];\n    }\n\n    getTemplate(name){\n        return this._templates[name.toLowerCase()];\n    }\n    getTemplates(){\n        return Object.values(this._templates);\n    }\n\n    show(template){\n        this.getTemplate(template).show();\n    }\n    hide(template){\n        this.getTemplate(template).hide();\n    }\n    toggle(template){\n        this.getTemplate(template).toggle();\n    }\n    clear(){\n        this._templates = {};\n    }\n    addPages(pages){\n        if(pages && pages.length){\n            while (this._pages.length) { this._pages.pop(); }\n            this._pages = this._pages.concat(pages);\n            this._pagesDefer.resolve(pages);\n            broadcast(PAGES_UPDATE, this._pages);\n            this.updateCB();\n        }\n    }\n    getPages(){\n        return this._pagesDefer.promise;\n    }\n    onPages(cb){\n        if(this._pages.length){\n            cb(this._pages);\n        }\n        on(PAGES_UPDATE, (event) => {\n            cb(event.detail);\n        });\n    }\n    addQueryParams(params){\n        this._queryParams = params;\n        this.updateCB();\n    }\n    getQueryParams(){\n        return this._queryParams;\n    }\n}\n\n\nexport let vffData = new VffData();\n\n\n// WEBPACK FOOTER //\n// ./src/core/vffData.js","import {uuid} from './helpers';\nlet window = window || global.window;\nconst REQUEST_TIMEOUT = 20000;\n\nfunction sendMessage(type, payload){\n    var message = {\n        type : type,\n        payload: payload,\n    };\n    postMessage(message);\n}\n\nfunction request(type, payload, cb){\n    var rid = uuid();\n    payload._rid = rid;\n    var message = {\n        type    : type,\n        payload : payload\n    };\n    var timeout;\n    var handler = function(message){\n        message = JSON.parse(message.data);\n        if(message.payload && message.payload._rid === rid){\n            removeHandler();\n            cb(message);\n        }\n    };\n    var removeHandler = function(){\n        clearTimeout(timeout);\n        window.removeEventListener('message', handler, false);\n    };\n\n    window.addEventListener('message', handler, false);\n    timeout = setTimeout(function(){\n        //Request Timeout\n        removeHandler();\n    }, REQUEST_TIMEOUT);\n\n    postMessage(message);\n}\n\n\nfunction postMessage(message){\n    let w = (window || global.window);\n    if(w && w.parent){\n        w.parent.postMessage(JSON.stringify(message), '*');\n    }\n}\n\nmodule.exports = {\n    send : sendMessage,\n    request : request\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils/messenger.js","import {deepExtend} from '../../utils/helpers';\n\nexport default class UIElement{\n    constructor(data, defaults) {\n        defaults = defaults || {};\n        Object.assign(this, defaults);\n        deepExtend(this, data);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/ui/uiElement.js","const Interval = require('./interval-worker');\n\nexport default class BasicClock extends HTMLElement {\n    constructor() {\n        super();\n\n        let self = this;\n        this._time = this.init();\n        this.running = false;\n        this._visibility = true;\n        this.interval = new Interval(function(interval){\n            self.onInterval(interval);\n            self._update();\n        });\n    }\n\n    connectedCallback() {\n        this.style.display = 'block';\n        this.innerHTML = this._time;\n        if(this.autorun){this.start();}\n        this._update();\n    }\n\n    _update(){\n        this.innerHTML = this.format(this._time);\n    }\n    start(){\n        this.interval.start();\n    }\n    stop(){\n        this.interval.stop();\n    }\n    set(time){\n        this._time = time;\n    }\n    get(){\n        return this._time;\n    }\n    format(){\n        return this._time;\n    }\n    init(){\n        return 0;\n    }\n    onInterval(i){\n        this._time += i;\n    }\n    get autorun(){\n        return this.getAttribute(\"autorun\") === 'true' || this.getAttribute(\"autorun\") === '';\n    }\n\n    get run(){\n        return this.running;\n    }\n    set run(value){\n        this.running = value;\n        this.running? this.start() : this.stop();\n        this.dispatchEvent(new Event(value? \"start\" : \"stop\"));\n    }\n    get show(){\n        return this._visibility;\n    }\n    set show(value){\n        this._visibility = value;\n        this.style.display = value? 'block' : 'none';\n    }\n\n    expose(){\n        return {\n            visibility : 'show',\n            run : 'run'\n        };\n    }\n    options(){\n        return {\n            updateOn : 'control'\n        };\n    }\n\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/clocks/basic-clock.js","module.exports = {\n    \"EXPOSE_DELIMITER\"  : \" \",\n    UI                  : {\n        MULTISELECT     : 'multiselect',\n        DROPDOWN        : 'dropdown',\n        RADIO           : 'radio',\n        RANGE           : 'range'\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/core/consts.js","import {createXPathFromElement, lookupElementByXPath} from '../utils/xpath';\n\n\nconst events = [\n    '__mouseup__',\n    '__mousedown__',\n    '__mousemove__',\n    '__mouseover__',\n    '__mouseout__',\n    '__mouseenter__',\n    '__mouseleave__',\n    '__click__',\n    '__dblclick__',\n    '__touchstart__',\n    '__touchend__',\n    '__touchmove__',\n    '__drag__',\n    '__dragstart__',\n    '__dragend__',\n    '__dragover__',\n    '__dragenter__',\n    '__dragleave__',\n    '__dragexit__',\n    '__drop__',\n    '__wheel__'\n];\n\nfunction touchesToJson(touches){\n    if(!touches) return touches;\n    let touchArray = [];\n\n    for (let i = 0; i < touches.length; i++) {\n        let touch = touches[i];\n        let touchData = {\n            clientX : touch.clientX,\n            clientY : touch.clientY,\n            pageX   : touch.pageX,\n            pageY   : touch.pageY\n        };\n        touchArray.push(touchData);\n    }\n    return touchArray;\n}\n\nfunction sync(e){\n    if(e.ctrlKey && e.metaKey && e.altKey && e.shiftKey) return;\n    if(window.webrtc) {\n        let msg = {};\n        msg[\"__\" + e.type + \"__\"] = {\n            pageX: e.pageX,\n            pageY: e.pageY,\n            clientX: e.clientX,\n            clientY: e.clientY,\n            deltaX : e.deltaX,\n            deltaY : e.deltaY,\n            deltaZ : e.deltaZ,\n            deltaMode : e.deltaMode,\n            target: createXPathFromElement(e.target),\n            touches: touchesToJson(e.touches),\n            targetTouches: touchesToJson(e.targetTouches),\n            changedTouches: touchesToJson(e.changedTouches)\n        };\n\n        window.webrtc.send(msg);\n    }\n}\n\nfunction bindSyncEvents(element){\n    events.forEach((event) => {\n        event = event.replace(/__/g, '');\n        element.addEventListener(event, sync, true);\n    });\n}\n\nfunction dispatchEvent(event, data){\n    let target;\n    if(['__click__'].indexOf(event) > -1){\n        target = document.elementFromPoint(data.pageX, data.pageY);\n    } else {\n        target = lookupElementByXPath(data.target);\n    }\n    data.bubbles = true;\n    data.cancelable = true;\n    data.ctrlKey = data.metaKey = data.altKey = data.shiftKey = true; //Distinct the event to avoid looping\n    data.view = window;\n    // data.detail = {\"test\" : true};\n\n    if(target){\n        if(['__touchstart__', '__touchend__', '__touchmove__'].indexOf(event) > -1){\n            target.dispatchEvent(new TouchEvent(event.slice(2, -2), handleTouchEvent(data,target)));\n        } else if(event === '__wheel__'){\n            target.dispatchEvent(new WheelEvent(event.slice(2, -2), data));\n        } else {\n            target.dispatchEvent(new MouseEvent(event.slice(2, -2), data));\n        }\n    } else {\n        window.console.log('cannot find target:', data.target);\n    }\n}\n\nfunction handleTouchEvent(data,target){\n    data.changedTouches = createTouchArray(data.changedTouches,target);\n    data.targetTouches = createTouchArray(data.targetTouches,target);\n    data.touches = createTouchArray(data.touches,target);\n    return data;\n}\n\nfunction createTouchArray(touches,target){\n    return touches.map(function(touch){\n        touch.identifier = Date.now();\n        touch.target = target;\n        return new Touch(touch);\n    });\n}\n\nfunction isInteractionEvent(event){\n    return events.indexOf(event) > -1;\n}\n\nwindow.addEventListener('load', () => {\n    bindSyncEvents(window);\n});\n\n\nmodule.exports = {\n    \"sync\" : sync,\n    \"events\" : events,\n    \"bindSyncEvents\" : bindSyncEvents,\n    \"isInteractionEvent\" : isInteractionEvent,\n    \"dispatchEvent\" : dispatchEvent\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/interactionEvents.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 8\n// module chunks = 0","import {setByPath, defer} from '../../utils/helpers.js';\nimport {vffData} from '../vffData.js';\nimport {EXPOSE_DELIMITER} from '../consts';\nimport {VFF_EVENT} from '../../utils/events';\nimport {isInteractionEvent, dispatchEvent} from '../interactionEvents';\n\nfunction update(data){\n    \n    let promises = [];\n    for(let templateName in data){\n        let template = vffData.getTemplate(templateName);\n        if(template){\n            let deferred = defer();\n            template._runMiddleware(data[templateName]).then((result) => {\n                vffData.registerTemplate(templateName, result);\n                for(let key in result){\n                    updateDom(template, key, result[key], result.__timecode__);\n                }\n                vffData.updateCB();\n                deferred.resolve();\n            });\n            promises.push(deferred.promise);\n        }\n    }\n\n    document.dispatchEvent(new CustomEvent(VFF_EVENT, { detail: data }));\n    return Promise.all(promises);\n}\n\nfunction updateInteraction(data){\n    for(let event in data){\n        if(isInteractionEvent(event)){\n            dispatchEvent(event, data[event]);\n        }\n    }\n}\n\nfunction updateDom(template, control, value, timecode){\n    let dom = template.$element(control.split(EXPOSE_DELIMITER)[0]);\n    if(dom){\n        if(timecode !== undefined){\n            setByPath(dom, \"__timecode__\", timecode);\n        }\n        setByPath(dom, control.split(EXPOSE_DELIMITER)[1], value);\n    }\n}\n\nmodule.exports = {\n    update : update,\n    updateInteraction : updateInteraction\n};\n\n\n/** to update angular *****\n\n    let $body = angular.element(document.body);\n    let $rootScope =  $body.injector().get('$rootScope');\n    $rootScope.$apply();\n\n ************************/\n\n\n// WEBPACK FOOTER //\n// ./src/core/handlers/updateHandler.js","import {send, request} from './utils/messenger.js';\nimport {setup} from './core/vffSetup';\nimport {READY} from './utils/events.js';\nimport {vffData} from './core/vffData.js';\nimport {start as startListener} from './utils/listener';\nimport {init as initVffDom} from './core/initDOM';\nimport vffElement from './core/vffElement';\nimport './core/defaultExpose';\nimport \"./components/components.js\";\nimport {isMobile, isController, mode, extend, defer, uuid} from './utils/helpers';\nimport * as eventsApi from './core/api/events';\nimport * as playerApi from './core/api/player';\nimport * as visibilityApi from './core/api/visibility';\nimport * as httpApi from './core/api/http';\nimport {bindSyncEvents} from './core/interactionEvents';\n\nstartListener();\ninitVffDom();\n\nwindow.addEventListener('load', () => {\n    send(READY);\n});\n\n\nlet vff = (selector) => {\n    return new vffElement(selector);\n};\n\nvff.addTemplate         = (name, data, options) => {return vffData.registerTemplate(name, data, options);};\nvff.registerTemplate    = (name, data, options) => {return vffData.registerTemplate(name, data, options);};\nvff.getTemplate         = (name) => {return vffData.getTemplate(name);};\nvff.getTemplates        = () => {return vffData.getTemplates();};\nvff.onUpdate            = (cb) => {return vffData.onUpdate(cb);};\nvff.getPages            = () => {return vffData.getPages();};\nvff.onPages             = (cb) => {return vffData.onPages(cb);};\nvff.getQueryParams      = () => {return vffData.getQueryParams();};\nvff.send                = (type, payload) => { send(type, payload); };\nvff.request             = (type, payload, cb) => { request(type, payload, cb); };\nvff.setup               = (options) => {return setup(options);};\nvff.isMobile            = isMobile;\nvff.isController        = isController;\nvff.mode                = mode;\nvff.defer               = defer;\nvff.extend              = (name, extension) => { vff[name] = extension; };\nvff.define              = (name, element) => { customElements.define(name, element); };\nvff.uuid                = uuid();\nvff.sync                = (element) => { bindSyncEvents(element); };\n\nextend(vff, playerApi);\nextend(vff, visibilityApi);\nextend(vff, eventsApi);\n\n\n\n\nvff.extend('http', httpApi);\n\n\nmodule.exports = vff;\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import {send} from \"../utils/messenger\";\nimport {VF_SETUP} from \"../utils/events\";\n\nfunction setup(options){\n    if(options){\n        send(VF_SETUP, options);\n    }\n}\n\nmodule.exports = {\n    setup          : setup\n};\n\n\n// WEBPACK FOOTER //\n// ./src/core/vffSetup.js","module.exports = {\n    \"REGISTER_TEMPLATE\" : 'register-template'\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/docRefs.js","import {USER_UPDATE, VFF_EVENT, OUTGOING_EVENT} from \"../utils/events\";\nimport {EXPOSE_DELIMITER, UI} from './consts';\nimport {findKey, getByPath, defer} from '../utils/helpers.js';\nimport {send} from '../utils/messenger';\nimport {vffData} from './vffData';\nimport SuperProxy from \"../utils/super-proxy\";\nimport UIMultiselect from './ui/uiMultiselect';\nimport UIDropdown from './ui/uiDropdown';\nimport UIRadio from './ui/uiRadio';\nimport UIRange from './ui/uiRange';\n\nconst defaultListenerOptions = {\n    changeOnly  : true,\n    throttle    : true\n};\nconst defaultTemplateOptions = {\n    updateOn : 'all', // all, template, control\n    global   : false\n};\n//getElement, update, show, hide, toggle, onData, emit\nclass Template{\n    constructor(name, data, options) {\n        this._name = name;\n        this._options = Object.assign({}, defaultTemplateOptions, options);\n        this._middleware = [];\n        this._createUIElements(data);\n        this._proxy = new SuperProxy(data, this._traps(name));\n        this._element = this._options.element;\n        this._proxies = {};\n        this._timeouts = {};\n    }\n    $element(control){\n        if(this._element && control){\n            return this._element.getAttribute('vff-name') === control?\n                this._element : this._element.querySelector('[vff-name=' + control +']');\n        }\n        return this._element;\n    }\n    $show(){\n        this._setValue(\"visibility\", true);\n    }\n    $hide(){\n        this._setValue(\"visibility\", false);\n    }\n    $toggle(){\n        let visibility = this._getValue('visibility');\n        if(visibility !== undefined){\n            this._setValue('visibility', !visibility);\n        }\n    }\n    $emit(data){\n        let payload = {};\n        payload.data = data;\n        payload.query = vffData.getQueryParams();\n        payload.channel = this._name;\n        send(OUTGOING_EVENT, payload);\n    }\n    $before(...args){\n        args = this._arguments(...args);\n        args.options = Object.assign({}, defaultListenerOptions, args.options);\n        this._middleware.push(args);\n    }\n    $on(...args){\n        args = this._arguments(...args);\n        let path = args.path, callback = args.callback, options = args.options;\n\n        options = Object.assign({}, defaultListenerOptions, options);\n\n        let self = this;\n\n        function runCB(data){\n            self._runCallback(callback, path, options, data);\n        }\n\n        function listener(event){\n            let key = findKey(event.detail, self._name);\n            if(key) {\n\n                if(path && options.changeOnly && (getByPath(event.detail[key], path) === getByPath(self._proxy, path) || getByPath(event.detail[key], path) === undefined )){\n                    return;\n                } else if (!path && options.changeOnly && self._proxy.equals(event.detail[key])){\n                    return;\n                }\n\n                if(path && getByPath(event.detail[key], path) !== undefined){\n                    runCB(getByPath(event.detail[key], path));\n                } else if(!path){\n                    runCB(event.detail[key]);\n                }\n            }\n        }\n        document.addEventListener(VFF_EVENT, listener);\n    }\n\n\n    getElement(){ return this.$element(); }\n    show(){ return this.$show(); }\n    hide(){ return this.$hide(); }\n    toggle(){ return this.$toggle(); }\n    onData(...args){ return this.$on(...args); }\n    emit(data){ return this.$emit(data); }\n\n    _update(data){\n        this._proxy.update(data);\n    }\n\n    _sendUserUpdateEvent(name, target, path, value){\n        let payload = {};\n        payload[name] = {};\n        if(path.length === 1){\n            payload[name][path[0]] = value;\n        } else {\n            let tmp = payload[name];\n            for (let i = 0; i < path.length -1; i++) {\n                const key = path[i];\n\n                if(i === path.length - 2){\n                    tmp[key] = target;\n                } else {\n                    tmp[key] = {};\n                    tmp = tmp[key];\n                }\n\n            }\n        }\n        send(USER_UPDATE, payload);\n    }\n\n    _traps(name) {\n        let self = this;\n        let traps = {\n            set: (target, key, value) => {\n                self._sendUserUpdateEvent(name, target, key, value);\n            }\n        };\n        return traps;\n    }\n    _setValue(key, value){\n        key = this._proxy.findKey(key);\n        if(key){\n            this._proxy[key] = value;\n        }\n    }\n    _getValue(key){\n        return this._proxy[key];\n    }\n    _runMiddleware(data){\n        let self = this;\n        return this._middleware.reduce((prev, curr) => {\n            return prev.then((data) => {\n                let d = defer();\n\n                if(!curr.path || (curr.path && getByPath(data, curr.path) !== undefined)){\n                    self._runCallback(curr.callback, curr.path, curr.options || {}, data, d.resolve);\n                } else {\n                    d.resolve(data);\n                }\n\n                return d.promise;\n            });\n        }, Promise.resolve(data));\n    }\n\n    _arguments(arg1, arg2, arg3){\n        let path, callback, options;\n        switch (arguments.length){\n            case 0:\n                throw new Error(\"No arguments error\");\n            case 1:\n                callback = arg1;\n                break;\n            default:\n                if(typeof arg1 === 'string'){\n                    path = arg1;\n                    callback = arg2;\n                    options = arg3 || {};\n                } else if(typeof arg1 === 'function'){\n                    callback = arg1;\n                    options = arg2 || {};\n                }\n                break;\n        }\n        return {\n            path : path,\n            callback : callback,\n            options : options\n        };\n    }\n\n    _runCallback(callback, path, options, ...data){\n        if(options.consolidate || options.throttle){\n\n            let callbacks = this._timeouts[path || '__global_event__'];\n            if(!callbacks){\n                this._timeouts[path || '__global_event__'] = new WeakMap();\n            }\n\n            clearTimeout(this._timeouts[path || '__global_event__'].get(callback));\n            this._timeouts[path || '__global_event__'].set(callback, setTimeout(function(){\n                callback(...data);\n            }, (typeof options.throttle === 'number')? options.throttle : 50));\n        } else {\n            callback(...data);\n        }\n    }\n\n    _createUIElements(data){\n        Object.keys(data).forEach(function(key){\n            if(data[key] && data[key].constructor && data[key].constructor === Object){\n                switch(data[key].ui){\n                    case UI.MULTISELECT : data[key] = new UIMultiselect(data[key]); break;\n                    case UI.DROPDOWN    : data[key] = new UIDropdown(data[key]); break;\n                    case UI.RADIO       : data[key] = new UIRadio(data[key]); break;\n                    case UI.RANGE       : data[key] = new UIRange(data[key]); break;\n                }\n            }\n        });\n    }\n}\n\nexport default class VffTemplate extends Template {\n    constructor(name, data, element){\n        super(name, data, element);\n\n        let self = this;\n        return new Proxy(this, {\n            get : function(target, prop){\n                if(prop in target){\n                    return target[prop];\n                } else if(target._element && target._element.expose && findExposed(prop, target._proxy)){\n                    return target._proxy[findExposed(prop, target._proxy)];\n                }\n                return self._proxy[prop];\n            },\n            set : function(target, prop, value){\n                if(prop in target){\n                    throw  new Error(\"Override Error: \" + prop + \" is an internal vff property and can't be overridden\");\n                    // return target[prop] = value;\n                }\n                else if(target._element && target._element.expose && findExposed(prop, target._proxy)){\n                    target._proxy[findExposed(prop, target._proxy)] = value;\n                }\n                else {\n                    target._proxy[prop] = value;\n                }\n                return true;\n            }\n        });\n    }\n}\n\n\nfunction findExposed(key, values){\n    values = Object.keys(values);\n    for (let i = 0; i < values.length; i++) {\n        const prop = values[i].split(EXPOSE_DELIMITER)[1];\n        if(prop && prop.toLowerCase() === key.toLowerCase()){\n            return values[i];\n        }\n\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/vffTemplate.js","import {uuid, findKey, deepExtend, deepCompare} from '../utils/helpers.js';\n\nconst\n    BYPASS_PREFIX   = '__bypass__',\n    PARENT_ID       = '__parent_id__',\n    PARENT_KEY      = '__parent_key__',\n    PROXY_ID        = '__proxy__',\n    IS_PROXY        = '__isProxy__',\n    SELF            = '__self__';\n\n\nconst isInternalName = function(name){\n    return name.startsWith('__') && name.endsWith('__');\n};\nconst isInternalProperty = function(prop){\n    return isInternalName(prop) && prop !== '__proxy__';\n};\nconst cleanInternal = function(object){\n    Object.keys(object).forEach((key) => {\n        if(isInternalProperty(key)){\n            delete object[key];\n        } if(typeof object[key] === 'object'){\n            cleanInternal(object[key]);\n        }\n    });\n};\nconst noBypass = (key) => {\n    return typeof key === 'string'? key.replace(BYPASS_PREFIX ,'') : '';\n};\n\nexport default class SuperProxy {\n    constructor(data, traps) {\n        this._proxies = {};\n\n        this._parents = new WeakMap();\n        this._parentIDs = {};\n\n        traps = traps || {};\n        this._proxy = new Proxy(this._copy(data), this._traps(traps));\n\n        let self = this;\n\n        return new Proxy(this, {\n            get : function(target, prop){\n\n                if(prop in target){\n                    return target[prop];\n                }\n                let key = findKey(self._proxy, noBypass(prop));\n                prop = key || prop;\n                return self._proxy[prop];\n            },\n            set : function(target, prop, value){\n                if(prop in target){\n                    throw  new Error(\"Override Error: \" + prop + \" is an internal vff property and can't be overridden\");\n                    // return target[prop] = value;\n                } else {\n                    target._proxy[prop] = value;\n                }\n                return true;\n            }\n        });\n\n    }\n/************************* PUBLIC *****************************/\n    findKey(key){\n        return findKey(this._proxy, key);\n    }\n    update(data){\n        let toUpdate = this._copy(data, BYPASS_PREFIX);\n        deepExtend(this._proxy, toUpdate);\n    }\n    equals(data){\n        return deepCompare(this._proxy, data);\n    }\n\n/************************* PRIVATE *****************************/\n\n    _copy(o, prefix) {\n        prefix = prefix || '';\n        let output, v, key;\n        output = Array.isArray(o) ? [] : {};\n        for (key in o) {\n            v = o[key];\n            if (Array.isArray(output)) {\n                output[key] = (typeof v === \"object\") ? this._copy(v, prefix) : v;\n            } else if(!isInternalName(key)){\n                output[prefix + key] = (typeof v === \"object\") ? this._copy(v, prefix) : v;\n            }\n        }\n        return output;\n    }\n\n    _set(target, key, value){\n        target[BYPASS_PREFIX + key] = value;\n    }\n\n    _getPath(obj, key){\n        let path = key? [key] : [];\n        let tmp = obj;\n        while(tmp[PARENT_ID]){\n            path.unshift(tmp[PARENT_KEY]);\n            tmp = this._parentIDs[tmp[PARENT_ID]];\n        }\n        return path;\n    }\n\n    _traps(trapFuncs) {\n        let self = this;\n\n        let traps = {\n            set: (target, key, value) => {\n                let bypass = key.startsWith(BYPASS_PREFIX);\n                // if (bypass && !target[IS_PROXY]) {\n                if (bypass) {\n                    key = key.substr(BYPASS_PREFIX.length);\n                }\n                target[key] = value;\n                // if (!bypass && !target[IS_PROXY] && typeof value !== 'object') {\n                if (!bypass) {\n                    if (trapFuncs.set) {\n                        //set with parent object, path array, value\n                        let path = self._getPath(target, key);\n                        // cleanInternal(target);\n                        trapFuncs.set(target, path, value);\n                    }\n                }\n                return true;\n            },\n            get: (target, key) => {\n                if (key === IS_PROXY) {\n                    return true;\n                }\n                if (key === SELF) {\n                    cleanInternal(target);\n                    return target;\n                }\n                if (key.startsWith && key.startsWith(BYPASS_PREFIX)) {\n                    key = key.substr(BYPASS_PREFIX.length);\n                }\n\n                // if (typeof target[key] === 'object' && target[key] !== null && !target[key][IS_PROXY] && !isInternalProperty(key)) {\n                if (typeof target[key] === 'object' && target[key] !== null && !isInternalProperty(key)) {\n                    if (target[key][PROXY_ID]) {\n                        return self._proxies[target[key][PROXY_ID]];\n                    } else {\n                        let proxy = new Proxy(target[key], traps);\n\n                        let parentID;\n                        if(!self._parents.has(target)){\n                            parentID = uuid();\n                            self._parents.set(target, parentID);\n                            self._parentIDs[parentID] = target;\n                        }\n                        parentID = parentID || self._parents.get(target);\n\n                        self._set(proxy, PARENT_KEY, key);\n                        self._set(proxy, PARENT_ID, parentID);\n                        let proxyID = uuid();\n                        self._proxies[proxyID] = proxy;\n                        target[key][PROXY_ID] = proxyID;\n                        return proxy;\n                    }\n                }\n                else {\n                    return target[key];\n                }\n            }\n        };\n        return traps;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/super-proxy.js","import UIElement from './uiElement';\n\nconst defaults = {\n    value : [],\n    options: [],\n    config : {\n        search : false,\n        clearOnChange : false,\n        itemsInView : 5\n    }\n};\n\nexport default class UIMultiselect extends UIElement{\n    constructor(data){\n        super(data, defaults);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/ui/uiMultiselect.js","import UIElement from './uiElement';\n\nconst defaults = {\n    value : '',\n    options: [],\n};\n\nexport default class UIDropdown extends UIElement{\n    constructor(data){\n        super(data, defaults);\n        if(!this.value && this.options.length) this.value = this.options[0];\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/ui/uiDropdown.js","import UIElement from './uiElement';\n\nconst defaults = {\n    value : '',\n    options: [],\n};\n\nexport default class UIRadio extends UIElement{\n    constructor(data){\n        super(data, defaults);\n        if(!this.value && this.options.length) this.value = this.options[0];\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/ui/uiRadio.js","import UIElement from './uiElement';\n\nconst defaults = {\n    value   : '0',\n    min     : 0,\n    max     : 0,\n    step    : 1\n};\n\nexport default class UIRange extends UIElement{\n    constructor(data){\n        super(data, defaults);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/ui/uiRange.js","import * as handlers from '../core/handlers';\nimport {ACK} from './events';\n\n\nfunction messageHandler(message){\n    try{\n        let messageData = JSON.parse(message.data);\n        let type = messageData.type;\n        let handler = handlers[type];\n        if(messageData.cid && message.source && message.source.postMessage){\n            var msg = {type : ACK, cid: messageData.cid};\n            message.source.postMessage(JSON.stringify(msg),'*');\n        }\n        if(handler){\n            handler(messageData.payload);\n        }\n    } catch(err){\n        //Malformed JSON\n    }\n\n}\n\nmodule.exports = {\n    start : () => {\n        if(window && window.addEventListener){\n            window.addEventListener('message', messageHandler, false);\n        }\n    }\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/listener.js","let events = require(\"../utils/events.js\");\nimport {update} from \"./handlers/updateHandler.js\";\nimport {pages} from \"./handlers/pagesHandler.js\";\nimport {queryParams} from \"./handlers/queryParamsHandler.js\";\nimport {reload} from \"./handlers/reloadHandler.js\";\nimport {handleVFData} from './handlers/vfDataHandler';\n\n\nlet handlers = {};\nhandlers[events.UPDATE] = update;\nhandlers[events.PAGES] = pages;\nhandlers[events.QUERY_PARAMS] = queryParams;\nhandlers[events.RELOAD] = reload;\nhandlers[events.VF_DATA] = handleVFData;\n\n\n\nmodule.exports = handlers;\n\n\n// WEBPACK FOOTER //\n// ./src/core/handlers.js","function isSVGChild(elm){\n    while (elm) {\n        if (elm.tagName === 'svg') return true;\n        elm = elm.parentNode;\n    }\n}\n\nmodule.exports = {\n\n    createXPathFromElement : (elm) => {\n        let allNodes = document.getElementsByTagName('*');\n        let segs, sib, i, svg;\n        for (segs = []; elm && elm.nodeType == 1; elm = elm.parentNode){\n            svg = isSVGChild(elm);\n            if (elm.hasAttribute('id') & !svg) {\n                let uniqueIdCount = 0;\n                for (let n=0;n < allNodes.length;n++) {\n                    if (allNodes[n].hasAttribute('id') && allNodes[n].id == elm.id) uniqueIdCount++;\n                    if (uniqueIdCount > 1) break;\n                }\n                if ( uniqueIdCount == 1) {\n                    segs.unshift('id(\"' + elm.getAttribute('id') + '\")');\n                    return segs.join('/');\n                } else {\n                    segs.unshift(elm.localName.toLowerCase() + '[@id=\"' + elm.getAttribute('id') + '\"]');\n                }\n            } else if (elm.hasAttribute('class') && !svg) {\n                segs.unshift(elm.localName.toLowerCase() + '[@class=\"' + elm.getAttribute('class') + '\"]');\n            } else {\n                for (i = 1, sib = elm.previousSibling; sib; sib = sib.previousSibling) {\n                    if (sib.localName == elm.localName)  i++;\n                }\n                if(svg){\n                    segs.unshift(\"*[name()='\" + elm.localName.toLowerCase() + \"'][\" + i + ']');\n                } else {\n                    segs.unshift(elm.localName.toLowerCase() + '[' + i + ']');\n                }\n\n            }\n        }\n        return segs.length ? '/' + segs.join('/') : null;\n    },\n\n    lookupElementByXPath : (path) => {\n        let evaluator = new XPathEvaluator();\n        let result = evaluator.evaluate(path, document.documentElement, null,XPathResult.FIRST_ORDERED_NODE_TYPE, null);\n        return  result.singleNodeValue;\n    },\n    getElementByXpath : (path) => {\n        return document.evaluate(path, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n    }\n\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils/xpath.js","import {vffData} from '../vffData.js';\n\nfunction pages(data) {\n    vffData.addPages(data);\n}\n\nmodule.exports = {\n    pages : pages\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/handlers/pagesHandler.js","import {vffData} from '../vffData.js';\n\nfunction queryParams(data) {\n    vffData.addQueryParams(data);\n}\n\nmodule.exports = {\n    queryParams : queryParams\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/handlers/queryParamsHandler.js","\n\nfunction reload() {\n    window.location.reload();\n}\n\nmodule.exports = {\n    reload : reload\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/handlers/reloadHandler.js","import {updateInteraction} from './updateHandler';\nimport WebRTC from '../webrtc/webrtc';\n\nfunction handleVFData(data) {\n    if(data.settings.sync && !window.webrtc) {\n        // window.webrtc.close();\n        window.webrtc = new WebRTC(data.token, 'sync', {\n            onMessage: function (message) {\n                updateInteraction(message);\n            }\n        });\n    }\n\n}\n\nmodule.exports = {\n    handleVFData : handleVFData\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/handlers/vfDataHandler.js","const SimpleWebRTC = require('./simplewebrtc.bundle');\nconst noop = () => {};\nconst defaults = {\n    signalingServer : \"https://rtc.videoflow.io\",\n    maxParticipants : 5,\n    onVideoAdded    : noop,\n    onVideoRemoved  : noop,\n    onMessage       : noop,\n    onCreatedPeer   : noop\n};\n\n\nexport default class WebRTC{\n    constructor(room, target, options){\n        this.options        = Object.assign({}, defaults, options || {});\n        this.connected      = false;\n        this.room           = room;\n        this.target         = target;\n        this.init();\n    }\n\n    init(){\n        let self = this;\n\n        self.webrtc = new SimpleWebRTC({\n            // target: this.target,\n            url: this.options.signalingServer,\n            stunServer: [{urls: 'stun:stun.l.google.com:19302'}, {\n                username: 'user',\n                credential: 'pass',\n                urls: 'turn:54.198.120.75:3478'\n            }],\n            localVideoEl: '',\n            remoteVideosEl: '',\n            autoRequestMedia: false,\n            debug: false,\n            detectSpeakingEvents: true,\n            autoAdjustMic: false\n        });\n\n        self.webrtc.on('readyToCall', function () {\n            // console.log('Client StrongID', self.webrtc.connection.connection.id);\n            self.webrtc.setInfo('vf'+ Math.random().toString().substr(2), self.webrtc.connection.connection.id, ''); // Store strongId\n\n            if (self.room) {\n                self.webrtc.joinRoom(self.room, function(err, room){\n                    let participants = Object.keys(room.clients);\n                    if(participants.length + 1 > self.options.maxParticipants){\n                        self.close();\n                    }\n                });\n                // self.webrtc.createRoom(self.room, function(){\n                //     self.webrtc.joinRoom(self.room);\n                // });\n            }\n        });\n\n        self.webrtc.on('joinedRoom', function (/*room*/) {\n            // console.log('WebRTC - Joined Room: ' + room);\n        });\n\n        //Handle incoming video from target peer\n        self.webrtc.on('videoAdded', function (video, peer) {\n            // console.log('WebRTC - Video added');\n            self.options.onVideoAdded(video, peer);\n        });\n\n        //Handle removing video by target peer\n        self.webrtc.on('videoRemoved', function (video, peer) {\n            // console.log('WebRTC - Video removed');\n            if (peer.id === self.target || peer.strongId === self.target || peer.nickName === self.target) {\n                self.options.onVideoRemoved(video, peer);\n            }\n        });\n\n        self.webrtc.on('createdPeer', function (peer) {\n            // window.console.log('WebRTC - Peer Created');\n            self.options.onCreatedPeer(peer);\n        });\n\n        self.webrtc.on('channelMessage', function (peer, label, data) {\n            // console.log('WebRTC - Channel message');\n            if (data.type === 'custommessage') {\n                var msg = JSON.parse(data.payload);\n                self.options.onMessage(msg);\n            }\n        });\n    }\n\n    close(){\n        try{\n            if(this.webrtc.connection){\n                this.webrtc.leaveRoom();\n                this.webrtc.disconnect();\n            }\n        } catch(err){/**/}\n    }\n\n    send(data){\n        this.webrtc.sendDirectlyToAll(this.target, 'custommessage', JSON.stringify(data));\n    }\n}\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/webrtc/webrtc.js","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.adapter = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n        /* eslint-env node */\n        'use strict';\n\n// SDP helpers.\n        var SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\n        SDPUtils.generateIdentifier = function() {\n            return Math.random().toString(36).substr(2, 10);\n        };\n\n// The RTCP CNAME used by all peerconnections from the same JS.\n        SDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\n        SDPUtils.splitLines = function(blob) {\n            return blob.trim().split('\\n').map(function(line) {\n                return line.trim();\n            });\n        };\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\n        SDPUtils.splitSections = function(blob) {\n            var parts = blob.split('\\nm=');\n            return parts.map(function(part, index) {\n                return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n            });\n        };\n\n// Returns lines that start with a certain prefix.\n        SDPUtils.matchPrefix = function(blob, prefix) {\n            return SDPUtils.splitLines(blob).filter(function(line) {\n                return line.indexOf(prefix) === 0;\n            });\n        };\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\n        SDPUtils.parseCandidate = function(line) {\n            var parts;\n            // Parse both variants.\n            if (line.indexOf('a=candidate:') === 0) {\n                parts = line.substring(12).split(' ');\n            } else {\n                parts = line.substring(10).split(' ');\n            }\n\n            var candidate = {\n                foundation: parts[0],\n                component: parseInt(parts[1], 10),\n                protocol: parts[2].toLowerCase(),\n                priority: parseInt(parts[3], 10),\n                ip: parts[4],\n                port: parseInt(parts[5], 10),\n                // skip parts[6] == 'typ'\n                type: parts[7]\n            };\n\n            for (var i = 8; i < parts.length; i += 2) {\n                switch (parts[i]) {\n                    case 'raddr':\n                        candidate.relatedAddress = parts[i + 1];\n                        break;\n                    case 'rport':\n                        candidate.relatedPort = parseInt(parts[i + 1], 10);\n                        break;\n                    case 'tcptype':\n                        candidate.tcpType = parts[i + 1];\n                        break;\n                    default: // extension handling, in particular ufrag\n                        candidate[parts[i]] = parts[i + 1];\n                        break;\n                }\n            }\n            return candidate;\n        };\n\n// Translates a candidate object into SDP candidate attribute.\n        SDPUtils.writeCandidate = function(candidate) {\n            var sdp = [];\n            sdp.push(candidate.foundation);\n            sdp.push(candidate.component);\n            sdp.push(candidate.protocol.toUpperCase());\n            sdp.push(candidate.priority);\n            sdp.push(candidate.ip);\n            sdp.push(candidate.port);\n\n            var type = candidate.type;\n            sdp.push('typ');\n            sdp.push(type);\n            if (type !== 'host' && candidate.relatedAddress &&\n                candidate.relatedPort) {\n                sdp.push('raddr');\n                sdp.push(candidate.relatedAddress); // was: relAddr\n                sdp.push('rport');\n                sdp.push(candidate.relatedPort); // was: relPort\n            }\n            if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n                sdp.push('tcptype');\n                sdp.push(candidate.tcpType);\n            }\n            return 'candidate:' + sdp.join(' ');\n        };\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\n        SDPUtils.parseIceOptions = function(line) {\n            return line.substr(14).split(' ');\n        }\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\n        SDPUtils.parseRtpMap = function(line) {\n            var parts = line.substr(9).split(' ');\n            var parsed = {\n                payloadType: parseInt(parts.shift(), 10) // was: id\n            };\n\n            parts = parts[0].split('/');\n\n            parsed.name = parts[0];\n            parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n            // was: channels\n            parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n            return parsed;\n        };\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\n        SDPUtils.writeRtpMap = function(codec) {\n            var pt = codec.payloadType;\n            if (codec.preferredPayloadType !== undefined) {\n                pt = codec.preferredPayloadType;\n            }\n            return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n                (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\n        };\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\n        SDPUtils.parseExtmap = function(line) {\n            var parts = line.substr(9).split(' ');\n            return {\n                id: parseInt(parts[0], 10),\n                direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n                uri: parts[1]\n            };\n        };\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\n        SDPUtils.writeExtmap = function(headerExtension) {\n            return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n                (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n                    ? '/' + headerExtension.direction\n                    : '') +\n                ' ' + headerExtension.uri + '\\r\\n';\n        };\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\n        SDPUtils.parseFmtp = function(line) {\n            var parsed = {};\n            var kv;\n            var parts = line.substr(line.indexOf(' ') + 1).split(';');\n            for (var j = 0; j < parts.length; j++) {\n                kv = parts[j].trim().split('=');\n                parsed[kv[0].trim()] = kv[1];\n            }\n            return parsed;\n        };\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\n        SDPUtils.writeFmtp = function(codec) {\n            var line = '';\n            var pt = codec.payloadType;\n            if (codec.preferredPayloadType !== undefined) {\n                pt = codec.preferredPayloadType;\n            }\n            if (codec.parameters && Object.keys(codec.parameters).length) {\n                var params = [];\n                Object.keys(codec.parameters).forEach(function(param) {\n                    params.push(param + '=' + codec.parameters[param]);\n                });\n                line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n            }\n            return line;\n        };\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\n        SDPUtils.parseRtcpFb = function(line) {\n            var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n            return {\n                type: parts.shift(),\n                parameter: parts.join(' ')\n            };\n        };\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\n        SDPUtils.writeRtcpFb = function(codec) {\n            var lines = '';\n            var pt = codec.payloadType;\n            if (codec.preferredPayloadType !== undefined) {\n                pt = codec.preferredPayloadType;\n            }\n            if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n                // FIXME: special handling for trr-int?\n                codec.rtcpFeedback.forEach(function(fb) {\n                    lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n                        (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n                        '\\r\\n';\n                });\n            }\n            return lines;\n        };\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\n        SDPUtils.parseSsrcMedia = function(line) {\n            var sp = line.indexOf(' ');\n            var parts = {\n                ssrc: parseInt(line.substr(7, sp - 7), 10)\n            };\n            var colon = line.indexOf(':', sp);\n            if (colon > -1) {\n                parts.attribute = line.substr(sp + 1, colon - sp - 1);\n                parts.value = line.substr(colon + 1);\n            } else {\n                parts.attribute = line.substr(sp + 1);\n            }\n            return parts;\n        };\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\n        SDPUtils.getMid = function(mediaSection) {\n            var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n            if (mid) {\n                return mid.substr(6);\n            }\n        }\n\n        SDPUtils.parseFingerprint = function(line) {\n            var parts = line.substr(14).split(' ');\n            return {\n                algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n                value: parts[1]\n            };\n        };\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\n        SDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n            var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n                'a=fingerprint:');\n            // Note: a=setup line is ignored since we use the 'auto' role.\n            // Note2: 'algorithm' is not case sensitive except in Edge.\n            return {\n                role: 'auto',\n                fingerprints: lines.map(SDPUtils.parseFingerprint)\n            };\n        };\n\n// Serializes DTLS parameters to SDP.\n        SDPUtils.writeDtlsParameters = function(params, setupType) {\n            var sdp = 'a=setup:' + setupType + '\\r\\n';\n            params.fingerprints.forEach(function(fp) {\n                sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n            });\n            return sdp;\n        };\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\n        SDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n            var lines = SDPUtils.splitLines(mediaSection);\n            // Search in session part, too.\n            lines = lines.concat(SDPUtils.splitLines(sessionpart));\n            var iceParameters = {\n                usernameFragment: lines.filter(function(line) {\n                    return line.indexOf('a=ice-ufrag:') === 0;\n                })[0].substr(12),\n                password: lines.filter(function(line) {\n                    return line.indexOf('a=ice-pwd:') === 0;\n                })[0].substr(10)\n            };\n            return iceParameters;\n        };\n\n// Serializes ICE parameters to SDP.\n        SDPUtils.writeIceParameters = function(params) {\n            return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n                'a=ice-pwd:' + params.password + '\\r\\n';\n        };\n\n// Parses the SDP media section and returns RTCRtpParameters.\n        SDPUtils.parseRtpParameters = function(mediaSection) {\n            var description = {\n                codecs: [],\n                headerExtensions: [],\n                fecMechanisms: [],\n                rtcp: []\n            };\n            var lines = SDPUtils.splitLines(mediaSection);\n            var mline = lines[0].split(' ');\n            for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n                var pt = mline[i];\n                var rtpmapline = SDPUtils.matchPrefix(\n                    mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n                if (rtpmapline) {\n                    var codec = SDPUtils.parseRtpMap(rtpmapline);\n                    var fmtps = SDPUtils.matchPrefix(\n                        mediaSection, 'a=fmtp:' + pt + ' ');\n                    // Only the first a=fmtp:<pt> is considered.\n                    codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n                    codec.rtcpFeedback = SDPUtils.matchPrefix(\n                        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n                        .map(SDPUtils.parseRtcpFb);\n                    description.codecs.push(codec);\n                    // parse FEC mechanisms from rtpmap lines.\n                    switch (codec.name.toUpperCase()) {\n                        case 'RED':\n                        case 'ULPFEC':\n                            description.fecMechanisms.push(codec.name.toUpperCase());\n                            break;\n                        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n                            break;\n                    }\n                }\n            }\n            SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n                description.headerExtensions.push(SDPUtils.parseExtmap(line));\n            });\n            // FIXME: parse rtcp.\n            return description;\n        };\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\n        SDPUtils.writeRtpDescription = function(kind, caps) {\n            var sdp = '';\n\n            // Build the mline.\n            sdp += 'm=' + kind + ' ';\n            sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n            sdp += ' UDP/TLS/RTP/SAVPF ';\n            sdp += caps.codecs.map(function(codec) {\n                if (codec.preferredPayloadType !== undefined) {\n                    return codec.preferredPayloadType;\n                }\n                return codec.payloadType;\n            }).join(' ') + '\\r\\n';\n\n            sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n            sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n            // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n            caps.codecs.forEach(function(codec) {\n                sdp += SDPUtils.writeRtpMap(codec);\n                sdp += SDPUtils.writeFmtp(codec);\n                sdp += SDPUtils.writeRtcpFb(codec);\n            });\n            var maxptime = 0;\n            caps.codecs.forEach(function(codec) {\n                if (codec.maxptime > maxptime) {\n                    maxptime = codec.maxptime;\n                }\n            });\n            if (maxptime > 0) {\n                sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n            }\n            sdp += 'a=rtcp-mux\\r\\n';\n\n            caps.headerExtensions.forEach(function(extension) {\n                sdp += SDPUtils.writeExtmap(extension);\n            });\n            // FIXME: write fecMechanisms.\n            return sdp;\n        };\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\n        SDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n            var encodingParameters = [];\n            var description = SDPUtils.parseRtpParameters(mediaSection);\n            var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n            var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n            // filter a=ssrc:... cname:, ignore PlanB-msid\n            var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                .map(function(line) {\n                    return SDPUtils.parseSsrcMedia(line);\n                })\n                .filter(function(parts) {\n                    return parts.attribute === 'cname';\n                });\n            var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n            var secondarySsrc;\n\n            var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n                .map(function(line) {\n                    var parts = line.split(' ');\n                    parts.shift();\n                    return parts.map(function(part) {\n                        return parseInt(part, 10);\n                    });\n                });\n            if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n                secondarySsrc = flows[0][1];\n            }\n\n            description.codecs.forEach(function(codec) {\n                if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n                    var encParam = {\n                        ssrc: primarySsrc,\n                        codecPayloadType: parseInt(codec.parameters.apt, 10),\n                        rtx: {\n                            ssrc: secondarySsrc\n                        }\n                    };\n                    encodingParameters.push(encParam);\n                    if (hasRed) {\n                        encParam = JSON.parse(JSON.stringify(encParam));\n                        encParam.fec = {\n                            ssrc: secondarySsrc,\n                            mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n                        };\n                        encodingParameters.push(encParam);\n                    }\n                }\n            });\n            if (encodingParameters.length === 0 && primarySsrc) {\n                encodingParameters.push({\n                    ssrc: primarySsrc\n                });\n            }\n\n            // we support both b=AS and b=TIAS but interpret AS as TIAS.\n            var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n            if (bandwidth.length) {\n                if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n                    bandwidth = parseInt(bandwidth[0].substr(7), 10);\n                } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n                    bandwidth = parseInt(bandwidth[0].substr(5), 10);\n                }\n                encodingParameters.forEach(function(params) {\n                    params.maxBitrate = bandwidth;\n                });\n            }\n            return encodingParameters;\n        };\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\n        SDPUtils.parseRtcpParameters = function(mediaSection) {\n            var rtcpParameters = {};\n\n            var cname;\n            // Gets the first SSRC. Note that with RTX there might be multiple\n            // SSRCs.\n            var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                .map(function(line) {\n                    return SDPUtils.parseSsrcMedia(line);\n                })\n                .filter(function(obj) {\n                    return obj.attribute === 'cname';\n                })[0];\n            if (remoteSsrc) {\n                rtcpParameters.cname = remoteSsrc.value;\n                rtcpParameters.ssrc = remoteSsrc.ssrc;\n            }\n\n            // Edge uses the compound attribute instead of reducedSize\n            // compound is !reducedSize\n            var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n            rtcpParameters.reducedSize = rsize.length > 0;\n            rtcpParameters.compound = rsize.length === 0;\n\n            // parses the rtcp-mux attrbute.\n            // Note that Edge does not support unmuxed RTCP.\n            var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n            rtcpParameters.mux = mux.length > 0;\n\n            return rtcpParameters;\n        };\n\n// parses either a=msid: or a=ssrc:... msid lines an returns\n// the id of the MediaStream and MediaStreamTrack.\n        SDPUtils.parseMsid = function(mediaSection) {\n            var parts;\n            var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n            if (spec.length === 1) {\n                parts = spec[0].substr(7).split(' ');\n                return {stream: parts[0], track: parts[1]};\n            }\n            var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                .map(function(line) {\n                    return SDPUtils.parseSsrcMedia(line);\n                })\n                .filter(function(parts) {\n                    return parts.attribute === 'msid';\n                });\n            if (planB.length > 0) {\n                parts = planB[0].value.split(' ');\n                return {stream: parts[0], track: parts[1]};\n            }\n        };\n\n        SDPUtils.writeSessionBoilerplate = function() {\n            // FIXME: sess-id should be an NTP timestamp.\n            return 'v=0\\r\\n' +\n                'o=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\\r\\n' +\n                's=-\\r\\n' +\n                't=0 0\\r\\n';\n        };\n\n        SDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n            var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n            // Map ICE parameters (ufrag, pwd) to SDP.\n            sdp += SDPUtils.writeIceParameters(\n                transceiver.iceGatherer.getLocalParameters());\n\n            // Map DTLS parameters to SDP.\n            sdp += SDPUtils.writeDtlsParameters(\n                transceiver.dtlsTransport.getLocalParameters(),\n                type === 'offer' ? 'actpass' : 'active');\n\n            sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n            if (transceiver.direction) {\n                sdp += 'a=' + transceiver.direction + '\\r\\n';\n            } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n                sdp += 'a=sendrecv\\r\\n';\n            } else if (transceiver.rtpSender) {\n                sdp += 'a=sendonly\\r\\n';\n            } else if (transceiver.rtpReceiver) {\n                sdp += 'a=recvonly\\r\\n';\n            } else {\n                sdp += 'a=inactive\\r\\n';\n            }\n\n            if (transceiver.rtpSender) {\n                // spec.\n                var msid = 'msid:' + stream.id + ' ' +\n                    transceiver.rtpSender.track.id + '\\r\\n';\n                sdp += 'a=' + msid;\n\n                // for Chrome.\n                sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n                    ' ' + msid;\n                if (transceiver.sendEncodingParameters[0].rtx) {\n                    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n                        ' ' + msid;\n                    sdp += 'a=ssrc-group:FID ' +\n                        transceiver.sendEncodingParameters[0].ssrc + ' ' +\n                        transceiver.sendEncodingParameters[0].rtx.ssrc +\n                        '\\r\\n';\n                }\n            }\n            // FIXME: this should be written by writeRtpDescription.\n            sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n                ' cname:' + SDPUtils.localCName + '\\r\\n';\n            if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n                sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n                    ' cname:' + SDPUtils.localCName + '\\r\\n';\n            }\n            return sdp;\n        };\n\n// Gets the direction from the mediaSection or the sessionpart.\n        SDPUtils.getDirection = function(mediaSection, sessionpart) {\n            // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n            var lines = SDPUtils.splitLines(mediaSection);\n            for (var i = 0; i < lines.length; i++) {\n                switch (lines[i]) {\n                    case 'a=sendrecv':\n                    case 'a=sendonly':\n                    case 'a=recvonly':\n                    case 'a=inactive':\n                        return lines[i].substr(2);\n                    default:\n                    // FIXME: What should happen here?\n                }\n            }\n            if (sessionpart) {\n                return SDPUtils.getDirection(sessionpart);\n            }\n            return 'sendrecv';\n        };\n\n        SDPUtils.getKind = function(mediaSection) {\n            var lines = SDPUtils.splitLines(mediaSection);\n            var mline = lines[0].split(' ');\n            return mline[0].substr(2);\n        };\n\n        SDPUtils.isRejected = function(mediaSection) {\n            return mediaSection.split(' ', 2)[1] === '0';\n        };\n\n// Expose public methods.\n        module.exports = SDPUtils;\n\n    },{}],2:[function(require,module,exports){\n        (function (global){\n            /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n            /* eslint-env node */\n\n            'use strict';\n\n            var adapterFactory = require('./adapter_factory.js');\n            module.exports = adapterFactory({window: global.window});\n\n        }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{\"./adapter_factory.js\":3}],3:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n\n        'use strict';\n\n// Shimming starts here.\n        module.exports = function(dependencies) {\n            var window = dependencies && dependencies.window;\n\n            // Utils.\n            var utils = require('./utils');\n            var logging = utils.log;\n            var browserDetails = utils.detectBrowser(window);\n\n            // Export to the adapter global object visible in the browser.\n            var adapter = {\n                browserDetails: browserDetails,\n                extractVersion: utils.extractVersion,\n                disableLog: utils.disableLog\n            };\n\n            // Uncomment the line below if you want logging to occur, including logging\n            // for the switch statement below. Can also be turned on in the browser via\n            // adapter.disableLog(false), but then logging from the switch statement below\n            // will not appear.\n            // require('./utils').disableLog(false);\n\n            // Browser shims.\n            var chromeShim = require('./chrome/chrome_shim') || null;\n            var edgeShim = require('./edge/edge_shim') || null;\n            var firefoxShim = require('./firefox/firefox_shim') || null;\n            var safariShim = require('./safari/safari_shim') || null;\n\n            // Shim browser if found.\n            switch (browserDetails.browser) {\n                case 'chrome':\n                    if (!chromeShim || !chromeShim.shimPeerConnection) {\n                        logging('Chrome shim is not included in this adapter release.');\n                        return adapter;\n                    }\n                    logging('adapter.js shimming chrome.');\n                    // Export to the adapter global object visible in the browser.\n                    adapter.browserShim = chromeShim;\n\n                    chromeShim.shimGetUserMedia(window);\n                    chromeShim.shimMediaStream(window);\n                    utils.shimCreateObjectURL(window);\n                    chromeShim.shimSourceObject(window);\n                    chromeShim.shimPeerConnection(window);\n                    chromeShim.shimOnTrack(window);\n                    chromeShim.shimGetSendersWithDtmf(window);\n                    break;\n                case 'firefox':\n                    if (!firefoxShim || !firefoxShim.shimPeerConnection) {\n                        logging('Firefox shim is not included in this adapter release.');\n                        return adapter;\n                    }\n                    logging('adapter.js shimming firefox.');\n                    // Export to the adapter global object visible in the browser.\n                    adapter.browserShim = firefoxShim;\n\n                    firefoxShim.shimGetUserMedia(window);\n                    utils.shimCreateObjectURL(window);\n                    firefoxShim.shimSourceObject(window);\n                    firefoxShim.shimPeerConnection(window);\n                    firefoxShim.shimOnTrack(window);\n                    break;\n                case 'edge':\n                    if (!edgeShim || !edgeShim.shimPeerConnection) {\n                        logging('MS edge shim is not included in this adapter release.');\n                        return adapter;\n                    }\n                    logging('adapter.js shimming edge.');\n                    // Export to the adapter global object visible in the browser.\n                    adapter.browserShim = edgeShim;\n\n                    edgeShim.shimGetUserMedia(window);\n                    utils.shimCreateObjectURL(window);\n                    edgeShim.shimPeerConnection(window);\n                    edgeShim.shimReplaceTrack(window);\n                    break;\n                case 'safari':\n                    if (!safariShim) {\n                        logging('Safari shim is not included in this adapter release.');\n                        return adapter;\n                    }\n                    logging('adapter.js shimming safari.');\n                    // Export to the adapter global object visible in the browser.\n                    adapter.browserShim = safariShim;\n\n                    safariShim.shimCallbacksAPI(window);\n                    safariShim.shimAddStream(window);\n                    safariShim.shimOnAddStream(window);\n                    safariShim.shimGetUserMedia(window);\n                    break;\n                default:\n                    logging('Unsupported browser!');\n                    break;\n            }\n\n            return adapter;\n        };\n\n    },{\"./chrome/chrome_shim\":4,\"./edge/edge_shim\":6,\"./firefox/firefox_shim\":9,\"./safari/safari_shim\":11,\"./utils\":12}],4:[function(require,module,exports){\n\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n        var utils = require('../utils.js');\n        var logging = utils.log;\n\n        var chromeShim = {\n            shimMediaStream: function(window) {\n                window.MediaStream = window.MediaStream || window.webkitMediaStream;\n            },\n\n            shimOnTrack: function(window) {\n                if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n                    window.RTCPeerConnection.prototype)) {\n                    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n                        get: function() {\n                            return this._ontrack;\n                        },\n                        set: function(f) {\n                            var self = this;\n                            if (this._ontrack) {\n                                this.removeEventListener('track', this._ontrack);\n                                this.removeEventListener('addstream', this._ontrackpoly);\n                            }\n                            this.addEventListener('track', this._ontrack = f);\n                            this.addEventListener('addstream', this._ontrackpoly = function(e) {\n                                // onaddstream does not fire when a track is added to an existing\n                                // stream. But stream.onaddtrack is implemented so we use that.\n                                e.stream.addEventListener('addtrack', function(te) {\n                                    var receiver;\n                                    if (window.RTCPeerConnection.prototype.getReceivers) {\n                                        receiver = self.getReceivers().find(function(r) {\n                                            return r.track.id === te.track.id;\n                                        });\n                                    } else {\n                                        receiver = {track: te.track};\n                                    }\n\n                                    var event = new Event('track');\n                                    event.track = te.track;\n                                    event.receiver = receiver;\n                                    event.streams = [e.stream];\n                                    self.dispatchEvent(event);\n                                });\n                                e.stream.getTracks().forEach(function(track) {\n                                    var receiver;\n                                    if (window.RTCPeerConnection.prototype.getReceivers) {\n                                        receiver = self.getReceivers().find(function(r) {\n                                            return r.track.id === track.id;\n                                        });\n                                    } else {\n                                        receiver = {track: track};\n                                    }\n                                    var event = new Event('track');\n                                    event.track = track;\n                                    event.receiver = receiver;\n                                    event.streams = [e.stream];\n                                    this.dispatchEvent(event);\n                                }.bind(this));\n                            }.bind(this));\n                        }\n                    });\n                }\n            },\n\n            shimGetSendersWithDtmf: function(window) {\n                if (typeof window === 'object' && window.RTCPeerConnection &&\n                    !('getSenders' in window.RTCPeerConnection.prototype) &&\n                    'createDTMFSender' in window.RTCPeerConnection.prototype) {\n                    window.RTCPeerConnection.prototype.getSenders = function() {\n                        return this._senders || [];\n                    };\n                    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n                    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n\n                    if (!window.RTCPeerConnection.prototype.addTrack) {\n                        window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n                            var pc = this;\n                            if (pc.signalingState === 'closed') {\n                                throw new DOMException(\n                                    'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n                                    'InvalidStateError');\n                            }\n                            var streams = [].slice.call(arguments, 1);\n                            if (streams.length !== 1 ||\n                                !streams[0].getTracks().find(function(t) {\n                                    return t === track;\n                                })) {\n                                // this is not fully correct but all we can manage without\n                                // [[associated MediaStreams]] internal slot.\n                                throw new DOMException(\n                                    'The adapter.js addTrack polyfill only supports a single ' +\n                                    ' stream which is associated with the specified track.',\n                                    'NotSupportedError');\n                            }\n\n                            pc._senders = pc._senders || [];\n                            var alreadyExists = pc._senders.find(function(t) {\n                                return t.track === track;\n                            });\n                            if (alreadyExists) {\n                                throw new DOMException('Track already exists.',\n                                    'InvalidAccessError');\n                            }\n\n                            pc._streams = pc._streams || {};\n                            var oldStream = pc._streams[stream.id];\n                            if (oldStream) {\n                                oldStream.addTrack(track);\n                                pc.removeStream(oldStream);\n                                pc.addStream(oldStream);\n                            } else {\n                                var newStream = new window.MediaStream([track]);\n                                pc._streams[stream.id] = newStream;\n                                pc.addStream(newStream);\n                            }\n\n                            var sender = {\n                                track: track,\n                                get dtmf() {\n                                    if (this._dtmf === undefined) {\n                                        if (track.kind === 'audio') {\n                                            this._dtmf = pc.createDTMFSender(track);\n                                        } else {\n                                            this._dtmf = null;\n                                        }\n                                    }\n                                    return this._dtmf;\n                                }\n                            };\n                            pc._senders.push(sender);\n                            return sender;\n                        };\n                    }\n                    window.RTCPeerConnection.prototype.addStream = function(stream) {\n                        var pc = this;\n                        pc._senders = pc._senders || [];\n                        origAddStream.apply(pc, [stream]);\n                        stream.getTracks().forEach(function(track) {\n                            pc._senders.push({\n                                track: track,\n                                get dtmf() {\n                                    if (this._dtmf === undefined) {\n                                        if (track.kind === 'audio') {\n                                            this._dtmf = pc.createDTMFSender(track);\n                                        } else {\n                                            this._dtmf = null;\n                                        }\n                                    }\n                                    return this._dtmf;\n                                }\n                            });\n                        });\n                    };\n\n                    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n                        var pc = this;\n                        pc._senders = pc._senders || [];\n                        origRemoveStream.apply(pc, [stream]);\n                        stream.getTracks().forEach(function(track) {\n                            var sender = pc._senders.find(function(s) {\n                                return s.track === track;\n                            });\n                            if (sender) {\n                                pc._senders.splice(pc._senders.indexOf(sender), 1); // remove sender\n                            }\n                        });\n                    };\n                }\n            },\n\n            shimSourceObject: function(window) {\n                var URL = window && window.URL;\n\n                if (typeof window === 'object') {\n                    if (window.HTMLMediaElement &&\n                        !('srcObject' in window.HTMLMediaElement.prototype)) {\n                        // Shim the srcObject property, once, when HTMLMediaElement is found.\n                        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n                            get: function() {\n                                return this._srcObject;\n                            },\n                            set: function(stream) {\n                                var self = this;\n                                // Use _srcObject as a private property for this shim\n                                this._srcObject = stream;\n                                if (this.src) {\n                                    URL.revokeObjectURL(this.src);\n                                }\n\n                                if (!stream) {\n                                    this.src = '';\n                                    return undefined;\n                                }\n                                this.src = URL.createObjectURL(stream);\n                                // We need to recreate the blob url when a track is added or\n                                // removed. Doing it manually since we want to avoid a recursion.\n                                stream.addEventListener('addtrack', function() {\n                                    if (self.src) {\n                                        URL.revokeObjectURL(self.src);\n                                    }\n                                    self.src = URL.createObjectURL(stream);\n                                });\n                                stream.addEventListener('removetrack', function() {\n                                    if (self.src) {\n                                        URL.revokeObjectURL(self.src);\n                                    }\n                                    self.src = URL.createObjectURL(stream);\n                                });\n                            }\n                        });\n                    }\n                }\n            },\n\n            shimPeerConnection: function(window) {\n                var browserDetails = utils.detectBrowser(window);\n\n                // The RTCPeerConnection object.\n                if (!window.RTCPeerConnection) {\n                    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n                        // Translate iceTransportPolicy to iceTransports,\n                        // see https://code.google.com/p/webrtc/issues/detail?id=4869\n                        // this was fixed in M56 along with unprefixing RTCPeerConnection.\n                        logging('PeerConnection');\n                        if (pcConfig && pcConfig.iceTransportPolicy) {\n                            pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n                        }\n\n                        return new window.webkitRTCPeerConnection(pcConfig, pcConstraints);\n                    };\n                    window.RTCPeerConnection.prototype =\n                        window.webkitRTCPeerConnection.prototype;\n                    // wrap static methods. Currently just generateCertificate.\n                    if (window.webkitRTCPeerConnection.generateCertificate) {\n                        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                            get: function() {\n                                return window.webkitRTCPeerConnection.generateCertificate;\n                            }\n                        });\n                    }\n                } else {\n                    // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n                    var OrigPeerConnection = window.RTCPeerConnection;\n                    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n                        if (pcConfig && pcConfig.iceServers) {\n                            var newIceServers = [];\n                            for (var i = 0; i < pcConfig.iceServers.length; i++) {\n                                var server = pcConfig.iceServers[i];\n                                if (!server.hasOwnProperty('urls') &&\n                                    server.hasOwnProperty('url')) {\n                                    console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n                                    server = JSON.parse(JSON.stringify(server));\n                                    server.urls = server.url;\n                                    newIceServers.push(server);\n                                } else {\n                                    newIceServers.push(pcConfig.iceServers[i]);\n                                }\n                            }\n                            pcConfig.iceServers = newIceServers;\n                        }\n                        return new OrigPeerConnection(pcConfig, pcConstraints);\n                    };\n                    window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n                    // wrap static methods. Currently just generateCertificate.\n                    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                        get: function() {\n                            return OrigPeerConnection.generateCertificate;\n                        }\n                    });\n                }\n\n                var origGetStats = window.RTCPeerConnection.prototype.getStats;\n                window.RTCPeerConnection.prototype.getStats = function(selector,\n                                                                       successCallback, errorCallback) {\n                    var self = this;\n                    var args = arguments;\n\n                    // If selector is a function then we are in the old style stats so just\n                    // pass back the original getStats format to avoid breaking old users.\n                    if (arguments.length > 0 && typeof selector === 'function') {\n                        return origGetStats.apply(this, arguments);\n                    }\n\n                    // When spec-style getStats is supported, return those when called with\n                    // either no arguments or the selector argument is null.\n                    if (origGetStats.length === 0 && (arguments.length === 0 ||\n                        typeof arguments[0] !== 'function')) {\n                        return origGetStats.apply(this, []);\n                    }\n\n                    var fixChromeStats_ = function(response) {\n                        var standardReport = {};\n                        var reports = response.result();\n                        reports.forEach(function(report) {\n                            var standardStats = {\n                                id: report.id,\n                                timestamp: report.timestamp,\n                                type: {\n                                    localcandidate: 'local-candidate',\n                                    remotecandidate: 'remote-candidate'\n                                }[report.type] || report.type\n                            };\n                            report.names().forEach(function(name) {\n                                standardStats[name] = report.stat(name);\n                            });\n                            standardReport[standardStats.id] = standardStats;\n                        });\n\n                        return standardReport;\n                    };\n\n                    // shim getStats with maplike support\n                    var makeMapStats = function(stats) {\n                        return new Map(Object.keys(stats).map(function(key) {\n                            return [key, stats[key]];\n                        }));\n                    };\n\n                    if (arguments.length >= 2) {\n                        var successCallbackWrapper_ = function(response) {\n                            args[1](makeMapStats(fixChromeStats_(response)));\n                        };\n\n                        return origGetStats.apply(this, [successCallbackWrapper_,\n                            arguments[0]]);\n                    }\n\n                    // promise-support\n                    return new Promise(function(resolve, reject) {\n                        origGetStats.apply(self, [\n                            function(response) {\n                                resolve(makeMapStats(fixChromeStats_(response)));\n                            }, reject]);\n                    }).then(successCallback, errorCallback);\n                };\n\n                // add promise support -- natively available in Chrome 51\n                if (browserDetails.version < 51) {\n                    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n                        .forEach(function(method) {\n                            var nativeMethod = window.RTCPeerConnection.prototype[method];\n                            window.RTCPeerConnection.prototype[method] = function() {\n                                var args = arguments;\n                                var self = this;\n                                var promise = new Promise(function(resolve, reject) {\n                                    nativeMethod.apply(self, [args[0], resolve, reject]);\n                                });\n                                if (args.length < 2) {\n                                    return promise;\n                                }\n                                return promise.then(function() {\n                                        args[1].apply(null, []);\n                                    },\n                                    function(err) {\n                                        if (args.length >= 3) {\n                                            args[2].apply(null, [err]);\n                                        }\n                                    });\n                            };\n                        });\n                }\n\n                // promise support for createOffer and createAnswer. Available (without\n                // bugs) since M52: crbug/619289\n                if (browserDetails.version < 52) {\n                    ['createOffer', 'createAnswer'].forEach(function(method) {\n                        var nativeMethod = window.RTCPeerConnection.prototype[method];\n                        window.RTCPeerConnection.prototype[method] = function() {\n                            var self = this;\n                            if (arguments.length < 1 || (arguments.length === 1 &&\n                                typeof arguments[0] === 'object')) {\n                                var opts = arguments.length === 1 ? arguments[0] : undefined;\n                                return new Promise(function(resolve, reject) {\n                                    nativeMethod.apply(self, [resolve, reject, opts]);\n                                });\n                            }\n                            return nativeMethod.apply(this, arguments);\n                        };\n                    });\n                }\n\n                // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n                ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n                    .forEach(function(method) {\n                        var nativeMethod = window.RTCPeerConnection.prototype[method];\n                        window.RTCPeerConnection.prototype[method] = function() {\n                            arguments[0] = new ((method === 'addIceCandidate') ?\n                                window.RTCIceCandidate :\n                                window.RTCSessionDescription)(arguments[0]);\n                            return nativeMethod.apply(this, arguments);\n                        };\n                    });\n\n                // support for addIceCandidate(null or undefined)\n                var nativeAddIceCandidate =\n                    window.RTCPeerConnection.prototype.addIceCandidate;\n                window.RTCPeerConnection.prototype.addIceCandidate = function() {\n                    if (!arguments[0]) {\n                        if (arguments[1]) {\n                            arguments[1].apply(null);\n                        }\n                        return Promise.resolve();\n                    }\n                    return nativeAddIceCandidate.apply(this, arguments);\n                };\n            }\n        };\n\n\n// Expose public methods.\n        module.exports = {\n            shimMediaStream: chromeShim.shimMediaStream,\n            shimOnTrack: chromeShim.shimOnTrack,\n            shimGetSendersWithDtmf: chromeShim.shimGetSendersWithDtmf,\n            shimSourceObject: chromeShim.shimSourceObject,\n            shimPeerConnection: chromeShim.shimPeerConnection,\n            shimGetUserMedia: require('./getusermedia')\n        };\n\n    },{\"../utils.js\":12,\"./getusermedia\":5}],5:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n        var utils = require('../utils.js');\n        var logging = utils.log;\n\n// Expose public methods.\n        module.exports = function(window) {\n            var browserDetails = utils.detectBrowser(window);\n            var navigator = window && window.navigator;\n\n            var constraintsToChrome_ = function(c) {\n                if (typeof c !== 'object' || c.mandatory || c.optional) {\n                    return c;\n                }\n                var cc = {};\n                Object.keys(c).forEach(function(key) {\n                    if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n                        return;\n                    }\n                    var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n                    if (r.exact !== undefined && typeof r.exact === 'number') {\n                        r.min = r.max = r.exact;\n                    }\n                    var oldname_ = function(prefix, name) {\n                        if (prefix) {\n                            return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n                        }\n                        return (name === 'deviceId') ? 'sourceId' : name;\n                    };\n                    if (r.ideal !== undefined) {\n                        cc.optional = cc.optional || [];\n                        var oc = {};\n                        if (typeof r.ideal === 'number') {\n                            oc[oldname_('min', key)] = r.ideal;\n                            cc.optional.push(oc);\n                            oc = {};\n                            oc[oldname_('max', key)] = r.ideal;\n                            cc.optional.push(oc);\n                        } else {\n                            oc[oldname_('', key)] = r.ideal;\n                            cc.optional.push(oc);\n                        }\n                    }\n                    if (r.exact !== undefined && typeof r.exact !== 'number') {\n                        cc.mandatory = cc.mandatory || {};\n                        cc.mandatory[oldname_('', key)] = r.exact;\n                    } else {\n                        ['min', 'max'].forEach(function(mix) {\n                            if (r[mix] !== undefined) {\n                                cc.mandatory = cc.mandatory || {};\n                                cc.mandatory[oldname_(mix, key)] = r[mix];\n                            }\n                        });\n                    }\n                });\n                if (c.advanced) {\n                    cc.optional = (cc.optional || []).concat(c.advanced);\n                }\n                return cc;\n            };\n\n            var shimConstraints_ = function(constraints, func) {\n                constraints = JSON.parse(JSON.stringify(constraints));\n                if (constraints && typeof constraints.audio === 'object') {\n                    var remap = function(obj, a, b) {\n                        if (a in obj && !(b in obj)) {\n                            obj[b] = obj[a];\n                            delete obj[a];\n                        }\n                    };\n                    constraints = JSON.parse(JSON.stringify(constraints));\n                    remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n                    remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n                    constraints.audio = constraintsToChrome_(constraints.audio);\n                }\n                if (constraints && typeof constraints.video === 'object') {\n                    // Shim facingMode for mobile & surface pro.\n                    var face = constraints.video.facingMode;\n                    face = face && ((typeof face === 'object') ? face : {ideal: face});\n                    var getSupportedFacingModeLies = browserDetails.version < 61;\n\n                    if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                        face.ideal === 'user' || face.ideal === 'environment')) &&\n                        !(navigator.mediaDevices.getSupportedConstraints &&\n                            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n                            !getSupportedFacingModeLies)) {\n                        delete constraints.video.facingMode;\n                        var matches;\n                        if (face.exact === 'environment' || face.ideal === 'environment') {\n                            matches = ['back', 'rear'];\n                        } else if (face.exact === 'user' || face.ideal === 'user') {\n                            matches = ['front'];\n                        }\n                        if (matches) {\n                            // Look for matches in label, or use last cam for back (typical).\n                            return navigator.mediaDevices.enumerateDevices()\n                                .then(function(devices) {\n                                    devices = devices.filter(function(d) {\n                                        return d.kind === 'videoinput';\n                                    });\n                                    var dev = devices.find(function(d) {\n                                        return matches.some(function(match) {\n                                            return d.label.toLowerCase().indexOf(match) !== -1;\n                                        });\n                                    });\n                                    if (!dev && devices.length && matches.indexOf('back') !== -1) {\n                                        dev = devices[devices.length - 1]; // more likely the back cam\n                                    }\n                                    if (dev) {\n                                        constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                            {ideal: dev.deviceId};\n                                    }\n                                    constraints.video = constraintsToChrome_(constraints.video);\n                                    logging('chrome: ' + JSON.stringify(constraints));\n                                    return func(constraints);\n                                });\n                        }\n                    }\n                    constraints.video = constraintsToChrome_(constraints.video);\n                }\n                logging('chrome: ' + JSON.stringify(constraints));\n                return func(constraints);\n            };\n\n            var shimError_ = function(e) {\n                return {\n                    name: {\n                        PermissionDeniedError: 'NotAllowedError',\n                        InvalidStateError: 'NotReadableError',\n                        DevicesNotFoundError: 'NotFoundError',\n                        ConstraintNotSatisfiedError: 'OverconstrainedError',\n                        TrackStartError: 'NotReadableError',\n                        MediaDeviceFailedDueToShutdown: 'NotReadableError',\n                        MediaDeviceKillSwitchOn: 'NotReadableError'\n                    }[e.name] || e.name,\n                    message: e.message,\n                    constraint: e.constraintName,\n                    toString: function() {\n                        return this.name + (this.message && ': ') + this.message;\n                    }\n                };\n            };\n\n            var getUserMedia_ = function(constraints, onSuccess, onError) {\n                shimConstraints_(constraints, function(c) {\n                    navigator.webkitGetUserMedia(c, onSuccess, function(e) {\n                        onError(shimError_(e));\n                    });\n                });\n            };\n\n            navigator.getUserMedia = getUserMedia_;\n\n            // Returns the result of getUserMedia as a Promise.\n            var getUserMediaPromise_ = function(constraints) {\n                return new Promise(function(resolve, reject) {\n                    navigator.getUserMedia(constraints, resolve, reject);\n                });\n            };\n\n            if (!navigator.mediaDevices) {\n                navigator.mediaDevices = {\n                    getUserMedia: getUserMediaPromise_,\n                    enumerateDevices: function() {\n                        return new Promise(function(resolve) {\n                            var kinds = {audio: 'audioinput', video: 'videoinput'};\n                            return window.MediaStreamTrack.getSources(function(devices) {\n                                resolve(devices.map(function(device) {\n                                    return {label: device.label,\n                                        kind: kinds[device.kind],\n                                        deviceId: device.id,\n                                        groupId: ''};\n                                }));\n                            });\n                        });\n                    },\n                    getSupportedConstraints: function() {\n                        return {\n                            deviceId: true, echoCancellation: true, facingMode: true,\n                            frameRate: true, height: true, width: true\n                        };\n                    }\n                };\n            }\n\n            // A shim for getUserMedia method on the mediaDevices object.\n            // TODO(KaptenJansson) remove once implemented in Chrome stable.\n            if (!navigator.mediaDevices.getUserMedia) {\n                navigator.mediaDevices.getUserMedia = function(constraints) {\n                    return getUserMediaPromise_(constraints);\n                };\n            } else {\n                // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n                // function which returns a Promise, it does not accept spec-style\n                // constraints.\n                var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n                bind(navigator.mediaDevices);\n                navigator.mediaDevices.getUserMedia = function(cs) {\n                    return shimConstraints_(cs, function(c) {\n                        return origGetUserMedia(c).then(function(stream) {\n                            if (c.audio && !stream.getAudioTracks().length ||\n                                c.video && !stream.getVideoTracks().length) {\n                                stream.getTracks().forEach(function(track) {\n                                    track.stop();\n                                });\n                                throw new DOMException('', 'NotFoundError');\n                            }\n                            return stream;\n                        }, function(e) {\n                            return Promise.reject(shimError_(e));\n                        });\n                    });\n                };\n            }\n\n            // Dummy devicechange event methods.\n            // TODO(KaptenJansson) remove once implemented in Chrome stable.\n            if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n                navigator.mediaDevices.addEventListener = function() {\n                    logging('Dummy mediaDevices.addEventListener called.');\n                };\n            }\n            if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n                navigator.mediaDevices.removeEventListener = function() {\n                    logging('Dummy mediaDevices.removeEventListener called.');\n                };\n            }\n        };\n\n    },{\"../utils.js\":12}],6:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n        var utils = require('../utils');\n        var shimRTCPeerConnection = require('./rtcpeerconnection_shim');\n\n        module.exports = {\n            shimGetUserMedia: require('./getusermedia'),\n            shimPeerConnection: function(window) {\n                var browserDetails = utils.detectBrowser(window);\n\n                if (window.RTCIceGatherer) {\n                    // ORTC defines an RTCIceCandidate object but no constructor.\n                    // Not implemented in Edge.\n                    if (!window.RTCIceCandidate) {\n                        window.RTCIceCandidate = function(args) {\n                            return args;\n                        };\n                    }\n                    // ORTC does not have a session description object but\n                    // other browsers (i.e. Chrome) that will support both PC and ORTC\n                    // in the future might have this defined already.\n                    if (!window.RTCSessionDescription) {\n                        window.RTCSessionDescription = function(args) {\n                            return args;\n                        };\n                    }\n                    // this adds an additional event listener to MediaStrackTrack that signals\n                    // when a tracks enabled property was changed. Workaround for a bug in\n                    // addStream, see below. No longer required in 15025+\n                    if (browserDetails.version < 15025) {\n                        var origMSTEnabled = Object.getOwnPropertyDescriptor(\n                            window.MediaStreamTrack.prototype, 'enabled');\n                        Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n                            set: function(value) {\n                                origMSTEnabled.set.call(this, value);\n                                var ev = new Event('enabled');\n                                ev.enabled = value;\n                                this.dispatchEvent(ev);\n                            }\n                        });\n                    }\n                }\n                window.RTCPeerConnection =\n                    shimRTCPeerConnection(window, browserDetails.version);\n            },\n            shimReplaceTrack: function(window) {\n                // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n                if (window.RTCRtpSender &&\n                    !('replaceTrack' in window.RTCRtpSender.prototype)) {\n                    window.RTCRtpSender.prototype.replaceTrack =\n                        window.RTCRtpSender.prototype.setTrack;\n                }\n            }\n        };\n\n    },{\"../utils\":12,\"./getusermedia\":7,\"./rtcpeerconnection_shim\":8}],7:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n// Expose public methods.\n        module.exports = function(window) {\n            var navigator = window && window.navigator;\n\n            var shimError_ = function(e) {\n                return {\n                    name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n                    message: e.message,\n                    constraint: e.constraint,\n                    toString: function() {\n                        return this.name;\n                    }\n                };\n            };\n\n            // getUserMedia error shim.\n            var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n            bind(navigator.mediaDevices);\n            navigator.mediaDevices.getUserMedia = function(c) {\n                return origGetUserMedia(c).catch(function(e) {\n                    return Promise.reject(shimError_(e));\n                });\n            };\n        };\n\n    },{}],8:[function(require,module,exports){\n        /*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n        var SDPUtils = require('sdp');\n\n// sort tracks such that they follow an a-v-a-v...\n// pattern.\n        function sortTracks(tracks) {\n            var audioTracks = tracks.filter(function(track) {\n                return track.kind === 'audio';\n            });\n            var videoTracks = tracks.filter(function(track) {\n                return track.kind === 'video';\n            });\n            tracks = [];\n            while (audioTracks.length || videoTracks.length) {\n                if (audioTracks.length) {\n                    tracks.push(audioTracks.shift());\n                }\n                if (videoTracks.length) {\n                    tracks.push(videoTracks.shift());\n                }\n            }\n            return tracks;\n        }\n\n// Edge does not like\n// 1) stun:\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\n        function filterIceServers(iceServers, edgeVersion) {\n            var hasTurn = false;\n            iceServers = JSON.parse(JSON.stringify(iceServers));\n            return iceServers.filter(function(server) {\n                if (server && (server.urls || server.url)) {\n                    var urls = server.urls || server.url;\n                    if (server.url && !server.urls) {\n                        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n                    }\n                    var isString = typeof urls === 'string';\n                    if (isString) {\n                        urls = [urls];\n                    }\n                    urls = urls.filter(function(url) {\n                        var validTurn = url.indexOf('turn:') === 0 &&\n                            url.indexOf('transport=udp') !== -1 &&\n                            url.indexOf('turn:[') === -1 &&\n                            !hasTurn;\n\n                        if (validTurn) {\n                            hasTurn = true;\n                            return true;\n                        }\n                        return url.indexOf('stun:') === 0 && edgeVersion >= 14393;\n                    });\n\n                    delete server.url;\n                    server.urls = isString ? urls[0] : urls;\n                    return !!urls.length;\n                }\n                return false;\n            });\n        }\n\n// Determines the intersection of local and remote capabilities.\n        function getCommonCapabilities(localCapabilities, remoteCapabilities) {\n            var commonCapabilities = {\n                codecs: [],\n                headerExtensions: [],\n                fecMechanisms: []\n            };\n\n            var findCodecByPayloadType = function(pt, codecs) {\n                pt = parseInt(pt, 10);\n                for (var i = 0; i < codecs.length; i++) {\n                    if (codecs[i].payloadType === pt ||\n                        codecs[i].preferredPayloadType === pt) {\n                        return codecs[i];\n                    }\n                }\n            };\n\n            var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n                var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n                var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n                return lCodec && rCodec &&\n                    lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n            };\n\n            localCapabilities.codecs.forEach(function(lCodec) {\n                for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n                    var rCodec = remoteCapabilities.codecs[i];\n                    if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n                        lCodec.clockRate === rCodec.clockRate) {\n                        if (lCodec.name.toLowerCase() === 'rtx' &&\n                            lCodec.parameters && rCodec.parameters.apt) {\n                            // for RTX we need to find the local rtx that has a apt\n                            // which points to the same local codec as the remote one.\n                            if (!rtxCapabilityMatches(lCodec, rCodec,\n                                localCapabilities.codecs, remoteCapabilities.codecs)) {\n                                continue;\n                            }\n                        }\n                        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n                        // number of channels is the highest common number of channels\n                        rCodec.numChannels = Math.min(lCodec.numChannels,\n                            rCodec.numChannels);\n                        // push rCodec so we reply with offerer payload type\n                        commonCapabilities.codecs.push(rCodec);\n\n                        // determine common feedback mechanisms\n                        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n                            for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n                                if (lCodec.rtcpFeedback[j].type === fb.type &&\n                                    lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n                                    return true;\n                                }\n                            }\n                            return false;\n                        });\n                        // FIXME: also need to determine .parameters\n                        //  see https://github.com/openpeer/ortc/issues/569\n                        break;\n                    }\n                }\n            });\n\n            localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n                for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n                     i++) {\n                    var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n                    if (lHeaderExtension.uri === rHeaderExtension.uri) {\n                        commonCapabilities.headerExtensions.push(rHeaderExtension);\n                        break;\n                    }\n                }\n            });\n\n            // FIXME: fecMechanisms\n            return commonCapabilities;\n        }\n\n// is action=setLocalDescription with type allowed in signalingState\n        function isActionAllowedInSignalingState(action, type, signalingState) {\n            return {\n                offer: {\n                    setLocalDescription: ['stable', 'have-local-offer'],\n                    setRemoteDescription: ['stable', 'have-remote-offer']\n                },\n                answer: {\n                    setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n                    setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n                }\n            }[type][action].indexOf(signalingState) !== -1;\n        }\n\n        module.exports = function(window, edgeVersion) {\n            var RTCPeerConnection = function(config) {\n                var self = this;\n\n                var _eventTarget = document.createDocumentFragment();\n                ['addEventListener', 'removeEventListener', 'dispatchEvent']\n                    .forEach(function(method) {\n                        self[method] = _eventTarget[method].bind(_eventTarget);\n                    });\n\n                this.needNegotiation = false;\n\n                this.onicecandidate = null;\n                this.onaddstream = null;\n                this.ontrack = null;\n                this.onremovestream = null;\n                this.onsignalingstatechange = null;\n                this.oniceconnectionstatechange = null;\n                this.onicegatheringstatechange = null;\n                this.onnegotiationneeded = null;\n                this.ondatachannel = null;\n                this.canTrickleIceCandidates = null;\n\n                this.localStreams = [];\n                this.remoteStreams = [];\n                this.getLocalStreams = function() {\n                    return self.localStreams;\n                };\n                this.getRemoteStreams = function() {\n                    return self.remoteStreams;\n                };\n\n                this.localDescription = new window.RTCSessionDescription({\n                    type: '',\n                    sdp: ''\n                });\n                this.remoteDescription = new window.RTCSessionDescription({\n                    type: '',\n                    sdp: ''\n                });\n                this.signalingState = 'stable';\n                this.iceConnectionState = 'new';\n                this.iceGatheringState = 'new';\n\n                this.iceOptions = {\n                    gatherPolicy: 'all',\n                    iceServers: []\n                };\n                if (config && config.iceTransportPolicy) {\n                    switch (config.iceTransportPolicy) {\n                        case 'all':\n                        case 'relay':\n                            this.iceOptions.gatherPolicy = config.iceTransportPolicy;\n                            break;\n                        default:\n                            // don't set iceTransportPolicy.\n                            break;\n                    }\n                }\n                this.usingBundle = config && config.bundlePolicy === 'max-bundle';\n\n                if (config && config.iceServers) {\n                    this.iceOptions.iceServers = filterIceServers(config.iceServers,\n                        edgeVersion);\n                }\n                this._config = config || {};\n\n                // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n                // everything that is needed to describe a SDP m-line.\n                this.transceivers = [];\n\n                // since the iceGatherer is currently created in createOffer but we\n                // must not emit candidates until after setLocalDescription we buffer\n                // them in this array.\n                this._localIceCandidatesBuffer = [];\n            };\n\n            RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n                var event = new Event('icegatheringstatechange');\n                this.dispatchEvent(event);\n                if (this.onicegatheringstatechange !== null) {\n                    this.onicegatheringstatechange(event);\n                }\n            };\n\n            RTCPeerConnection.prototype._emitBufferedCandidates = function() {\n                var self = this;\n                var sections = SDPUtils.splitSections(self.localDescription.sdp);\n                // FIXME: need to apply ice candidates in a way which is async but\n                // in-order\n                this._localIceCandidatesBuffer.forEach(function(event) {\n                    var end = !event.candidate || Object.keys(event.candidate).length === 0;\n                    if (end) {\n                        for (var j = 1; j < sections.length; j++) {\n                            if (sections[j].indexOf('\\r\\na=end-of-candidates\\r\\n') === -1) {\n                                sections[j] += 'a=end-of-candidates\\r\\n';\n                            }\n                        }\n                    } else {\n                        sections[event.candidate.sdpMLineIndex + 1] +=\n                            'a=' + event.candidate.candidate + '\\r\\n';\n                    }\n                    self.localDescription.sdp = sections.join('');\n                    self.dispatchEvent(event);\n                    if (self.onicecandidate !== null) {\n                        self.onicecandidate(event);\n                    }\n                    if (!event.candidate && self.iceGatheringState !== 'complete') {\n                        var complete = self.transceivers.every(function(transceiver) {\n                            return transceiver.iceGatherer &&\n                                transceiver.iceGatherer.state === 'completed';\n                        });\n                        if (complete && self.iceGatheringStateChange !== 'complete') {\n                            self.iceGatheringState = 'complete';\n                            self._emitGatheringStateChange();\n                        }\n                    }\n                });\n                this._localIceCandidatesBuffer = [];\n            };\n\n            RTCPeerConnection.prototype.getConfiguration = function() {\n                return this._config;\n            };\n\n            // internal helper to create a transceiver object.\n            // (whih is not yet the same as the WebRTC 1.0 transceiver)\n            RTCPeerConnection.prototype._createTransceiver = function(kind) {\n                var hasBundleTransport = this.transceivers.length > 0;\n                var transceiver = {\n                    track: null,\n                    iceGatherer: null,\n                    iceTransport: null,\n                    dtlsTransport: null,\n                    localCapabilities: null,\n                    remoteCapabilities: null,\n                    rtpSender: null,\n                    rtpReceiver: null,\n                    kind: kind,\n                    mid: null,\n                    sendEncodingParameters: null,\n                    recvEncodingParameters: null,\n                    stream: null,\n                    wantReceive: true\n                };\n                if (this.usingBundle && hasBundleTransport) {\n                    transceiver.iceTransport = this.transceivers[0].iceTransport;\n                    transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n                } else {\n                    var transports = this._createIceAndDtlsTransports();\n                    transceiver.iceTransport = transports.iceTransport;\n                    transceiver.dtlsTransport = transports.dtlsTransport;\n                }\n                this.transceivers.push(transceiver);\n                return transceiver;\n            };\n\n            RTCPeerConnection.prototype.addTrack = function(track, stream) {\n                var transceiver;\n                for (var i = 0; i < this.transceivers.length; i++) {\n                    if (!this.transceivers[i].track &&\n                        this.transceivers[i].kind === track.kind) {\n                        transceiver = this.transceivers[i];\n                    }\n                }\n                if (!transceiver) {\n                    transceiver = this._createTransceiver(track.kind);\n                }\n\n                transceiver.track = track;\n                transceiver.stream = stream;\n                transceiver.rtpSender = new window.RTCRtpSender(track,\n                    transceiver.dtlsTransport);\n\n                this._maybeFireNegotiationNeeded();\n                return transceiver.rtpSender;\n            };\n\n            RTCPeerConnection.prototype.addStream = function(stream) {\n                var self = this;\n                if (edgeVersion >= 15025) {\n                    this.localStreams.push(stream);\n                    stream.getTracks().forEach(function(track) {\n                        self.addTrack(track, stream);\n                    });\n                } else {\n                    // Clone is necessary for local demos mostly, attaching directly\n                    // to two different senders does not work (build 10547).\n                    // Fixed in 15025 (or earlier)\n                    var clonedStream = stream.clone();\n                    stream.getTracks().forEach(function(track, idx) {\n                        var clonedTrack = clonedStream.getTracks()[idx];\n                        track.addEventListener('enabled', function(event) {\n                            clonedTrack.enabled = event.enabled;\n                        });\n                    });\n                    clonedStream.getTracks().forEach(function(track) {\n                        self.addTrack(track, clonedStream);\n                    });\n                    this.localStreams.push(clonedStream);\n                }\n                this._maybeFireNegotiationNeeded();\n            };\n\n            RTCPeerConnection.prototype.removeStream = function(stream) {\n                var idx = this.localStreams.indexOf(stream);\n                if (idx > -1) {\n                    this.localStreams.splice(idx, 1);\n                    this._maybeFireNegotiationNeeded();\n                }\n            };\n\n            RTCPeerConnection.prototype.getSenders = function() {\n                return this.transceivers.filter(function(transceiver) {\n                    return !!transceiver.rtpSender;\n                })\n                    .map(function(transceiver) {\n                        return transceiver.rtpSender;\n                    });\n            };\n\n            RTCPeerConnection.prototype.getReceivers = function() {\n                return this.transceivers.filter(function(transceiver) {\n                    return !!transceiver.rtpReceiver;\n                })\n                    .map(function(transceiver) {\n                        return transceiver.rtpReceiver;\n                    });\n            };\n\n            // Create ICE gatherer and hook it up.\n            RTCPeerConnection.prototype._createIceGatherer = function(mid,\n                                                                      sdpMLineIndex) {\n                var self = this;\n                var iceGatherer = new window.RTCIceGatherer(self.iceOptions);\n                iceGatherer.onlocalcandidate = function(evt) {\n                    var event = new Event('icecandidate');\n                    event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n                    var cand = evt.candidate;\n                    var end = !cand || Object.keys(cand).length === 0;\n                    // Edge emits an empty object for RTCIceCandidateComplete\n                    if (end) {\n                        // polyfill since RTCIceGatherer.state is not implemented in\n                        // Edge 10547 yet.\n                        if (iceGatherer.state === undefined) {\n                            iceGatherer.state = 'completed';\n                        }\n                    } else {\n                        // RTCIceCandidate doesn't have a component, needs to be added\n                        cand.component = 1;\n                        event.candidate.candidate = SDPUtils.writeCandidate(cand);\n                    }\n\n                    // update local description.\n                    var sections = SDPUtils.splitSections(self.localDescription.sdp);\n                    if (!end) {\n                        sections[event.candidate.sdpMLineIndex + 1] +=\n                            'a=' + event.candidate.candidate + '\\r\\n';\n                    } else {\n                        sections[event.candidate.sdpMLineIndex + 1] +=\n                            'a=end-of-candidates\\r\\n';\n                    }\n                    self.localDescription.sdp = sections.join('');\n                    var transceivers = self._pendingOffer ? self._pendingOffer :\n                        self.transceivers;\n                    var complete = transceivers.every(function(transceiver) {\n                        return transceiver.iceGatherer &&\n                            transceiver.iceGatherer.state === 'completed';\n                    });\n\n                    // Emit candidate if localDescription is set.\n                    // Also emits null candidate when all gatherers are complete.\n                    switch (self.iceGatheringState) {\n                        case 'new':\n                            if (!end) {\n                                self._localIceCandidatesBuffer.push(event);\n                            }\n                            if (end && complete) {\n                                self._localIceCandidatesBuffer.push(\n                                    new Event('icecandidate'));\n                            }\n                            break;\n                        case 'gathering':\n                            self._emitBufferedCandidates();\n                            if (!end) {\n                                self.dispatchEvent(event);\n                                if (self.onicecandidate !== null) {\n                                    self.onicecandidate(event);\n                                }\n                            }\n                            if (complete) {\n                                self.dispatchEvent(new Event('icecandidate'));\n                                if (self.onicecandidate !== null) {\n                                    self.onicecandidate(new Event('icecandidate'));\n                                }\n                                self.iceGatheringState = 'complete';\n                                self._emitGatheringStateChange();\n                            }\n                            break;\n                        case 'complete':\n                            // should not happen... currently!\n                            break;\n                        default: // no-op.\n                            break;\n                    }\n                };\n                return iceGatherer;\n            };\n\n            // Create ICE transport and DTLS transport.\n            RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n                var self = this;\n                var iceTransport = new window.RTCIceTransport(null);\n                iceTransport.onicestatechange = function() {\n                    self._updateConnectionState();\n                };\n\n                var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n                dtlsTransport.ondtlsstatechange = function() {\n                    self._updateConnectionState();\n                };\n                dtlsTransport.onerror = function() {\n                    // onerror does not set state to failed by itself.\n                    Object.defineProperty(dtlsTransport, 'state',\n                        {value: 'failed', writable: true});\n                    self._updateConnectionState();\n                };\n\n                return {\n                    iceTransport: iceTransport,\n                    dtlsTransport: dtlsTransport\n                };\n            };\n\n            // Destroy ICE gatherer, ICE transport and DTLS transport.\n            // Without triggering the callbacks.\n            RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n                sdpMLineIndex) {\n                var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n                if (iceGatherer) {\n                    delete iceGatherer.onlocalcandidate;\n                    delete this.transceivers[sdpMLineIndex].iceGatherer;\n                }\n                var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n                if (iceTransport) {\n                    delete iceTransport.onicestatechange;\n                    delete this.transceivers[sdpMLineIndex].iceTransport;\n                }\n                var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n                if (dtlsTransport) {\n                    delete dtlsTransport.ondtlssttatechange;\n                    delete dtlsTransport.onerror;\n                    delete this.transceivers[sdpMLineIndex].dtlsTransport;\n                }\n            };\n\n            // Start the RTP Sender and Receiver for a transceiver.\n            RTCPeerConnection.prototype._transceive = function(transceiver,\n                                                               send, recv) {\n                var params = getCommonCapabilities(transceiver.localCapabilities,\n                    transceiver.remoteCapabilities);\n                if (send && transceiver.rtpSender) {\n                    params.encodings = transceiver.sendEncodingParameters;\n                    params.rtcp = {\n                        cname: SDPUtils.localCName,\n                        compound: transceiver.rtcpParameters.compound\n                    };\n                    if (transceiver.recvEncodingParameters.length) {\n                        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n                    }\n                    transceiver.rtpSender.send(params);\n                }\n                if (recv && transceiver.rtpReceiver) {\n                    // remove RTX field in Edge 14942\n                    if (transceiver.kind === 'video'\n                        && transceiver.recvEncodingParameters\n                        && edgeVersion < 15019) {\n                        transceiver.recvEncodingParameters.forEach(function(p) {\n                            delete p.rtx;\n                        });\n                    }\n                    params.encodings = transceiver.recvEncodingParameters;\n                    params.rtcp = {\n                        cname: transceiver.rtcpParameters.cname,\n                        compound: transceiver.rtcpParameters.compound\n                    };\n                    if (transceiver.sendEncodingParameters.length) {\n                        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n                    }\n                    transceiver.rtpReceiver.receive(params);\n                }\n            };\n\n            RTCPeerConnection.prototype.setLocalDescription = function(description) {\n                var self = this;\n\n                if (!isActionAllowedInSignalingState('setLocalDescription',\n                    description.type, this.signalingState)) {\n                    var e = new Error('Can not set local ' + description.type +\n                        ' in state ' + this.signalingState);\n                    e.name = 'InvalidStateError';\n                    if (arguments.length > 2 && typeof arguments[2] === 'function') {\n                        window.setTimeout(arguments[2], 0, e);\n                    }\n                    return Promise.reject(e);\n                }\n\n                var sections;\n                var sessionpart;\n                if (description.type === 'offer') {\n                    // FIXME: What was the purpose of this empty if statement?\n                    // if (!this._pendingOffer) {\n                    // } else {\n                    if (this._pendingOffer) {\n                        // VERY limited support for SDP munging. Limited to:\n                        // * changing the order of codecs\n                        sections = SDPUtils.splitSections(description.sdp);\n                        sessionpart = sections.shift();\n                        sections.forEach(function(mediaSection, sdpMLineIndex) {\n                            var caps = SDPUtils.parseRtpParameters(mediaSection);\n                            self._pendingOffer[sdpMLineIndex].localCapabilities = caps;\n                        });\n                        this.transceivers = this._pendingOffer;\n                        delete this._pendingOffer;\n                    }\n                } else if (description.type === 'answer') {\n                    sections = SDPUtils.splitSections(self.remoteDescription.sdp);\n                    sessionpart = sections.shift();\n                    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n                        'a=ice-lite').length > 0;\n                    sections.forEach(function(mediaSection, sdpMLineIndex) {\n                        var transceiver = self.transceivers[sdpMLineIndex];\n                        var iceGatherer = transceiver.iceGatherer;\n                        var iceTransport = transceiver.iceTransport;\n                        var dtlsTransport = transceiver.dtlsTransport;\n                        var localCapabilities = transceiver.localCapabilities;\n                        var remoteCapabilities = transceiver.remoteCapabilities;\n\n                        var rejected = SDPUtils.isRejected(mediaSection);\n\n                        if (!rejected && !transceiver.isDatachannel) {\n                            var remoteIceParameters = SDPUtils.getIceParameters(\n                                mediaSection, sessionpart);\n                            var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n                                mediaSection, sessionpart);\n                            if (isIceLite) {\n                                remoteDtlsParameters.role = 'server';\n                            }\n\n                            if (!self.usingBundle || sdpMLineIndex === 0) {\n                                iceTransport.start(iceGatherer, remoteIceParameters,\n                                    isIceLite ? 'controlling' : 'controlled');\n                                dtlsTransport.start(remoteDtlsParameters);\n                            }\n\n                            // Calculate intersection of capabilities.\n                            var params = getCommonCapabilities(localCapabilities,\n                                remoteCapabilities);\n\n                            // Start the RTCRtpSender. The RTCRtpReceiver for this\n                            // transceiver has already been started in setRemoteDescription.\n                            self._transceive(transceiver,\n                                params.codecs.length > 0,\n                                false);\n                        }\n                    });\n                }\n\n                this.localDescription = {\n                    type: description.type,\n                    sdp: description.sdp\n                };\n                switch (description.type) {\n                    case 'offer':\n                        this._updateSignalingState('have-local-offer');\n                        break;\n                    case 'answer':\n                        this._updateSignalingState('stable');\n                        break;\n                    default:\n                        throw new TypeError('unsupported type \"' + description.type +\n                            '\"');\n                }\n\n                // If a success callback was provided, emit ICE candidates after it\n                // has been executed. Otherwise, emit callback after the Promise is\n                // resolved.\n                var hasCallback = arguments.length > 1 &&\n                    typeof arguments[1] === 'function';\n                if (hasCallback) {\n                    var cb = arguments[1];\n                    window.setTimeout(function() {\n                        cb();\n                        if (self.iceGatheringState === 'new') {\n                            self.iceGatheringState = 'gathering';\n                            self._emitGatheringStateChange();\n                        }\n                        self._emitBufferedCandidates();\n                    }, 0);\n                }\n                var p = Promise.resolve();\n                p.then(function() {\n                    if (!hasCallback) {\n                        if (self.iceGatheringState === 'new') {\n                            self.iceGatheringState = 'gathering';\n                            self._emitGatheringStateChange();\n                        }\n                        // Usually candidates will be emitted earlier.\n                        window.setTimeout(self._emitBufferedCandidates.bind(self), 500);\n                    }\n                });\n                return p;\n            };\n\n            RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n                var self = this;\n\n                if (!isActionAllowedInSignalingState('setRemoteDescription',\n                    description.type, this.signalingState)) {\n                    var e = new Error('Can not set remote ' + description.type +\n                        ' in state ' + this.signalingState);\n                    e.name = 'InvalidStateError';\n                    if (arguments.length > 2 && typeof arguments[2] === 'function') {\n                        window.setTimeout(arguments[2], 0, e);\n                    }\n                    return Promise.reject(e);\n                }\n\n                var streams = {};\n                var receiverList = [];\n                var sections = SDPUtils.splitSections(description.sdp);\n                var sessionpart = sections.shift();\n                var isIceLite = SDPUtils.matchPrefix(sessionpart,\n                    'a=ice-lite').length > 0;\n                var usingBundle = SDPUtils.matchPrefix(sessionpart,\n                    'a=group:BUNDLE ').length > 0;\n                this.usingBundle = usingBundle;\n                var iceOptions = SDPUtils.matchPrefix(sessionpart,\n                    'a=ice-options:')[0];\n                if (iceOptions) {\n                    this.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n                        .indexOf('trickle') >= 0;\n                } else {\n                    this.canTrickleIceCandidates = false;\n                }\n\n                sections.forEach(function(mediaSection, sdpMLineIndex) {\n                    var lines = SDPUtils.splitLines(mediaSection);\n                    var kind = SDPUtils.getKind(mediaSection);\n                    var rejected = SDPUtils.isRejected(mediaSection);\n                    var protocol = lines[0].substr(2).split(' ')[2];\n\n                    var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n                    var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n                    var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n                    // Reject datachannels which are not implemented yet.\n                    if (kind === 'application' && protocol === 'DTLS/SCTP') {\n                        self.transceivers[sdpMLineIndex] = {\n                            mid: mid,\n                            isDatachannel: true\n                        };\n                        return;\n                    }\n\n                    var transceiver;\n                    var iceGatherer;\n                    var iceTransport;\n                    var dtlsTransport;\n                    var rtpReceiver;\n                    var sendEncodingParameters;\n                    var recvEncodingParameters;\n                    var localCapabilities;\n\n                    var track;\n                    // FIXME: ensure the mediaSection has rtcp-mux set.\n                    var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n                    var remoteIceParameters;\n                    var remoteDtlsParameters;\n                    if (!rejected) {\n                        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n                            sessionpart);\n                        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n                            sessionpart);\n                        remoteDtlsParameters.role = 'client';\n                    }\n                    recvEncodingParameters =\n                        SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n                    var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n                    var isComplete = SDPUtils.matchPrefix(mediaSection,\n                        'a=end-of-candidates', sessionpart).length > 0;\n                    var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n                        .map(function(cand) {\n                            return SDPUtils.parseCandidate(cand);\n                        })\n                        .filter(function(cand) {\n                            return cand.component === '1' || cand.component === 1;\n                        });\n\n                    // Check if we can use BUNDLE and dispose transports.\n                    if ((description.type === 'offer' || description.type === 'answer') &&\n                        !rejected && usingBundle && sdpMLineIndex > 0 &&\n                        self.transceivers[sdpMLineIndex]) {\n                        self._disposeIceAndDtlsTransports(sdpMLineIndex);\n                        self.transceivers[sdpMLineIndex].iceGatherer =\n                            self.transceivers[0].iceGatherer;\n                        self.transceivers[sdpMLineIndex].iceTransport =\n                            self.transceivers[0].iceTransport;\n                        self.transceivers[sdpMLineIndex].dtlsTransport =\n                            self.transceivers[0].dtlsTransport;\n                        if (self.transceivers[sdpMLineIndex].rtpSender) {\n                            self.transceivers[sdpMLineIndex].rtpSender.setTransport(\n                                self.transceivers[0].dtlsTransport);\n                        }\n                        if (self.transceivers[sdpMLineIndex].rtpReceiver) {\n                            self.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n                                self.transceivers[0].dtlsTransport);\n                        }\n                    }\n                    if (description.type === 'offer' && !rejected) {\n                        transceiver = self.transceivers[sdpMLineIndex] ||\n                            self._createTransceiver(kind);\n                        transceiver.mid = mid;\n\n                        if (!transceiver.iceGatherer) {\n                            transceiver.iceGatherer = usingBundle && sdpMLineIndex > 0 ?\n                                self.transceivers[0].iceGatherer :\n                                self._createIceGatherer(mid, sdpMLineIndex);\n                        }\n\n                        if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n                            transceiver.iceTransport.setRemoteCandidates(cands);\n                        }\n\n                        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n                        // filter RTX until additional stuff needed for RTX is implemented\n                        // in adapter.js\n                        if (edgeVersion < 15019) {\n                            localCapabilities.codecs = localCapabilities.codecs.filter(\n                                function(codec) {\n                                    return codec.name !== 'rtx';\n                                });\n                        }\n\n                        sendEncodingParameters = [{\n                            ssrc: (2 * sdpMLineIndex + 2) * 1001\n                        }];\n\n                        if (direction === 'sendrecv' || direction === 'sendonly') {\n                            rtpReceiver = new window.RTCRtpReceiver(transceiver.dtlsTransport,\n                                kind);\n\n                            track = rtpReceiver.track;\n                            // FIXME: does not work with Plan B.\n                            if (remoteMsid) {\n                                if (!streams[remoteMsid.stream]) {\n                                    streams[remoteMsid.stream] = new window.MediaStream();\n                                    Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                                        get: function() {\n                                            return remoteMsid.stream;\n                                        }\n                                    });\n                                }\n                                Object.defineProperty(track, 'id', {\n                                    get: function() {\n                                        return remoteMsid.track;\n                                    }\n                                });\n                                streams[remoteMsid.stream].addTrack(track);\n                                receiverList.push([track, rtpReceiver,\n                                    streams[remoteMsid.stream]]);\n                            } else {\n                                if (!streams.default) {\n                                    streams.default = new window.MediaStream();\n                                }\n                                streams.default.addTrack(track);\n                                receiverList.push([track, rtpReceiver, streams.default]);\n                            }\n                        }\n\n                        transceiver.localCapabilities = localCapabilities;\n                        transceiver.remoteCapabilities = remoteCapabilities;\n                        transceiver.rtpReceiver = rtpReceiver;\n                        transceiver.rtcpParameters = rtcpParameters;\n                        transceiver.sendEncodingParameters = sendEncodingParameters;\n                        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n                        // Start the RTCRtpReceiver now. The RTPSender is started in\n                        // setLocalDescription.\n                        self._transceive(self.transceivers[sdpMLineIndex],\n                            false,\n                            direction === 'sendrecv' || direction === 'sendonly');\n                    } else if (description.type === 'answer' && !rejected) {\n                        transceiver = self.transceivers[sdpMLineIndex];\n                        iceGatherer = transceiver.iceGatherer;\n                        iceTransport = transceiver.iceTransport;\n                        dtlsTransport = transceiver.dtlsTransport;\n                        rtpReceiver = transceiver.rtpReceiver;\n                        sendEncodingParameters = transceiver.sendEncodingParameters;\n                        localCapabilities = transceiver.localCapabilities;\n\n                        self.transceivers[sdpMLineIndex].recvEncodingParameters =\n                            recvEncodingParameters;\n                        self.transceivers[sdpMLineIndex].remoteCapabilities =\n                            remoteCapabilities;\n                        self.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n                        if ((isIceLite || isComplete) && cands.length) {\n                            iceTransport.setRemoteCandidates(cands);\n                        }\n                        if (!usingBundle || sdpMLineIndex === 0) {\n                            iceTransport.start(iceGatherer, remoteIceParameters,\n                                'controlling');\n                            dtlsTransport.start(remoteDtlsParameters);\n                        }\n\n                        self._transceive(transceiver,\n                            direction === 'sendrecv' || direction === 'recvonly',\n                            direction === 'sendrecv' || direction === 'sendonly');\n\n                        if (rtpReceiver &&\n                            (direction === 'sendrecv' || direction === 'sendonly')) {\n                            track = rtpReceiver.track;\n                            if (remoteMsid) {\n                                if (!streams[remoteMsid.stream]) {\n                                    streams[remoteMsid.stream] = new window.MediaStream();\n                                }\n                                streams[remoteMsid.stream].addTrack(track);\n                                receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n                            } else {\n                                if (!streams.default) {\n                                    streams.default = new window.MediaStream();\n                                }\n                                streams.default.addTrack(track);\n                                receiverList.push([track, rtpReceiver, streams.default]);\n                            }\n                        } else {\n                            // FIXME: actually the receiver should be created later.\n                            delete transceiver.rtpReceiver;\n                        }\n                    }\n                });\n\n                this.remoteDescription = {\n                    type: description.type,\n                    sdp: description.sdp\n                };\n                switch (description.type) {\n                    case 'offer':\n                        this._updateSignalingState('have-remote-offer');\n                        break;\n                    case 'answer':\n                        this._updateSignalingState('stable');\n                        break;\n                    default:\n                        throw new TypeError('unsupported type \"' + description.type +\n                            '\"');\n                }\n                Object.keys(streams).forEach(function(sid) {\n                    var stream = streams[sid];\n                    if (stream.getTracks().length) {\n                        self.remoteStreams.push(stream);\n                        var event = new Event('addstream');\n                        event.stream = stream;\n                        self.dispatchEvent(event);\n                        if (self.onaddstream !== null) {\n                            window.setTimeout(function() {\n                                self.onaddstream(event);\n                            }, 0);\n                        }\n\n                        receiverList.forEach(function(item) {\n                            var track = item[0];\n                            var receiver = item[1];\n                            if (stream.id !== item[2].id) {\n                                return;\n                            }\n                            var trackEvent = new Event('track');\n                            trackEvent.track = track;\n                            trackEvent.receiver = receiver;\n                            trackEvent.streams = [stream];\n                            self.dispatchEvent(trackEvent);\n                            if (self.ontrack !== null) {\n                                window.setTimeout(function() {\n                                    self.ontrack(trackEvent);\n                                }, 0);\n                            }\n                        });\n                    }\n                });\n\n                // check whether addIceCandidate({}) was called within four seconds after\n                // setRemoteDescription.\n                window.setTimeout(function() {\n                    if (!(self && self.transceivers)) {\n                        return;\n                    }\n                    self.transceivers.forEach(function(transceiver) {\n                        if (transceiver.iceTransport &&\n                            transceiver.iceTransport.state === 'new' &&\n                            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n                            console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n                                'an end-of-candidates notification');\n                            transceiver.iceTransport.addRemoteCandidate({});\n                        }\n                    });\n                }, 4000);\n\n                if (arguments.length > 1 && typeof arguments[1] === 'function') {\n                    window.setTimeout(arguments[1], 0);\n                }\n                return Promise.resolve();\n            };\n\n            RTCPeerConnection.prototype.close = function() {\n                this.transceivers.forEach(function(transceiver) {\n                    /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n                    if (transceiver.iceTransport) {\n                        transceiver.iceTransport.stop();\n                    }\n                    if (transceiver.dtlsTransport) {\n                        transceiver.dtlsTransport.stop();\n                    }\n                    if (transceiver.rtpSender) {\n                        transceiver.rtpSender.stop();\n                    }\n                    if (transceiver.rtpReceiver) {\n                        transceiver.rtpReceiver.stop();\n                    }\n                });\n                // FIXME: clean up tracks, local streams, remote streams, etc\n                this._updateSignalingState('closed');\n            };\n\n            // Update the signaling state.\n            RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n                this.signalingState = newState;\n                var event = new Event('signalingstatechange');\n                this.dispatchEvent(event);\n                if (this.onsignalingstatechange !== null) {\n                    this.onsignalingstatechange(event);\n                }\n            };\n\n            // Determine whether to fire the negotiationneeded event.\n            RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n                var self = this;\n                if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n                    return;\n                }\n                this.needNegotiation = true;\n                window.setTimeout(function() {\n                    if (self.needNegotiation === false) {\n                        return;\n                    }\n                    self.needNegotiation = false;\n                    var event = new Event('negotiationneeded');\n                    self.dispatchEvent(event);\n                    if (self.onnegotiationneeded !== null) {\n                        self.onnegotiationneeded(event);\n                    }\n                }, 0);\n            };\n\n            // Update the connection state.\n            RTCPeerConnection.prototype._updateConnectionState = function() {\n                var self = this;\n                var newState;\n                var states = {\n                    'new': 0,\n                    closed: 0,\n                    connecting: 0,\n                    checking: 0,\n                    connected: 0,\n                    completed: 0,\n                    disconnected: 0,\n                    failed: 0\n                };\n                this.transceivers.forEach(function(transceiver) {\n                    states[transceiver.iceTransport.state]++;\n                    states[transceiver.dtlsTransport.state]++;\n                });\n                // ICETransport.completed and connected are the same for this purpose.\n                states.connected += states.completed;\n\n                newState = 'new';\n                if (states.failed > 0) {\n                    newState = 'failed';\n                } else if (states.connecting > 0 || states.checking > 0) {\n                    newState = 'connecting';\n                } else if (states.disconnected > 0) {\n                    newState = 'disconnected';\n                } else if (states.new > 0) {\n                    newState = 'new';\n                } else if (states.connected > 0 || states.completed > 0) {\n                    newState = 'connected';\n                }\n\n                if (newState !== self.iceConnectionState) {\n                    self.iceConnectionState = newState;\n                    var event = new Event('iceconnectionstatechange');\n                    this.dispatchEvent(event);\n                    if (this.oniceconnectionstatechange !== null) {\n                        this.oniceconnectionstatechange(event);\n                    }\n                }\n            };\n\n            RTCPeerConnection.prototype.createOffer = function() {\n                var self = this;\n                if (this._pendingOffer) {\n                    throw new Error('createOffer called while there is a pending offer.');\n                }\n                var offerOptions;\n                if (arguments.length === 1 && typeof arguments[0] !== 'function') {\n                    offerOptions = arguments[0];\n                } else if (arguments.length === 3) {\n                    offerOptions = arguments[2];\n                }\n\n                var numAudioTracks = this.transceivers.filter(function(t) {\n                    return t.kind === 'audio';\n                }).length;\n                var numVideoTracks = this.transceivers.filter(function(t) {\n                    return t.kind === 'video';\n                }).length;\n\n                // Determine number of audio and video tracks we need to send/recv.\n                if (offerOptions) {\n                    // Reject Chrome legacy constraints.\n                    if (offerOptions.mandatory || offerOptions.optional) {\n                        throw new TypeError(\n                            'Legacy mandatory/optional constraints not supported.');\n                    }\n                    if (offerOptions.offerToReceiveAudio !== undefined) {\n                        if (offerOptions.offerToReceiveAudio === true) {\n                            numAudioTracks = 1;\n                        } else if (offerOptions.offerToReceiveAudio === false) {\n                            numAudioTracks = 0;\n                        } else {\n                            numAudioTracks = offerOptions.offerToReceiveAudio;\n                        }\n                    }\n                    if (offerOptions.offerToReceiveVideo !== undefined) {\n                        if (offerOptions.offerToReceiveVideo === true) {\n                            numVideoTracks = 1;\n                        } else if (offerOptions.offerToReceiveVideo === false) {\n                            numVideoTracks = 0;\n                        } else {\n                            numVideoTracks = offerOptions.offerToReceiveVideo;\n                        }\n                    }\n                }\n\n                this.transceivers.forEach(function(transceiver) {\n                    if (transceiver.kind === 'audio') {\n                        numAudioTracks--;\n                        if (numAudioTracks < 0) {\n                            transceiver.wantReceive = false;\n                        }\n                    } else if (transceiver.kind === 'video') {\n                        numVideoTracks--;\n                        if (numVideoTracks < 0) {\n                            transceiver.wantReceive = false;\n                        }\n                    }\n                });\n\n                // Create M-lines for recvonly streams.\n                while (numAudioTracks > 0 || numVideoTracks > 0) {\n                    if (numAudioTracks > 0) {\n                        this._createTransceiver('audio');\n                        numAudioTracks--;\n                    }\n                    if (numVideoTracks > 0) {\n                        this._createTransceiver('video');\n                        numVideoTracks--;\n                    }\n                }\n                // reorder tracks\n                var transceivers = sortTracks(this.transceivers);\n\n                var sdp = SDPUtils.writeSessionBoilerplate();\n                transceivers.forEach(function(transceiver, sdpMLineIndex) {\n                    // For each track, create an ice gatherer, ice transport,\n                    // dtls transport, potentially rtpsender and rtpreceiver.\n                    var track = transceiver.track;\n                    var kind = transceiver.kind;\n                    var mid = SDPUtils.generateIdentifier();\n                    transceiver.mid = mid;\n\n                    if (!transceiver.iceGatherer) {\n                        transceiver.iceGatherer = self.usingBundle && sdpMLineIndex > 0 ?\n                            transceivers[0].iceGatherer :\n                            self._createIceGatherer(mid, sdpMLineIndex);\n                    }\n\n                    var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n                    // filter RTX until additional stuff needed for RTX is implemented\n                    // in adapter.js\n                    if (edgeVersion < 15019) {\n                        localCapabilities.codecs = localCapabilities.codecs.filter(\n                            function(codec) {\n                                return codec.name !== 'rtx';\n                            });\n                    }\n                    localCapabilities.codecs.forEach(function(codec) {\n                        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n                        // by adding level-asymmetry-allowed=1\n                        if (codec.name === 'H264' &&\n                            codec.parameters['level-asymmetry-allowed'] === undefined) {\n                            codec.parameters['level-asymmetry-allowed'] = '1';\n                        }\n                    });\n\n                    // generate an ssrc now, to be used later in rtpSender.send\n                    var sendEncodingParameters = [{\n                        ssrc: (2 * sdpMLineIndex + 1) * 1001\n                    }];\n                    if (track) {\n                        // add RTX\n                        if (edgeVersion >= 15019 && kind === 'video') {\n                            sendEncodingParameters[0].rtx = {\n                                ssrc: (2 * sdpMLineIndex + 1) * 1001 + 1\n                            };\n                        }\n                    }\n\n                    if (transceiver.wantReceive) {\n                        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n                            transceiver.dtlsTransport,\n                            kind\n                        );\n                    }\n\n                    transceiver.localCapabilities = localCapabilities;\n                    transceiver.sendEncodingParameters = sendEncodingParameters;\n                });\n\n                // always offer BUNDLE and dispose on return if not supported.\n                if (this._config.bundlePolicy !== 'max-compat') {\n                    sdp += 'a=group:BUNDLE ' + transceivers.map(function(t) {\n                        return t.mid;\n                    }).join(' ') + '\\r\\n';\n                }\n                sdp += 'a=ice-options:trickle\\r\\n';\n\n                transceivers.forEach(function(transceiver, sdpMLineIndex) {\n                    sdp += SDPUtils.writeMediaSection(transceiver,\n                        transceiver.localCapabilities, 'offer', transceiver.stream);\n                    sdp += 'a=rtcp-rsize\\r\\n';\n                });\n\n                this._pendingOffer = transceivers;\n                var desc = new window.RTCSessionDescription({\n                    type: 'offer',\n                    sdp: sdp\n                });\n                if (arguments.length && typeof arguments[0] === 'function') {\n                    window.setTimeout(arguments[0], 0, desc);\n                }\n                return Promise.resolve(desc);\n            };\n\n            RTCPeerConnection.prototype.createAnswer = function() {\n                var sdp = SDPUtils.writeSessionBoilerplate();\n                if (this.usingBundle) {\n                    sdp += 'a=group:BUNDLE ' + this.transceivers.map(function(t) {\n                        return t.mid;\n                    }).join(' ') + '\\r\\n';\n                }\n                this.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n                    if (transceiver.isDatachannel) {\n                        sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n' +\n                            'c=IN IP4 0.0.0.0\\r\\n' +\n                            'a=mid:' + transceiver.mid + '\\r\\n';\n                        return;\n                    }\n\n                    // FIXME: look at direction.\n                    if (transceiver.stream) {\n                        var localTrack;\n                        if (transceiver.kind === 'audio') {\n                            localTrack = transceiver.stream.getAudioTracks()[0];\n                        } else if (transceiver.kind === 'video') {\n                            localTrack = transceiver.stream.getVideoTracks()[0];\n                        }\n                        if (localTrack) {\n                            // add RTX\n                            if (edgeVersion >= 15019 && transceiver.kind === 'video') {\n                                transceiver.sendEncodingParameters[0].rtx = {\n                                    ssrc: (2 * sdpMLineIndex + 2) * 1001 + 1\n                                };\n                            }\n                        }\n                    }\n\n                    // Calculate intersection of capabilities.\n                    var commonCapabilities = getCommonCapabilities(\n                        transceiver.localCapabilities,\n                        transceiver.remoteCapabilities);\n\n                    var hasRtx = commonCapabilities.codecs.filter(function(c) {\n                        return c.name.toLowerCase() === 'rtx';\n                    }).length;\n                    if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n                        delete transceiver.sendEncodingParameters[0].rtx;\n                    }\n\n                    sdp += SDPUtils.writeMediaSection(transceiver, commonCapabilities,\n                        'answer', transceiver.stream);\n                    if (transceiver.rtcpParameters &&\n                        transceiver.rtcpParameters.reducedSize) {\n                        sdp += 'a=rtcp-rsize\\r\\n';\n                    }\n                });\n\n                var desc = new window.RTCSessionDescription({\n                    type: 'answer',\n                    sdp: sdp\n                });\n                if (arguments.length && typeof arguments[0] === 'function') {\n                    window.setTimeout(arguments[0], 0, desc);\n                }\n                return Promise.resolve(desc);\n            };\n\n            RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n                if (!candidate) {\n                    for (var j = 0; j < this.transceivers.length; j++) {\n                        this.transceivers[j].iceTransport.addRemoteCandidate({});\n                        if (this.usingBundle) {\n                            return Promise.resolve();\n                        }\n                    }\n                } else {\n                    var mLineIndex = candidate.sdpMLineIndex;\n                    if (candidate.sdpMid) {\n                        for (var i = 0; i < this.transceivers.length; i++) {\n                            if (this.transceivers[i].mid === candidate.sdpMid) {\n                                mLineIndex = i;\n                                break;\n                            }\n                        }\n                    }\n                    var transceiver = this.transceivers[mLineIndex];\n                    if (transceiver) {\n                        var cand = Object.keys(candidate.candidate).length > 0 ?\n                            SDPUtils.parseCandidate(candidate.candidate) : {};\n                        // Ignore Chrome's invalid candidates since Edge does not like them.\n                        if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n                            return Promise.resolve();\n                        }\n                        // Ignore RTCP candidates, we assume RTCP-MUX.\n                        if (cand.component &&\n                            !(cand.component === '1' || cand.component === 1)) {\n                            return Promise.resolve();\n                        }\n                        transceiver.iceTransport.addRemoteCandidate(cand);\n\n                        // update the remoteDescription.\n                        var sections = SDPUtils.splitSections(this.remoteDescription.sdp);\n                        sections[mLineIndex + 1] += (cand.type ? candidate.candidate.trim()\n                            : 'a=end-of-candidates') + '\\r\\n';\n                        this.remoteDescription.sdp = sections.join('');\n                    }\n                }\n                if (arguments.length > 1 && typeof arguments[1] === 'function') {\n                    window.setTimeout(arguments[1], 0);\n                }\n                return Promise.resolve();\n            };\n\n            RTCPeerConnection.prototype.getStats = function() {\n                var promises = [];\n                this.transceivers.forEach(function(transceiver) {\n                    ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n                        'dtlsTransport'].forEach(function(method) {\n                        if (transceiver[method]) {\n                            promises.push(transceiver[method].getStats());\n                        }\n                    });\n                });\n                var cb = arguments.length > 1 && typeof arguments[1] === 'function' &&\n                    arguments[1];\n                var fixStatsType = function(stat) {\n                    return {\n                        inboundrtp: 'inbound-rtp',\n                        outboundrtp: 'outbound-rtp',\n                        candidatepair: 'candidate-pair',\n                        localcandidate: 'local-candidate',\n                        remotecandidate: 'remote-candidate'\n                    }[stat.type] || stat.type;\n                };\n                return new Promise(function(resolve) {\n                    // shim getStats with maplike support\n                    var results = new Map();\n                    Promise.all(promises).then(function(res) {\n                        res.forEach(function(result) {\n                            Object.keys(result).forEach(function(id) {\n                                result[id].type = fixStatsType(result[id]);\n                                results.set(id, result[id]);\n                            });\n                        });\n                        if (cb) {\n                            window.setTimeout(cb, 0, results);\n                        }\n                        resolve(results);\n                    });\n                });\n            };\n            return RTCPeerConnection;\n        };\n\n    },{\"sdp\":1}],9:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n        var utils = require('../utils');\n\n        var firefoxShim = {\n            shimOnTrack: function(window) {\n                if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n                    window.RTCPeerConnection.prototype)) {\n                    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n                        get: function() {\n                            return this._ontrack;\n                        },\n                        set: function(f) {\n                            if (this._ontrack) {\n                                this.removeEventListener('track', this._ontrack);\n                                this.removeEventListener('addstream', this._ontrackpoly);\n                            }\n                            this.addEventListener('track', this._ontrack = f);\n                            this.addEventListener('addstream', this._ontrackpoly = function(e) {\n                                e.stream.getTracks().forEach(function(track) {\n                                    var event = new Event('track');\n                                    event.track = track;\n                                    event.receiver = {track: track};\n                                    event.streams = [e.stream];\n                                    this.dispatchEvent(event);\n                                }.bind(this));\n                            }.bind(this));\n                        }\n                    });\n                }\n            },\n\n            shimSourceObject: function(window) {\n                // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n                if (typeof window === 'object') {\n                    if (window.HTMLMediaElement &&\n                        !('srcObject' in window.HTMLMediaElement.prototype)) {\n                        // Shim the srcObject property, once, when HTMLMediaElement is found.\n                        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n                            get: function() {\n                                return this.mozSrcObject;\n                            },\n                            set: function(stream) {\n                                this.mozSrcObject = stream;\n                            }\n                        });\n                    }\n                }\n            },\n\n            shimPeerConnection: function(window) {\n                var browserDetails = utils.detectBrowser(window);\n\n                if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n                    window.mozRTCPeerConnection)) {\n                    return; // probably media.peerconnection.enabled=false in about:config\n                }\n                // The RTCPeerConnection object.\n                if (!window.RTCPeerConnection) {\n                    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n                        if (browserDetails.version < 38) {\n                            // .urls is not supported in FF < 38.\n                            // create RTCIceServers with a single url.\n                            if (pcConfig && pcConfig.iceServers) {\n                                var newIceServers = [];\n                                for (var i = 0; i < pcConfig.iceServers.length; i++) {\n                                    var server = pcConfig.iceServers[i];\n                                    if (server.hasOwnProperty('urls')) {\n                                        for (var j = 0; j < server.urls.length; j++) {\n                                            var newServer = {\n                                                url: server.urls[j]\n                                            };\n                                            if (server.urls[j].indexOf('turn') === 0) {\n                                                newServer.username = server.username;\n                                                newServer.credential = server.credential;\n                                            }\n                                            newIceServers.push(newServer);\n                                        }\n                                    } else {\n                                        newIceServers.push(pcConfig.iceServers[i]);\n                                    }\n                                }\n                                pcConfig.iceServers = newIceServers;\n                            }\n                        }\n                        return new window.mozRTCPeerConnection(pcConfig, pcConstraints);\n                    };\n                    window.RTCPeerConnection.prototype =\n                        window.mozRTCPeerConnection.prototype;\n\n                    // wrap static methods. Currently just generateCertificate.\n                    if (window.mozRTCPeerConnection.generateCertificate) {\n                        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                            get: function() {\n                                return window.mozRTCPeerConnection.generateCertificate;\n                            }\n                        });\n                    }\n\n                    window.RTCSessionDescription = window.mozRTCSessionDescription;\n                    window.RTCIceCandidate = window.mozRTCIceCandidate;\n                }\n\n                // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n                ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n                    .forEach(function(method) {\n                        var nativeMethod = window.RTCPeerConnection.prototype[method];\n                        window.RTCPeerConnection.prototype[method] = function() {\n                            arguments[0] = new ((method === 'addIceCandidate') ?\n                                window.RTCIceCandidate :\n                                window.RTCSessionDescription)(arguments[0]);\n                            return nativeMethod.apply(this, arguments);\n                        };\n                    });\n\n                // support for addIceCandidate(null or undefined)\n                var nativeAddIceCandidate =\n                    window.RTCPeerConnection.prototype.addIceCandidate;\n                window.RTCPeerConnection.prototype.addIceCandidate = function() {\n                    if (!arguments[0]) {\n                        if (arguments[1]) {\n                            arguments[1].apply(null);\n                        }\n                        return Promise.resolve();\n                    }\n                    return nativeAddIceCandidate.apply(this, arguments);\n                };\n\n                // shim getStats with maplike support\n                var makeMapStats = function(stats) {\n                    var map = new Map();\n                    Object.keys(stats).forEach(function(key) {\n                        map.set(key, stats[key]);\n                        map[key] = stats[key];\n                    });\n                    return map;\n                };\n\n                var modernStatsTypes = {\n                    inboundrtp: 'inbound-rtp',\n                    outboundrtp: 'outbound-rtp',\n                    candidatepair: 'candidate-pair',\n                    localcandidate: 'local-candidate',\n                    remotecandidate: 'remote-candidate'\n                };\n\n                var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n                window.RTCPeerConnection.prototype.getStats = function(\n                    selector,\n                    onSucc,\n                    onErr\n                ) {\n                    return nativeGetStats.apply(this, [selector || null])\n                        .then(function(stats) {\n                            if (browserDetails.version < 48) {\n                                stats = makeMapStats(stats);\n                            }\n                            if (browserDetails.version < 53 && !onSucc) {\n                                // Shim only promise getStats with spec-hyphens in type names\n                                // Leave callback version alone; misc old uses of forEach before Map\n                                try {\n                                    stats.forEach(function(stat) {\n                                        stat.type = modernStatsTypes[stat.type] || stat.type;\n                                    });\n                                } catch (e) {\n                                    if (e.name !== 'TypeError') {\n                                        throw e;\n                                    }\n                                    // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n                                    stats.forEach(function(stat, i) {\n                                        stats.set(i, Object.assign({}, stat, {\n                                            type: modernStatsTypes[stat.type] || stat.type\n                                        }));\n                                    });\n                                }\n                            }\n                            return stats;\n                        })\n                        .then(onSucc, onErr);\n                };\n            }\n        };\n\n// Expose public methods.\n        module.exports = {\n            shimOnTrack: firefoxShim.shimOnTrack,\n            shimSourceObject: firefoxShim.shimSourceObject,\n            shimPeerConnection: firefoxShim.shimPeerConnection,\n            shimGetUserMedia: require('./getusermedia')\n        };\n\n    },{\"../utils\":12,\"./getusermedia\":10}],10:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n        var utils = require('../utils');\n        var logging = utils.log;\n\n// Expose public methods.\n        module.exports = function(window) {\n            var browserDetails = utils.detectBrowser(window);\n            var navigator = window && window.navigator;\n            var MediaStreamTrack = window && window.MediaStreamTrack;\n\n            var shimError_ = function(e) {\n                return {\n                    name: {\n                        InternalError: 'NotReadableError',\n                        NotSupportedError: 'TypeError',\n                        PermissionDeniedError: 'NotAllowedError',\n                        SecurityError: 'NotAllowedError'\n                    }[e.name] || e.name,\n                    message: {\n                        'The operation is insecure.': 'The request is not allowed by the ' +\n                        'user agent or the platform in the current context.'\n                    }[e.message] || e.message,\n                    constraint: e.constraint,\n                    toString: function() {\n                        return this.name + (this.message && ': ') + this.message;\n                    }\n                };\n            };\n\n            // getUserMedia constraints shim.\n            var getUserMedia_ = function(constraints, onSuccess, onError) {\n                var constraintsToFF37_ = function(c) {\n                    if (typeof c !== 'object' || c.require) {\n                        return c;\n                    }\n                    var require = [];\n                    Object.keys(c).forEach(function(key) {\n                        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n                            return;\n                        }\n                        var r = c[key] = (typeof c[key] === 'object') ?\n                            c[key] : {ideal: c[key]};\n                        if (r.min !== undefined ||\n                            r.max !== undefined || r.exact !== undefined) {\n                            require.push(key);\n                        }\n                        if (r.exact !== undefined) {\n                            if (typeof r.exact === 'number') {\n                                r. min = r.max = r.exact;\n                            } else {\n                                c[key] = r.exact;\n                            }\n                            delete r.exact;\n                        }\n                        if (r.ideal !== undefined) {\n                            c.advanced = c.advanced || [];\n                            var oc = {};\n                            if (typeof r.ideal === 'number') {\n                                oc[key] = {min: r.ideal, max: r.ideal};\n                            } else {\n                                oc[key] = r.ideal;\n                            }\n                            c.advanced.push(oc);\n                            delete r.ideal;\n                            if (!Object.keys(r).length) {\n                                delete c[key];\n                            }\n                        }\n                    });\n                    if (require.length) {\n                        c.require = require;\n                    }\n                    return c;\n                };\n                constraints = JSON.parse(JSON.stringify(constraints));\n                if (browserDetails.version < 38) {\n                    logging('spec: ' + JSON.stringify(constraints));\n                    if (constraints.audio) {\n                        constraints.audio = constraintsToFF37_(constraints.audio);\n                    }\n                    if (constraints.video) {\n                        constraints.video = constraintsToFF37_(constraints.video);\n                    }\n                    logging('ff37: ' + JSON.stringify(constraints));\n                }\n                return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\n                    onError(shimError_(e));\n                });\n            };\n\n            // Returns the result of getUserMedia as a Promise.\n            var getUserMediaPromise_ = function(constraints) {\n                return new Promise(function(resolve, reject) {\n                    getUserMedia_(constraints, resolve, reject);\n                });\n            };\n\n            // Shim for mediaDevices on older versions.\n            if (!navigator.mediaDevices) {\n                navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n                    addEventListener: function() { },\n                    removeEventListener: function() { }\n                };\n            }\n            navigator.mediaDevices.enumerateDevices =\n                navigator.mediaDevices.enumerateDevices || function() {\n                    return new Promise(function(resolve) {\n                        var infos = [\n                            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n                            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n                        ];\n                        resolve(infos);\n                    });\n                };\n\n            if (browserDetails.version < 41) {\n                // Work around http://bugzil.la/1169665\n                var orgEnumerateDevices =\n                    navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n                navigator.mediaDevices.enumerateDevices = function() {\n                    return orgEnumerateDevices().then(undefined, function(e) {\n                        if (e.name === 'NotFoundError') {\n                            return [];\n                        }\n                        throw e;\n                    });\n                };\n            }\n            if (browserDetails.version < 49) {\n                var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n                bind(navigator.mediaDevices);\n                navigator.mediaDevices.getUserMedia = function(c) {\n                    return origGetUserMedia(c).then(function(stream) {\n                        // Work around https://bugzil.la/802326\n                        if (c.audio && !stream.getAudioTracks().length ||\n                            c.video && !stream.getVideoTracks().length) {\n                            stream.getTracks().forEach(function(track) {\n                                track.stop();\n                            });\n                            throw new DOMException('The object can not be found here.',\n                                'NotFoundError');\n                        }\n                        return stream;\n                    }, function(e) {\n                        return Promise.reject(shimError_(e));\n                    });\n                };\n            }\n            if (!(browserDetails.version > 55 &&\n                'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n                var remap = function(obj, a, b) {\n                    if (a in obj && !(b in obj)) {\n                        obj[b] = obj[a];\n                        delete obj[a];\n                    }\n                };\n\n                var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n                bind(navigator.mediaDevices);\n                navigator.mediaDevices.getUserMedia = function(c) {\n                    if (typeof c === 'object' && typeof c.audio === 'object') {\n                        c = JSON.parse(JSON.stringify(c));\n                        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n                        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n                    }\n                    return nativeGetUserMedia(c);\n                };\n\n                if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n                    var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n                    MediaStreamTrack.prototype.getSettings = function() {\n                        var obj = nativeGetSettings.apply(this, arguments);\n                        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n                        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n                        return obj;\n                    };\n                }\n\n                if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n                    var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n                    MediaStreamTrack.prototype.applyConstraints = function(c) {\n                        if (this.kind === 'audio' && typeof c === 'object') {\n                            c = JSON.parse(JSON.stringify(c));\n                            remap(c, 'autoGainControl', 'mozAutoGainControl');\n                            remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n                        }\n                        return nativeApplyConstraints.apply(this, [c]);\n                    };\n                }\n            }\n            navigator.getUserMedia = function(constraints, onSuccess, onError) {\n                if (browserDetails.version < 44) {\n                    return getUserMedia_(constraints, onSuccess, onError);\n                }\n                // Replace Firefox 44+'s deprecation warning with unprefixed version.\n                console.warn('navigator.getUserMedia has been replaced by ' +\n                    'navigator.mediaDevices.getUserMedia');\n                navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n            };\n        };\n\n    },{\"../utils\":12}],11:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        'use strict';\n        var safariShim = {\n            // TODO: DrAlex, should be here, double check against LayoutTests\n\n            // TODO: once the back-end for the mac port is done, add.\n            // TODO: check for webkitGTK+\n            // shimPeerConnection: function() { },\n\n            shimAddStream: function(window) {\n                if (typeof window === 'object' && window.RTCPeerConnection &&\n                    !('addStream' in window.RTCPeerConnection.prototype)) {\n                    window.RTCPeerConnection.prototype.addStream = function(stream) {\n                        var self = this;\n                        stream.getTracks().forEach(function(track) {\n                            self.addTrack(track, stream);\n                        });\n                    };\n                }\n            },\n            shimOnAddStream: function(window) {\n                if (typeof window === 'object' && window.RTCPeerConnection &&\n                    !('onaddstream' in window.RTCPeerConnection.prototype)) {\n                    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n                        get: function() {\n                            return this._onaddstream;\n                        },\n                        set: function(f) {\n                            if (this._onaddstream) {\n                                this.removeEventListener('addstream', this._onaddstream);\n                                this.removeEventListener('track', this._onaddstreampoly);\n                            }\n                            this.addEventListener('addstream', this._onaddstream = f);\n                            this.addEventListener('track', this._onaddstreampoly = function(e) {\n                                var stream = e.streams[0];\n                                if (!this._streams) {\n                                    this._streams = [];\n                                }\n                                if (this._streams.indexOf(stream) >= 0) {\n                                    return;\n                                }\n                                this._streams.push(stream);\n                                var event = new Event('addstream');\n                                event.stream = e.streams[0];\n                                this.dispatchEvent(event);\n                            }.bind(this));\n                        }\n                    });\n                }\n            },\n            shimCallbacksAPI: function(window) {\n                if (typeof window !== 'object' || !window.RTCPeerConnection) {\n                    return;\n                }\n                var prototype = window.RTCPeerConnection.prototype;\n                var createOffer = prototype.createOffer;\n                var createAnswer = prototype.createAnswer;\n                var setLocalDescription = prototype.setLocalDescription;\n                var setRemoteDescription = prototype.setRemoteDescription;\n                var addIceCandidate = prototype.addIceCandidate;\n\n                prototype.createOffer = function(successCallback, failureCallback) {\n                    var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n                    var promise = createOffer.apply(this, [options]);\n                    if (!failureCallback) {\n                        return promise;\n                    }\n                    promise.then(successCallback, failureCallback);\n                    return Promise.resolve();\n                };\n\n                prototype.createAnswer = function(successCallback, failureCallback) {\n                    var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n                    var promise = createAnswer.apply(this, [options]);\n                    if (!failureCallback) {\n                        return promise;\n                    }\n                    promise.then(successCallback, failureCallback);\n                    return Promise.resolve();\n                };\n\n                var withCallback = function(description, successCallback, failureCallback) {\n                    var promise = setLocalDescription.apply(this, [description]);\n                    if (!failureCallback) {\n                        return promise;\n                    }\n                    promise.then(successCallback, failureCallback);\n                    return Promise.resolve();\n                };\n                prototype.setLocalDescription = withCallback;\n\n                withCallback = function(description, successCallback, failureCallback) {\n                    var promise = setRemoteDescription.apply(this, [description]);\n                    if (!failureCallback) {\n                        return promise;\n                    }\n                    promise.then(successCallback, failureCallback);\n                    return Promise.resolve();\n                };\n                prototype.setRemoteDescription = withCallback;\n\n                withCallback = function(candidate, successCallback, failureCallback) {\n                    var promise = addIceCandidate.apply(this, [candidate]);\n                    if (!failureCallback) {\n                        return promise;\n                    }\n                    promise.then(successCallback, failureCallback);\n                    return Promise.resolve();\n                };\n                prototype.addIceCandidate = withCallback;\n            },\n            shimGetUserMedia: function(window) {\n                var navigator = window && window.navigator;\n\n                if (!navigator.getUserMedia) {\n                    if (navigator.webkitGetUserMedia) {\n                        navigator.getUserMedia = navigator.webkitGetUserMedia.bind(navigator);\n                    } else if (navigator.mediaDevices &&\n                        navigator.mediaDevices.getUserMedia) {\n                        navigator.getUserMedia = function(constraints, cb, errcb) {\n                            navigator.mediaDevices.getUserMedia(constraints)\n                                .then(cb, errcb);\n                        }.bind(navigator);\n                    }\n                }\n            }\n        };\n\n// Expose public methods.\n        module.exports = {\n            shimCallbacksAPI: safariShim.shimCallbacksAPI,\n            shimAddStream: safariShim.shimAddStream,\n            shimOnAddStream: safariShim.shimOnAddStream,\n            shimGetUserMedia: safariShim.shimGetUserMedia\n            // TODO\n            // shimPeerConnection: safariShim.shimPeerConnection\n        };\n\n    },{}],12:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n        var logDisabled_ = true;\n\n// Utility methods.\n        var utils = {\n            disableLog: function(bool) {\n                if (typeof bool !== 'boolean') {\n                    return new Error('Argument type: ' + typeof bool +\n                        '. Please use a boolean.');\n                }\n                logDisabled_ = bool;\n                return (bool) ? 'adapter.js logging disabled' :\n                    'adapter.js logging enabled';\n            },\n\n            log: function() {\n                if (typeof window === 'object') {\n                    if (logDisabled_) {\n                        return;\n                    }\n                    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n                        console.log.apply(console, arguments);\n                    }\n                }\n            },\n\n            /**\n             * Extract browser version out of the provided user agent string.\n             *\n             * @param {!string} uastring userAgent string.\n             * @param {!string} expr Regular expression used as match criteria.\n             * @param {!number} pos position in the version string to be returned.\n             * @return {!number} browser version.\n             */\n            extractVersion: function(uastring, expr, pos) {\n                var match = uastring.match(expr);\n                return match && match.length >= pos && parseInt(match[pos], 10);\n            },\n\n            /**\n             * Browser detector.\n             *\n             * @return {object} result containing browser and version\n             *     properties.\n             */\n            detectBrowser: function(window) {\n                var navigator = window && window.navigator;\n\n                // Returned result object.\n                var result = {};\n                result.browser = null;\n                result.version = null;\n\n                // Fail early if it's not a browser\n                if (typeof window === 'undefined' || !window.navigator) {\n                    result.browser = 'Not a browser.';\n                    return result;\n                }\n\n                // Firefox.\n                if (navigator.mozGetUserMedia) {\n                    result.browser = 'firefox';\n                    result.version = this.extractVersion(navigator.userAgent,\n                        /Firefox\\/(\\d+)\\./, 1);\n                } else if (navigator.webkitGetUserMedia) {\n                    // Chrome, Chromium, Webview, Opera, all use the chrome shim for now\n                    if (window.webkitRTCPeerConnection) {\n                        result.browser = 'chrome';\n                        result.version = this.extractVersion(navigator.userAgent,\n                            /Chrom(e|ium)\\/(\\d+)\\./, 2);\n                    } else { // Safari (in an unpublished version) or unknown webkit-based.\n                        if (navigator.userAgent.match(/Version\\/(\\d+).(\\d+)/)) {\n                            result.browser = 'safari';\n                            result.version = this.extractVersion(navigator.userAgent,\n                                /AppleWebKit\\/(\\d+)\\./, 1);\n                        } else { // unknown webkit-based browser.\n                            result.browser = 'Unsupported webkit-based browser ' +\n                                'with GUM support but no WebRTC support.';\n                            return result;\n                        }\n                    }\n                } else if (navigator.mediaDevices &&\n                    navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n                    result.browser = 'edge';\n                    result.version = this.extractVersion(navigator.userAgent,\n                        /Edge\\/(\\d+).(\\d+)$/, 2);\n                } else if (navigator.mediaDevices &&\n                    navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n                    // Safari, with webkitGetUserMedia removed.\n                    result.browser = 'safari';\n                    result.version = this.extractVersion(navigator.userAgent,\n                        /AppleWebKit\\/(\\d+)\\./, 1);\n                } else { // Default fallthrough: not supported.\n                    result.browser = 'Not a supported browser.';\n                    return result;\n                }\n\n                return result;\n            },\n\n            // shimCreateObjectURL must be called before shimSourceObject to avoid loop.\n\n            shimCreateObjectURL: function(window) {\n                var URL = window && window.URL;\n\n                if (!(typeof window === 'object' && window.HTMLMediaElement &&\n                    'srcObject' in window.HTMLMediaElement.prototype)) {\n                    // Only shim CreateObjectURL using srcObject if srcObject exists.\n                    return undefined;\n                }\n\n                var nativeCreateObjectURL = URL.createObjectURL.bind(URL);\n                var nativeRevokeObjectURL = URL.revokeObjectURL.bind(URL);\n                var streams = new Map(), newId = 0;\n\n                URL.createObjectURL = function(stream) {\n                    if ('getTracks' in stream) {\n                        var url = 'polyblob:' + (++newId);\n                        streams.set(url, stream);\n                        console.log('URL.createObjectURL(stream) is deprecated! ' +\n                            'Use elem.srcObject = stream instead!');\n                        return url;\n                    }\n                    return nativeCreateObjectURL(stream);\n                };\n                URL.revokeObjectURL = function(url) {\n                    nativeRevokeObjectURL(url);\n                    streams.delete(url);\n                };\n\n                var dsc = Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,\n                    'src');\n                Object.defineProperty(window.HTMLMediaElement.prototype, 'src', {\n                    get: function() {\n                        return dsc.get.apply(this);\n                    },\n                    set: function(url) {\n                        this.srcObject = streams.get(url) || null;\n                        return dsc.set.apply(this, [url]);\n                    }\n                });\n\n                var nativeSetAttribute = window.HTMLMediaElement.prototype.setAttribute;\n                window.HTMLMediaElement.prototype.setAttribute = function() {\n                    if (arguments.length === 2 &&\n                        ('' + arguments[0]).toLowerCase() === 'src') {\n                        this.srcObject = streams.get(arguments[1]) || null;\n                    }\n                    return nativeSetAttribute.apply(this, arguments);\n                };\n            }\n        };\n\n// Export.\n        module.exports = {\n            log: utils.log,\n            disableLog: utils.disableLog,\n            extractVersion: utils.extractVersion,\n            shimCreateObjectURL: utils.shimCreateObjectURL,\n            detectBrowser: utils.detectBrowser.bind(utils)\n        };\n\n    },{}]},{},[2])(2)\n});\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.SimpleWebRTC = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n        module.exports = after\n\n        function after(count, callback, err_cb) {\n            var bail = false\n            err_cb = err_cb || noop\n            proxy.count = count\n\n            return (count === 0) ? callback() : proxy\n\n            function proxy(err, result) {\n                if (proxy.count <= 0) {\n                    throw new Error('after called too many times')\n                }\n                --proxy.count\n\n                // after first error, rest are passed to err_cb\n                if (err) {\n                    bail = true\n                    callback(err)\n                    // future error callbacks will go to error handler\n                    callback = err_cb\n                } else if (proxy.count === 0 && !bail) {\n                    callback(null, result)\n                }\n            }\n        }\n\n        function noop() {}\n\n    },{}],2:[function(require,module,exports){\n        /**\n         * An abstraction for slicing an arraybuffer even when\n         * ArrayBuffer.prototype.slice is not supported\n         *\n         * @api public\n         */\n\n        module.exports = function(arraybuffer, start, end) {\n            var bytes = arraybuffer.byteLength;\n            start = start || 0;\n            end = end || bytes;\n\n            if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n            if (start < 0) { start += bytes; }\n            if (end < 0) { end += bytes; }\n            if (end > bytes) { end = bytes; }\n\n            if (start >= bytes || start >= end || bytes === 0) {\n                return new ArrayBuffer(0);\n            }\n\n            var abv = new Uint8Array(arraybuffer);\n            var result = new Uint8Array(end - start);\n            for (var i = start, ii = 0; i < end; i++, ii++) {\n                result[ii] = abv[i];\n            }\n            return result.buffer;\n        };\n\n    },{}],3:[function(require,module,exports){\n        var adapter = require('webrtc-adapter');\n        module.exports = function (stream, el, options) {\n            var item;\n            var URL = window.URL;\n            var element = el;\n            var opts = {\n                autoplay: true,\n                mirror: false,\n                muted: false,\n                audio: false,\n                disableContextMenu: false\n            };\n\n            if (options) {\n                for (item in options) {\n                    opts[item] = options[item];\n                }\n            }\n\n            if (!element) {\n                element = document.createElement(opts.audio ? 'audio' : 'video');\n            } else if (element.tagName.toLowerCase() === 'audio') {\n                opts.audio = true;\n            }\n\n            if (opts.disableContextMenu) {\n                element.oncontextmenu = function (e) {\n                    e.preventDefault();\n                };\n            }\n\n            if (opts.autoplay) element.autoplay = 'autoplay';\n            if (opts.muted) element.muted = true;\n            if (!opts.audio && opts.mirror) {\n                ['', 'moz', 'webkit', 'o', 'ms'].forEach(function (prefix) {\n                    var styleName = prefix ? prefix + 'Transform' : 'transform';\n                    element.style[styleName] = 'scaleX(-1)';\n                });\n            }\n\n            element.srcObject = stream;\n            return element;\n        };\n\n    },{\"webrtc-adapter\":4}],4:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n\n        'use strict';\n\n// Shimming starts here.\n        (function() {\n            // Utils.\n            var logging = require('./utils').log;\n            var browserDetails = require('./utils').browserDetails;\n            // Export to the adapter global object visible in the browser.\n            module.exports.browserDetails = browserDetails;\n            module.exports.extractVersion = require('./utils').extractVersion;\n            module.exports.disableLog = require('./utils').disableLog;\n\n            // Uncomment the line below if you want logging to occur, including logging\n            // for the switch statement below. Can also be turned on in the browser via\n            // adapter.disableLog(false), but then logging from the switch statement below\n            // will not appear.\n            // require('./utils').disableLog(false);\n\n            // Browser shims.\n            var chromeShim = require('./chrome/chrome_shim') || null;\n            var edgeShim = require('./edge/edge_shim') || null;\n            var firefoxShim = require('./firefox/firefox_shim') || null;\n            var safariShim = require('./safari/safari_shim') || null;\n\n            // Shim browser if found.\n            switch (browserDetails.browser) {\n                case 'opera': // fallthrough as it uses chrome shims\n                case 'chrome':\n                    if (!chromeShim || !chromeShim.shimPeerConnection) {\n                        logging('Chrome shim is not included in this adapter release.');\n                        return;\n                    }\n                    logging('adapter.js shimming chrome.');\n                    // Export to the adapter global object visible in the browser.\n                    module.exports.browserShim = chromeShim;\n\n                    chromeShim.shimGetUserMedia();\n                    chromeShim.shimMediaStream();\n                    chromeShim.shimSourceObject();\n                    chromeShim.shimPeerConnection();\n                    chromeShim.shimOnTrack();\n                    break;\n                case 'firefox':\n                    if (!firefoxShim || !firefoxShim.shimPeerConnection) {\n                        logging('Firefox shim is not included in this adapter release.');\n                        return;\n                    }\n                    logging('adapter.js shimming firefox.');\n                    // Export to the adapter global object visible in the browser.\n                    module.exports.browserShim = firefoxShim;\n\n                    firefoxShim.shimGetUserMedia();\n                    firefoxShim.shimSourceObject();\n                    firefoxShim.shimPeerConnection();\n                    firefoxShim.shimOnTrack();\n                    break;\n                case 'edge':\n                    if (!edgeShim || !edgeShim.shimPeerConnection) {\n                        logging('MS edge shim is not included in this adapter release.');\n                        return;\n                    }\n                    logging('adapter.js shimming edge.');\n                    // Export to the adapter global object visible in the browser.\n                    module.exports.browserShim = edgeShim;\n\n                    edgeShim.shimGetUserMedia();\n                    edgeShim.shimPeerConnection();\n                    break;\n                case 'safari':\n                    if (!safariShim) {\n                        logging('Safari shim is not included in this adapter release.');\n                        return;\n                    }\n                    logging('adapter.js shimming safari.');\n                    // Export to the adapter global object visible in the browser.\n                    module.exports.browserShim = safariShim;\n\n                    safariShim.shimGetUserMedia();\n                    break;\n                default:\n                    logging('Unsupported browser!');\n            }\n        })();\n\n    },{\"./chrome/chrome_shim\":5,\"./edge/edge_shim\":7,\"./firefox/firefox_shim\":9,\"./safari/safari_shim\":11,\"./utils\":12}],5:[function(require,module,exports){\n\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n        var logging = require('../utils.js').log;\n        var browserDetails = require('../utils.js').browserDetails;\n\n        var chromeShim = {\n            shimMediaStream: function() {\n                window.MediaStream = window.MediaStream || window.webkitMediaStream;\n            },\n\n            shimOnTrack: function() {\n                if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n                    window.RTCPeerConnection.prototype)) {\n                    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n                        get: function() {\n                            return this._ontrack;\n                        },\n                        set: function(f) {\n                            var self = this;\n                            if (this._ontrack) {\n                                this.removeEventListener('track', this._ontrack);\n                                this.removeEventListener('addstream', this._ontrackpoly);\n                            }\n                            this.addEventListener('track', this._ontrack = f);\n                            this.addEventListener('addstream', this._ontrackpoly = function(e) {\n                                // onaddstream does not fire when a track is added to an existing\n                                // stream. But stream.onaddtrack is implemented so we use that.\n                                e.stream.addEventListener('addtrack', function(te) {\n                                    var event = new Event('track');\n                                    event.track = te.track;\n                                    event.receiver = {track: te.track};\n                                    event.streams = [e.stream];\n                                    self.dispatchEvent(event);\n                                });\n                                e.stream.getTracks().forEach(function(track) {\n                                    var event = new Event('track');\n                                    event.track = track;\n                                    event.receiver = {track: track};\n                                    event.streams = [e.stream];\n                                    this.dispatchEvent(event);\n                                }.bind(this));\n                            }.bind(this));\n                        }\n                    });\n                }\n            },\n\n            shimSourceObject: function() {\n                if (typeof window === 'object') {\n                    if (window.HTMLMediaElement &&\n                        !('srcObject' in window.HTMLMediaElement.prototype)) {\n                        // Shim the srcObject property, once, when HTMLMediaElement is found.\n                        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n                            get: function() {\n                                return this._srcObject;\n                            },\n                            set: function(stream) {\n                                var self = this;\n                                // Use _srcObject as a private property for this shim\n                                this._srcObject = stream;\n                                if (this.src) {\n                                    URL.revokeObjectURL(this.src);\n                                }\n\n                                if (!stream) {\n                                    this.src = '';\n                                    return;\n                                }\n                                this.src = URL.createObjectURL(stream);\n                                // We need to recreate the blob url when a track is added or\n                                // removed. Doing it manually since we want to avoid a recursion.\n                                stream.addEventListener('addtrack', function() {\n                                    if (self.src) {\n                                        URL.revokeObjectURL(self.src);\n                                    }\n                                    self.src = URL.createObjectURL(stream);\n                                });\n                                stream.addEventListener('removetrack', function() {\n                                    if (self.src) {\n                                        URL.revokeObjectURL(self.src);\n                                    }\n                                    self.src = URL.createObjectURL(stream);\n                                });\n                            }\n                        });\n                    }\n                }\n            },\n\n            shimPeerConnection: function() {\n                // The RTCPeerConnection object.\n                window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n                    // Translate iceTransportPolicy to iceTransports,\n                    // see https://code.google.com/p/webrtc/issues/detail?id=4869\n                    logging('PeerConnection');\n                    if (pcConfig && pcConfig.iceTransportPolicy) {\n                        pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n                    }\n\n                    var pc = new webkitRTCPeerConnection(pcConfig, pcConstraints);\n                    var origGetStats = pc.getStats.bind(pc);\n                    pc.getStats = function(selector, successCallback, errorCallback) {\n                        var self = this;\n                        var args = arguments;\n\n                        // If selector is a function then we are in the old style stats so just\n                        // pass back the original getStats format to avoid breaking old users.\n                        if (arguments.length > 0 && typeof selector === 'function') {\n                            return origGetStats(selector, successCallback);\n                        }\n\n                        var fixChromeStats_ = function(response) {\n                            var standardReport = {};\n                            var reports = response.result();\n                            reports.forEach(function(report) {\n                                var standardStats = {\n                                    id: report.id,\n                                    timestamp: report.timestamp,\n                                    type: report.type\n                                };\n                                report.names().forEach(function(name) {\n                                    standardStats[name] = report.stat(name);\n                                });\n                                standardReport[standardStats.id] = standardStats;\n                            });\n\n                            return standardReport;\n                        };\n\n                        // shim getStats with maplike support\n                        var makeMapStats = function(stats, legacyStats) {\n                            var map = new Map(Object.keys(stats).map(function(key) {\n                                return[key, stats[key]];\n                            }));\n                            legacyStats = legacyStats || stats;\n                            Object.keys(legacyStats).forEach(function(key) {\n                                map[key] = legacyStats[key];\n                            });\n                            return map;\n                        };\n\n                        if (arguments.length >= 2) {\n                            var successCallbackWrapper_ = function(response) {\n                                args[1](makeMapStats(fixChromeStats_(response)));\n                            };\n\n                            return origGetStats.apply(this, [successCallbackWrapper_,\n                                arguments[0]]);\n                        }\n\n                        // promise-support\n                        return new Promise(function(resolve, reject) {\n                            if (args.length === 1 && typeof selector === 'object') {\n                                origGetStats.apply(self, [\n                                    function(response) {\n                                        resolve(makeMapStats(fixChromeStats_(response)));\n                                    }, reject]);\n                            } else {\n                                // Preserve legacy chrome stats only on legacy access of stats obj\n                                origGetStats.apply(self, [\n                                    function(response) {\n                                        resolve(makeMapStats(fixChromeStats_(response),\n                                            response.result()));\n                                    }, reject]);\n                            }\n                        }).then(successCallback, errorCallback);\n                    };\n\n                    return pc;\n                };\n                window.RTCPeerConnection.prototype = webkitRTCPeerConnection.prototype;\n\n                // wrap static methods. Currently just generateCertificate.\n                if (webkitRTCPeerConnection.generateCertificate) {\n                    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                        get: function() {\n                            return webkitRTCPeerConnection.generateCertificate;\n                        }\n                    });\n                }\n\n                ['createOffer', 'createAnswer'].forEach(function(method) {\n                    var nativeMethod = webkitRTCPeerConnection.prototype[method];\n                    webkitRTCPeerConnection.prototype[method] = function() {\n                        var self = this;\n                        if (arguments.length < 1 || (arguments.length === 1 &&\n                            typeof arguments[0] === 'object')) {\n                            var opts = arguments.length === 1 ? arguments[0] : undefined;\n                            return new Promise(function(resolve, reject) {\n                                nativeMethod.apply(self, [resolve, reject, opts]);\n                            });\n                        }\n                        return nativeMethod.apply(this, arguments);\n                    };\n                });\n\n                // add promise support -- natively available in Chrome 51\n                if (browserDetails.version < 51) {\n                    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n                        .forEach(function(method) {\n                            var nativeMethod = webkitRTCPeerConnection.prototype[method];\n                            webkitRTCPeerConnection.prototype[method] = function() {\n                                var args = arguments;\n                                var self = this;\n                                var promise = new Promise(function(resolve, reject) {\n                                    nativeMethod.apply(self, [args[0], resolve, reject]);\n                                });\n                                if (args.length < 2) {\n                                    return promise;\n                                }\n                                return promise.then(function() {\n                                        args[1].apply(null, []);\n                                    },\n                                    function(err) {\n                                        if (args.length >= 3) {\n                                            args[2].apply(null, [err]);\n                                        }\n                                    });\n                            };\n                        });\n                }\n\n                // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n                ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n                    .forEach(function(method) {\n                        var nativeMethod = webkitRTCPeerConnection.prototype[method];\n                        webkitRTCPeerConnection.prototype[method] = function() {\n                            arguments[0] = new ((method === 'addIceCandidate') ?\n                                RTCIceCandidate : RTCSessionDescription)(arguments[0]);\n                            return nativeMethod.apply(this, arguments);\n                        };\n                    });\n\n                // support for addIceCandidate(null or undefined)\n                var nativeAddIceCandidate =\n                    RTCPeerConnection.prototype.addIceCandidate;\n                RTCPeerConnection.prototype.addIceCandidate = function() {\n                    if (!arguments[0]) {\n                        if (arguments[1]) {\n                            arguments[1].apply(null);\n                        }\n                        return Promise.resolve();\n                    }\n                    return nativeAddIceCandidate.apply(this, arguments);\n                };\n            }\n        };\n\n\n// Expose public methods.\n        module.exports = {\n            shimMediaStream: chromeShim.shimMediaStream,\n            shimOnTrack: chromeShim.shimOnTrack,\n            shimSourceObject: chromeShim.shimSourceObject,\n            shimPeerConnection: chromeShim.shimPeerConnection,\n            shimGetUserMedia: require('./getusermedia')\n        };\n\n    },{\"../utils.js\":12,\"./getusermedia\":6}],6:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n        var logging = require('../utils.js').log;\n\n// Expose public methods.\n        module.exports = function() {\n            var constraintsToChrome_ = function(c) {\n                if (typeof c !== 'object' || c.mandatory || c.optional) {\n                    return c;\n                }\n                var cc = {};\n                Object.keys(c).forEach(function(key) {\n                    if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n                        return;\n                    }\n                    var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n                    if (r.exact !== undefined && typeof r.exact === 'number') {\n                        r.min = r.max = r.exact;\n                    }\n                    var oldname_ = function(prefix, name) {\n                        if (prefix) {\n                            return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n                        }\n                        return (name === 'deviceId') ? 'sourceId' : name;\n                    };\n                    if (r.ideal !== undefined) {\n                        cc.optional = cc.optional || [];\n                        var oc = {};\n                        if (typeof r.ideal === 'number') {\n                            oc[oldname_('min', key)] = r.ideal;\n                            cc.optional.push(oc);\n                            oc = {};\n                            oc[oldname_('max', key)] = r.ideal;\n                            cc.optional.push(oc);\n                        } else {\n                            oc[oldname_('', key)] = r.ideal;\n                            cc.optional.push(oc);\n                        }\n                    }\n                    if (r.exact !== undefined && typeof r.exact !== 'number') {\n                        cc.mandatory = cc.mandatory || {};\n                        cc.mandatory[oldname_('', key)] = r.exact;\n                    } else {\n                        ['min', 'max'].forEach(function(mix) {\n                            if (r[mix] !== undefined) {\n                                cc.mandatory = cc.mandatory || {};\n                                cc.mandatory[oldname_(mix, key)] = r[mix];\n                            }\n                        });\n                    }\n                });\n                if (c.advanced) {\n                    cc.optional = (cc.optional || []).concat(c.advanced);\n                }\n                return cc;\n            };\n\n            var shimConstraints_ = function(constraints, func) {\n                constraints = JSON.parse(JSON.stringify(constraints));\n                if (constraints && constraints.audio) {\n                    constraints.audio = constraintsToChrome_(constraints.audio);\n                }\n                if (constraints && typeof constraints.video === 'object') {\n                    // Shim facingMode for mobile, where it defaults to \"user\".\n                    var face = constraints.video.facingMode;\n                    face = face && ((typeof face === 'object') ? face : {ideal: face});\n\n                    if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                        face.ideal === 'user' || face.ideal === 'environment')) &&\n                        !(navigator.mediaDevices.getSupportedConstraints &&\n                            navigator.mediaDevices.getSupportedConstraints().facingMode)) {\n                        delete constraints.video.facingMode;\n                        if (face.exact === 'environment' || face.ideal === 'environment') {\n                            // Look for \"back\" in label, or use last cam (typically back cam).\n                            return navigator.mediaDevices.enumerateDevices()\n                                .then(function(devices) {\n                                    devices = devices.filter(function(d) {\n                                        return d.kind === 'videoinput';\n                                    });\n                                    var back = devices.find(function(d) {\n                                        return d.label.toLowerCase().indexOf('back') !== -1;\n                                    }) || (devices.length && devices[devices.length - 1]);\n                                    if (back) {\n                                        constraints.video.deviceId = face.exact ? {exact: back.deviceId} :\n                                            {ideal: back.deviceId};\n                                    }\n                                    constraints.video = constraintsToChrome_(constraints.video);\n                                    logging('chrome: ' + JSON.stringify(constraints));\n                                    return func(constraints);\n                                });\n                        }\n                    }\n                    constraints.video = constraintsToChrome_(constraints.video);\n                }\n                logging('chrome: ' + JSON.stringify(constraints));\n                return func(constraints);\n            };\n\n            var shimError_ = function(e) {\n                return {\n                    name: {\n                        PermissionDeniedError: 'NotAllowedError',\n                        ConstraintNotSatisfiedError: 'OverconstrainedError'\n                    }[e.name] || e.name,\n                    message: e.message,\n                    constraint: e.constraintName,\n                    toString: function() {\n                        return this.name + (this.message && ': ') + this.message;\n                    }\n                };\n            };\n\n            var getUserMedia_ = function(constraints, onSuccess, onError) {\n                shimConstraints_(constraints, function(c) {\n                    navigator.webkitGetUserMedia(c, onSuccess, function(e) {\n                        onError(shimError_(e));\n                    });\n                });\n            };\n\n            navigator.getUserMedia = getUserMedia_;\n\n            // Returns the result of getUserMedia as a Promise.\n            var getUserMediaPromise_ = function(constraints) {\n                return new Promise(function(resolve, reject) {\n                    navigator.getUserMedia(constraints, resolve, reject);\n                });\n            };\n\n            if (!navigator.mediaDevices) {\n                navigator.mediaDevices = {\n                    getUserMedia: getUserMediaPromise_,\n                    enumerateDevices: function() {\n                        return new Promise(function(resolve) {\n                            var kinds = {audio: 'audioinput', video: 'videoinput'};\n                            return MediaStreamTrack.getSources(function(devices) {\n                                resolve(devices.map(function(device) {\n                                    return {label: device.label,\n                                        kind: kinds[device.kind],\n                                        deviceId: device.id,\n                                        groupId: ''};\n                                }));\n                            });\n                        });\n                    }\n                };\n            }\n\n            // A shim for getUserMedia method on the mediaDevices object.\n            // TODO(KaptenJansson) remove once implemented in Chrome stable.\n            if (!navigator.mediaDevices.getUserMedia) {\n                navigator.mediaDevices.getUserMedia = function(constraints) {\n                    return getUserMediaPromise_(constraints);\n                };\n            } else {\n                // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n                // function which returns a Promise, it does not accept spec-style\n                // constraints.\n                var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n                bind(navigator.mediaDevices);\n                navigator.mediaDevices.getUserMedia = function(cs) {\n                    return shimConstraints_(cs, function(c) {\n                        return origGetUserMedia(c).then(function(stream) {\n                            if (c.audio && !stream.getAudioTracks().length ||\n                                c.video && !stream.getVideoTracks().length) {\n                                stream.getTracks().forEach(function(track) {\n                                    track.stop();\n                                });\n                                throw new DOMException('', 'NotFoundError');\n                            }\n                            return stream;\n                        }, function(e) {\n                            return Promise.reject(shimError_(e));\n                        });\n                    });\n                };\n            }\n\n            // Dummy devicechange event methods.\n            // TODO(KaptenJansson) remove once implemented in Chrome stable.\n            if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n                navigator.mediaDevices.addEventListener = function() {\n                    logging('Dummy mediaDevices.addEventListener called.');\n                };\n            }\n            if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n                navigator.mediaDevices.removeEventListener = function() {\n                    logging('Dummy mediaDevices.removeEventListener called.');\n                };\n            }\n        };\n\n    },{\"../utils.js\":12}],7:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n        var SDPUtils = require('sdp');\n        var browserDetails = require('../utils').browserDetails;\n\n        var edgeShim = {\n            shimPeerConnection: function() {\n                if (window.RTCIceGatherer) {\n                    // ORTC defines an RTCIceCandidate object but no constructor.\n                    // Not implemented in Edge.\n                    if (!window.RTCIceCandidate) {\n                        window.RTCIceCandidate = function(args) {\n                            return args;\n                        };\n                    }\n                    // ORTC does not have a session description object but\n                    // other browsers (i.e. Chrome) that will support both PC and ORTC\n                    // in the future might have this defined already.\n                    if (!window.RTCSessionDescription) {\n                        window.RTCSessionDescription = function(args) {\n                            return args;\n                        };\n                    }\n                    // this adds an additional event listener to MediaStrackTrack that signals\n                    // when a tracks enabled property was changed.\n                    var origMSTEnabled = Object.getOwnPropertyDescriptor(\n                        MediaStreamTrack.prototype, 'enabled');\n                    Object.defineProperty(MediaStreamTrack.prototype, 'enabled', {\n                        set: function(value) {\n                            origMSTEnabled.set.call(this, value);\n                            var ev = new Event('enabled');\n                            ev.enabled = value;\n                            this.dispatchEvent(ev);\n                        }\n                    });\n                }\n\n                window.RTCPeerConnection = function(config) {\n                    var self = this;\n\n                    var _eventTarget = document.createDocumentFragment();\n                    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n                        .forEach(function(method) {\n                            self[method] = _eventTarget[method].bind(_eventTarget);\n                        });\n\n                    this.onicecandidate = null;\n                    this.onaddstream = null;\n                    this.ontrack = null;\n                    this.onremovestream = null;\n                    this.onsignalingstatechange = null;\n                    this.oniceconnectionstatechange = null;\n                    this.onnegotiationneeded = null;\n                    this.ondatachannel = null;\n\n                    this.localStreams = [];\n                    this.remoteStreams = [];\n                    this.getLocalStreams = function() {\n                        return self.localStreams;\n                    };\n                    this.getRemoteStreams = function() {\n                        return self.remoteStreams;\n                    };\n\n                    this.localDescription = new RTCSessionDescription({\n                        type: '',\n                        sdp: ''\n                    });\n                    this.remoteDescription = new RTCSessionDescription({\n                        type: '',\n                        sdp: ''\n                    });\n                    this.signalingState = 'stable';\n                    this.iceConnectionState = 'new';\n                    this.iceGatheringState = 'new';\n\n                    this.iceOptions = {\n                        gatherPolicy: 'all',\n                        iceServers: []\n                    };\n                    if (config && config.iceTransportPolicy) {\n                        switch (config.iceTransportPolicy) {\n                            case 'all':\n                            case 'relay':\n                                this.iceOptions.gatherPolicy = config.iceTransportPolicy;\n                                break;\n                            case 'none':\n                                // FIXME: remove once implementation and spec have added this.\n                                throw new TypeError('iceTransportPolicy \"none\" not supported');\n                            default:\n                                // don't set iceTransportPolicy.\n                                break;\n                        }\n                    }\n                    this.usingBundle = config && config.bundlePolicy === 'max-bundle';\n\n                    if (config && config.iceServers) {\n                        // Edge does not like\n                        // 1) stun:\n                        // 2) turn: that does not have all of turn:host:port?transport=udp\n                        // 3) turn: with ipv6 addresses\n                        var iceServers = JSON.parse(JSON.stringify(config.iceServers));\n                        this.iceOptions.iceServers = iceServers.filter(function(server) {\n                            if (server && server.urls) {\n                                var urls = server.urls;\n                                if (typeof urls === 'string') {\n                                    urls = [urls];\n                                }\n                                urls = urls.filter(function(url) {\n                                    return (url.indexOf('turn:') === 0 &&\n                                        url.indexOf('transport=udp') !== -1 &&\n                                        url.indexOf('turn:[') === -1) ||\n                                        (url.indexOf('stun:') === 0 &&\n                                            browserDetails.version >= 14393);\n                                })[0];\n                                return !!urls;\n                            }\n                            return false;\n                        });\n                    }\n                    this._config = config;\n\n                    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n                    // everything that is needed to describe a SDP m-line.\n                    this.transceivers = [];\n\n                    // since the iceGatherer is currently created in createOffer but we\n                    // must not emit candidates until after setLocalDescription we buffer\n                    // them in this array.\n                    this._localIceCandidatesBuffer = [];\n                };\n\n                window.RTCPeerConnection.prototype._emitBufferedCandidates = function() {\n                    var self = this;\n                    var sections = SDPUtils.splitSections(self.localDescription.sdp);\n                    // FIXME: need to apply ice candidates in a way which is async but\n                    // in-order\n                    this._localIceCandidatesBuffer.forEach(function(event) {\n                        var end = !event.candidate || Object.keys(event.candidate).length === 0;\n                        if (end) {\n                            for (var j = 1; j < sections.length; j++) {\n                                if (sections[j].indexOf('\\r\\na=end-of-candidates\\r\\n') === -1) {\n                                    sections[j] += 'a=end-of-candidates\\r\\n';\n                                }\n                            }\n                        } else if (event.candidate.candidate.indexOf('typ endOfCandidates')\n                            === -1) {\n                            sections[event.candidate.sdpMLineIndex + 1] +=\n                                'a=' + event.candidate.candidate + '\\r\\n';\n                        }\n                        self.localDescription.sdp = sections.join('');\n                        self.dispatchEvent(event);\n                        if (self.onicecandidate !== null) {\n                            self.onicecandidate(event);\n                        }\n                        if (!event.candidate && self.iceGatheringState !== 'complete') {\n                            var complete = self.transceivers.every(function(transceiver) {\n                                return transceiver.iceGatherer &&\n                                    transceiver.iceGatherer.state === 'completed';\n                            });\n                            if (complete) {\n                                self.iceGatheringState = 'complete';\n                            }\n                        }\n                    });\n                    this._localIceCandidatesBuffer = [];\n                };\n\n                window.RTCPeerConnection.prototype.getConfiguration = function() {\n                    return this._config;\n                };\n\n                window.RTCPeerConnection.prototype.addStream = function(stream) {\n                    // Clone is necessary for local demos mostly, attaching directly\n                    // to two different senders does not work (build 10547).\n                    var clonedStream = stream.clone();\n                    stream.getTracks().forEach(function(track, idx) {\n                        var clonedTrack = clonedStream.getTracks()[idx];\n                        track.addEventListener('enabled', function(event) {\n                            clonedTrack.enabled = event.enabled;\n                        });\n                    });\n                    this.localStreams.push(clonedStream);\n                    this._maybeFireNegotiationNeeded();\n                };\n\n                window.RTCPeerConnection.prototype.removeStream = function(stream) {\n                    var idx = this.localStreams.indexOf(stream);\n                    if (idx > -1) {\n                        this.localStreams.splice(idx, 1);\n                        this._maybeFireNegotiationNeeded();\n                    }\n                };\n\n                window.RTCPeerConnection.prototype.getSenders = function() {\n                    return this.transceivers.filter(function(transceiver) {\n                        return !!transceiver.rtpSender;\n                    })\n                        .map(function(transceiver) {\n                            return transceiver.rtpSender;\n                        });\n                };\n\n                window.RTCPeerConnection.prototype.getReceivers = function() {\n                    return this.transceivers.filter(function(transceiver) {\n                        return !!transceiver.rtpReceiver;\n                    })\n                        .map(function(transceiver) {\n                            return transceiver.rtpReceiver;\n                        });\n                };\n\n                // Determines the intersection of local and remote capabilities.\n                window.RTCPeerConnection.prototype._getCommonCapabilities =\n                    function(localCapabilities, remoteCapabilities) {\n                        var commonCapabilities = {\n                            codecs: [],\n                            headerExtensions: [],\n                            fecMechanisms: []\n                        };\n                        localCapabilities.codecs.forEach(function(lCodec) {\n                            for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n                                var rCodec = remoteCapabilities.codecs[i];\n                                if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n                                    lCodec.clockRate === rCodec.clockRate) {\n                                    // number of channels is the highest common number of channels\n                                    rCodec.numChannels = Math.min(lCodec.numChannels,\n                                        rCodec.numChannels);\n                                    // push rCodec so we reply with offerer payload type\n                                    commonCapabilities.codecs.push(rCodec);\n\n                                    // determine common feedback mechanisms\n                                    rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n                                        for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n                                            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                                                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n                                                return true;\n                                            }\n                                        }\n                                        return false;\n                                    });\n                                    // FIXME: also need to determine .parameters\n                                    //  see https://github.com/openpeer/ortc/issues/569\n                                    break;\n                                }\n                            }\n                        });\n\n                        localCapabilities.headerExtensions\n                            .forEach(function(lHeaderExtension) {\n                                for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n                                     i++) {\n                                    var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n                                    if (lHeaderExtension.uri === rHeaderExtension.uri) {\n                                        commonCapabilities.headerExtensions.push(rHeaderExtension);\n                                        break;\n                                    }\n                                }\n                            });\n\n                        // FIXME: fecMechanisms\n                        return commonCapabilities;\n                    };\n\n                // Create ICE gatherer, ICE transport and DTLS transport.\n                window.RTCPeerConnection.prototype._createIceAndDtlsTransports =\n                    function(mid, sdpMLineIndex) {\n                        var self = this;\n                        var iceGatherer = new RTCIceGatherer(self.iceOptions);\n                        var iceTransport = new RTCIceTransport(iceGatherer);\n                        iceGatherer.onlocalcandidate = function(evt) {\n                            var event = new Event('icecandidate');\n                            event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n                            var cand = evt.candidate;\n                            var end = !cand || Object.keys(cand).length === 0;\n                            // Edge emits an empty object for RTCIceCandidateComplete\n                            if (end) {\n                                // polyfill since RTCIceGatherer.state is not implemented in\n                                // Edge 10547 yet.\n                                if (iceGatherer.state === undefined) {\n                                    iceGatherer.state = 'completed';\n                                }\n\n                                // Emit a candidate with type endOfCandidates to make the samples\n                                // work. Edge requires addIceCandidate with this empty candidate\n                                // to start checking. The real solution is to signal\n                                // end-of-candidates to the other side when getting the null\n                                // candidate but some apps (like the samples) don't do that.\n                                event.candidate.candidate =\n                                    'candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates';\n                            } else {\n                                // RTCIceCandidate doesn't have a component, needs to be added\n                                cand.component = iceTransport.component === 'RTCP' ? 2 : 1;\n                                event.candidate.candidate = SDPUtils.writeCandidate(cand);\n                            }\n\n                            // update local description.\n                            var sections = SDPUtils.splitSections(self.localDescription.sdp);\n                            if (event.candidate.candidate.indexOf('typ endOfCandidates')\n                                === -1) {\n                                sections[event.candidate.sdpMLineIndex + 1] +=\n                                    'a=' + event.candidate.candidate + '\\r\\n';\n                            } else {\n                                sections[event.candidate.sdpMLineIndex + 1] +=\n                                    'a=end-of-candidates\\r\\n';\n                            }\n                            self.localDescription.sdp = sections.join('');\n\n                            var complete = self.transceivers.every(function(transceiver) {\n                                return transceiver.iceGatherer &&\n                                    transceiver.iceGatherer.state === 'completed';\n                            });\n\n                            // Emit candidate if localDescription is set.\n                            // Also emits null candidate when all gatherers are complete.\n                            switch (self.iceGatheringState) {\n                                case 'new':\n                                    self._localIceCandidatesBuffer.push(event);\n                                    if (end && complete) {\n                                        self._localIceCandidatesBuffer.push(\n                                            new Event('icecandidate'));\n                                    }\n                                    break;\n                                case 'gathering':\n                                    self._emitBufferedCandidates();\n                                    self.dispatchEvent(event);\n                                    if (self.onicecandidate !== null) {\n                                        self.onicecandidate(event);\n                                    }\n                                    if (complete) {\n                                        self.dispatchEvent(new Event('icecandidate'));\n                                        if (self.onicecandidate !== null) {\n                                            self.onicecandidate(new Event('icecandidate'));\n                                        }\n                                        self.iceGatheringState = 'complete';\n                                    }\n                                    break;\n                                case 'complete':\n                                    // should not happen... currently!\n                                    break;\n                                default: // no-op.\n                                    break;\n                            }\n                        };\n                        iceTransport.onicestatechange = function() {\n                            self._updateConnectionState();\n                        };\n\n                        var dtlsTransport = new RTCDtlsTransport(iceTransport);\n                        dtlsTransport.ondtlsstatechange = function() {\n                            self._updateConnectionState();\n                        };\n                        dtlsTransport.onerror = function() {\n                            // onerror does not set state to failed by itself.\n                            dtlsTransport.state = 'failed';\n                            self._updateConnectionState();\n                        };\n\n                        return {\n                            iceGatherer: iceGatherer,\n                            iceTransport: iceTransport,\n                            dtlsTransport: dtlsTransport\n                        };\n                    };\n\n                // Start the RTP Sender and Receiver for a transceiver.\n                window.RTCPeerConnection.prototype._transceive = function(transceiver,\n                                                                          send, recv) {\n                    var params = this._getCommonCapabilities(transceiver.localCapabilities,\n                        transceiver.remoteCapabilities);\n                    if (send && transceiver.rtpSender) {\n                        params.encodings = transceiver.sendEncodingParameters;\n                        params.rtcp = {\n                            cname: SDPUtils.localCName\n                        };\n                        if (transceiver.recvEncodingParameters.length) {\n                            params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n                        }\n                        transceiver.rtpSender.send(params);\n                    }\n                    if (recv && transceiver.rtpReceiver) {\n                        // remove RTX field in Edge 14942\n                        if (transceiver.kind === 'video'\n                            && transceiver.recvEncodingParameters) {\n                            transceiver.recvEncodingParameters.forEach(function(p) {\n                                delete p.rtx;\n                            });\n                        }\n                        params.encodings = transceiver.recvEncodingParameters;\n                        params.rtcp = {\n                            cname: transceiver.cname\n                        };\n                        if (transceiver.sendEncodingParameters.length) {\n                            params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n                        }\n                        transceiver.rtpReceiver.receive(params);\n                    }\n                };\n\n                window.RTCPeerConnection.prototype.setLocalDescription =\n                    function(description) {\n                        var self = this;\n                        var sections;\n                        var sessionpart;\n                        if (description.type === 'offer') {\n                            // FIXME: What was the purpose of this empty if statement?\n                            // if (!this._pendingOffer) {\n                            // } else {\n                            if (this._pendingOffer) {\n                                // VERY limited support for SDP munging. Limited to:\n                                // * changing the order of codecs\n                                sections = SDPUtils.splitSections(description.sdp);\n                                sessionpart = sections.shift();\n                                sections.forEach(function(mediaSection, sdpMLineIndex) {\n                                    var caps = SDPUtils.parseRtpParameters(mediaSection);\n                                    self._pendingOffer[sdpMLineIndex].localCapabilities = caps;\n                                });\n                                this.transceivers = this._pendingOffer;\n                                delete this._pendingOffer;\n                            }\n                        } else if (description.type === 'answer') {\n                            sections = SDPUtils.splitSections(self.remoteDescription.sdp);\n                            sessionpart = sections.shift();\n                            var isIceLite = SDPUtils.matchPrefix(sessionpart,\n                                'a=ice-lite').length > 0;\n                            sections.forEach(function(mediaSection, sdpMLineIndex) {\n                                var transceiver = self.transceivers[sdpMLineIndex];\n                                var iceGatherer = transceiver.iceGatherer;\n                                var iceTransport = transceiver.iceTransport;\n                                var dtlsTransport = transceiver.dtlsTransport;\n                                var localCapabilities = transceiver.localCapabilities;\n                                var remoteCapabilities = transceiver.remoteCapabilities;\n\n                                var rejected = mediaSection.split('\\n', 1)[0]\n                                    .split(' ', 2)[1] === '0';\n\n                                if (!rejected && !transceiver.isDatachannel) {\n                                    var remoteIceParameters = SDPUtils.getIceParameters(\n                                        mediaSection, sessionpart);\n                                    if (isIceLite) {\n                                        var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n                                            .map(function(cand) {\n                                                return SDPUtils.parseCandidate(cand);\n                                            })\n                                            .filter(function(cand) {\n                                                return cand.component === '1';\n                                            });\n                                        // ice-lite only includes host candidates in the SDP so we can\n                                        // use setRemoteCandidates (which implies an\n                                        // RTCIceCandidateComplete)\n                                        if (cands.length) {\n                                            iceTransport.setRemoteCandidates(cands);\n                                        }\n                                    }\n                                    var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n                                        mediaSection, sessionpart);\n                                    if (isIceLite) {\n                                        remoteDtlsParameters.role = 'server';\n                                    }\n\n                                    if (!self.usingBundle || sdpMLineIndex === 0) {\n                                        iceTransport.start(iceGatherer, remoteIceParameters,\n                                            isIceLite ? 'controlling' : 'controlled');\n                                        dtlsTransport.start(remoteDtlsParameters);\n                                    }\n\n                                    // Calculate intersection of capabilities.\n                                    var params = self._getCommonCapabilities(localCapabilities,\n                                        remoteCapabilities);\n\n                                    // Start the RTCRtpSender. The RTCRtpReceiver for this\n                                    // transceiver has already been started in setRemoteDescription.\n                                    self._transceive(transceiver,\n                                        params.codecs.length > 0,\n                                        false);\n                                }\n                            });\n                        }\n\n                        this.localDescription = {\n                            type: description.type,\n                            sdp: description.sdp\n                        };\n                        switch (description.type) {\n                            case 'offer':\n                                this._updateSignalingState('have-local-offer');\n                                break;\n                            case 'answer':\n                                this._updateSignalingState('stable');\n                                break;\n                            default:\n                                throw new TypeError('unsupported type \"' + description.type +\n                                    '\"');\n                        }\n\n                        // If a success callback was provided, emit ICE candidates after it\n                        // has been executed. Otherwise, emit callback after the Promise is\n                        // resolved.\n                        var hasCallback = arguments.length > 1 &&\n                            typeof arguments[1] === 'function';\n                        if (hasCallback) {\n                            var cb = arguments[1];\n                            window.setTimeout(function() {\n                                cb();\n                                if (self.iceGatheringState === 'new') {\n                                    self.iceGatheringState = 'gathering';\n                                }\n                                self._emitBufferedCandidates();\n                            }, 0);\n                        }\n                        var p = Promise.resolve();\n                        p.then(function() {\n                            if (!hasCallback) {\n                                if (self.iceGatheringState === 'new') {\n                                    self.iceGatheringState = 'gathering';\n                                }\n                                // Usually candidates will be emitted earlier.\n                                window.setTimeout(self._emitBufferedCandidates.bind(self), 500);\n                            }\n                        });\n                        return p;\n                    };\n\n                window.RTCPeerConnection.prototype.setRemoteDescription =\n                    function(description) {\n                        var self = this;\n                        var stream = new MediaStream();\n                        var receiverList = [];\n                        var sections = SDPUtils.splitSections(description.sdp);\n                        var sessionpart = sections.shift();\n                        var isIceLite = SDPUtils.matchPrefix(sessionpart,\n                            'a=ice-lite').length > 0;\n                        this.usingBundle = SDPUtils.matchPrefix(sessionpart,\n                            'a=group:BUNDLE ').length > 0;\n                        sections.forEach(function(mediaSection, sdpMLineIndex) {\n                            var lines = SDPUtils.splitLines(mediaSection);\n                            var mline = lines[0].substr(2).split(' ');\n                            var kind = mline[0];\n                            var rejected = mline[1] === '0';\n                            var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n\n                            var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:');\n                            if (mid.length) {\n                                mid = mid[0].substr(6);\n                            } else {\n                                mid = SDPUtils.generateIdentifier();\n                            }\n\n                            // Reject datachannels which are not implemented yet.\n                            if (kind === 'application' && mline[2] === 'DTLS/SCTP') {\n                                self.transceivers[sdpMLineIndex] = {\n                                    mid: mid,\n                                    isDatachannel: true\n                                };\n                                return;\n                            }\n\n                            var transceiver;\n                            var iceGatherer;\n                            var iceTransport;\n                            var dtlsTransport;\n                            var rtpSender;\n                            var rtpReceiver;\n                            var sendEncodingParameters;\n                            var recvEncodingParameters;\n                            var localCapabilities;\n\n                            var track;\n                            // FIXME: ensure the mediaSection has rtcp-mux set.\n                            var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n                            var remoteIceParameters;\n                            var remoteDtlsParameters;\n                            if (!rejected) {\n                                remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n                                    sessionpart);\n                                remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n                                    sessionpart);\n                                remoteDtlsParameters.role = 'client';\n                            }\n                            recvEncodingParameters =\n                                SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n                            var cname;\n                            // Gets the first SSRC. Note that with RTX there might be multiple\n                            // SSRCs.\n                            var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                                .map(function(line) {\n                                    return SDPUtils.parseSsrcMedia(line);\n                                })\n                                .filter(function(obj) {\n                                    return obj.attribute === 'cname';\n                                })[0];\n                            if (remoteSsrc) {\n                                cname = remoteSsrc.value;\n                            }\n\n                            var isComplete = SDPUtils.matchPrefix(mediaSection,\n                                'a=end-of-candidates', sessionpart).length > 0;\n                            var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n                                .map(function(cand) {\n                                    return SDPUtils.parseCandidate(cand);\n                                })\n                                .filter(function(cand) {\n                                    return cand.component === '1';\n                                });\n                            if (description.type === 'offer' && !rejected) {\n                                var transports = self.usingBundle && sdpMLineIndex > 0 ? {\n                                    iceGatherer: self.transceivers[0].iceGatherer,\n                                    iceTransport: self.transceivers[0].iceTransport,\n                                    dtlsTransport: self.transceivers[0].dtlsTransport\n                                } : self._createIceAndDtlsTransports(mid, sdpMLineIndex);\n\n                                if (isComplete) {\n                                    transports.iceTransport.setRemoteCandidates(cands);\n                                }\n\n                                localCapabilities = RTCRtpReceiver.getCapabilities(kind);\n\n                                // filter RTX until additional stuff needed for RTX is implemented\n                                // in adapter.js\n                                localCapabilities.codecs = localCapabilities.codecs.filter(\n                                    function(codec) {\n                                        return codec.name !== 'rtx';\n                                    });\n\n                                sendEncodingParameters = [{\n                                    ssrc: (2 * sdpMLineIndex + 2) * 1001\n                                }];\n\n                                rtpReceiver = new RTCRtpReceiver(transports.dtlsTransport, kind);\n\n                                track = rtpReceiver.track;\n                                receiverList.push([track, rtpReceiver]);\n                                // FIXME: not correct when there are multiple streams but that is\n                                // not currently supported in this shim.\n                                stream.addTrack(track);\n\n                                // FIXME: look at direction.\n                                if (self.localStreams.length > 0 &&\n                                    self.localStreams[0].getTracks().length >= sdpMLineIndex) {\n                                    var localTrack;\n                                    if (kind === 'audio') {\n                                        localTrack = self.localStreams[0].getAudioTracks()[0];\n                                    } else if (kind === 'video') {\n                                        localTrack = self.localStreams[0].getVideoTracks()[0];\n                                    }\n                                    if (localTrack) {\n                                        rtpSender = new RTCRtpSender(localTrack,\n                                            transports.dtlsTransport);\n                                    }\n                                }\n\n                                self.transceivers[sdpMLineIndex] = {\n                                    iceGatherer: transports.iceGatherer,\n                                    iceTransport: transports.iceTransport,\n                                    dtlsTransport: transports.dtlsTransport,\n                                    localCapabilities: localCapabilities,\n                                    remoteCapabilities: remoteCapabilities,\n                                    rtpSender: rtpSender,\n                                    rtpReceiver: rtpReceiver,\n                                    kind: kind,\n                                    mid: mid,\n                                    cname: cname,\n                                    sendEncodingParameters: sendEncodingParameters,\n                                    recvEncodingParameters: recvEncodingParameters\n                                };\n                                // Start the RTCRtpReceiver now. The RTPSender is started in\n                                // setLocalDescription.\n                                self._transceive(self.transceivers[sdpMLineIndex],\n                                    false,\n                                    direction === 'sendrecv' || direction === 'sendonly');\n                            } else if (description.type === 'answer' && !rejected) {\n                                transceiver = self.transceivers[sdpMLineIndex];\n                                iceGatherer = transceiver.iceGatherer;\n                                iceTransport = transceiver.iceTransport;\n                                dtlsTransport = transceiver.dtlsTransport;\n                                rtpSender = transceiver.rtpSender;\n                                rtpReceiver = transceiver.rtpReceiver;\n                                sendEncodingParameters = transceiver.sendEncodingParameters;\n                                localCapabilities = transceiver.localCapabilities;\n\n                                self.transceivers[sdpMLineIndex].recvEncodingParameters =\n                                    recvEncodingParameters;\n                                self.transceivers[sdpMLineIndex].remoteCapabilities =\n                                    remoteCapabilities;\n                                self.transceivers[sdpMLineIndex].cname = cname;\n\n                                if ((isIceLite || isComplete) && cands.length) {\n                                    iceTransport.setRemoteCandidates(cands);\n                                }\n                                if (!self.usingBundle || sdpMLineIndex === 0) {\n                                    iceTransport.start(iceGatherer, remoteIceParameters,\n                                        'controlling');\n                                    dtlsTransport.start(remoteDtlsParameters);\n                                }\n\n                                self._transceive(transceiver,\n                                    direction === 'sendrecv' || direction === 'recvonly',\n                                    direction === 'sendrecv' || direction === 'sendonly');\n\n                                if (rtpReceiver &&\n                                    (direction === 'sendrecv' || direction === 'sendonly')) {\n                                    track = rtpReceiver.track;\n                                    receiverList.push([track, rtpReceiver]);\n                                    stream.addTrack(track);\n                                } else {\n                                    // FIXME: actually the receiver should be created later.\n                                    delete transceiver.rtpReceiver;\n                                }\n                            }\n                        });\n\n                        this.remoteDescription = {\n                            type: description.type,\n                            sdp: description.sdp\n                        };\n                        switch (description.type) {\n                            case 'offer':\n                                this._updateSignalingState('have-remote-offer');\n                                break;\n                            case 'answer':\n                                this._updateSignalingState('stable');\n                                break;\n                            default:\n                                throw new TypeError('unsupported type \"' + description.type +\n                                    '\"');\n                        }\n                        if (stream.getTracks().length) {\n                            self.remoteStreams.push(stream);\n                            window.setTimeout(function() {\n                                var event = new Event('addstream');\n                                event.stream = stream;\n                                self.dispatchEvent(event);\n                                if (self.onaddstream !== null) {\n                                    window.setTimeout(function() {\n                                        self.onaddstream(event);\n                                    }, 0);\n                                }\n\n                                receiverList.forEach(function(item) {\n                                    var track = item[0];\n                                    var receiver = item[1];\n                                    var trackEvent = new Event('track');\n                                    trackEvent.track = track;\n                                    trackEvent.receiver = receiver;\n                                    trackEvent.streams = [stream];\n                                    self.dispatchEvent(event);\n                                    if (self.ontrack !== null) {\n                                        window.setTimeout(function() {\n                                            self.ontrack(trackEvent);\n                                        }, 0);\n                                    }\n                                });\n                            }, 0);\n                        }\n                        if (arguments.length > 1 && typeof arguments[1] === 'function') {\n                            window.setTimeout(arguments[1], 0);\n                        }\n                        return Promise.resolve();\n                    };\n\n                window.RTCPeerConnection.prototype.close = function() {\n                    this.transceivers.forEach(function(transceiver) {\n                        /* not yet\n        if (transceiver.iceGatherer) {\n          transceiver.iceGatherer.close();\n        }\n        */\n                        if (transceiver.iceTransport) {\n                            transceiver.iceTransport.stop();\n                        }\n                        if (transceiver.dtlsTransport) {\n                            transceiver.dtlsTransport.stop();\n                        }\n                        if (transceiver.rtpSender) {\n                            transceiver.rtpSender.stop();\n                        }\n                        if (transceiver.rtpReceiver) {\n                            transceiver.rtpReceiver.stop();\n                        }\n                    });\n                    // FIXME: clean up tracks, local streams, remote streams, etc\n                    this._updateSignalingState('closed');\n                };\n\n                // Update the signaling state.\n                window.RTCPeerConnection.prototype._updateSignalingState =\n                    function(newState) {\n                        this.signalingState = newState;\n                        var event = new Event('signalingstatechange');\n                        this.dispatchEvent(event);\n                        if (this.onsignalingstatechange !== null) {\n                            this.onsignalingstatechange(event);\n                        }\n                    };\n\n                // Determine whether to fire the negotiationneeded event.\n                window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded =\n                    function() {\n                        // Fire away (for now).\n                        var event = new Event('negotiationneeded');\n                        this.dispatchEvent(event);\n                        if (this.onnegotiationneeded !== null) {\n                            this.onnegotiationneeded(event);\n                        }\n                    };\n\n                // Update the connection state.\n                window.RTCPeerConnection.prototype._updateConnectionState = function() {\n                    var self = this;\n                    var newState;\n                    var states = {\n                        'new': 0,\n                        closed: 0,\n                        connecting: 0,\n                        checking: 0,\n                        connected: 0,\n                        completed: 0,\n                        failed: 0\n                    };\n                    this.transceivers.forEach(function(transceiver) {\n                        states[transceiver.iceTransport.state]++;\n                        states[transceiver.dtlsTransport.state]++;\n                    });\n                    // ICETransport.completed and connected are the same for this purpose.\n                    states.connected += states.completed;\n\n                    newState = 'new';\n                    if (states.failed > 0) {\n                        newState = 'failed';\n                    } else if (states.connecting > 0 || states.checking > 0) {\n                        newState = 'connecting';\n                    } else if (states.disconnected > 0) {\n                        newState = 'disconnected';\n                    } else if (states.new > 0) {\n                        newState = 'new';\n                    } else if (states.connected > 0 || states.completed > 0) {\n                        newState = 'connected';\n                    }\n\n                    if (newState !== self.iceConnectionState) {\n                        self.iceConnectionState = newState;\n                        var event = new Event('iceconnectionstatechange');\n                        this.dispatchEvent(event);\n                        if (this.oniceconnectionstatechange !== null) {\n                            this.oniceconnectionstatechange(event);\n                        }\n                    }\n                };\n\n                window.RTCPeerConnection.prototype.createOffer = function() {\n                    var self = this;\n                    if (this._pendingOffer) {\n                        throw new Error('createOffer called while there is a pending offer.');\n                    }\n                    var offerOptions;\n                    if (arguments.length === 1 && typeof arguments[0] !== 'function') {\n                        offerOptions = arguments[0];\n                    } else if (arguments.length === 3) {\n                        offerOptions = arguments[2];\n                    }\n\n                    var tracks = [];\n                    var numAudioTracks = 0;\n                    var numVideoTracks = 0;\n                    // Default to sendrecv.\n                    if (this.localStreams.length) {\n                        numAudioTracks = this.localStreams[0].getAudioTracks().length;\n                        numVideoTracks = this.localStreams[0].getVideoTracks().length;\n                    }\n                    // Determine number of audio and video tracks we need to send/recv.\n                    if (offerOptions) {\n                        // Reject Chrome legacy constraints.\n                        if (offerOptions.mandatory || offerOptions.optional) {\n                            throw new TypeError(\n                                'Legacy mandatory/optional constraints not supported.');\n                        }\n                        if (offerOptions.offerToReceiveAudio !== undefined) {\n                            numAudioTracks = offerOptions.offerToReceiveAudio;\n                        }\n                        if (offerOptions.offerToReceiveVideo !== undefined) {\n                            numVideoTracks = offerOptions.offerToReceiveVideo;\n                        }\n                    }\n                    if (this.localStreams.length) {\n                        // Push local streams.\n                        this.localStreams[0].getTracks().forEach(function(track) {\n                            tracks.push({\n                                kind: track.kind,\n                                track: track,\n                                wantReceive: track.kind === 'audio' ?\n                                    numAudioTracks > 0 : numVideoTracks > 0\n                            });\n                            if (track.kind === 'audio') {\n                                numAudioTracks--;\n                            } else if (track.kind === 'video') {\n                                numVideoTracks--;\n                            }\n                        });\n                    }\n                    // Create M-lines for recvonly streams.\n                    while (numAudioTracks > 0 || numVideoTracks > 0) {\n                        if (numAudioTracks > 0) {\n                            tracks.push({\n                                kind: 'audio',\n                                wantReceive: true\n                            });\n                            numAudioTracks--;\n                        }\n                        if (numVideoTracks > 0) {\n                            tracks.push({\n                                kind: 'video',\n                                wantReceive: true\n                            });\n                            numVideoTracks--;\n                        }\n                    }\n\n                    var sdp = SDPUtils.writeSessionBoilerplate();\n                    var transceivers = [];\n                    tracks.forEach(function(mline, sdpMLineIndex) {\n                        // For each track, create an ice gatherer, ice transport,\n                        // dtls transport, potentially rtpsender and rtpreceiver.\n                        var track = mline.track;\n                        var kind = mline.kind;\n                        var mid = SDPUtils.generateIdentifier();\n\n                        var transports = self.usingBundle && sdpMLineIndex > 0 ? {\n                            iceGatherer: transceivers[0].iceGatherer,\n                            iceTransport: transceivers[0].iceTransport,\n                            dtlsTransport: transceivers[0].dtlsTransport\n                        } : self._createIceAndDtlsTransports(mid, sdpMLineIndex);\n\n                        var localCapabilities = RTCRtpSender.getCapabilities(kind);\n                        // filter RTX until additional stuff needed for RTX is implemented\n                        // in adapter.js\n                        localCapabilities.codecs = localCapabilities.codecs.filter(\n                            function(codec) {\n                                return codec.name !== 'rtx';\n                            });\n                        localCapabilities.codecs.forEach(function(codec) {\n                            // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n                            // by adding level-asymmetry-allowed=1\n                            if (codec.name === 'H264' &&\n                                codec.parameters['level-asymmetry-allowed'] === undefined) {\n                                codec.parameters['level-asymmetry-allowed'] = '1';\n                            }\n                        });\n\n                        var rtpSender;\n                        var rtpReceiver;\n\n                        // generate an ssrc now, to be used later in rtpSender.send\n                        var sendEncodingParameters = [{\n                            ssrc: (2 * sdpMLineIndex + 1) * 1001\n                        }];\n                        if (track) {\n                            rtpSender = new RTCRtpSender(track, transports.dtlsTransport);\n                        }\n\n                        if (mline.wantReceive) {\n                            rtpReceiver = new RTCRtpReceiver(transports.dtlsTransport, kind);\n                        }\n\n                        transceivers[sdpMLineIndex] = {\n                            iceGatherer: transports.iceGatherer,\n                            iceTransport: transports.iceTransport,\n                            dtlsTransport: transports.dtlsTransport,\n                            localCapabilities: localCapabilities,\n                            remoteCapabilities: null,\n                            rtpSender: rtpSender,\n                            rtpReceiver: rtpReceiver,\n                            kind: kind,\n                            mid: mid,\n                            sendEncodingParameters: sendEncodingParameters,\n                            recvEncodingParameters: null\n                        };\n                    });\n                    if (this.usingBundle) {\n                        sdp += 'a=group:BUNDLE ' + transceivers.map(function(t) {\n                            return t.mid;\n                        }).join(' ') + '\\r\\n';\n                    }\n                    tracks.forEach(function(mline, sdpMLineIndex) {\n                        var transceiver = transceivers[sdpMLineIndex];\n                        sdp += SDPUtils.writeMediaSection(transceiver,\n                            transceiver.localCapabilities, 'offer', self.localStreams[0]);\n                    });\n\n                    this._pendingOffer = transceivers;\n                    var desc = new RTCSessionDescription({\n                        type: 'offer',\n                        sdp: sdp\n                    });\n                    if (arguments.length && typeof arguments[0] === 'function') {\n                        window.setTimeout(arguments[0], 0, desc);\n                    }\n                    return Promise.resolve(desc);\n                };\n\n                window.RTCPeerConnection.prototype.createAnswer = function() {\n                    var self = this;\n\n                    var sdp = SDPUtils.writeSessionBoilerplate();\n                    if (this.usingBundle) {\n                        sdp += 'a=group:BUNDLE ' + this.transceivers.map(function(t) {\n                            return t.mid;\n                        }).join(' ') + '\\r\\n';\n                    }\n                    this.transceivers.forEach(function(transceiver) {\n                        if (transceiver.isDatachannel) {\n                            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n' +\n                                'c=IN IP4 0.0.0.0\\r\\n' +\n                                'a=mid:' + transceiver.mid + '\\r\\n';\n                            return;\n                        }\n                        // Calculate intersection of capabilities.\n                        var commonCapabilities = self._getCommonCapabilities(\n                            transceiver.localCapabilities,\n                            transceiver.remoteCapabilities);\n\n                        sdp += SDPUtils.writeMediaSection(transceiver, commonCapabilities,\n                            'answer', self.localStreams[0]);\n                    });\n\n                    var desc = new RTCSessionDescription({\n                        type: 'answer',\n                        sdp: sdp\n                    });\n                    if (arguments.length && typeof arguments[0] === 'function') {\n                        window.setTimeout(arguments[0], 0, desc);\n                    }\n                    return Promise.resolve(desc);\n                };\n\n                window.RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n                    if (!candidate) {\n                        this.transceivers.forEach(function(transceiver) {\n                            transceiver.iceTransport.addRemoteCandidate({});\n                        });\n                    } else {\n                        var mLineIndex = candidate.sdpMLineIndex;\n                        if (candidate.sdpMid) {\n                            for (var i = 0; i < this.transceivers.length; i++) {\n                                if (this.transceivers[i].mid === candidate.sdpMid) {\n                                    mLineIndex = i;\n                                    break;\n                                }\n                            }\n                        }\n                        var transceiver = this.transceivers[mLineIndex];\n                        if (transceiver) {\n                            var cand = Object.keys(candidate.candidate).length > 0 ?\n                                SDPUtils.parseCandidate(candidate.candidate) : {};\n                            // Ignore Chrome's invalid candidates since Edge does not like them.\n                            if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n                                return;\n                            }\n                            // Ignore RTCP candidates, we assume RTCP-MUX.\n                            if (cand.component !== '1') {\n                                return;\n                            }\n                            // A dirty hack to make samples work.\n                            if (cand.type === 'endOfCandidates') {\n                                cand = {};\n                            }\n                            transceiver.iceTransport.addRemoteCandidate(cand);\n\n                            // update the remoteDescription.\n                            var sections = SDPUtils.splitSections(this.remoteDescription.sdp);\n                            sections[mLineIndex + 1] += (cand.type ? candidate.candidate.trim()\n                                : 'a=end-of-candidates') + '\\r\\n';\n                            this.remoteDescription.sdp = sections.join('');\n                        }\n                    }\n                    if (arguments.length > 1 && typeof arguments[1] === 'function') {\n                        window.setTimeout(arguments[1], 0);\n                    }\n                    return Promise.resolve();\n                };\n\n                window.RTCPeerConnection.prototype.getStats = function() {\n                    var promises = [];\n                    this.transceivers.forEach(function(transceiver) {\n                        ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n                            'dtlsTransport'].forEach(function(method) {\n                            if (transceiver[method]) {\n                                promises.push(transceiver[method].getStats());\n                            }\n                        });\n                    });\n                    var cb = arguments.length > 1 && typeof arguments[1] === 'function' &&\n                        arguments[1];\n                    return new Promise(function(resolve) {\n                        // shim getStats with maplike support\n                        var results = new Map();\n                        Promise.all(promises).then(function(res) {\n                            res.forEach(function(result) {\n                                Object.keys(result).forEach(function(id) {\n                                    results.set(id, result[id]);\n                                    results[id] = result[id];\n                                });\n                            });\n                            if (cb) {\n                                window.setTimeout(cb, 0, results);\n                            }\n                            resolve(results);\n                        });\n                    });\n                };\n            }\n        };\n\n// Expose public methods.\n        module.exports = {\n            shimPeerConnection: edgeShim.shimPeerConnection,\n            shimGetUserMedia: require('./getusermedia')\n        };\n\n    },{\"../utils\":12,\"./getusermedia\":8,\"sdp\":59}],8:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n// Expose public methods.\n        module.exports = function() {\n            var shimError_ = function(e) {\n                return {\n                    name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n                    message: e.message,\n                    constraint: e.constraint,\n                    toString: function() {\n                        return this.name;\n                    }\n                };\n            };\n\n            // getUserMedia error shim.\n            var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n            bind(navigator.mediaDevices);\n            navigator.mediaDevices.getUserMedia = function(c) {\n                return origGetUserMedia(c).catch(function(e) {\n                    return Promise.reject(shimError_(e));\n                });\n            };\n        };\n\n    },{}],9:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n        var browserDetails = require('../utils').browserDetails;\n\n        var firefoxShim = {\n            shimOnTrack: function() {\n                if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n                    window.RTCPeerConnection.prototype)) {\n                    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n                        get: function() {\n                            return this._ontrack;\n                        },\n                        set: function(f) {\n                            if (this._ontrack) {\n                                this.removeEventListener('track', this._ontrack);\n                                this.removeEventListener('addstream', this._ontrackpoly);\n                            }\n                            this.addEventListener('track', this._ontrack = f);\n                            this.addEventListener('addstream', this._ontrackpoly = function(e) {\n                                e.stream.getTracks().forEach(function(track) {\n                                    var event = new Event('track');\n                                    event.track = track;\n                                    event.receiver = {track: track};\n                                    event.streams = [e.stream];\n                                    this.dispatchEvent(event);\n                                }.bind(this));\n                            }.bind(this));\n                        }\n                    });\n                }\n            },\n\n            shimSourceObject: function() {\n                // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n                if (typeof window === 'object') {\n                    if (window.HTMLMediaElement &&\n                        !('srcObject' in window.HTMLMediaElement.prototype)) {\n                        // Shim the srcObject property, once, when HTMLMediaElement is found.\n                        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n                            get: function() {\n                                return this.mozSrcObject;\n                            },\n                            set: function(stream) {\n                                this.mozSrcObject = stream;\n                            }\n                        });\n                    }\n                }\n            },\n\n            shimPeerConnection: function() {\n                if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n                    window.mozRTCPeerConnection)) {\n                    return; // probably media.peerconnection.enabled=false in about:config\n                }\n                // The RTCPeerConnection object.\n                if (!window.RTCPeerConnection) {\n                    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n                        if (browserDetails.version < 38) {\n                            // .urls is not supported in FF < 38.\n                            // create RTCIceServers with a single url.\n                            if (pcConfig && pcConfig.iceServers) {\n                                var newIceServers = [];\n                                for (var i = 0; i < pcConfig.iceServers.length; i++) {\n                                    var server = pcConfig.iceServers[i];\n                                    if (server.hasOwnProperty('urls')) {\n                                        for (var j = 0; j < server.urls.length; j++) {\n                                            var newServer = {\n                                                url: server.urls[j]\n                                            };\n                                            if (server.urls[j].indexOf('turn') === 0) {\n                                                newServer.username = server.username;\n                                                newServer.credential = server.credential;\n                                            }\n                                            newIceServers.push(newServer);\n                                        }\n                                    } else {\n                                        newIceServers.push(pcConfig.iceServers[i]);\n                                    }\n                                }\n                                pcConfig.iceServers = newIceServers;\n                            }\n                        }\n                        return new mozRTCPeerConnection(pcConfig, pcConstraints);\n                    };\n                    window.RTCPeerConnection.prototype = mozRTCPeerConnection.prototype;\n\n                    // wrap static methods. Currently just generateCertificate.\n                    if (mozRTCPeerConnection.generateCertificate) {\n                        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                            get: function() {\n                                return mozRTCPeerConnection.generateCertificate;\n                            }\n                        });\n                    }\n\n                    window.RTCSessionDescription = mozRTCSessionDescription;\n                    window.RTCIceCandidate = mozRTCIceCandidate;\n                }\n\n                // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n                ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n                    .forEach(function(method) {\n                        var nativeMethod = RTCPeerConnection.prototype[method];\n                        RTCPeerConnection.prototype[method] = function() {\n                            arguments[0] = new ((method === 'addIceCandidate') ?\n                                RTCIceCandidate : RTCSessionDescription)(arguments[0]);\n                            return nativeMethod.apply(this, arguments);\n                        };\n                    });\n\n                // support for addIceCandidate(null or undefined)\n                var nativeAddIceCandidate =\n                    RTCPeerConnection.prototype.addIceCandidate;\n                RTCPeerConnection.prototype.addIceCandidate = function() {\n                    if (!arguments[0]) {\n                        if (arguments[1]) {\n                            arguments[1].apply(null);\n                        }\n                        return Promise.resolve();\n                    }\n                    return nativeAddIceCandidate.apply(this, arguments);\n                };\n\n                if (browserDetails.version < 48) {\n                    // shim getStats with maplike support\n                    var makeMapStats = function(stats) {\n                        var map = new Map();\n                        Object.keys(stats).forEach(function(key) {\n                            map.set(key, stats[key]);\n                            map[key] = stats[key];\n                        });\n                        return map;\n                    };\n\n                    var nativeGetStats = RTCPeerConnection.prototype.getStats;\n                    RTCPeerConnection.prototype.getStats = function(selector, onSucc, onErr) {\n                        return nativeGetStats.apply(this, [selector || null])\n                            .then(function(stats) {\n                                return makeMapStats(stats);\n                            })\n                            .then(onSucc, onErr);\n                    };\n                }\n            }\n        };\n\n// Expose public methods.\n        module.exports = {\n            shimOnTrack: firefoxShim.shimOnTrack,\n            shimSourceObject: firefoxShim.shimSourceObject,\n            shimPeerConnection: firefoxShim.shimPeerConnection,\n            shimGetUserMedia: require('./getusermedia')\n        };\n\n    },{\"../utils\":12,\"./getusermedia\":10}],10:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n        var logging = require('../utils').log;\n        var browserDetails = require('../utils').browserDetails;\n\n// Expose public methods.\n        module.exports = function() {\n            var shimError_ = function(e) {\n                return {\n                    name: {\n                        SecurityError: 'NotAllowedError',\n                        PermissionDeniedError: 'NotAllowedError'\n                    }[e.name] || e.name,\n                    message: {\n                        'The operation is insecure.': 'The request is not allowed by the ' +\n                        'user agent or the platform in the current context.'\n                    }[e.message] || e.message,\n                    constraint: e.constraint,\n                    toString: function() {\n                        return this.name + (this.message && ': ') + this.message;\n                    }\n                };\n            };\n\n            // getUserMedia constraints shim.\n            var getUserMedia_ = function(constraints, onSuccess, onError) {\n                var constraintsToFF37_ = function(c) {\n                    if (typeof c !== 'object' || c.require) {\n                        return c;\n                    }\n                    var require = [];\n                    Object.keys(c).forEach(function(key) {\n                        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n                            return;\n                        }\n                        var r = c[key] = (typeof c[key] === 'object') ?\n                            c[key] : {ideal: c[key]};\n                        if (r.min !== undefined ||\n                            r.max !== undefined || r.exact !== undefined) {\n                            require.push(key);\n                        }\n                        if (r.exact !== undefined) {\n                            if (typeof r.exact === 'number') {\n                                r. min = r.max = r.exact;\n                            } else {\n                                c[key] = r.exact;\n                            }\n                            delete r.exact;\n                        }\n                        if (r.ideal !== undefined) {\n                            c.advanced = c.advanced || [];\n                            var oc = {};\n                            if (typeof r.ideal === 'number') {\n                                oc[key] = {min: r.ideal, max: r.ideal};\n                            } else {\n                                oc[key] = r.ideal;\n                            }\n                            c.advanced.push(oc);\n                            delete r.ideal;\n                            if (!Object.keys(r).length) {\n                                delete c[key];\n                            }\n                        }\n                    });\n                    if (require.length) {\n                        c.require = require;\n                    }\n                    return c;\n                };\n                constraints = JSON.parse(JSON.stringify(constraints));\n                if (browserDetails.version < 38) {\n                    logging('spec: ' + JSON.stringify(constraints));\n                    if (constraints.audio) {\n                        constraints.audio = constraintsToFF37_(constraints.audio);\n                    }\n                    if (constraints.video) {\n                        constraints.video = constraintsToFF37_(constraints.video);\n                    }\n                    logging('ff37: ' + JSON.stringify(constraints));\n                }\n                return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\n                    onError(shimError_(e));\n                });\n            };\n\n            // Returns the result of getUserMedia as a Promise.\n            var getUserMediaPromise_ = function(constraints) {\n                return new Promise(function(resolve, reject) {\n                    getUserMedia_(constraints, resolve, reject);\n                });\n            };\n\n            // Shim for mediaDevices on older versions.\n            if (!navigator.mediaDevices) {\n                navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n                    addEventListener: function() { },\n                    removeEventListener: function() { }\n                };\n            }\n            navigator.mediaDevices.enumerateDevices =\n                navigator.mediaDevices.enumerateDevices || function() {\n                    return new Promise(function(resolve) {\n                        var infos = [\n                            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n                            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n                        ];\n                        resolve(infos);\n                    });\n                };\n\n            if (browserDetails.version < 41) {\n                // Work around http://bugzil.la/1169665\n                var orgEnumerateDevices =\n                    navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n                navigator.mediaDevices.enumerateDevices = function() {\n                    return orgEnumerateDevices().then(undefined, function(e) {\n                        if (e.name === 'NotFoundError') {\n                            return [];\n                        }\n                        throw e;\n                    });\n                };\n            }\n            if (browserDetails.version < 49) {\n                var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n                bind(navigator.mediaDevices);\n                navigator.mediaDevices.getUserMedia = function(c) {\n                    return origGetUserMedia(c).then(function(stream) {\n                        // Work around https://bugzil.la/802326\n                        if (c.audio && !stream.getAudioTracks().length ||\n                            c.video && !stream.getVideoTracks().length) {\n                            stream.getTracks().forEach(function(track) {\n                                track.stop();\n                            });\n                            throw new DOMException('The object can not be found here.',\n                                'NotFoundError');\n                        }\n                        return stream;\n                    }, function(e) {\n                        return Promise.reject(shimError_(e));\n                    });\n                };\n            }\n            navigator.getUserMedia = function(constraints, onSuccess, onError) {\n                if (browserDetails.version < 44) {\n                    return getUserMedia_(constraints, onSuccess, onError);\n                }\n                // Replace Firefox 44+'s deprecation warning with unprefixed version.\n                console.warn('navigator.getUserMedia has been replaced by ' +\n                    'navigator.mediaDevices.getUserMedia');\n                navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n            };\n        };\n\n    },{\"../utils\":12}],11:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        'use strict';\n        var safariShim = {\n            // TODO: DrAlex, should be here, double check against LayoutTests\n            // shimOnTrack: function() { },\n\n            // TODO: once the back-end for the mac port is done, add.\n            // TODO: check for webkitGTK+\n            // shimPeerConnection: function() { },\n\n            shimGetUserMedia: function() {\n                navigator.getUserMedia = navigator.webkitGetUserMedia;\n            }\n        };\n\n// Expose public methods.\n        module.exports = {\n            shimGetUserMedia: safariShim.shimGetUserMedia\n            // TODO\n            // shimOnTrack: safariShim.shimOnTrack,\n            // shimPeerConnection: safariShim.shimPeerConnection\n        };\n\n    },{}],12:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n        var logDisabled_ = true;\n\n// Utility methods.\n        var utils = {\n            disableLog: function(bool) {\n                if (typeof bool !== 'boolean') {\n                    return new Error('Argument type: ' + typeof bool +\n                        '. Please use a boolean.');\n                }\n                logDisabled_ = bool;\n                return (bool) ? 'adapter.js logging disabled' :\n                    'adapter.js logging enabled';\n            },\n\n            log: function() {\n                if (typeof window === 'object') {\n                    if (logDisabled_) {\n                        return;\n                    }\n                    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n                        console.log.apply(console, arguments);\n                    }\n                }\n            },\n\n            /**\n             * Extract browser version out of the provided user agent string.\n             *\n             * @param {!string} uastring userAgent string.\n             * @param {!string} expr Regular expression used as match criteria.\n             * @param {!number} pos position in the version string to be returned.\n             * @return {!number} browser version.\n             */\n            extractVersion: function(uastring, expr, pos) {\n                var match = uastring.match(expr);\n                return match && match.length >= pos && parseInt(match[pos], 10);\n            },\n\n            /**\n             * Browser detector.\n             *\n             * @return {object} result containing browser and version\n             *     properties.\n             */\n            detectBrowser: function() {\n                // Returned result object.\n                var result = {};\n                result.browser = null;\n                result.version = null;\n\n                // Fail early if it's not a browser\n                if (typeof window === 'undefined' || !window.navigator) {\n                    result.browser = 'Not a browser.';\n                    return result;\n                }\n\n                // Firefox.\n                if (navigator.mozGetUserMedia) {\n                    result.browser = 'firefox';\n                    result.version = this.extractVersion(navigator.userAgent,\n                        /Firefox\\/([0-9]+)\\./, 1);\n\n                    // all webkit-based browsers\n                } else if (navigator.webkitGetUserMedia) {\n                    // Chrome, Chromium, Webview, Opera, all use the chrome shim for now\n                    if (window.webkitRTCPeerConnection) {\n                        result.browser = 'chrome';\n                        result.version = this.extractVersion(navigator.userAgent,\n                            /Chrom(e|ium)\\/([0-9]+)\\./, 2);\n\n                        // Safari or unknown webkit-based\n                        // for the time being Safari has support for MediaStreams but not webRTC\n                    } else {\n                        // Safari UA substrings of interest for reference:\n                        // - webkit version:           AppleWebKit/602.1.25 (also used in Op,Cr)\n                        // - safari UI version:        Version/9.0.3 (unique to Safari)\n                        // - safari UI webkit version: Safari/601.4.4 (also used in Op,Cr)\n                        //\n                        // if the webkit version and safari UI webkit versions are equals,\n                        // ... this is a stable version.\n                        //\n                        // only the internal webkit version is important today to know if\n                        // media streams are supported\n                        //\n                        if (navigator.userAgent.match(/Version\\/(\\d+).(\\d+)/)) {\n                            result.browser = 'safari';\n                            result.version = this.extractVersion(navigator.userAgent,\n                                /AppleWebKit\\/([0-9]+)\\./, 1);\n\n                            // unknown webkit-based browser\n                        } else {\n                            result.browser = 'Unsupported webkit-based browser ' +\n                                'with GUM support but no WebRTC support.';\n                            return result;\n                        }\n                    }\n\n                    // Edge.\n                } else if (navigator.mediaDevices &&\n                    navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n                    result.browser = 'edge';\n                    result.version = this.extractVersion(navigator.userAgent,\n                        /Edge\\/(\\d+).(\\d+)$/, 2);\n\n                    // Default fallthrough: not supported.\n                } else {\n                    result.browser = 'Not a supported browser.';\n                    return result;\n                }\n\n                return result;\n            }\n        };\n\n// Export.\n        module.exports = {\n            log: utils.log,\n            disableLog: utils.disableLog,\n            browserDetails: utils.detectBrowser(),\n            extractVersion: utils.extractVersion\n        };\n\n    },{}],13:[function(require,module,exports){\n\n        /**\n         * Expose `Backoff`.\n         */\n\n        module.exports = Backoff;\n\n        /**\n         * Initialize backoff timer with `opts`.\n         *\n         * - `min` initial timeout in milliseconds [100]\n         * - `max` max timeout [10000]\n         * - `jitter` [0]\n         * - `factor` [2]\n         *\n         * @param {Object} opts\n         * @api public\n         */\n\n        function Backoff(opts) {\n            opts = opts || {};\n            this.ms = opts.min || 100;\n            this.max = opts.max || 10000;\n            this.factor = opts.factor || 2;\n            this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n            this.attempts = 0;\n        }\n\n        /**\n         * Return the backoff duration.\n         *\n         * @return {Number}\n         * @api public\n         */\n\n        Backoff.prototype.duration = function(){\n            var ms = this.ms * Math.pow(this.factor, this.attempts++);\n            if (this.jitter) {\n                var rand =  Math.random();\n                var deviation = Math.floor(rand * this.jitter * ms);\n                ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n            }\n            return Math.min(ms, this.max) | 0;\n        };\n\n        /**\n         * Reset the number of attempts.\n         *\n         * @api public\n         */\n\n        Backoff.prototype.reset = function(){\n            this.attempts = 0;\n        };\n\n        /**\n         * Set the minimum duration\n         *\n         * @api public\n         */\n\n        Backoff.prototype.setMin = function(min){\n            this.ms = min;\n        };\n\n        /**\n         * Set the maximum duration\n         *\n         * @api public\n         */\n\n        Backoff.prototype.setMax = function(max){\n            this.max = max;\n        };\n\n        /**\n         * Set the jitter\n         *\n         * @api public\n         */\n\n        Backoff.prototype.setJitter = function(jitter){\n            this.jitter = jitter;\n        };\n\n\n    },{}],14:[function(require,module,exports){\n        /*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n        (function(chars){\n            \"use strict\";\n\n            exports.encode = function(arraybuffer) {\n                var bytes = new Uint8Array(arraybuffer),\n                    i, len = bytes.length, base64 = \"\";\n\n                for (i = 0; i < len; i+=3) {\n                    base64 += chars[bytes[i] >> 2];\n                    base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n                    base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n                    base64 += chars[bytes[i + 2] & 63];\n                }\n\n                if ((len % 3) === 2) {\n                    base64 = base64.substring(0, base64.length - 1) + \"=\";\n                } else if (len % 3 === 1) {\n                    base64 = base64.substring(0, base64.length - 2) + \"==\";\n                }\n\n                return base64;\n            };\n\n            exports.decode =  function(base64) {\n                var bufferLength = base64.length * 0.75,\n                    len = base64.length, i, p = 0,\n                    encoded1, encoded2, encoded3, encoded4;\n\n                if (base64[base64.length - 1] === \"=\") {\n                    bufferLength--;\n                    if (base64[base64.length - 2] === \"=\") {\n                        bufferLength--;\n                    }\n                }\n\n                var arraybuffer = new ArrayBuffer(bufferLength),\n                    bytes = new Uint8Array(arraybuffer);\n\n                for (i = 0; i < len; i+=4) {\n                    encoded1 = chars.indexOf(base64[i]);\n                    encoded2 = chars.indexOf(base64[i+1]);\n                    encoded3 = chars.indexOf(base64[i+2]);\n                    encoded4 = chars.indexOf(base64[i+3]);\n\n                    bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n                    bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n                    bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n                }\n\n                return arraybuffer;\n            };\n        })(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n\n    },{}],15:[function(require,module,exports){\n        (function (global){\n            /**\n             * Create a blob builder even when vendor prefixes exist\n             */\n\n            var BlobBuilder = global.BlobBuilder\n                || global.WebKitBlobBuilder\n                || global.MSBlobBuilder\n                || global.MozBlobBuilder;\n\n            /**\n             * Check if Blob constructor is supported\n             */\n\n            var blobSupported = (function() {\n                try {\n                    var a = new Blob(['hi']);\n                    return a.size === 2;\n                } catch(e) {\n                    return false;\n                }\n            })();\n\n            /**\n             * Check if Blob constructor supports ArrayBufferViews\n             * Fails in Safari 6, so we need to map to ArrayBuffers there.\n             */\n\n            var blobSupportsArrayBufferView = blobSupported && (function() {\n                try {\n                    var b = new Blob([new Uint8Array([1,2])]);\n                    return b.size === 2;\n                } catch(e) {\n                    return false;\n                }\n            })();\n\n            /**\n             * Check if BlobBuilder is supported\n             */\n\n            var blobBuilderSupported = BlobBuilder\n                && BlobBuilder.prototype.append\n                && BlobBuilder.prototype.getBlob;\n\n            /**\n             * Helper function that maps ArrayBufferViews to ArrayBuffers\n             * Used by BlobBuilder constructor and old browsers that didn't\n             * support it in the Blob constructor.\n             */\n\n            function mapArrayBufferViews(ary) {\n                for (var i = 0; i < ary.length; i++) {\n                    var chunk = ary[i];\n                    if (chunk.buffer instanceof ArrayBuffer) {\n                        var buf = chunk.buffer;\n\n                        // if this is a subarray, make a copy so we only\n                        // include the subarray region from the underlying buffer\n                        if (chunk.byteLength !== buf.byteLength) {\n                            var copy = new Uint8Array(chunk.byteLength);\n                            copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n                            buf = copy.buffer;\n                        }\n\n                        ary[i] = buf;\n                    }\n                }\n            }\n\n            function BlobBuilderConstructor(ary, options) {\n                options = options || {};\n\n                var bb = new BlobBuilder();\n                mapArrayBufferViews(ary);\n\n                for (var i = 0; i < ary.length; i++) {\n                    bb.append(ary[i]);\n                }\n\n                return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\n            };\n\n            function BlobConstructor(ary, options) {\n                mapArrayBufferViews(ary);\n                return new Blob(ary, options || {});\n            };\n\n            module.exports = (function() {\n                if (blobSupported) {\n                    return blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\n                } else if (blobBuilderSupported) {\n                    return BlobBuilderConstructor;\n                } else {\n                    return undefined;\n                }\n            })();\n\n        }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{}],16:[function(require,module,exports){\n        /**\n         * Slice reference.\n         */\n\n        var slice = [].slice;\n\n        /**\n         * Bind `obj` to `fn`.\n         *\n         * @param {Object} obj\n         * @param {Function|String} fn or string\n         * @return {Function}\n         * @api public\n         */\n\n        module.exports = function(obj, fn){\n            if ('string' == typeof fn) fn = obj[fn];\n            if ('function' != typeof fn) throw new Error('bind() requires a function');\n            var args = slice.call(arguments, 2);\n            return function(){\n                return fn.apply(obj, args.concat(slice.call(arguments)));\n            }\n        };\n\n    },{}],17:[function(require,module,exports){\n\n        /**\n         * Expose `Emitter`.\n         */\n\n        module.exports = Emitter;\n\n        /**\n         * Initialize a new `Emitter`.\n         *\n         * @api public\n         */\n\n        function Emitter(obj) {\n            if (obj) return mixin(obj);\n        };\n\n        /**\n         * Mixin the emitter properties.\n         *\n         * @param {Object} obj\n         * @return {Object}\n         * @api private\n         */\n\n        function mixin(obj) {\n            for (var key in Emitter.prototype) {\n                obj[key] = Emitter.prototype[key];\n            }\n            return obj;\n        }\n\n        /**\n         * Listen on the given `event` with `fn`.\n         *\n         * @param {String} event\n         * @param {Function} fn\n         * @return {Emitter}\n         * @api public\n         */\n\n        Emitter.prototype.on =\n            Emitter.prototype.addEventListener = function(event, fn){\n                this._callbacks = this._callbacks || {};\n                (this._callbacks[event] = this._callbacks[event] || [])\n                    .push(fn);\n                return this;\n            };\n\n        /**\n         * Adds an `event` listener that will be invoked a single\n         * time then automatically removed.\n         *\n         * @param {String} event\n         * @param {Function} fn\n         * @return {Emitter}\n         * @api public\n         */\n\n        Emitter.prototype.once = function(event, fn){\n            var self = this;\n            this._callbacks = this._callbacks || {};\n\n            function on() {\n                self.off(event, on);\n                fn.apply(this, arguments);\n            }\n\n            on.fn = fn;\n            this.on(event, on);\n            return this;\n        };\n\n        /**\n         * Remove the given callback for `event` or all\n         * registered callbacks.\n         *\n         * @param {String} event\n         * @param {Function} fn\n         * @return {Emitter}\n         * @api public\n         */\n\n        Emitter.prototype.off =\n            Emitter.prototype.removeListener =\n                Emitter.prototype.removeAllListeners =\n                    Emitter.prototype.removeEventListener = function(event, fn){\n                        this._callbacks = this._callbacks || {};\n\n                        // all\n                        if (0 == arguments.length) {\n                            this._callbacks = {};\n                            return this;\n                        }\n\n                        // specific event\n                        var callbacks = this._callbacks[event];\n                        if (!callbacks) return this;\n\n                        // remove all handlers\n                        if (1 == arguments.length) {\n                            delete this._callbacks[event];\n                            return this;\n                        }\n\n                        // remove specific handler\n                        var cb;\n                        for (var i = 0; i < callbacks.length; i++) {\n                            cb = callbacks[i];\n                            if (cb === fn || cb.fn === fn) {\n                                callbacks.splice(i, 1);\n                                break;\n                            }\n                        }\n                        return this;\n                    };\n\n        /**\n         * Emit `event` with the given args.\n         *\n         * @param {String} event\n         * @param {Mixed} ...\n         * @return {Emitter}\n         */\n\n        Emitter.prototype.emit = function(event){\n            this._callbacks = this._callbacks || {};\n            var args = [].slice.call(arguments, 1)\n                , callbacks = this._callbacks[event];\n\n            if (callbacks) {\n                callbacks = callbacks.slice(0);\n                for (var i = 0, len = callbacks.length; i < len; ++i) {\n                    callbacks[i].apply(this, args);\n                }\n            }\n\n            return this;\n        };\n\n        /**\n         * Return array of callbacks for `event`.\n         *\n         * @param {String} event\n         * @return {Array}\n         * @api public\n         */\n\n        Emitter.prototype.listeners = function(event){\n            this._callbacks = this._callbacks || {};\n            return this._callbacks[event] || [];\n        };\n\n        /**\n         * Check if this emitter has `event` handlers.\n         *\n         * @param {String} event\n         * @return {Boolean}\n         * @api public\n         */\n\n        Emitter.prototype.hasListeners = function(event){\n            return !! this.listeners(event).length;\n        };\n\n    },{}],18:[function(require,module,exports){\n\n        module.exports = function(a, b){\n            var fn = function(){};\n            fn.prototype = b.prototype;\n            a.prototype = new fn;\n            a.prototype.constructor = a;\n        };\n    },{}],19:[function(require,module,exports){\n\n        /**\n         * Expose `debug()` as the module.\n         */\n\n        module.exports = debug;\n\n        /**\n         * Create a debugger with the given `name`.\n         *\n         * @param {String} name\n         * @return {Type}\n         * @api public\n         */\n\n        function debug(name) {\n            if (!debug.enabled(name)) return function(){};\n\n            return function(fmt){\n                fmt = coerce(fmt);\n\n                var curr = new Date;\n                var ms = curr - (debug[name] || curr);\n                debug[name] = curr;\n\n                fmt = name\n                    + ' '\n                    + fmt\n                    + ' +' + debug.humanize(ms);\n\n                // This hackery is required for IE8\n                // where `console.log` doesn't have 'apply'\n                window.console\n                && console.log\n                && Function.prototype.apply.call(console.log, console, arguments);\n            }\n        }\n\n        /**\n         * The currently active debug mode names.\n         */\n\n        debug.names = [];\n        debug.skips = [];\n\n        /**\n         * Enables a debug mode by name. This can include modes\n         * separated by a colon and wildcards.\n         *\n         * @param {String} name\n         * @api public\n         */\n\n        debug.enable = function(name) {\n            try {\n                localStorage.debug = name;\n            } catch(e){}\n\n            var split = (name || '').split(/[\\s,]+/)\n                , len = split.length;\n\n            for (var i = 0; i < len; i++) {\n                name = split[i].replace('*', '.*?');\n                if (name[0] === '-') {\n                    debug.skips.push(new RegExp('^' + name.substr(1) + '$'));\n                }\n                else {\n                    debug.names.push(new RegExp('^' + name + '$'));\n                }\n            }\n        };\n\n        /**\n         * Disable debug output.\n         *\n         * @api public\n         */\n\n        debug.disable = function(){\n            debug.enable('');\n        };\n\n        /**\n         * Humanize the given `ms`.\n         *\n         * @param {Number} m\n         * @return {String}\n         * @api private\n         */\n\n        debug.humanize = function(ms) {\n            var sec = 1000\n                , min = 60 * 1000\n                , hour = 60 * min;\n\n            if (ms >= hour) return (ms / hour).toFixed(1) + 'h';\n            if (ms >= min) return (ms / min).toFixed(1) + 'm';\n            if (ms >= sec) return (ms / sec | 0) + 's';\n            return ms + 'ms';\n        };\n\n        /**\n         * Returns true if the given mode name is enabled, false otherwise.\n         *\n         * @param {String} name\n         * @return {Boolean}\n         * @api public\n         */\n\n        debug.enabled = function(name) {\n            for (var i = 0, len = debug.skips.length; i < len; i++) {\n                if (debug.skips[i].test(name)) {\n                    return false;\n                }\n            }\n            for (var i = 0, len = debug.names.length; i < len; i++) {\n                if (debug.names[i].test(name)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        /**\n         * Coerce `val`.\n         */\n\n        function coerce(val) {\n            if (val instanceof Error) return val.stack || val.message;\n            return val;\n        }\n\n// persist\n\n        try {\n            if (window.localStorage) debug.enable(localStorage.debug);\n        } catch(e){}\n\n    },{}],20:[function(require,module,exports){\n\n        module.exports =  require('./lib/');\n\n    },{\"./lib/\":21}],21:[function(require,module,exports){\n\n        module.exports = require('./socket');\n\n        /**\n         * Exports parser\n         *\n         * @api public\n         *\n         */\n        module.exports.parser = require('engine.io-parser');\n\n    },{\"./socket\":22,\"engine.io-parser\":33}],22:[function(require,module,exports){\n        (function (global){\n            /**\n             * Module dependencies.\n             */\n\n            var transports = require('./transports');\n            var Emitter = require('component-emitter');\n            var debug = require('debug')('engine.io-client:socket');\n            var index = require('indexof');\n            var parser = require('engine.io-parser');\n            var parseuri = require('parseuri');\n            var parsejson = require('parsejson');\n            var parseqs = require('parseqs');\n\n            /**\n             * Module exports.\n             */\n\n            module.exports = Socket;\n\n            /**\n             * Noop function.\n             *\n             * @api private\n             */\n\n            function noop(){}\n\n            /**\n             * Socket constructor.\n             *\n             * @param {String|Object} uri or options\n             * @param {Object} options\n             * @api public\n             */\n\n            function Socket(uri, opts){\n                if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n                opts = opts || {};\n\n                if (uri && 'object' == typeof uri) {\n                    opts = uri;\n                    uri = null;\n                }\n\n                if (uri) {\n                    uri = parseuri(uri);\n                    opts.host = uri.host;\n                    opts.secure = uri.protocol == 'https' || uri.protocol == 'wss';\n                    opts.port = uri.port;\n                    if (uri.query) opts.query = uri.query;\n                }\n\n                this.secure = null != opts.secure ? opts.secure :\n                    (global.location && 'https:' == location.protocol);\n\n                if (opts.host) {\n                    var pieces = opts.host.split(':');\n                    opts.hostname = pieces.shift();\n                    if (pieces.length) {\n                        opts.port = pieces.pop();\n                    } else if (!opts.port) {\n                        // if no port is specified manually, use the protocol default\n                        opts.port = this.secure ? '443' : '80';\n                    }\n                }\n\n                this.agent = opts.agent || false;\n                this.hostname = opts.hostname ||\n                    (global.location ? location.hostname : 'localhost');\n                this.port = opts.port || (global.location && location.port ?\n                    location.port :\n                    (this.secure ? 443 : 80));\n                this.query = opts.query || {};\n                if ('string' == typeof this.query) this.query = parseqs.decode(this.query);\n                this.upgrade = false !== opts.upgrade;\n                this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n                this.forceJSONP = !!opts.forceJSONP;\n                this.jsonp = false !== opts.jsonp;\n                this.forceBase64 = !!opts.forceBase64;\n                this.enablesXDR = !!opts.enablesXDR;\n                this.timestampParam = opts.timestampParam || 't';\n                this.timestampRequests = opts.timestampRequests;\n                this.transports = opts.transports || ['polling', 'websocket'];\n                this.readyState = '';\n                this.writeBuffer = [];\n                this.callbackBuffer = [];\n                this.policyPort = opts.policyPort || 843;\n                this.rememberUpgrade = opts.rememberUpgrade || false;\n                this.binaryType = null;\n                this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n\n                // SSL options for Node.js client\n                this.pfx = opts.pfx || null;\n                this.key = opts.key || null;\n                this.passphrase = opts.passphrase || null;\n                this.cert = opts.cert || null;\n                this.ca = opts.ca || null;\n                this.ciphers = opts.ciphers || null;\n                this.rejectUnauthorized = opts.rejectUnauthorized || null;\n\n                this.open();\n            }\n\n            Socket.priorWebsocketSuccess = false;\n\n            /**\n             * Mix in `Emitter`.\n             */\n\n            Emitter(Socket.prototype);\n\n            /**\n             * Protocol version.\n             *\n             * @api public\n             */\n\n            Socket.protocol = parser.protocol; // this is an int\n\n            /**\n             * Expose deps for legacy compatibility\n             * and standalone browser access.\n             */\n\n            Socket.Socket = Socket;\n            Socket.Transport = require('./transport');\n            Socket.transports = require('./transports');\n            Socket.parser = require('engine.io-parser');\n\n            /**\n             * Creates transport of the given type.\n             *\n             * @param {String} transport name\n             * @return {Transport}\n             * @api private\n             */\n\n            Socket.prototype.createTransport = function (name) {\n                debug('creating transport \"%s\"', name);\n                var query = clone(this.query);\n\n                // append engine.io protocol identifier\n                query.EIO = parser.protocol;\n\n                // transport name\n                query.transport = name;\n\n                // session id if we already have one\n                if (this.id) query.sid = this.id;\n\n                var transport = new transports[name]({\n                    agent: this.agent,\n                    hostname: this.hostname,\n                    port: this.port,\n                    secure: this.secure,\n                    path: this.path,\n                    query: query,\n                    forceJSONP: this.forceJSONP,\n                    jsonp: this.jsonp,\n                    forceBase64: this.forceBase64,\n                    enablesXDR: this.enablesXDR,\n                    timestampRequests: this.timestampRequests,\n                    timestampParam: this.timestampParam,\n                    policyPort: this.policyPort,\n                    socket: this,\n                    pfx: this.pfx,\n                    key: this.key,\n                    passphrase: this.passphrase,\n                    cert: this.cert,\n                    ca: this.ca,\n                    ciphers: this.ciphers,\n                    rejectUnauthorized: this.rejectUnauthorized\n                });\n\n                return transport;\n            };\n\n            function clone (obj) {\n                var o = {};\n                for (var i in obj) {\n                    if (obj.hasOwnProperty(i)) {\n                        o[i] = obj[i];\n                    }\n                }\n                return o;\n            }\n\n            /**\n             * Initializes transport to use and starts probe.\n             *\n             * @api private\n             */\n            Socket.prototype.open = function () {\n                var transport;\n                if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') != -1) {\n                    transport = 'websocket';\n                } else if (0 == this.transports.length) {\n                    // Emit error on next tick so it can be listened to\n                    var self = this;\n                    setTimeout(function() {\n                        self.emit('error', 'No transports available');\n                    }, 0);\n                    return;\n                } else {\n                    transport = this.transports[0];\n                }\n                this.readyState = 'opening';\n\n                // Retry with the next transport if the transport is disabled (jsonp: false)\n                var transport;\n                try {\n                    transport = this.createTransport(transport);\n                } catch (e) {\n                    this.transports.shift();\n                    this.open();\n                    return;\n                }\n\n                transport.open();\n                this.setTransport(transport);\n            };\n\n            /**\n             * Sets the current transport. Disables the existing one (if any).\n             *\n             * @api private\n             */\n\n            Socket.prototype.setTransport = function(transport){\n                debug('setting transport %s', transport.name);\n                var self = this;\n\n                if (this.transport) {\n                    debug('clearing existing transport %s', this.transport.name);\n                    this.transport.removeAllListeners();\n                }\n\n                // set up transport\n                this.transport = transport;\n\n                // set up transport listeners\n                transport\n                    .on('drain', function(){\n                        self.onDrain();\n                    })\n                    .on('packet', function(packet){\n                        self.onPacket(packet);\n                    })\n                    .on('error', function(e){\n                        self.onError(e);\n                    })\n                    .on('close', function(){\n                        self.onClose('transport close');\n                    });\n            };\n\n            /**\n             * Probes a transport.\n             *\n             * @param {String} transport name\n             * @api private\n             */\n\n            Socket.prototype.probe = function (name) {\n                debug('probing transport \"%s\"', name);\n                var transport = this.createTransport(name, { probe: 1 })\n                    , failed = false\n                    , self = this;\n\n                Socket.priorWebsocketSuccess = false;\n\n                function onTransportOpen(){\n                    if (self.onlyBinaryUpgrades) {\n                        var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n                        failed = failed || upgradeLosesBinary;\n                    }\n                    if (failed) return;\n\n                    debug('probe transport \"%s\" opened', name);\n                    transport.send([{ type: 'ping', data: 'probe' }]);\n                    transport.once('packet', function (msg) {\n                        if (failed) return;\n                        if ('pong' == msg.type && 'probe' == msg.data) {\n                            debug('probe transport \"%s\" pong', name);\n                            self.upgrading = true;\n                            self.emit('upgrading', transport);\n                            if (!transport) return;\n                            Socket.priorWebsocketSuccess = 'websocket' == transport.name;\n\n                            debug('pausing current transport \"%s\"', self.transport.name);\n                            self.transport.pause(function () {\n                                if (failed) return;\n                                if ('closed' == self.readyState) return;\n                                debug('changing transport and sending upgrade packet');\n\n                                cleanup();\n\n                                self.setTransport(transport);\n                                transport.send([{ type: 'upgrade' }]);\n                                self.emit('upgrade', transport);\n                                transport = null;\n                                self.upgrading = false;\n                                self.flush();\n                            });\n                        } else {\n                            debug('probe transport \"%s\" failed', name);\n                            var err = new Error('probe error');\n                            err.transport = transport.name;\n                            self.emit('upgradeError', err);\n                        }\n                    });\n                }\n\n                function freezeTransport() {\n                    if (failed) return;\n\n                    // Any callback called by transport should be ignored since now\n                    failed = true;\n\n                    cleanup();\n\n                    transport.close();\n                    transport = null;\n                }\n\n                //Handle any error that happens while probing\n                function onerror(err) {\n                    var error = new Error('probe error: ' + err);\n                    error.transport = transport.name;\n\n                    freezeTransport();\n\n                    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n                    self.emit('upgradeError', error);\n                }\n\n                function onTransportClose(){\n                    onerror(\"transport closed\");\n                }\n\n                //When the socket is closed while we're probing\n                function onclose(){\n                    onerror(\"socket closed\");\n                }\n\n                //When the socket is upgraded while we're probing\n                function onupgrade(to){\n                    if (transport && to.name != transport.name) {\n                        debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n                        freezeTransport();\n                    }\n                }\n\n                //Remove all listeners on the transport and on self\n                function cleanup(){\n                    transport.removeListener('open', onTransportOpen);\n                    transport.removeListener('error', onerror);\n                    transport.removeListener('close', onTransportClose);\n                    self.removeListener('close', onclose);\n                    self.removeListener('upgrading', onupgrade);\n                }\n\n                transport.once('open', onTransportOpen);\n                transport.once('error', onerror);\n                transport.once('close', onTransportClose);\n\n                this.once('close', onclose);\n                this.once('upgrading', onupgrade);\n\n                transport.open();\n\n            };\n\n            /**\n             * Called when connection is deemed open.\n             *\n             * @api public\n             */\n\n            Socket.prototype.onOpen = function () {\n                debug('socket open');\n                this.readyState = 'open';\n                Socket.priorWebsocketSuccess = 'websocket' == this.transport.name;\n                this.emit('open');\n                this.flush();\n\n                // we check for `readyState` in case an `open`\n                // listener already closed the socket\n                if ('open' == this.readyState && this.upgrade && this.transport.pause) {\n                    debug('starting upgrade probes');\n                    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n                        this.probe(this.upgrades[i]);\n                    }\n                }\n            };\n\n            /**\n             * Handles a packet.\n             *\n             * @api private\n             */\n\n            Socket.prototype.onPacket = function (packet) {\n                if ('opening' == this.readyState || 'open' == this.readyState) {\n                    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n                    this.emit('packet', packet);\n\n                    // Socket is live - any packet counts\n                    this.emit('heartbeat');\n\n                    switch (packet.type) {\n                        case 'open':\n                            this.onHandshake(parsejson(packet.data));\n                            break;\n\n                        case 'pong':\n                            this.setPing();\n                            break;\n\n                        case 'error':\n                            var err = new Error('server error');\n                            err.code = packet.data;\n                            this.emit('error', err);\n                            break;\n\n                        case 'message':\n                            this.emit('data', packet.data);\n                            this.emit('message', packet.data);\n                            break;\n                    }\n                } else {\n                    debug('packet received with socket readyState \"%s\"', this.readyState);\n                }\n            };\n\n            /**\n             * Called upon handshake completion.\n             *\n             * @param {Object} handshake obj\n             * @api private\n             */\n\n            Socket.prototype.onHandshake = function (data) {\n                this.emit('handshake', data);\n                this.id = data.sid;\n                this.transport.query.sid = data.sid;\n                this.upgrades = this.filterUpgrades(data.upgrades);\n                this.pingInterval = data.pingInterval;\n                this.pingTimeout = data.pingTimeout;\n                this.onOpen();\n                // In case open handler closes socket\n                if  ('closed' == this.readyState) return;\n                this.setPing();\n\n                // Prolong liveness of socket on heartbeat\n                this.removeListener('heartbeat', this.onHeartbeat);\n                this.on('heartbeat', this.onHeartbeat);\n            };\n\n            /**\n             * Resets ping timeout.\n             *\n             * @api private\n             */\n\n            Socket.prototype.onHeartbeat = function (timeout) {\n                clearTimeout(this.pingTimeoutTimer);\n                var self = this;\n                self.pingTimeoutTimer = setTimeout(function () {\n                    if ('closed' == self.readyState) return;\n                    self.onClose('ping timeout');\n                }, timeout || (self.pingInterval + self.pingTimeout));\n            };\n\n            /**\n             * Pings server every `this.pingInterval` and expects response\n             * within `this.pingTimeout` or closes connection.\n             *\n             * @api private\n             */\n\n            Socket.prototype.setPing = function () {\n                var self = this;\n                clearTimeout(self.pingIntervalTimer);\n                self.pingIntervalTimer = setTimeout(function () {\n                    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n                    self.ping();\n                    self.onHeartbeat(self.pingTimeout);\n                }, self.pingInterval);\n            };\n\n            /**\n             * Sends a ping packet.\n             *\n             * @api public\n             */\n\n            Socket.prototype.ping = function () {\n                this.sendPacket('ping');\n            };\n\n            /**\n             * Called on `drain` event\n             *\n             * @api private\n             */\n\n            Socket.prototype.onDrain = function() {\n                for (var i = 0; i < this.prevBufferLen; i++) {\n                    if (this.callbackBuffer[i]) {\n                        this.callbackBuffer[i]();\n                    }\n                }\n\n                this.writeBuffer.splice(0, this.prevBufferLen);\n                this.callbackBuffer.splice(0, this.prevBufferLen);\n\n                // setting prevBufferLen = 0 is very important\n                // for example, when upgrading, upgrade packet is sent over,\n                // and a nonzero prevBufferLen could cause problems on `drain`\n                this.prevBufferLen = 0;\n\n                if (this.writeBuffer.length == 0) {\n                    this.emit('drain');\n                } else {\n                    this.flush();\n                }\n            };\n\n            /**\n             * Flush write buffers.\n             *\n             * @api private\n             */\n\n            Socket.prototype.flush = function () {\n                if ('closed' != this.readyState && this.transport.writable &&\n                    !this.upgrading && this.writeBuffer.length) {\n                    debug('flushing %d packets in socket', this.writeBuffer.length);\n                    this.transport.send(this.writeBuffer);\n                    // keep track of current length of writeBuffer\n                    // splice writeBuffer and callbackBuffer on `drain`\n                    this.prevBufferLen = this.writeBuffer.length;\n                    this.emit('flush');\n                }\n            };\n\n            /**\n             * Sends a message.\n             *\n             * @param {String} message.\n             * @param {Function} callback function.\n             * @return {Socket} for chaining.\n             * @api public\n             */\n\n            Socket.prototype.write =\n                Socket.prototype.send = function (msg, fn) {\n                    this.sendPacket('message', msg, fn);\n                    return this;\n                };\n\n            /**\n             * Sends a packet.\n             *\n             * @param {String} packet type.\n             * @param {String} data.\n             * @param {Function} callback function.\n             * @api private\n             */\n\n            Socket.prototype.sendPacket = function (type, data, fn) {\n                if ('closing' == this.readyState || 'closed' == this.readyState) {\n                    return;\n                }\n\n                var packet = { type: type, data: data };\n                this.emit('packetCreate', packet);\n                this.writeBuffer.push(packet);\n                this.callbackBuffer.push(fn);\n                this.flush();\n            };\n\n            /**\n             * Closes the connection.\n             *\n             * @api private\n             */\n\n            Socket.prototype.close = function () {\n                if ('opening' == this.readyState || 'open' == this.readyState) {\n                    this.readyState = 'closing';\n\n                    var self = this;\n\n                    function close() {\n                        self.onClose('forced close');\n                        debug('socket closing - telling transport to close');\n                        self.transport.close();\n                    }\n\n                    function cleanupAndClose() {\n                        self.removeListener('upgrade', cleanupAndClose);\n                        self.removeListener('upgradeError', cleanupAndClose);\n                        close();\n                    }\n\n                    function waitForUpgrade() {\n                        // wait for upgrade to finish since we can't send packets while pausing a transport\n                        self.once('upgrade', cleanupAndClose);\n                        self.once('upgradeError', cleanupAndClose);\n                    }\n\n                    if (this.writeBuffer.length) {\n                        this.once('drain', function() {\n                            if (this.upgrading) {\n                                waitForUpgrade();\n                            } else {\n                                close();\n                            }\n                        });\n                    } else if (this.upgrading) {\n                        waitForUpgrade();\n                    } else {\n                        close();\n                    }\n                }\n\n                return this;\n            };\n\n            /**\n             * Called upon transport error\n             *\n             * @api private\n             */\n\n            Socket.prototype.onError = function (err) {\n                debug('socket error %j', err);\n                Socket.priorWebsocketSuccess = false;\n                this.emit('error', err);\n                this.onClose('transport error', err);\n            };\n\n            /**\n             * Called upon transport close.\n             *\n             * @api private\n             */\n\n            Socket.prototype.onClose = function (reason, desc) {\n                if ('opening' == this.readyState || 'open' == this.readyState || 'closing' == this.readyState) {\n                    debug('socket close with reason: \"%s\"', reason);\n                    var self = this;\n\n                    // clear timers\n                    clearTimeout(this.pingIntervalTimer);\n                    clearTimeout(this.pingTimeoutTimer);\n\n                    // clean buffers in next tick, so developers can still\n                    // grab the buffers on `close` event\n                    setTimeout(function() {\n                        self.writeBuffer = [];\n                        self.callbackBuffer = [];\n                        self.prevBufferLen = 0;\n                    }, 0);\n\n                    // stop event from firing again for transport\n                    this.transport.removeAllListeners('close');\n\n                    // ensure transport won't stay open\n                    this.transport.close();\n\n                    // ignore further transport communication\n                    this.transport.removeAllListeners();\n\n                    // set ready state\n                    this.readyState = 'closed';\n\n                    // clear session id\n                    this.id = null;\n\n                    // emit close event\n                    this.emit('close', reason, desc);\n                }\n            };\n\n            /**\n             * Filters upgrades, returning only those matching client transports.\n             *\n             * @param {Array} server upgrades\n             * @api private\n             *\n             */\n\n            Socket.prototype.filterUpgrades = function (upgrades) {\n                var filteredUpgrades = [];\n                for (var i = 0, j = upgrades.length; i<j; i++) {\n                    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n                }\n                return filteredUpgrades;\n            };\n\n        }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{\"./transport\":23,\"./transports\":24,\"component-emitter\":17,\"debug\":30,\"engine.io-parser\":33,\"indexof\":41,\"parsejson\":49,\"parseqs\":50,\"parseuri\":32}],23:[function(require,module,exports){\n        /**\n         * Module dependencies.\n         */\n\n        var parser = require('engine.io-parser');\n        var Emitter = require('component-emitter');\n\n        /**\n         * Module exports.\n         */\n\n        module.exports = Transport;\n\n        /**\n         * Transport abstract constructor.\n         *\n         * @param {Object} options.\n         * @api private\n         */\n\n        function Transport (opts) {\n            this.path = opts.path;\n            this.hostname = opts.hostname;\n            this.port = opts.port;\n            this.secure = opts.secure;\n            this.query = opts.query;\n            this.timestampParam = opts.timestampParam;\n            this.timestampRequests = opts.timestampRequests;\n            this.readyState = '';\n            this.agent = opts.agent || false;\n            this.socket = opts.socket;\n            this.enablesXDR = opts.enablesXDR;\n\n            // SSL options for Node.js client\n            this.pfx = opts.pfx;\n            this.key = opts.key;\n            this.passphrase = opts.passphrase;\n            this.cert = opts.cert;\n            this.ca = opts.ca;\n            this.ciphers = opts.ciphers;\n            this.rejectUnauthorized = opts.rejectUnauthorized;\n        }\n\n        /**\n         * Mix in `Emitter`.\n         */\n\n        Emitter(Transport.prototype);\n\n        /**\n         * A counter used to prevent collisions in the timestamps used\n         * for cache busting.\n         */\n\n        Transport.timestamps = 0;\n\n        /**\n         * Emits an error.\n         *\n         * @param {String} str\n         * @return {Transport} for chaining\n         * @api public\n         */\n\n        Transport.prototype.onError = function (msg, desc) {\n            var err = new Error(msg);\n            err.type = 'TransportError';\n            err.description = desc;\n            this.emit('error', err);\n            return this;\n        };\n\n        /**\n         * Opens the transport.\n         *\n         * @api public\n         */\n\n        Transport.prototype.open = function () {\n            if ('closed' == this.readyState || '' == this.readyState) {\n                this.readyState = 'opening';\n                this.doOpen();\n            }\n\n            return this;\n        };\n\n        /**\n         * Closes the transport.\n         *\n         * @api private\n         */\n\n        Transport.prototype.close = function () {\n            if ('opening' == this.readyState || 'open' == this.readyState) {\n                this.doClose();\n                this.onClose();\n            }\n\n            return this;\n        };\n\n        /**\n         * Sends multiple packets.\n         *\n         * @param {Array} packets\n         * @api private\n         */\n\n        Transport.prototype.send = function(packets){\n            if ('open' == this.readyState) {\n                this.write(packets);\n            } else {\n                throw new Error('Transport not open');\n            }\n        };\n\n        /**\n         * Called upon open\n         *\n         * @api private\n         */\n\n        Transport.prototype.onOpen = function () {\n            this.readyState = 'open';\n            this.writable = true;\n            this.emit('open');\n        };\n\n        /**\n         * Called with data.\n         *\n         * @param {String} data\n         * @api private\n         */\n\n        Transport.prototype.onData = function(data){\n            var packet = parser.decodePacket(data, this.socket.binaryType);\n            this.onPacket(packet);\n        };\n\n        /**\n         * Called with a decoded packet.\n         */\n\n        Transport.prototype.onPacket = function (packet) {\n            this.emit('packet', packet);\n        };\n\n        /**\n         * Called upon close.\n         *\n         * @api private\n         */\n\n        Transport.prototype.onClose = function () {\n            this.readyState = 'closed';\n            this.emit('close');\n        };\n\n    },{\"component-emitter\":17,\"engine.io-parser\":33}],24:[function(require,module,exports){\n        (function (global){\n            /**\n             * Module dependencies\n             */\n\n            var XMLHttpRequest = require('xmlhttprequest');\n            var XHR = require('./polling-xhr');\n            var JSONP = require('./polling-jsonp');\n            var websocket = require('./websocket');\n\n            /**\n             * Export transports.\n             */\n\n            exports.polling = polling;\n            exports.websocket = websocket;\n\n            /**\n             * Polling transport polymorphic constructor.\n             * Decides on xhr vs jsonp based on feature detection.\n             *\n             * @api private\n             */\n\n            function polling(opts){\n                var xhr;\n                var xd = false;\n                var xs = false;\n                var jsonp = false !== opts.jsonp;\n\n                if (global.location) {\n                    var isSSL = 'https:' == location.protocol;\n                    var port = location.port;\n\n                    // some user agents have empty `location.port`\n                    if (!port) {\n                        port = isSSL ? 443 : 80;\n                    }\n\n                    xd = opts.hostname != location.hostname || port != opts.port;\n                    xs = opts.secure != isSSL;\n                }\n\n                opts.xdomain = xd;\n                opts.xscheme = xs;\n                xhr = new XMLHttpRequest(opts);\n\n                if ('open' in xhr && !opts.forceJSONP) {\n                    return new XHR(opts);\n                } else {\n                    if (!jsonp) throw new Error('JSONP disabled');\n                    return new JSONP(opts);\n                }\n            }\n\n        }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{\"./polling-jsonp\":25,\"./polling-xhr\":26,\"./websocket\":28,\"xmlhttprequest\":29}],25:[function(require,module,exports){\n        (function (global){\n\n            /**\n             * Module requirements.\n             */\n\n            var Polling = require('./polling');\n            var inherit = require('component-inherit');\n\n            /**\n             * Module exports.\n             */\n\n            module.exports = JSONPPolling;\n\n            /**\n             * Cached regular expressions.\n             */\n\n            var rNewline = /\\n/g;\n            var rEscapedNewline = /\\\\n/g;\n\n            /**\n             * Global JSONP callbacks.\n             */\n\n            var callbacks;\n\n            /**\n             * Callbacks count.\n             */\n\n            var index = 0;\n\n            /**\n             * Noop.\n             */\n\n            function empty () { }\n\n            /**\n             * JSONP Polling constructor.\n             *\n             * @param {Object} opts.\n             * @api public\n             */\n\n            function JSONPPolling (opts) {\n                Polling.call(this, opts);\n\n                this.query = this.query || {};\n\n                // define global callbacks array if not present\n                // we do this here (lazily) to avoid unneeded global pollution\n                if (!callbacks) {\n                    // we need to consider multiple engines in the same page\n                    if (!global.___eio) global.___eio = [];\n                    callbacks = global.___eio;\n                }\n\n                // callback identifier\n                this.index = callbacks.length;\n\n                // add callback to jsonp global\n                var self = this;\n                callbacks.push(function (msg) {\n                    self.onData(msg);\n                });\n\n                // append to query string\n                this.query.j = this.index;\n\n                // prevent spurious errors from being emitted when the window is unloaded\n                if (global.document && global.addEventListener) {\n                    global.addEventListener('beforeunload', function () {\n                        if (self.script) self.script.onerror = empty;\n                    }, false);\n                }\n            }\n\n            /**\n             * Inherits from Polling.\n             */\n\n            inherit(JSONPPolling, Polling);\n\n            /*\n * JSONP only supports binary as base64 encoded strings\n */\n\n            JSONPPolling.prototype.supportsBinary = false;\n\n            /**\n             * Closes the socket.\n             *\n             * @api private\n             */\n\n            JSONPPolling.prototype.doClose = function () {\n                if (this.script) {\n                    this.script.parentNode.removeChild(this.script);\n                    this.script = null;\n                }\n\n                if (this.form) {\n                    this.form.parentNode.removeChild(this.form);\n                    this.form = null;\n                    this.iframe = null;\n                }\n\n                Polling.prototype.doClose.call(this);\n            };\n\n            /**\n             * Starts a poll cycle.\n             *\n             * @api private\n             */\n\n            JSONPPolling.prototype.doPoll = function () {\n                var self = this;\n                var script = document.createElement('script');\n\n                if (this.script) {\n                    this.script.parentNode.removeChild(this.script);\n                    this.script = null;\n                }\n\n                script.async = true;\n                script.src = this.uri();\n                script.onerror = function(e){\n                    self.onError('jsonp poll error',e);\n                };\n\n                var insertAt = document.getElementsByTagName('script')[0];\n                insertAt.parentNode.insertBefore(script, insertAt);\n                this.script = script;\n\n                var isUAgecko = 'undefined' != typeof navigator && /gecko/i.test(navigator.userAgent);\n\n                if (isUAgecko) {\n                    setTimeout(function () {\n                        var iframe = document.createElement('iframe');\n                        document.body.appendChild(iframe);\n                        document.body.removeChild(iframe);\n                    }, 100);\n                }\n            };\n\n            /**\n             * Writes with a hidden iframe.\n             *\n             * @param {String} data to send\n             * @param {Function} called upon flush.\n             * @api private\n             */\n\n            JSONPPolling.prototype.doWrite = function (data, fn) {\n                var self = this;\n\n                if (!this.form) {\n                    var form = document.createElement('form');\n                    var area = document.createElement('textarea');\n                    var id = this.iframeId = 'eio_iframe_' + this.index;\n                    var iframe;\n\n                    form.className = 'socketio';\n                    form.style.position = 'absolute';\n                    form.style.top = '-1000px';\n                    form.style.left = '-1000px';\n                    form.target = id;\n                    form.method = 'POST';\n                    form.setAttribute('accept-charset', 'utf-8');\n                    area.name = 'd';\n                    form.appendChild(area);\n                    document.body.appendChild(form);\n\n                    this.form = form;\n                    this.area = area;\n                }\n\n                this.form.action = this.uri();\n\n                function complete () {\n                    initIframe();\n                    fn();\n                }\n\n                function initIframe () {\n                    if (self.iframe) {\n                        try {\n                            self.form.removeChild(self.iframe);\n                        } catch (e) {\n                            self.onError('jsonp polling iframe removal error', e);\n                        }\n                    }\n\n                    try {\n                        // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n                        var html = '<iframe src=\"javascript:0\" name=\"'+ self.iframeId +'\">';\n                        iframe = document.createElement(html);\n                    } catch (e) {\n                        iframe = document.createElement('iframe');\n                        iframe.name = self.iframeId;\n                        iframe.src = 'javascript:0';\n                    }\n\n                    iframe.id = self.iframeId;\n\n                    self.form.appendChild(iframe);\n                    self.iframe = iframe;\n                }\n\n                initIframe();\n\n                // escape \\n to prevent it from being converted into \\r\\n by some UAs\n                // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n                data = data.replace(rEscapedNewline, '\\\\\\n');\n                this.area.value = data.replace(rNewline, '\\\\n');\n\n                try {\n                    this.form.submit();\n                } catch(e) {}\n\n                if (this.iframe.attachEvent) {\n                    this.iframe.onreadystatechange = function(){\n                        if (self.iframe.readyState == 'complete') {\n                            complete();\n                        }\n                    };\n                } else {\n                    this.iframe.onload = complete;\n                }\n            };\n\n        }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{\"./polling\":27,\"component-inherit\":18}],26:[function(require,module,exports){\n        (function (global){\n            /**\n             * Module requirements.\n             */\n\n            var XMLHttpRequest = require('xmlhttprequest');\n            var Polling = require('./polling');\n            var Emitter = require('component-emitter');\n            var inherit = require('component-inherit');\n            var debug = require('debug')('engine.io-client:polling-xhr');\n\n            /**\n             * Module exports.\n             */\n\n            module.exports = XHR;\n            module.exports.Request = Request;\n\n            /**\n             * Empty function\n             */\n\n            function empty(){}\n\n            /**\n             * XHR Polling constructor.\n             *\n             * @param {Object} opts\n             * @api public\n             */\n\n            function XHR(opts){\n                Polling.call(this, opts);\n\n                if (global.location) {\n                    var isSSL = 'https:' == location.protocol;\n                    var port = location.port;\n\n                    // some user agents have empty `location.port`\n                    if (!port) {\n                        port = isSSL ? 443 : 80;\n                    }\n\n                    this.xd = opts.hostname != global.location.hostname ||\n                        port != opts.port;\n                    this.xs = opts.secure != isSSL;\n                }\n            }\n\n            /**\n             * Inherits from Polling.\n             */\n\n            inherit(XHR, Polling);\n\n            /**\n             * XHR supports binary\n             */\n\n            XHR.prototype.supportsBinary = true;\n\n            /**\n             * Creates a request.\n             *\n             * @param {String} method\n             * @api private\n             */\n\n            XHR.prototype.request = function(opts){\n                opts = opts || {};\n                opts.uri = this.uri();\n                opts.xd = this.xd;\n                opts.xs = this.xs;\n                opts.agent = this.agent || false;\n                opts.supportsBinary = this.supportsBinary;\n                opts.enablesXDR = this.enablesXDR;\n\n                // SSL options for Node.js client\n                opts.pfx = this.pfx;\n                opts.key = this.key;\n                opts.passphrase = this.passphrase;\n                opts.cert = this.cert;\n                opts.ca = this.ca;\n                opts.ciphers = this.ciphers;\n                opts.rejectUnauthorized = this.rejectUnauthorized;\n\n                return new Request(opts);\n            };\n\n            /**\n             * Sends data.\n             *\n             * @param {String} data to send.\n             * @param {Function} called upon flush.\n             * @api private\n             */\n\n            XHR.prototype.doWrite = function(data, fn){\n                var isBinary = typeof data !== 'string' && data !== undefined;\n                var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n                var self = this;\n                req.on('success', fn);\n                req.on('error', function(err){\n                    self.onError('xhr post error', err);\n                });\n                this.sendXhr = req;\n            };\n\n            /**\n             * Starts a poll cycle.\n             *\n             * @api private\n             */\n\n            XHR.prototype.doPoll = function(){\n                debug('xhr poll');\n                var req = this.request();\n                var self = this;\n                req.on('data', function(data){\n                    self.onData(data);\n                });\n                req.on('error', function(err){\n                    self.onError('xhr poll error', err);\n                });\n                this.pollXhr = req;\n            };\n\n            /**\n             * Request constructor\n             *\n             * @param {Object} options\n             * @api public\n             */\n\n            function Request(opts){\n                this.method = opts.method || 'GET';\n                this.uri = opts.uri;\n                this.xd = !!opts.xd;\n                this.xs = !!opts.xs;\n                this.async = false !== opts.async;\n                this.data = undefined != opts.data ? opts.data : null;\n                this.agent = opts.agent;\n                this.isBinary = opts.isBinary;\n                this.supportsBinary = opts.supportsBinary;\n                this.enablesXDR = opts.enablesXDR;\n\n                // SSL options for Node.js client\n                this.pfx = opts.pfx;\n                this.key = opts.key;\n                this.passphrase = opts.passphrase;\n                this.cert = opts.cert;\n                this.ca = opts.ca;\n                this.ciphers = opts.ciphers;\n                this.rejectUnauthorized = opts.rejectUnauthorized;\n\n                this.create();\n            }\n\n            /**\n             * Mix in `Emitter`.\n             */\n\n            Emitter(Request.prototype);\n\n            /**\n             * Creates the XHR object and sends the request.\n             *\n             * @api private\n             */\n\n            Request.prototype.create = function(){\n                var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n                // SSL options for Node.js client\n                opts.pfx = this.pfx;\n                opts.key = this.key;\n                opts.passphrase = this.passphrase;\n                opts.cert = this.cert;\n                opts.ca = this.ca;\n                opts.ciphers = this.ciphers;\n                opts.rejectUnauthorized = this.rejectUnauthorized;\n\n                var xhr = this.xhr = new XMLHttpRequest(opts);\n                var self = this;\n\n                try {\n                    debug('xhr open %s: %s', this.method, this.uri);\n                    xhr.open(this.method, this.uri, this.async);\n                    if (this.supportsBinary) {\n                        // This has to be done after open because Firefox is stupid\n                        // http://stackoverflow.com/questions/13216903/get-binary-data-with-xmlhttprequest-in-a-firefox-extension\n                        xhr.responseType = 'arraybuffer';\n                    }\n\n                    if ('POST' == this.method) {\n                        try {\n                            if (this.isBinary) {\n                                xhr.setRequestHeader('Content-type', 'application/octet-stream');\n                            } else {\n                                xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n                            }\n                        } catch (e) {}\n                    }\n\n                    // ie6 check\n                    if ('withCredentials' in xhr) {\n                        xhr.withCredentials = true;\n                    }\n\n                    if (this.hasXDR()) {\n                        xhr.onload = function(){\n                            self.onLoad();\n                        };\n                        xhr.onerror = function(){\n                            self.onError(xhr.responseText);\n                        };\n                    } else {\n                        xhr.onreadystatechange = function(){\n                            if (4 != xhr.readyState) return;\n                            if (200 == xhr.status || 1223 == xhr.status) {\n                                self.onLoad();\n                            } else {\n                                // make sure the `error` event handler that's user-set\n                                // does not throw in the same tick and gets caught here\n                                setTimeout(function(){\n                                    self.onError(xhr.status);\n                                }, 0);\n                            }\n                        };\n                    }\n\n                    debug('xhr data %s', this.data);\n                    xhr.send(this.data);\n                } catch (e) {\n                    // Need to defer since .create() is called directly fhrom the constructor\n                    // and thus the 'error' event can only be only bound *after* this exception\n                    // occurs.  Therefore, also, we cannot throw here at all.\n                    setTimeout(function() {\n                        self.onError(e);\n                    }, 0);\n                    return;\n                }\n\n                if (global.document) {\n                    this.index = Request.requestsCount++;\n                    Request.requests[this.index] = this;\n                }\n            };\n\n            /**\n             * Called upon successful response.\n             *\n             * @api private\n             */\n\n            Request.prototype.onSuccess = function(){\n                this.emit('success');\n                this.cleanup();\n            };\n\n            /**\n             * Called if we have data.\n             *\n             * @api private\n             */\n\n            Request.prototype.onData = function(data){\n                this.emit('data', data);\n                this.onSuccess();\n            };\n\n            /**\n             * Called upon error.\n             *\n             * @api private\n             */\n\n            Request.prototype.onError = function(err){\n                this.emit('error', err);\n                this.cleanup(true);\n            };\n\n            /**\n             * Cleans up house.\n             *\n             * @api private\n             */\n\n            Request.prototype.cleanup = function(fromError){\n                if ('undefined' == typeof this.xhr || null === this.xhr) {\n                    return;\n                }\n                // xmlhttprequest\n                if (this.hasXDR()) {\n                    this.xhr.onload = this.xhr.onerror = empty;\n                } else {\n                    this.xhr.onreadystatechange = empty;\n                }\n\n                if (fromError) {\n                    try {\n                        this.xhr.abort();\n                    } catch(e) {}\n                }\n\n                if (global.document) {\n                    delete Request.requests[this.index];\n                }\n\n                this.xhr = null;\n            };\n\n            /**\n             * Called upon load.\n             *\n             * @api private\n             */\n\n            Request.prototype.onLoad = function(){\n                var data;\n                try {\n                    var contentType;\n                    try {\n                        contentType = this.xhr.getResponseHeader('Content-Type').split(';')[0];\n                    } catch (e) {}\n                    if (contentType === 'application/octet-stream') {\n                        data = this.xhr.response;\n                    } else {\n                        if (!this.supportsBinary) {\n                            data = this.xhr.responseText;\n                        } else {\n                            data = 'ok';\n                        }\n                    }\n                } catch (e) {\n                    this.onError(e);\n                }\n                if (null != data) {\n                    this.onData(data);\n                }\n            };\n\n            /**\n             * Check if it has XDomainRequest.\n             *\n             * @api private\n             */\n\n            Request.prototype.hasXDR = function(){\n                return 'undefined' !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;\n            };\n\n            /**\n             * Aborts the request.\n             *\n             * @api public\n             */\n\n            Request.prototype.abort = function(){\n                this.cleanup();\n            };\n\n            /**\n             * Aborts pending requests when unloading the window. This is needed to prevent\n             * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n             * emitted.\n             */\n\n            if (global.document) {\n                Request.requestsCount = 0;\n                Request.requests = {};\n                if (global.attachEvent) {\n                    global.attachEvent('onunload', unloadHandler);\n                } else if (global.addEventListener) {\n                    global.addEventListener('beforeunload', unloadHandler, false);\n                }\n            }\n\n            function unloadHandler() {\n                for (var i in Request.requests) {\n                    if (Request.requests.hasOwnProperty(i)) {\n                        Request.requests[i].abort();\n                    }\n                }\n            }\n\n        }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{\"./polling\":27,\"component-emitter\":17,\"component-inherit\":18,\"debug\":30,\"xmlhttprequest\":29}],27:[function(require,module,exports){\n        /**\n         * Module dependencies.\n         */\n\n        var Transport = require('../transport');\n        var parseqs = require('parseqs');\n        var parser = require('engine.io-parser');\n        var inherit = require('component-inherit');\n        var debug = require('debug')('engine.io-client:polling');\n\n        /**\n         * Module exports.\n         */\n\n        module.exports = Polling;\n\n        /**\n         * Is XHR2 supported?\n         */\n\n        var hasXHR2 = (function() {\n            var XMLHttpRequest = require('xmlhttprequest');\n            var xhr = new XMLHttpRequest({ xdomain: false });\n            return null != xhr.responseType;\n        })();\n\n        /**\n         * Polling interface.\n         *\n         * @param {Object} opts\n         * @api private\n         */\n\n        function Polling(opts){\n            var forceBase64 = (opts && opts.forceBase64);\n            if (!hasXHR2 || forceBase64) {\n                this.supportsBinary = false;\n            }\n            Transport.call(this, opts);\n        }\n\n        /**\n         * Inherits from Transport.\n         */\n\n        inherit(Polling, Transport);\n\n        /**\n         * Transport name.\n         */\n\n        Polling.prototype.name = 'polling';\n\n        /**\n         * Opens the socket (triggers polling). We write a PING message to determine\n         * when the transport is open.\n         *\n         * @api private\n         */\n\n        Polling.prototype.doOpen = function(){\n            this.poll();\n        };\n\n        /**\n         * Pauses polling.\n         *\n         * @param {Function} callback upon buffers are flushed and transport is paused\n         * @api private\n         */\n\n        Polling.prototype.pause = function(onPause){\n            var pending = 0;\n            var self = this;\n\n            this.readyState = 'pausing';\n\n            function pause(){\n                debug('paused');\n                self.readyState = 'paused';\n                onPause();\n            }\n\n            if (this.polling || !this.writable) {\n                var total = 0;\n\n                if (this.polling) {\n                    debug('we are currently polling - waiting to pause');\n                    total++;\n                    this.once('pollComplete', function(){\n                        debug('pre-pause polling complete');\n                        --total || pause();\n                    });\n                }\n\n                if (!this.writable) {\n                    debug('we are currently writing - waiting to pause');\n                    total++;\n                    this.once('drain', function(){\n                        debug('pre-pause writing complete');\n                        --total || pause();\n                    });\n                }\n            } else {\n                pause();\n            }\n        };\n\n        /**\n         * Starts polling cycle.\n         *\n         * @api public\n         */\n\n        Polling.prototype.poll = function(){\n            debug('polling');\n            this.polling = true;\n            this.doPoll();\n            this.emit('poll');\n        };\n\n        /**\n         * Overloads onData to detect payloads.\n         *\n         * @api private\n         */\n\n        Polling.prototype.onData = function(data){\n            var self = this;\n            debug('polling got data %s', data);\n            var callback = function(packet, index, total) {\n                // if its the first message we consider the transport open\n                if ('opening' == self.readyState) {\n                    self.onOpen();\n                }\n\n                // if its a close packet, we close the ongoing requests\n                if ('close' == packet.type) {\n                    self.onClose();\n                    return false;\n                }\n\n                // otherwise bypass onData and handle the message\n                self.onPacket(packet);\n            };\n\n            // decode payload\n            parser.decodePayload(data, this.socket.binaryType, callback);\n\n            // if an event did not trigger closing\n            if ('closed' != this.readyState) {\n                // if we got data we're not polling\n                this.polling = false;\n                this.emit('pollComplete');\n\n                if ('open' == this.readyState) {\n                    this.poll();\n                } else {\n                    debug('ignoring poll - transport state \"%s\"', this.readyState);\n                }\n            }\n        };\n\n        /**\n         * For polling, send a close packet.\n         *\n         * @api private\n         */\n\n        Polling.prototype.doClose = function(){\n            var self = this;\n\n            function close(){\n                debug('writing close packet');\n                self.write([{ type: 'close' }]);\n            }\n\n            if ('open' == this.readyState) {\n                debug('transport open - closing');\n                close();\n            } else {\n                // in case we're trying to close while\n                // handshaking is in progress (GH-164)\n                debug('transport not open - deferring close');\n                this.once('open', close);\n            }\n        };\n\n        /**\n         * Writes a packets payload.\n         *\n         * @param {Array} data packets\n         * @param {Function} drain callback\n         * @api private\n         */\n\n        Polling.prototype.write = function(packets){\n            var self = this;\n            this.writable = false;\n            var callbackfn = function() {\n                self.writable = true;\n                self.emit('drain');\n            };\n\n            var self = this;\n            parser.encodePayload(packets, this.supportsBinary, function(data) {\n                self.doWrite(data, callbackfn);\n            });\n        };\n\n        /**\n         * Generates uri for connection.\n         *\n         * @api private\n         */\n\n        Polling.prototype.uri = function(){\n            var query = this.query || {};\n            var schema = this.secure ? 'https' : 'http';\n            var port = '';\n\n            // cache busting is forced\n            if (false !== this.timestampRequests) {\n                query[this.timestampParam] = +new Date + '-' + Transport.timestamps++;\n            }\n\n            if (!this.supportsBinary && !query.sid) {\n                query.b64 = 1;\n            }\n\n            query = parseqs.encode(query);\n\n            // avoid port if default for schema\n            if (this.port && (('https' == schema && this.port != 443) ||\n                ('http' == schema && this.port != 80))) {\n                port = ':' + this.port;\n            }\n\n            // prepend ? to query\n            if (query.length) {\n                query = '?' + query;\n            }\n\n            return schema + '://' + this.hostname + port + this.path + query;\n        };\n\n    },{\"../transport\":23,\"component-inherit\":18,\"debug\":30,\"engine.io-parser\":33,\"parseqs\":50,\"xmlhttprequest\":29}],28:[function(require,module,exports){\n        /**\n         * Module dependencies.\n         */\n\n        var Transport = require('../transport');\n        var parser = require('engine.io-parser');\n        var parseqs = require('parseqs');\n        var inherit = require('component-inherit');\n        var debug = require('debug')('engine.io-client:websocket');\n\n        /**\n         * `ws` exposes a WebSocket-compatible interface in\n         * Node, or the `WebSocket` or `MozWebSocket` globals\n         * in the browser.\n         */\n\n        var WebSocket = require('ws');\n\n        /**\n         * Module exports.\n         */\n\n        module.exports = WS;\n\n        /**\n         * WebSocket transport constructor.\n         *\n         * @api {Object} connection options\n         * @api public\n         */\n\n        function WS(opts){\n            var forceBase64 = (opts && opts.forceBase64);\n            if (forceBase64) {\n                this.supportsBinary = false;\n            }\n            Transport.call(this, opts);\n        }\n\n        /**\n         * Inherits from Transport.\n         */\n\n        inherit(WS, Transport);\n\n        /**\n         * Transport name.\n         *\n         * @api public\n         */\n\n        WS.prototype.name = 'websocket';\n\n        /*\n * WebSockets support binary\n */\n\n        WS.prototype.supportsBinary = true;\n\n        /**\n         * Opens socket.\n         *\n         * @api private\n         */\n\n        WS.prototype.doOpen = function(){\n            if (!this.check()) {\n                // let probe timeout\n                return;\n            }\n\n            var self = this;\n            var uri = this.uri();\n            var protocols = void(0);\n            var opts = { agent: this.agent };\n\n            // SSL options for Node.js client\n            opts.pfx = this.pfx;\n            opts.key = this.key;\n            opts.passphrase = this.passphrase;\n            opts.cert = this.cert;\n            opts.ca = this.ca;\n            opts.ciphers = this.ciphers;\n            opts.rejectUnauthorized = this.rejectUnauthorized;\n\n            this.ws = new WebSocket(uri, protocols, opts);\n\n            if (this.ws.binaryType === undefined) {\n                this.supportsBinary = false;\n            }\n\n            this.ws.binaryType = 'arraybuffer';\n            this.addEventListeners();\n        };\n\n        /**\n         * Adds event listeners to the socket\n         *\n         * @api private\n         */\n\n        WS.prototype.addEventListeners = function(){\n            var self = this;\n\n            this.ws.onopen = function(){\n                self.onOpen();\n            };\n            this.ws.onclose = function(){\n                self.onClose();\n            };\n            this.ws.onmessage = function(ev){\n                self.onData(ev.data);\n            };\n            this.ws.onerror = function(e){\n                self.onError('websocket error', e);\n            };\n        };\n\n        /**\n         * Override `onData` to use a timer on iOS.\n         * See: https://gist.github.com/mloughran/2052006\n         *\n         * @api private\n         */\n\n        if ('undefined' != typeof navigator\n            && /iPad|iPhone|iPod/i.test(navigator.userAgent)) {\n            WS.prototype.onData = function(data){\n                var self = this;\n                setTimeout(function(){\n                    Transport.prototype.onData.call(self, data);\n                }, 0);\n            };\n        }\n\n        /**\n         * Writes data to socket.\n         *\n         * @param {Array} array of packets.\n         * @api private\n         */\n\n        WS.prototype.write = function(packets){\n            var self = this;\n            this.writable = false;\n            // encodePacket efficient as it uses WS framing\n            // no need for encodePayload\n            for (var i = 0, l = packets.length; i < l; i++) {\n                parser.encodePacket(packets[i], this.supportsBinary, function(data) {\n                    //Sometimes the websocket has already been closed but the browser didn't\n                    //have a chance of informing us about it yet, in that case send will\n                    //throw an error\n                    try {\n                        self.ws.send(data);\n                    } catch (e){\n                        debug('websocket closed before onclose event');\n                    }\n                });\n            }\n\n            function ondrain() {\n                self.writable = true;\n                self.emit('drain');\n            }\n            // fake drain\n            // defer to next tick to allow Socket to clear writeBuffer\n            setTimeout(ondrain, 0);\n        };\n\n        /**\n         * Called upon close\n         *\n         * @api private\n         */\n\n        WS.prototype.onClose = function(){\n            Transport.prototype.onClose.call(this);\n        };\n\n        /**\n         * Closes socket.\n         *\n         * @api private\n         */\n\n        WS.prototype.doClose = function(){\n            if (typeof this.ws !== 'undefined') {\n                this.ws.close();\n            }\n        };\n\n        /**\n         * Generates uri for connection.\n         *\n         * @api private\n         */\n\n        WS.prototype.uri = function(){\n            var query = this.query || {};\n            var schema = this.secure ? 'wss' : 'ws';\n            var port = '';\n\n            // avoid port if default for schema\n            if (this.port && (('wss' == schema && this.port != 443)\n                || ('ws' == schema && this.port != 80))) {\n                port = ':' + this.port;\n            }\n\n            // append timestamp to URI\n            if (this.timestampRequests) {\n                query[this.timestampParam] = +new Date;\n            }\n\n            // communicate binary support capabilities\n            if (!this.supportsBinary) {\n                query.b64 = 1;\n            }\n\n            query = parseqs.encode(query);\n\n            // prepend ? to query\n            if (query.length) {\n                query = '?' + query;\n            }\n\n            return schema + '://' + this.hostname + port + this.path + query;\n        };\n\n        /**\n         * Feature detection for WebSocket.\n         *\n         * @return {Boolean} whether this transport is available.\n         * @api public\n         */\n\n        WS.prototype.check = function(){\n            return !!WebSocket && !('__initialize' in WebSocket && this.name === WS.prototype.name);\n        };\n\n    },{\"../transport\":23,\"component-inherit\":18,\"debug\":30,\"engine.io-parser\":33,\"parseqs\":50,\"ws\":76}],29:[function(require,module,exports){\n// browser shim for xmlhttprequest module\n        var hasCORS = require('has-cors');\n\n        module.exports = function(opts) {\n            var xdomain = opts.xdomain;\n\n            // scheme must be same when usign XDomainRequest\n            // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n            var xscheme = opts.xscheme;\n\n            // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n            // https://github.com/Automattic/engine.io-client/pull/217\n            var enablesXDR = opts.enablesXDR;\n\n            // XMLHttpRequest can be disabled on IE\n            try {\n                if ('undefined' != typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n                    return new XMLHttpRequest();\n                }\n            } catch (e) { }\n\n            // Use XDomainRequest for IE8 if enablesXDR is true\n            // because loading bar keeps flashing when using jsonp-polling\n            // https://github.com/yujiosaka/socke.io-ie8-loading-example\n            try {\n                if ('undefined' != typeof XDomainRequest && !xscheme && enablesXDR) {\n                    return new XDomainRequest();\n                }\n            } catch (e) { }\n\n            if (!xdomain) {\n                try {\n                    return new ActiveXObject('Microsoft.XMLHTTP');\n                } catch(e) { }\n            }\n        }\n\n    },{\"has-cors\":40}],30:[function(require,module,exports){\n\n        /**\n         * This is the web browser implementation of `debug()`.\n         *\n         * Expose `debug()` as the module.\n         */\n\n        exports = module.exports = require('./debug');\n        exports.log = log;\n        exports.formatArgs = formatArgs;\n        exports.save = save;\n        exports.load = load;\n        exports.useColors = useColors;\n\n        /**\n         * Colors.\n         */\n\n        exports.colors = [\n            'lightseagreen',\n            'forestgreen',\n            'goldenrod',\n            'dodgerblue',\n            'darkorchid',\n            'crimson'\n        ];\n\n        /**\n         * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n         * and the Firebug extension (any Firefox version) are known\n         * to support \"%c\" CSS customizations.\n         *\n         * TODO: add a `localStorage` variable to explicitly enable/disable colors\n         */\n\n        function useColors() {\n            // is webkit? http://stackoverflow.com/a/16459606/376773\n            return ('WebkitAppearance' in document.documentElement.style) ||\n                // is firebug? http://stackoverflow.com/a/398120/376773\n                (window.console && (console.firebug || (console.exception && console.table))) ||\n                // is firefox >= v31?\n                // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n                (navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\n        }\n\n        /**\n         * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n         */\n\n        exports.formatters.j = function(v) {\n            return JSON.stringify(v);\n        };\n\n\n        /**\n         * Colorize log arguments if enabled.\n         *\n         * @api public\n         */\n\n        function formatArgs() {\n            var args = arguments;\n            var useColors = this.useColors;\n\n            args[0] = (useColors ? '%c' : '')\n                + this.namespace\n                + (useColors ? ' %c' : ' ')\n                + args[0]\n                + (useColors ? '%c ' : ' ')\n                + '+' + exports.humanize(this.diff);\n\n            if (!useColors) return args;\n\n            var c = 'color: ' + this.color;\n            args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\n\n            // the final \"%c\" is somewhat tricky, because there could be other\n            // arguments passed either before or after the %c, so we need to\n            // figure out the correct index to insert the CSS into\n            var index = 0;\n            var lastC = 0;\n            args[0].replace(/%[a-z%]/g, function(match) {\n                if ('%%' === match) return;\n                index++;\n                if ('%c' === match) {\n                    // we only are interested in the *last* %c\n                    // (the user may have provided their own)\n                    lastC = index;\n                }\n            });\n\n            args.splice(lastC, 0, c);\n            return args;\n        }\n\n        /**\n         * Invokes `console.log()` when available.\n         * No-op when `console.log` is not a \"function\".\n         *\n         * @api public\n         */\n\n        function log() {\n            // This hackery is required for IE8,\n            // where the `console.log` function doesn't have 'apply'\n            return 'object' == typeof console\n                && 'function' == typeof console.log\n                && Function.prototype.apply.call(console.log, console, arguments);\n        }\n\n        /**\n         * Save `namespaces`.\n         *\n         * @param {String} namespaces\n         * @api private\n         */\n\n        function save(namespaces) {\n            try {\n                if (null == namespaces) {\n                    localStorage.removeItem('debug');\n                } else {\n                    localStorage.debug = namespaces;\n                }\n            } catch(e) {}\n        }\n\n        /**\n         * Load `namespaces`.\n         *\n         * @return {String} returns the previously persisted debug modes\n         * @api private\n         */\n\n        function load() {\n            var r;\n            try {\n                r = localStorage.debug;\n            } catch(e) {}\n            return r;\n        }\n\n        /**\n         * Enable namespaces listed in `localStorage.debug` initially.\n         */\n\n        exports.enable(load());\n\n    },{\"./debug\":31}],31:[function(require,module,exports){\n\n        /**\n         * This is the common logic for both the Node.js and web browser\n         * implementations of `debug()`.\n         *\n         * Expose `debug()` as the module.\n         */\n\n        exports = module.exports = debug;\n        exports.coerce = coerce;\n        exports.disable = disable;\n        exports.enable = enable;\n        exports.enabled = enabled;\n        exports.humanize = require('ms');\n\n        /**\n         * The currently active debug mode names, and names to skip.\n         */\n\n        exports.names = [];\n        exports.skips = [];\n\n        /**\n         * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n         *\n         * Valid key names are a single, lowercased letter, i.e. \"n\".\n         */\n\n        exports.formatters = {};\n\n        /**\n         * Previously assigned color.\n         */\n\n        var prevColor = 0;\n\n        /**\n         * Previous log timestamp.\n         */\n\n        var prevTime;\n\n        /**\n         * Select a color.\n         *\n         * @return {Number}\n         * @api private\n         */\n\n        function selectColor() {\n            return exports.colors[prevColor++ % exports.colors.length];\n        }\n\n        /**\n         * Create a debugger with the given `namespace`.\n         *\n         * @param {String} namespace\n         * @return {Function}\n         * @api public\n         */\n\n        function debug(namespace) {\n\n            // define the `disabled` version\n            function disabled() {\n            }\n            disabled.enabled = false;\n\n            // define the `enabled` version\n            function enabled() {\n\n                var self = enabled;\n\n                // set `diff` timestamp\n                var curr = +new Date();\n                var ms = curr - (prevTime || curr);\n                self.diff = ms;\n                self.prev = prevTime;\n                self.curr = curr;\n                prevTime = curr;\n\n                // add the `color` if not set\n                if (null == self.useColors) self.useColors = exports.useColors();\n                if (null == self.color && self.useColors) self.color = selectColor();\n\n                var args = Array.prototype.slice.call(arguments);\n\n                args[0] = exports.coerce(args[0]);\n\n                if ('string' !== typeof args[0]) {\n                    // anything else let's inspect with %o\n                    args = ['%o'].concat(args);\n                }\n\n                // apply any `formatters` transformations\n                var index = 0;\n                args[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\n                    // if we encounter an escaped % then don't increase the array index\n                    if (match === '%%') return match;\n                    index++;\n                    var formatter = exports.formatters[format];\n                    if ('function' === typeof formatter) {\n                        var val = args[index];\n                        match = formatter.call(self, val);\n\n                        // now we need to remove `args[index]` since it's inlined in the `format`\n                        args.splice(index, 1);\n                        index--;\n                    }\n                    return match;\n                });\n\n                if ('function' === typeof exports.formatArgs) {\n                    args = exports.formatArgs.apply(self, args);\n                }\n                var logFn = enabled.log || exports.log || console.log.bind(console);\n                logFn.apply(self, args);\n            }\n            enabled.enabled = true;\n\n            var fn = exports.enabled(namespace) ? enabled : disabled;\n\n            fn.namespace = namespace;\n\n            return fn;\n        }\n\n        /**\n         * Enables a debug mode by namespaces. This can include modes\n         * separated by a colon and wildcards.\n         *\n         * @param {String} namespaces\n         * @api public\n         */\n\n        function enable(namespaces) {\n            exports.save(namespaces);\n\n            var split = (namespaces || '').split(/[\\s,]+/);\n            var len = split.length;\n\n            for (var i = 0; i < len; i++) {\n                if (!split[i]) continue; // ignore empty strings\n                namespaces = split[i].replace(/\\*/g, '.*?');\n                if (namespaces[0] === '-') {\n                    exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n                } else {\n                    exports.names.push(new RegExp('^' + namespaces + '$'));\n                }\n            }\n        }\n\n        /**\n         * Disable debug output.\n         *\n         * @api public\n         */\n\n        function disable() {\n            exports.enable('');\n        }\n\n        /**\n         * Returns true if the given mode name is enabled, false otherwise.\n         *\n         * @param {String} name\n         * @return {Boolean}\n         * @api public\n         */\n\n        function enabled(name) {\n            var i, len;\n            for (i = 0, len = exports.skips.length; i < len; i++) {\n                if (exports.skips[i].test(name)) {\n                    return false;\n                }\n            }\n            for (i = 0, len = exports.names.length; i < len; i++) {\n                if (exports.names[i].test(name)) {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        /**\n         * Coerce `val`.\n         *\n         * @param {Mixed} val\n         * @return {Mixed}\n         * @api private\n         */\n\n        function coerce(val) {\n            if (val instanceof Error) return val.stack || val.message;\n            return val;\n        }\n\n    },{\"ms\":47}],32:[function(require,module,exports){\n        /**\n         * Parses an URI\n         *\n         * @author Steven Levithan <stevenlevithan.com> (MIT license)\n         * @api private\n         */\n\n        var re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\n        var parts = [\n            'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n        ];\n\n        module.exports = function parseuri(str) {\n            var src = str,\n                b = str.indexOf('['),\n                e = str.indexOf(']');\n\n            if (b != -1 && e != -1) {\n                str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n            }\n\n            var m = re.exec(str || ''),\n                uri = {},\n                i = 14;\n\n            while (i--) {\n                uri[parts[i]] = m[i] || '';\n            }\n\n            if (b != -1 && e != -1) {\n                uri.source = src;\n                uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n                uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n                uri.ipv6uri = true;\n            }\n\n            return uri;\n        };\n\n    },{}],33:[function(require,module,exports){\n        (function (global){\n            /**\n             * Module dependencies.\n             */\n\n            var keys = require('./keys');\n            var hasBinary = require('has-binary');\n            var sliceBuffer = require('arraybuffer.slice');\n            var base64encoder = require('base64-arraybuffer');\n            var after = require('after');\n            var utf8 = require('utf8');\n\n            /**\n             * Check if we are running an android browser. That requires us to use\n             * ArrayBuffer with polling transports...\n             *\n             * http://ghinda.net/jpeg-blob-ajax-android/\n             */\n\n            var isAndroid = navigator.userAgent.match(/Android/i);\n\n            /**\n             * Check if we are running in PhantomJS.\n             * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n             * https://github.com/ariya/phantomjs/issues/11395\n             * @type boolean\n             */\n            var isPhantomJS = /PhantomJS/i.test(navigator.userAgent);\n\n            /**\n             * When true, avoids using Blobs to encode payloads.\n             * @type boolean\n             */\n            var dontSendBlobs = isAndroid || isPhantomJS;\n\n            /**\n             * Current protocol version.\n             */\n\n            exports.protocol = 3;\n\n            /**\n             * Packet types.\n             */\n\n            var packets = exports.packets = {\n                open:     0    // non-ws\n                , close:    1    // non-ws\n                , ping:     2\n                , pong:     3\n                , message:  4\n                , upgrade:  5\n                , noop:     6\n            };\n\n            var packetslist = keys(packets);\n\n            /**\n             * Premade error packet.\n             */\n\n            var err = { type: 'error', data: 'parser error' };\n\n            /**\n             * Create a blob api even for blob builder when vendor prefixes exist\n             */\n\n            var Blob = require('blob');\n\n            /**\n             * Encodes a packet.\n             *\n             *     <packet type id> [ <data> ]\n             *\n             * Example:\n             *\n             *     5hello world\n             *     3\n             *     4\n             *\n             * Binary is encoded in an identical principle\n             *\n             * @api private\n             */\n\n            exports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n                if ('function' == typeof supportsBinary) {\n                    callback = supportsBinary;\n                    supportsBinary = false;\n                }\n\n                if ('function' == typeof utf8encode) {\n                    callback = utf8encode;\n                    utf8encode = null;\n                }\n\n                var data = (packet.data === undefined)\n                    ? undefined\n                    : packet.data.buffer || packet.data;\n\n                if (global.ArrayBuffer && data instanceof ArrayBuffer) {\n                    return encodeArrayBuffer(packet, supportsBinary, callback);\n                } else if (Blob && data instanceof global.Blob) {\n                    return encodeBlob(packet, supportsBinary, callback);\n                }\n\n                // might be an object with { base64: true, data: dataAsBase64String }\n                if (data && data.base64) {\n                    return encodeBase64Object(packet, callback);\n                }\n\n                // Sending data as a utf-8 string\n                var encoded = packets[packet.type];\n\n                // data fragment is optional\n                if (undefined !== packet.data) {\n                    encoded += utf8encode ? utf8.encode(String(packet.data)) : String(packet.data);\n                }\n\n                return callback('' + encoded);\n\n            };\n\n            function encodeBase64Object(packet, callback) {\n                // packet data is an object { base64: true, data: dataAsBase64String }\n                var message = 'b' + exports.packets[packet.type] + packet.data.data;\n                return callback(message);\n            }\n\n            /**\n             * Encode packet helpers for binary types\n             */\n\n            function encodeArrayBuffer(packet, supportsBinary, callback) {\n                if (!supportsBinary) {\n                    return exports.encodeBase64Packet(packet, callback);\n                }\n\n                var data = packet.data;\n                var contentArray = new Uint8Array(data);\n                var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n                resultBuffer[0] = packets[packet.type];\n                for (var i = 0; i < contentArray.length; i++) {\n                    resultBuffer[i+1] = contentArray[i];\n                }\n\n                return callback(resultBuffer.buffer);\n            }\n\n            function encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n                if (!supportsBinary) {\n                    return exports.encodeBase64Packet(packet, callback);\n                }\n\n                var fr = new FileReader();\n                fr.onload = function() {\n                    packet.data = fr.result;\n                    exports.encodePacket(packet, supportsBinary, true, callback);\n                };\n                return fr.readAsArrayBuffer(packet.data);\n            }\n\n            function encodeBlob(packet, supportsBinary, callback) {\n                if (!supportsBinary) {\n                    return exports.encodeBase64Packet(packet, callback);\n                }\n\n                if (dontSendBlobs) {\n                    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n                }\n\n                var length = new Uint8Array(1);\n                length[0] = packets[packet.type];\n                var blob = new Blob([length.buffer, packet.data]);\n\n                return callback(blob);\n            }\n\n            /**\n             * Encodes a packet with binary data in a base64 string\n             *\n             * @param {Object} packet, has `type` and `data`\n             * @return {String} base64 encoded message\n             */\n\n            exports.encodeBase64Packet = function(packet, callback) {\n                var message = 'b' + exports.packets[packet.type];\n                if (Blob && packet.data instanceof Blob) {\n                    var fr = new FileReader();\n                    fr.onload = function() {\n                        var b64 = fr.result.split(',')[1];\n                        callback(message + b64);\n                    };\n                    return fr.readAsDataURL(packet.data);\n                }\n\n                var b64data;\n                try {\n                    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n                } catch (e) {\n                    // iPhone Safari doesn't let you apply with typed arrays\n                    var typed = new Uint8Array(packet.data);\n                    var basic = new Array(typed.length);\n                    for (var i = 0; i < typed.length; i++) {\n                        basic[i] = typed[i];\n                    }\n                    b64data = String.fromCharCode.apply(null, basic);\n                }\n                message += global.btoa(b64data);\n                return callback(message);\n            };\n\n            /**\n             * Decodes a packet. Changes format to Blob if requested.\n             *\n             * @return {Object} with `type` and `data` (if any)\n             * @api private\n             */\n\n            exports.decodePacket = function (data, binaryType, utf8decode) {\n                // String data\n                if (typeof data == 'string' || data === undefined) {\n                    if (data.charAt(0) == 'b') {\n                        return exports.decodeBase64Packet(data.substr(1), binaryType);\n                    }\n\n                    if (utf8decode) {\n                        try {\n                            data = utf8.decode(data);\n                        } catch (e) {\n                            return err;\n                        }\n                    }\n                    var type = data.charAt(0);\n\n                    if (Number(type) != type || !packetslist[type]) {\n                        return err;\n                    }\n\n                    if (data.length > 1) {\n                        return { type: packetslist[type], data: data.substring(1) };\n                    } else {\n                        return { type: packetslist[type] };\n                    }\n                }\n\n                var asArray = new Uint8Array(data);\n                var type = asArray[0];\n                var rest = sliceBuffer(data, 1);\n                if (Blob && binaryType === 'blob') {\n                    rest = new Blob([rest]);\n                }\n                return { type: packetslist[type], data: rest };\n            };\n\n            /**\n             * Decodes a packet encoded in a base64 string\n             *\n             * @param {String} base64 encoded message\n             * @return {Object} with `type` and `data` (if any)\n             */\n\n            exports.decodeBase64Packet = function(msg, binaryType) {\n                var type = packetslist[msg.charAt(0)];\n                if (!global.ArrayBuffer) {\n                    return { type: type, data: { base64: true, data: msg.substr(1) } };\n                }\n\n                var data = base64encoder.decode(msg.substr(1));\n\n                if (binaryType === 'blob' && Blob) {\n                    data = new Blob([data]);\n                }\n\n                return { type: type, data: data };\n            };\n\n            /**\n             * Encodes multiple messages (payload).\n             *\n             *     <length>:data\n             *\n             * Example:\n             *\n             *     11:hello world2:hi\n             *\n             * If any contents are binary, they will be encoded as base64 strings. Base64\n             * encoded strings are marked with a b before the length specifier\n             *\n             * @param {Array} packets\n             * @api private\n             */\n\n            exports.encodePayload = function (packets, supportsBinary, callback) {\n                if (typeof supportsBinary == 'function') {\n                    callback = supportsBinary;\n                    supportsBinary = null;\n                }\n\n                var isBinary = hasBinary(packets);\n\n                if (supportsBinary && isBinary) {\n                    if (Blob && !dontSendBlobs) {\n                        return exports.encodePayloadAsBlob(packets, callback);\n                    }\n\n                    return exports.encodePayloadAsArrayBuffer(packets, callback);\n                }\n\n                if (!packets.length) {\n                    return callback('0:');\n                }\n\n                function setLengthHeader(message) {\n                    return message.length + ':' + message;\n                }\n\n                function encodeOne(packet, doneCallback) {\n                    exports.encodePacket(packet, !isBinary ? false : supportsBinary, true, function(message) {\n                        doneCallback(null, setLengthHeader(message));\n                    });\n                }\n\n                map(packets, encodeOne, function(err, results) {\n                    return callback(results.join(''));\n                });\n            };\n\n            /**\n             * Async array map using after\n             */\n\n            function map(ary, each, done) {\n                var result = new Array(ary.length);\n                var next = after(ary.length, done);\n\n                var eachWithIndex = function(i, el, cb) {\n                    each(el, function(error, msg) {\n                        result[i] = msg;\n                        cb(error, result);\n                    });\n                };\n\n                for (var i = 0; i < ary.length; i++) {\n                    eachWithIndex(i, ary[i], next);\n                }\n            }\n\n            /*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\n            exports.decodePayload = function (data, binaryType, callback) {\n                if (typeof data != 'string') {\n                    return exports.decodePayloadAsBinary(data, binaryType, callback);\n                }\n\n                if (typeof binaryType === 'function') {\n                    callback = binaryType;\n                    binaryType = null;\n                }\n\n                var packet;\n                if (data == '') {\n                    // parser error - ignoring payload\n                    return callback(err, 0, 1);\n                }\n\n                var length = ''\n                    , n, msg;\n\n                for (var i = 0, l = data.length; i < l; i++) {\n                    var chr = data.charAt(i);\n\n                    if (':' != chr) {\n                        length += chr;\n                    } else {\n                        if ('' == length || (length != (n = Number(length)))) {\n                            // parser error - ignoring payload\n                            return callback(err, 0, 1);\n                        }\n\n                        msg = data.substr(i + 1, n);\n\n                        if (length != msg.length) {\n                            // parser error - ignoring payload\n                            return callback(err, 0, 1);\n                        }\n\n                        if (msg.length) {\n                            packet = exports.decodePacket(msg, binaryType, true);\n\n                            if (err.type == packet.type && err.data == packet.data) {\n                                // parser error in individual packet - ignoring payload\n                                return callback(err, 0, 1);\n                            }\n\n                            var ret = callback(packet, i + n, l);\n                            if (false === ret) return;\n                        }\n\n                        // advance cursor\n                        i += n;\n                        length = '';\n                    }\n                }\n\n                if (length != '') {\n                    // parser error - ignoring payload\n                    return callback(err, 0, 1);\n                }\n\n            };\n\n            /**\n             * Encodes multiple messages (payload) as binary.\n             *\n             * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n             * 255><data>\n             *\n             * Example:\n             * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n             *\n             * @param {Array} packets\n             * @return {ArrayBuffer} encoded payload\n             * @api private\n             */\n\n            exports.encodePayloadAsArrayBuffer = function(packets, callback) {\n                if (!packets.length) {\n                    return callback(new ArrayBuffer(0));\n                }\n\n                function encodeOne(packet, doneCallback) {\n                    exports.encodePacket(packet, true, true, function(data) {\n                        return doneCallback(null, data);\n                    });\n                }\n\n                map(packets, encodeOne, function(err, encodedPackets) {\n                    var totalLength = encodedPackets.reduce(function(acc, p) {\n                        var len;\n                        if (typeof p === 'string'){\n                            len = p.length;\n                        } else {\n                            len = p.byteLength;\n                        }\n                        return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n                    }, 0);\n\n                    var resultArray = new Uint8Array(totalLength);\n\n                    var bufferIndex = 0;\n                    encodedPackets.forEach(function(p) {\n                        var isString = typeof p === 'string';\n                        var ab = p;\n                        if (isString) {\n                            var view = new Uint8Array(p.length);\n                            for (var i = 0; i < p.length; i++) {\n                                view[i] = p.charCodeAt(i);\n                            }\n                            ab = view.buffer;\n                        }\n\n                        if (isString) { // not true binary\n                            resultArray[bufferIndex++] = 0;\n                        } else { // true binary\n                            resultArray[bufferIndex++] = 1;\n                        }\n\n                        var lenStr = ab.byteLength.toString();\n                        for (var i = 0; i < lenStr.length; i++) {\n                            resultArray[bufferIndex++] = parseInt(lenStr[i]);\n                        }\n                        resultArray[bufferIndex++] = 255;\n\n                        var view = new Uint8Array(ab);\n                        for (var i = 0; i < view.length; i++) {\n                            resultArray[bufferIndex++] = view[i];\n                        }\n                    });\n\n                    return callback(resultArray.buffer);\n                });\n            };\n\n            /**\n             * Encode as Blob\n             */\n\n            exports.encodePayloadAsBlob = function(packets, callback) {\n                function encodeOne(packet, doneCallback) {\n                    exports.encodePacket(packet, true, true, function(encoded) {\n                        var binaryIdentifier = new Uint8Array(1);\n                        binaryIdentifier[0] = 1;\n                        if (typeof encoded === 'string') {\n                            var view = new Uint8Array(encoded.length);\n                            for (var i = 0; i < encoded.length; i++) {\n                                view[i] = encoded.charCodeAt(i);\n                            }\n                            encoded = view.buffer;\n                            binaryIdentifier[0] = 0;\n                        }\n\n                        var len = (encoded instanceof ArrayBuffer)\n                            ? encoded.byteLength\n                            : encoded.size;\n\n                        var lenStr = len.toString();\n                        var lengthAry = new Uint8Array(lenStr.length + 1);\n                        for (var i = 0; i < lenStr.length; i++) {\n                            lengthAry[i] = parseInt(lenStr[i]);\n                        }\n                        lengthAry[lenStr.length] = 255;\n\n                        if (Blob) {\n                            var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n                            doneCallback(null, blob);\n                        }\n                    });\n                }\n\n                map(packets, encodeOne, function(err, results) {\n                    return callback(new Blob(results));\n                });\n            };\n\n            /*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\n            exports.decodePayloadAsBinary = function (data, binaryType, callback) {\n                if (typeof binaryType === 'function') {\n                    callback = binaryType;\n                    binaryType = null;\n                }\n\n                var bufferTail = data;\n                var buffers = [];\n\n                var numberTooLong = false;\n                while (bufferTail.byteLength > 0) {\n                    var tailArray = new Uint8Array(bufferTail);\n                    var isString = tailArray[0] === 0;\n                    var msgLength = '';\n\n                    for (var i = 1; ; i++) {\n                        if (tailArray[i] == 255) break;\n\n                        if (msgLength.length > 310) {\n                            numberTooLong = true;\n                            break;\n                        }\n\n                        msgLength += tailArray[i];\n                    }\n\n                    if(numberTooLong) return callback(err, 0, 1);\n\n                    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n                    msgLength = parseInt(msgLength);\n\n                    var msg = sliceBuffer(bufferTail, 0, msgLength);\n                    if (isString) {\n                        try {\n                            msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n                        } catch (e) {\n                            // iPhone Safari doesn't let you apply to typed arrays\n                            var typed = new Uint8Array(msg);\n                            msg = '';\n                            for (var i = 0; i < typed.length; i++) {\n                                msg += String.fromCharCode(typed[i]);\n                            }\n                        }\n                    }\n\n                    buffers.push(msg);\n                    bufferTail = sliceBuffer(bufferTail, msgLength);\n                }\n\n                var total = buffers.length;\n                buffers.forEach(function(buffer, i) {\n                    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n                });\n            };\n\n        }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{\"./keys\":34,\"after\":1,\"arraybuffer.slice\":2,\"base64-arraybuffer\":14,\"blob\":15,\"has-binary\":39,\"utf8\":70}],34:[function(require,module,exports){\n\n        /**\n         * Gets the keys for an object.\n         *\n         * @return {Array} keys\n         * @api private\n         */\n\n        module.exports = Object.keys || function keys (obj){\n            var arr = [];\n            var has = Object.prototype.hasOwnProperty;\n\n            for (var i in obj) {\n                if (has.call(obj, i)) {\n                    arr.push(i);\n                }\n            }\n            return arr;\n        };\n\n    },{}],35:[function(require,module,exports){\n        var WildEmitter = require('wildemitter');\n        var util = require('util');\n\n        function Sender(opts) {\n            WildEmitter.call(this);\n            var options = opts || {};\n            this.config = {\n                chunksize: 16384,\n                pacing: 0\n            };\n            // set our config from options\n            var item;\n            for (item in options) {\n                this.config[item] = options[item];\n            }\n\n            this.file = null;\n            this.channel = null;\n        }\n        util.inherits(Sender, WildEmitter);\n\n        Sender.prototype.send = function (file, channel) {\n            var self = this;\n            this.file = file;\n            this.channel = channel;\n            var usePoll = typeof channel.bufferedAmountLowThreshold !== 'number';\n            var offset = 0;\n            var sliceFile = function() {\n                var reader = new window.FileReader();\n                reader.onload = (function() {\n                    return function(e) {\n                        self.channel.send(e.target.result);\n                        self.emit('progress', offset, file.size, e.target.result);\n\n                        if (file.size > offset + e.target.result.byteLength) {\n                            if (usePoll) {\n                                window.setTimeout(sliceFile, self.config.pacing);\n                            } else if (channel.bufferedAmount <= channel.bufferedAmountLowThreshold) {\n                                window.setTimeout(sliceFile, 0);\n                            } else {\n                                // wait for bufferedAmountLow to fire\n                            }\n                        } else {\n                            self.emit('progress', file.size, file.size, null);\n                            self.emit('sentFile');\n                        }\n                        offset = offset + self.config.chunksize;\n                    };\n                })(file);\n                var slice = file.slice(offset, offset + self.config.chunksize);\n                reader.readAsArrayBuffer(slice);\n            };\n            if (!usePoll) {\n                channel.bufferedAmountLowThreshold = 8 * this.config.chunksize;\n                channel.addEventListener('bufferedamountlow', sliceFile);\n            }\n            window.setTimeout(sliceFile, 0);\n        };\n\n        function Receiver() {\n            WildEmitter.call(this);\n\n            this.receiveBuffer = [];\n            this.received = 0;\n            this.metadata = {};\n            this.channel = null;\n        }\n        util.inherits(Receiver, WildEmitter);\n\n        Receiver.prototype.receive = function (metadata, channel) {\n            var self = this;\n\n            if (metadata) {\n                this.metadata = metadata;\n            }\n            this.channel = channel;\n            // chrome only supports arraybuffers and those make it easier to calc the hash\n            channel.binaryType = 'arraybuffer';\n            this.channel.onmessage = function (event) {\n                var len = event.data.byteLength;\n                self.received += len;\n                self.receiveBuffer.push(event.data);\n\n                self.emit('progress', self.received, self.metadata.size, event.data);\n                if (self.received === self.metadata.size) {\n                    self.emit('receivedFile', new window.Blob(self.receiveBuffer), self.metadata);\n                    self.receiveBuffer = []; // discard receivebuffer\n                } else if (self.received > self.metadata.size) {\n                    // FIXME\n                    console.error('received more than expected, discarding...');\n                    self.receiveBuffer = []; // just discard...\n\n                }\n            };\n        };\n\n        module.exports = {};\n        module.exports.support = typeof window !== 'undefined' && window && window.File && window.FileReader && window.Blob;\n        module.exports.Sender = Sender;\n        module.exports.Receiver = Receiver;\n\n    },{\"util\":73,\"wildemitter\":75}],36:[function(require,module,exports){\n// cache for constraints and callback\n        var cache = {};\n\n        module.exports = function (constraints, cb) {\n            var hasConstraints = arguments.length === 2;\n            var callback = hasConstraints ? cb : constraints;\n            var error;\n\n            if (typeof window === 'undefined' || window.location.protocol === 'http:') {\n                error = new Error('NavigatorUserMediaError');\n                error.name = 'HTTPS_REQUIRED';\n                return callback(error);\n            }\n\n            if (window.navigator.userAgent.match('Chrome')) {\n                var chromever = parseInt(window.navigator.userAgent.match(/Chrome\\/(.*) /)[1], 10);\n                var maxver = 33;\n                var isCef = !window.chrome.webstore;\n                // \"known\" crash in chrome 34 and 35 on linux\n                if (window.navigator.userAgent.match('Linux')) maxver = 35;\n\n                // check that the extension is installed by looking for a\n                // sessionStorage variable that contains the extension id\n                // this has to be set after installation unless the contest\n                // script does that\n                if (sessionStorage.getScreenMediaJSExtensionId) {\n                    chrome.runtime.sendMessage(sessionStorage.getScreenMediaJSExtensionId,\n                        {type:'getScreen', id: 1}, null,\n                        function (data) {\n                            if (!data || data.sourceId === '') { // user canceled\n                                var error = new Error('NavigatorUserMediaError');\n                                error.name = 'NotAllowedError';\n                                callback(error);\n                            } else {\n                                constraints = (hasConstraints && constraints) || {audio: false, video: {\n                                        mandatory: {\n                                            chromeMediaSource: 'desktop',\n                                            maxWidth: window.screen.width,\n                                            maxHeight: window.screen.height,\n                                            maxFrameRate: 3\n                                        }\n                                    }};\n                                constraints.video.mandatory.chromeMediaSourceId = data.sourceId;\n                                window.navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                                    callback(null, stream);\n                                }).catch(function (err) {\n                                    callback(err);\n                                });\n                            }\n                        }\n                    );\n                } else if (window.cefGetScreenMedia) {\n                    //window.cefGetScreenMedia is experimental - may be removed without notice\n                    window.cefGetScreenMedia(function(sourceId) {\n                        if (!sourceId) {\n                            var error = new Error('cefGetScreenMediaError');\n                            error.name = 'CEF_GETSCREENMEDIA_CANCELED';\n                            callback(error);\n                        } else {\n                            constraints = (hasConstraints && constraints) || {audio: false, video: {\n                                    mandatory: {\n                                        chromeMediaSource: 'desktop',\n                                        maxWidth: window.screen.width,\n                                        maxHeight: window.screen.height,\n                                        maxFrameRate: 3\n                                    },\n                                    optional: [\n                                        {googLeakyBucket: true},\n                                        {googTemporalLayeredScreencast: true}\n                                    ]\n                                }};\n                            constraints.video.mandatory.chromeMediaSourceId = sourceId;\n                            window.navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                                callback(null, stream);\n                            }).catch(function (err) {\n                                callback(err);\n                            });\n                        }\n                    });\n                } else if (isCef || (chromever >= 26 && chromever <= maxver)) {\n                    // chrome 26 - chrome 33 way to do it -- requires bad chrome://flags\n                    // note: this is basically in maintenance mode and will go away soon\n                    constraints = (hasConstraints && constraints) || {\n                        video: {\n                            mandatory: {\n                                googLeakyBucket: true,\n                                maxWidth: window.screen.width,\n                                maxHeight: window.screen.height,\n                                maxFrameRate: 3,\n                                chromeMediaSource: 'screen'\n                            }\n                        }\n                    };\n                    window.navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                        callback(null, stream);\n                    }).catch(function (err) {\n                        callback(err);\n                    });\n                } else {\n                    // chrome 34+ way requiring an extension\n                    var pending = window.setTimeout(function () {\n                        error = new Error('NavigatorUserMediaError');\n                        error.name = 'EXTENSION_UNAVAILABLE';\n                        return callback(error);\n                    }, 1000);\n                    cache[pending] = [callback, hasConstraints ? constraints : null];\n                    window.postMessage({ type: 'getScreen', id: pending }, '*');\n                }\n            } else if (window.navigator.userAgent.match('Firefox')) {\n                var ffver = parseInt(window.navigator.userAgent.match(/Firefox\\/(.*)/)[1], 10);\n                if (ffver >= 33) {\n                    constraints = (hasConstraints && constraints) || {\n                        video: {\n                            mozMediaSource: 'window',\n                            mediaSource: 'window'\n                        }\n                    };\n                    window.navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                        callback(null, stream);\n                        var lastTime = stream.currentTime;\n                        var polly = window.setInterval(function () {\n                            if (!stream) window.clearInterval(polly);\n                            if (stream.currentTime == lastTime) {\n                                window.clearInterval(polly);\n                                if (stream.onended) {\n                                    stream.onended();\n                                }\n                            }\n                            lastTime = stream.currentTime;\n                        }, 500);\n                    }).catch(function (err) {\n                        callback(err);\n                    });\n                } else {\n                    error = new Error('NavigatorUserMediaError');\n                    error.name = 'EXTENSION_UNAVAILABLE'; // does not make much sense but...\n                }\n            }\n        };\n\n        typeof window !== 'undefined' && window.addEventListener('message', function (event) {\n            if (event.origin != window.location.origin) {\n                return;\n            }\n            if (event.data.type == 'gotScreen' && cache[event.data.id]) {\n                var data = cache[event.data.id];\n                var constraints = data[1];\n                var callback = data[0];\n                delete cache[event.data.id];\n\n                if (event.data.sourceId === '') { // user canceled\n                    var error = new Error('NavigatorUserMediaError');\n                    error.name = 'NotAllowedError';\n                    callback(error);\n                } else {\n                    constraints = constraints || {audio: false, video: {\n                            mandatory: {\n                                chromeMediaSource: 'desktop',\n                                maxWidth: window.screen.width,\n                                maxHeight: window.screen.height,\n                                maxFrameRate: 3\n                            },\n                            optional: [\n                                {googLeakyBucket: true},\n                                {googTemporalLayeredScreencast: true}\n                            ]\n                        }};\n                    constraints.video.mandatory.chromeMediaSourceId = event.data.sourceId;\n                    window.navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                        callback(null, stream);\n                    }).catch(function (err) {\n                        callback(err);\n                    });\n                }\n            } else if (event.data.type == 'getScreenPending') {\n                window.clearTimeout(event.data.id);\n            }\n        });\n\n    },{}],37:[function(require,module,exports){\n\n        /**\n         * Returns `this`. Execute this without a \"context\" (i.e. without it being\n         * attached to an object of the left-hand side), and `this` points to the\n         * \"global\" scope of the current JS execution.\n         */\n\n        module.exports = (function () { return this; })();\n\n    },{}],38:[function(require,module,exports){\n        var WildEmitter = require('wildemitter');\n\n        function getMaxVolume (analyser, fftBins) {\n            var maxVolume = -Infinity;\n            analyser.getFloatFrequencyData(fftBins);\n\n            for(var i=4, ii=fftBins.length; i < ii; i++) {\n                if (fftBins[i] > maxVolume && fftBins[i] < 0) {\n                    maxVolume = fftBins[i];\n                }\n            };\n\n            return maxVolume;\n        }\n\n\n        var audioContextType;\n        if (typeof window !== 'undefined') {\n            audioContextType = window.AudioContext || window.webkitAudioContext;\n        }\n// use a single audio context due to hardware limits\n        var audioContext = null;\n        module.exports = function(stream, options) {\n            var harker = new WildEmitter();\n\n\n            // make it not break in non-supported browsers\n            if (!audioContextType) return harker;\n\n            //Config\n            var options = options || {},\n                smoothing = (options.smoothing || 0.1),\n                interval = (options.interval || 50),\n                threshold = options.threshold,\n                play = options.play,\n                history = options.history || 10,\n                running = true;\n\n            //Setup Audio Context\n            if (!audioContext) {\n                audioContext = new audioContextType();\n            }\n            var sourceNode, fftBins, analyser;\n\n            analyser = audioContext.createAnalyser();\n            analyser.fftSize = 512;\n            analyser.smoothingTimeConstant = smoothing;\n            fftBins = new Float32Array(analyser.frequencyBinCount);\n\n            if (stream.jquery) stream = stream[0];\n            if (stream instanceof HTMLAudioElement || stream instanceof HTMLVideoElement) {\n                //Audio Tag\n                sourceNode = audioContext.createMediaElementSource(stream);\n                if (typeof play === 'undefined') play = true;\n                threshold = threshold || -50;\n            } else {\n                //WebRTC Stream\n                sourceNode = audioContext.createMediaStreamSource(stream);\n                threshold = threshold || -50;\n            }\n\n            sourceNode.connect(analyser);\n            if (play) analyser.connect(audioContext.destination);\n\n            harker.speaking = false;\n\n            harker.setThreshold = function(t) {\n                threshold = t;\n            };\n\n            harker.setInterval = function(i) {\n                interval = i;\n            };\n\n            harker.stop = function() {\n                running = false;\n                harker.emit('volume_change', -100, threshold);\n                if (harker.speaking) {\n                    harker.speaking = false;\n                    harker.emit('stopped_speaking');\n                }\n                analyser.disconnect();\n                sourceNode.disconnect();\n            };\n            harker.speakingHistory = [];\n            for (var i = 0; i < history; i++) {\n                harker.speakingHistory.push(0);\n            }\n\n            // Poll the analyser node to determine if speaking\n            // and emit events if changed\n            var looper = function() {\n                setTimeout(function() {\n\n                    //check if stop has been called\n                    if(!running) {\n                        return;\n                    }\n\n                    var currentVolume = getMaxVolume(analyser, fftBins);\n\n                    harker.emit('volume_change', currentVolume, threshold);\n\n                    var history = 0;\n                    if (currentVolume > threshold && !harker.speaking) {\n                        // trigger quickly, short history\n                        for (var i = harker.speakingHistory.length - 3; i < harker.speakingHistory.length; i++) {\n                            history += harker.speakingHistory[i];\n                        }\n                        if (history >= 2) {\n                            harker.speaking = true;\n                            harker.emit('speaking');\n                        }\n                    } else if (currentVolume < threshold && harker.speaking) {\n                        for (var i = 0; i < harker.speakingHistory.length; i++) {\n                            history += harker.speakingHistory[i];\n                        }\n                        if (history == 0) {\n                            harker.speaking = false;\n                            harker.emit('stopped_speaking');\n                        }\n                    }\n                    harker.speakingHistory.shift();\n                    harker.speakingHistory.push(0 + (currentVolume > threshold));\n\n                    looper();\n                }, interval);\n            };\n            looper();\n\n\n            return harker;\n        }\n\n    },{\"wildemitter\":75}],39:[function(require,module,exports){\n        (function (global){\n\n            /*\n * Module requirements.\n */\n\n            var isArray = require('isarray');\n\n            /**\n             * Module exports.\n             */\n\n            module.exports = hasBinary;\n\n            /**\n             * Checks for binary data.\n             *\n             * Right now only Buffer and ArrayBuffer are supported..\n             *\n             * @param {Object} anything\n             * @api public\n             */\n\n            function hasBinary(data) {\n\n                function _hasBinary(obj) {\n                    if (!obj) return false;\n\n                    if ( (global.Buffer && global.Buffer.isBuffer(obj)) ||\n                        (global.ArrayBuffer && obj instanceof ArrayBuffer) ||\n                        (global.Blob && obj instanceof Blob) ||\n                        (global.File && obj instanceof File)\n                    ) {\n                        return true;\n                    }\n\n                    if (isArray(obj)) {\n                        for (var i = 0; i < obj.length; i++) {\n                            if (_hasBinary(obj[i])) {\n                                return true;\n                            }\n                        }\n                    } else if (obj && 'object' == typeof obj) {\n                        if (obj.toJSON) {\n                            obj = obj.toJSON();\n                        }\n\n                        for (var key in obj) {\n                            if (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\n                                return true;\n                            }\n                        }\n                    }\n\n                    return false;\n                }\n\n                return _hasBinary(data);\n            }\n\n        }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{\"isarray\":42}],40:[function(require,module,exports){\n\n        /**\n         * Module dependencies.\n         */\n\n        var global = require('global');\n\n        /**\n         * Module exports.\n         *\n         * Logic borrowed from Modernizr:\n         *\n         *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n         */\n\n        try {\n            module.exports = 'XMLHttpRequest' in global &&\n                'withCredentials' in new global.XMLHttpRequest();\n        } catch (err) {\n            // if XMLHttp support is disabled in IE then it will throw\n            // when trying to create\n            module.exports = false;\n        }\n\n    },{\"global\":37}],41:[function(require,module,exports){\n\n        var indexOf = [].indexOf;\n\n        module.exports = function(arr, obj){\n            if (indexOf) return arr.indexOf(obj);\n            for (var i = 0; i < arr.length; ++i) {\n                if (arr[i] === obj) return i;\n            }\n            return -1;\n        };\n    },{}],42:[function(require,module,exports){\n        module.exports = Array.isArray || function (arr) {\n            return Object.prototype.toString.call(arr) == '[object Array]';\n        };\n\n    },{}],43:[function(require,module,exports){\n        /*! JSON v3.2.6 | http://bestiejs.github.io/json3 | Copyright 2012-2013, Kit Cambridge | http://kit.mit-license.org */\n        ;(function (window) {\n            // Convenience aliases.\n            var getClass = {}.toString, isProperty, forEach, undef;\n\n            // Detect the `define` function exposed by asynchronous module loaders. The\n            // strict `define` check is necessary for compatibility with `r.js`.\n            var isLoader = typeof define === \"function\" && define.amd;\n\n            // Detect native implementations.\n            var nativeJSON = typeof JSON == \"object\" && JSON;\n\n            // Set up the JSON 3 namespace, preferring the CommonJS `exports` object if\n            // available.\n            var JSON3 = typeof exports == \"object\" && exports && !exports.nodeType && exports;\n\n            if (JSON3 && nativeJSON) {\n                // Explicitly delegate to the native `stringify` and `parse`\n                // implementations in CommonJS environments.\n                JSON3.stringify = nativeJSON.stringify;\n                JSON3.parse = nativeJSON.parse;\n            } else {\n                // Export for web browsers, JavaScript engines, and asynchronous module\n                // loaders, using the global `JSON` object if available.\n                JSON3 = window.JSON = nativeJSON || {};\n            }\n\n            // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n            var isExtended = new Date(-3509827334573292);\n            try {\n                // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n                // results for certain dates in Opera >= 10.53.\n                isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n                    // Safari < 2.0.2 stores the internal millisecond time value correctly,\n                    // but clips the values returned by the date methods to the range of\n                    // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n                    isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n            } catch (exception) {}\n\n            // Internal: Determines whether the native `JSON.stringify` and `parse`\n            // implementations are spec-compliant. Based on work by Ken Snyder.\n            function has(name) {\n                if (has[name] !== undef) {\n                    // Return cached feature test result.\n                    return has[name];\n                }\n\n                var isSupported;\n                if (name == \"bug-string-char-index\") {\n                    // IE <= 7 doesn't support accessing string characters using square\n                    // bracket notation. IE 8 only supports this for primitives.\n                    isSupported = \"a\"[0] != \"a\";\n                } else if (name == \"json\") {\n                    // Indicates whether both `JSON.stringify` and `JSON.parse` are\n                    // supported.\n                    isSupported = has(\"json-stringify\") && has(\"json-parse\");\n                } else {\n                    var value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n                    // Test `JSON.stringify`.\n                    if (name == \"json-stringify\") {\n                        var stringify = JSON3.stringify, stringifySupported = typeof stringify == \"function\" && isExtended;\n                        if (stringifySupported) {\n                            // A test function object with a custom `toJSON` method.\n                            (value = function () {\n                                return 1;\n                            }).toJSON = value;\n                            try {\n                                stringifySupported =\n                                    // Firefox 3.1b1 and b2 serialize string, number, and boolean\n                                    // primitives as object literals.\n                                    stringify(0) === \"0\" &&\n                                    // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n                                    // literals.\n                                    stringify(new Number()) === \"0\" &&\n                                    stringify(new String()) == '\"\"' &&\n                                    // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n                                    // does not define a canonical JSON representation (this applies to\n                                    // objects with `toJSON` properties as well, *unless* they are nested\n                                    // within an object or array).\n                                    stringify(getClass) === undef &&\n                                    // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n                                    // FF 3.1b3 pass this test.\n                                    stringify(undef) === undef &&\n                                    // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n                                    // respectively, if the value is omitted entirely.\n                                    stringify() === undef &&\n                                    // FF 3.1b1, 2 throw an error if the given value is not a number,\n                                    // string, array, object, Boolean, or `null` literal. This applies to\n                                    // objects with custom `toJSON` methods as well, unless they are nested\n                                    // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n                                    // methods entirely.\n                                    stringify(value) === \"1\" &&\n                                    stringify([value]) == \"[1]\" &&\n                                    // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n                                    // `\"[null]\"`.\n                                    stringify([undef]) == \"[null]\" &&\n                                    // YUI 3.0.0b1 fails to serialize `null` literals.\n                                    stringify(null) == \"null\" &&\n                                    // FF 3.1b1, 2 halts serialization if an array contains a function:\n                                    // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n                                    // elides non-JSON values from objects and arrays, unless they\n                                    // define custom `toJSON` methods.\n                                    stringify([undef, getClass, null]) == \"[null,null,null]\" &&\n                                    // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n                                    // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n                                    stringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\n                                    // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n                                    stringify(null, value) === \"1\" &&\n                                    stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n                                    // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n                                    // serialize extended years.\n                                    stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n                                    // The milliseconds are optional in ES 5, but required in 5.1.\n                                    stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n                                    // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n                                    // four-digit years instead of six-digit years. Credits: @Yaffle.\n                                    stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n                                    // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n                                    // values less than 1000. Credits: @Yaffle.\n                                    stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n                            } catch (exception) {\n                                stringifySupported = false;\n                            }\n                        }\n                        isSupported = stringifySupported;\n                    }\n                    // Test `JSON.parse`.\n                    if (name == \"json-parse\") {\n                        var parse = JSON3.parse;\n                        if (typeof parse == \"function\") {\n                            try {\n                                // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n                                // Conforming implementations should also coerce the initial argument to\n                                // a string prior to parsing.\n                                if (parse(\"0\") === 0 && !parse(false)) {\n                                    // Simple parsing test.\n                                    value = parse(serialized);\n                                    var parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n                                    if (parseSupported) {\n                                        try {\n                                            // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                                            parseSupported = !parse('\"\\t\"');\n                                        } catch (exception) {}\n                                        if (parseSupported) {\n                                            try {\n                                                // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                                                // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                                                // certain octal literals.\n                                                parseSupported = parse(\"01\") !== 1;\n                                            } catch (exception) {}\n                                        }\n                                        if (parseSupported) {\n                                            try {\n                                                // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                                                // points. These environments, along with FF 3.1b1 and 2,\n                                                // also allow trailing commas in JSON objects and arrays.\n                                                parseSupported = parse(\"1.\") !== 1;\n                                            } catch (exception) {}\n                                        }\n                                    }\n                                }\n                            } catch (exception) {\n                                parseSupported = false;\n                            }\n                        }\n                        isSupported = parseSupported;\n                    }\n                }\n                return has[name] = !!isSupported;\n            }\n\n            if (!has(\"json\")) {\n                // Common `[[Class]]` name aliases.\n                var functionClass = \"[object Function]\";\n                var dateClass = \"[object Date]\";\n                var numberClass = \"[object Number]\";\n                var stringClass = \"[object String]\";\n                var arrayClass = \"[object Array]\";\n                var booleanClass = \"[object Boolean]\";\n\n                // Detect incomplete support for accessing string characters by index.\n                var charIndexBuggy = has(\"bug-string-char-index\");\n\n                // Define additional utility methods if the `Date` methods are buggy.\n                if (!isExtended) {\n                    var floor = Math.floor;\n                    // A mapping between the months of the year and the number of days between\n                    // January 1st and the first of the respective month.\n                    var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n                    // Internal: Calculates the number of days between the Unix epoch and the\n                    // first day of the given month.\n                    var getDay = function (year, month) {\n                        return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n                    };\n                }\n\n                // Internal: Determines if a property is a direct property of the given\n                // object. Delegates to the native `Object#hasOwnProperty` method.\n                if (!(isProperty = {}.hasOwnProperty)) {\n                    isProperty = function (property) {\n                        var members = {}, constructor;\n                        if ((members.__proto__ = null, members.__proto__ = {\n                            // The *proto* property cannot be set multiple times in recent\n                            // versions of Firefox and SeaMonkey.\n                            \"toString\": 1\n                        }, members).toString != getClass) {\n                            // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n                            // supports the mutable *proto* property.\n                            isProperty = function (property) {\n                                // Capture and break the object's prototype chain (see section 8.6.2\n                                // of the ES 5.1 spec). The parenthesized expression prevents an\n                                // unsafe transformation by the Closure Compiler.\n                                var original = this.__proto__, result = property in (this.__proto__ = null, this);\n                                // Restore the original prototype chain.\n                                this.__proto__ = original;\n                                return result;\n                            };\n                        } else {\n                            // Capture a reference to the top-level `Object` constructor.\n                            constructor = members.constructor;\n                            // Use the `constructor` property to simulate `Object#hasOwnProperty` in\n                            // other environments.\n                            isProperty = function (property) {\n                                var parent = (this.constructor || constructor).prototype;\n                                return property in this && !(property in parent && this[property] === parent[property]);\n                            };\n                        }\n                        members = null;\n                        return isProperty.call(this, property);\n                    };\n                }\n\n                // Internal: A set of primitive types used by `isHostType`.\n                var PrimitiveTypes = {\n                    'boolean': 1,\n                    'number': 1,\n                    'string': 1,\n                    'undefined': 1\n                };\n\n                // Internal: Determines if the given object `property` value is a\n                // non-primitive.\n                var isHostType = function (object, property) {\n                    var type = typeof object[property];\n                    return type == 'object' ? !!object[property] : !PrimitiveTypes[type];\n                };\n\n                // Internal: Normalizes the `for...in` iteration algorithm across\n                // environments. Each enumerated key is yielded to a `callback` function.\n                forEach = function (object, callback) {\n                    var size = 0, Properties, members, property;\n\n                    // Tests for bugs in the current environment's `for...in` algorithm. The\n                    // `valueOf` property inherits the non-enumerable flag from\n                    // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n                    (Properties = function () {\n                        this.valueOf = 0;\n                    }).prototype.valueOf = 0;\n\n                    // Iterate over a new instance of the `Properties` class.\n                    members = new Properties();\n                    for (property in members) {\n                        // Ignore all properties inherited from `Object.prototype`.\n                        if (isProperty.call(members, property)) {\n                            size++;\n                        }\n                    }\n                    Properties = members = null;\n\n                    // Normalize the iteration algorithm.\n                    if (!size) {\n                        // A list of non-enumerable properties inherited from `Object.prototype`.\n                        members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n                        // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n                        // properties.\n                        forEach = function (object, callback) {\n                            var isFunction = getClass.call(object) == functionClass, property, length;\n                            var hasProperty = !isFunction && typeof object.constructor != 'function' && isHostType(object, 'hasOwnProperty') ? object.hasOwnProperty : isProperty;\n                            for (property in object) {\n                                // Gecko <= 1.0 enumerates the `prototype` property of functions under\n                                // certain conditions; IE does not.\n                                if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n                                    callback(property);\n                                }\n                            }\n                            // Manually invoke the callback for each non-enumerable property.\n                            for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\n                        };\n                    } else if (size == 2) {\n                        // Safari <= 2.0.4 enumerates shadowed properties twice.\n                        forEach = function (object, callback) {\n                            // Create a set of iterated properties.\n                            var members = {}, isFunction = getClass.call(object) == functionClass, property;\n                            for (property in object) {\n                                // Store each property name to prevent double enumeration. The\n                                // `prototype` property of functions is not enumerated due to cross-\n                                // environment inconsistencies.\n                                if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n                                    callback(property);\n                                }\n                            }\n                        };\n                    } else {\n                        // No bugs detected; use the standard `for...in` algorithm.\n                        forEach = function (object, callback) {\n                            var isFunction = getClass.call(object) == functionClass, property, isConstructor;\n                            for (property in object) {\n                                if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n                                    callback(property);\n                                }\n                            }\n                            // Manually invoke the callback for the `constructor` property due to\n                            // cross-environment inconsistencies.\n                            if (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n                                callback(property);\n                            }\n                        };\n                    }\n                    return forEach(object, callback);\n                };\n\n                // Public: Serializes a JavaScript `value` as a JSON string. The optional\n                // `filter` argument may specify either a function that alters how object and\n                // array members are serialized, or an array of strings and numbers that\n                // indicates which properties should be serialized. The optional `width`\n                // argument may be either a string or number that specifies the indentation\n                // level of the output.\n                if (!has(\"json-stringify\")) {\n                    // Internal: A map of control characters and their escaped equivalents.\n                    var Escapes = {\n                        92: \"\\\\\\\\\",\n                        34: '\\\\\"',\n                        8: \"\\\\b\",\n                        12: \"\\\\f\",\n                        10: \"\\\\n\",\n                        13: \"\\\\r\",\n                        9: \"\\\\t\"\n                    };\n\n                    // Internal: Converts `value` into a zero-padded string such that its\n                    // length is at least equal to `width`. The `width` must be <= 6.\n                    var leadingZeroes = \"000000\";\n                    var toPaddedString = function (width, value) {\n                        // The `|| 0` expression is necessary to work around a bug in\n                        // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n                        return (leadingZeroes + (value || 0)).slice(-width);\n                    };\n\n                    // Internal: Double-quotes a string `value`, replacing all ASCII control\n                    // characters (characters with code unit values between 0 and 31) with\n                    // their escaped equivalents. This is an implementation of the\n                    // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n                    var unicodePrefix = \"\\\\u00\";\n                    var quote = function (value) {\n                        var result = '\"', index = 0, length = value.length, isLarge = length > 10 && charIndexBuggy, symbols;\n                        if (isLarge) {\n                            symbols = value.split(\"\");\n                        }\n                        for (; index < length; index++) {\n                            var charCode = value.charCodeAt(index);\n                            // If the character is a control character, append its Unicode or\n                            // shorthand escape sequence; otherwise, append the character as-is.\n                            switch (charCode) {\n                                case 8: case 9: case 10: case 12: case 13: case 34: case 92:\n                                result += Escapes[charCode];\n                                break;\n                                default:\n                                    if (charCode < 32) {\n                                        result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n                                        break;\n                                    }\n                                    result += isLarge ? symbols[index] : charIndexBuggy ? value.charAt(index) : value[index];\n                            }\n                        }\n                        return result + '\"';\n                    };\n\n                    // Internal: Recursively serializes an object. Implements the\n                    // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n                    var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n                        var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n                        try {\n                            // Necessary for host object support.\n                            value = object[property];\n                        } catch (exception) {}\n                        if (typeof value == \"object\" && value) {\n                            className = getClass.call(value);\n                            if (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n                                if (value > -1 / 0 && value < 1 / 0) {\n                                    // Dates are serialized according to the `Date#toJSON` method\n                                    // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n                                    // for the ISO 8601 date time string format.\n                                    if (getDay) {\n                                        // Manually compute the year, month, date, hours, minutes,\n                                        // seconds, and milliseconds if the `getUTC*` methods are\n                                        // buggy. Adapted from @Yaffle's `date-shim` project.\n                                        date = floor(value / 864e5);\n                                        for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n                                        for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n                                        date = 1 + date - getDay(year, month);\n                                        // The `time` value specifies the time within the day (see ES\n                                        // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n                                        // to compute `A modulo B`, as the `%` operator does not\n                                        // correspond to the `modulo` operation for negative numbers.\n                                        time = (value % 864e5 + 864e5) % 864e5;\n                                        // The hours, minutes, seconds, and milliseconds are obtained by\n                                        // decomposing the time within the day. See section 15.9.1.10.\n                                        hours = floor(time / 36e5) % 24;\n                                        minutes = floor(time / 6e4) % 60;\n                                        seconds = floor(time / 1e3) % 60;\n                                        milliseconds = time % 1e3;\n                                    } else {\n                                        year = value.getUTCFullYear();\n                                        month = value.getUTCMonth();\n                                        date = value.getUTCDate();\n                                        hours = value.getUTCHours();\n                                        minutes = value.getUTCMinutes();\n                                        seconds = value.getUTCSeconds();\n                                        milliseconds = value.getUTCMilliseconds();\n                                    }\n                                    // Serialize extended years correctly.\n                                    value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\n                                        \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n                                        // Months, dates, hours, minutes, and seconds should have two\n                                        // digits; milliseconds should have three.\n                                        \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n                                        // Milliseconds are optional in ES 5.0, but required in 5.1.\n                                        \".\" + toPaddedString(3, milliseconds) + \"Z\";\n                                } else {\n                                    value = null;\n                                }\n                            } else if (typeof value.toJSON == \"function\" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, \"toJSON\"))) {\n                                // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n                                // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n                                // ignores all `toJSON` methods on these objects unless they are\n                                // defined directly on an instance.\n                                value = value.toJSON(property);\n                            }\n                        }\n                        if (callback) {\n                            // If a replacement function was provided, call it to obtain the value\n                            // for serialization.\n                            value = callback.call(object, property, value);\n                        }\n                        if (value === null) {\n                            return \"null\";\n                        }\n                        className = getClass.call(value);\n                        if (className == booleanClass) {\n                            // Booleans are represented literally.\n                            return \"\" + value;\n                        } else if (className == numberClass) {\n                            // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n                            // `\"null\"`.\n                            return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n                        } else if (className == stringClass) {\n                            // Strings are double-quoted and escaped.\n                            return quote(\"\" + value);\n                        }\n                        // Recursively serialize objects and arrays.\n                        if (typeof value == \"object\") {\n                            // Check for cyclic structures. This is a linear search; performance\n                            // is inversely proportional to the number of unique nested objects.\n                            for (length = stack.length; length--;) {\n                                if (stack[length] === value) {\n                                    // Cyclic structures cannot be serialized by `JSON.stringify`.\n                                    throw TypeError();\n                                }\n                            }\n                            // Add the object to the stack of traversed objects.\n                            stack.push(value);\n                            results = [];\n                            // Save the current indentation level and indent one additional level.\n                            prefix = indentation;\n                            indentation += whitespace;\n                            if (className == arrayClass) {\n                                // Recursively serialize array elements.\n                                for (index = 0, length = value.length; index < length; index++) {\n                                    element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n                                    results.push(element === undef ? \"null\" : element);\n                                }\n                                result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n                            } else {\n                                // Recursively serialize object members. Members are selected from\n                                // either a user-specified list of property names, or the object\n                                // itself.\n                                forEach(properties || value, function (property) {\n                                    var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n                                    if (element !== undef) {\n                                        // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                                        // is not the empty string, let `member` {quote(property) + \":\"}\n                                        // be the concatenation of `member` and the `space` character.\"\n                                        // The \"`space` character\" refers to the literal space\n                                        // character, not the `space` {width} argument provided to\n                                        // `JSON.stringify`.\n                                        results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n                                    }\n                                });\n                                result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n                            }\n                            // Remove the object from the traversed object stack.\n                            stack.pop();\n                            return result;\n                        }\n                    };\n\n                    // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n                    JSON3.stringify = function (source, filter, width) {\n                        var whitespace, callback, properties, className;\n                        if (typeof filter == \"function\" || typeof filter == \"object\" && filter) {\n                            if ((className = getClass.call(filter)) == functionClass) {\n                                callback = filter;\n                            } else if (className == arrayClass) {\n                                // Convert the property names array into a makeshift set.\n                                properties = {};\n                                for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1));\n                            }\n                        }\n                        if (width) {\n                            if ((className = getClass.call(width)) == numberClass) {\n                                // Convert the `width` to an integer and create a string containing\n                                // `width` number of space characters.\n                                if ((width -= width % 1) > 0) {\n                                    for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\n                                }\n                            } else if (className == stringClass) {\n                                whitespace = width.length <= 10 ? width : width.slice(0, 10);\n                            }\n                        }\n                        // Opera <= 7.54u2 discards the values associated with empty string keys\n                        // (`\"\"`) only if they are used directly within an object member list\n                        // (e.g., `!(\"\" in { \"\": 1})`).\n                        return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n                    };\n                }\n\n                // Public: Parses a JSON source string.\n                if (!has(\"json-parse\")) {\n                    var fromCharCode = String.fromCharCode;\n\n                    // Internal: A map of escaped control characters and their unescaped\n                    // equivalents.\n                    var Unescapes = {\n                        92: \"\\\\\",\n                        34: '\"',\n                        47: \"/\",\n                        98: \"\\b\",\n                        116: \"\\t\",\n                        110: \"\\n\",\n                        102: \"\\f\",\n                        114: \"\\r\"\n                    };\n\n                    // Internal: Stores the parser state.\n                    var Index, Source;\n\n                    // Internal: Resets the parser state and throws a `SyntaxError`.\n                    var abort = function() {\n                        Index = Source = null;\n                        throw SyntaxError();\n                    };\n\n                    // Internal: Returns the next token, or `\"$\"` if the parser has reached\n                    // the end of the source string. A token may be a string, number, `null`\n                    // literal, or Boolean literal.\n                    var lex = function () {\n                        var source = Source, length = source.length, value, begin, position, isSigned, charCode;\n                        while (Index < length) {\n                            charCode = source.charCodeAt(Index);\n                            switch (charCode) {\n                                case 9: case 10: case 13: case 32:\n                                // Skip whitespace tokens, including tabs, carriage returns, line\n                                // feeds, and space characters.\n                                Index++;\n                                break;\n                                case 123: case 125: case 91: case 93: case 58: case 44:\n                                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n                                // the current position.\n                                value = charIndexBuggy ? source.charAt(Index) : source[Index];\n                                Index++;\n                                return value;\n                                case 34:\n                                    // `\"` delimits a JSON string; advance to the next character and\n                                    // begin parsing the string. String tokens are prefixed with the\n                                    // sentinel `@` character to distinguish them from punctuators and\n                                    // end-of-string tokens.\n                                    for (value = \"@\", Index++; Index < length;) {\n                                        charCode = source.charCodeAt(Index);\n                                        if (charCode < 32) {\n                                            // Unescaped ASCII control characters (those with a code unit\n                                            // less than the space character) are not permitted.\n                                            abort();\n                                        } else if (charCode == 92) {\n                                            // A reverse solidus (`\\`) marks the beginning of an escaped\n                                            // control character (including `\"`, `\\`, and `/`) or Unicode\n                                            // escape sequence.\n                                            charCode = source.charCodeAt(++Index);\n                                            switch (charCode) {\n                                                case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\n                                                // Revive escaped control characters.\n                                                value += Unescapes[charCode];\n                                                Index++;\n                                                break;\n                                                case 117:\n                                                    // `\\u` marks the beginning of a Unicode escape sequence.\n                                                    // Advance to the first character and validate the\n                                                    // four-digit code point.\n                                                    begin = ++Index;\n                                                    for (position = Index + 4; Index < position; Index++) {\n                                                        charCode = source.charCodeAt(Index);\n                                                        // A valid sequence comprises four hexdigits (case-\n                                                        // insensitive) that form a single hexadecimal value.\n                                                        if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                                                            // Invalid Unicode escape sequence.\n                                                            abort();\n                                                        }\n                                                    }\n                                                    // Revive the escaped character.\n                                                    value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                                                    break;\n                                                default:\n                                                    // Invalid escape sequence.\n                                                    abort();\n                                            }\n                                        } else {\n                                            if (charCode == 34) {\n                                                // An unescaped double-quote character marks the end of the\n                                                // string.\n                                                break;\n                                            }\n                                            charCode = source.charCodeAt(Index);\n                                            begin = Index;\n                                            // Optimize for the common case where a string is valid.\n                                            while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                                                charCode = source.charCodeAt(++Index);\n                                            }\n                                            // Append the string as-is.\n                                            value += source.slice(begin, Index);\n                                        }\n                                    }\n                                    if (source.charCodeAt(Index) == 34) {\n                                        // Advance to the next character and return the revived string.\n                                        Index++;\n                                        return value;\n                                    }\n                                    // Unterminated string.\n                                    abort();\n                                default:\n                                    // Parse numbers and literals.\n                                    begin = Index;\n                                    // Advance past the negative sign, if one is specified.\n                                    if (charCode == 45) {\n                                        isSigned = true;\n                                        charCode = source.charCodeAt(++Index);\n                                    }\n                                    // Parse an integer or floating-point value.\n                                    if (charCode >= 48 && charCode <= 57) {\n                                        // Leading zeroes are interpreted as octal literals.\n                                        if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\n                                            // Illegal octal literal.\n                                            abort();\n                                        }\n                                        isSigned = false;\n                                        // Parse the integer component.\n                                        for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\n                                        // Floats cannot contain a leading decimal point; however, this\n                                        // case is already accounted for by the parser.\n                                        if (source.charCodeAt(Index) == 46) {\n                                            position = ++Index;\n                                            // Parse the decimal component.\n                                            for (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                                            if (position == Index) {\n                                                // Illegal trailing decimal.\n                                                abort();\n                                            }\n                                            Index = position;\n                                        }\n                                        // Parse exponents. The `e` denoting the exponent is\n                                        // case-insensitive.\n                                        charCode = source.charCodeAt(Index);\n                                        if (charCode == 101 || charCode == 69) {\n                                            charCode = source.charCodeAt(++Index);\n                                            // Skip past the sign following the exponent, if one is\n                                            // specified.\n                                            if (charCode == 43 || charCode == 45) {\n                                                Index++;\n                                            }\n                                            // Parse the exponential component.\n                                            for (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                                            if (position == Index) {\n                                                // Illegal empty exponent.\n                                                abort();\n                                            }\n                                            Index = position;\n                                        }\n                                        // Coerce the parsed value to a JavaScript number.\n                                        return +source.slice(begin, Index);\n                                    }\n                                    // A negative sign may only precede numbers.\n                                    if (isSigned) {\n                                        abort();\n                                    }\n                                    // `true`, `false`, and `null` literals.\n                                    if (source.slice(Index, Index + 4) == \"true\") {\n                                        Index += 4;\n                                        return true;\n                                    } else if (source.slice(Index, Index + 5) == \"false\") {\n                                        Index += 5;\n                                        return false;\n                                    } else if (source.slice(Index, Index + 4) == \"null\") {\n                                        Index += 4;\n                                        return null;\n                                    }\n                                    // Unrecognized token.\n                                    abort();\n                            }\n                        }\n                        // Return the sentinel `$` character if the parser has reached the end\n                        // of the source string.\n                        return \"$\";\n                    };\n\n                    // Internal: Parses a JSON `value` token.\n                    var get = function (value) {\n                        var results, hasMembers;\n                        if (value == \"$\") {\n                            // Unexpected end of input.\n                            abort();\n                        }\n                        if (typeof value == \"string\") {\n                            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n                                // Remove the sentinel `@` character.\n                                return value.slice(1);\n                            }\n                            // Parse object and array literals.\n                            if (value == \"[\") {\n                                // Parses a JSON array, returning a new JavaScript array.\n                                results = [];\n                                for (;; hasMembers || (hasMembers = true)) {\n                                    value = lex();\n                                    // A closing square bracket marks the end of the array literal.\n                                    if (value == \"]\") {\n                                        break;\n                                    }\n                                    // If the array literal contains elements, the current token\n                                    // should be a comma separating the previous element from the\n                                    // next.\n                                    if (hasMembers) {\n                                        if (value == \",\") {\n                                            value = lex();\n                                            if (value == \"]\") {\n                                                // Unexpected trailing `,` in array literal.\n                                                abort();\n                                            }\n                                        } else {\n                                            // A `,` must separate each array element.\n                                            abort();\n                                        }\n                                    }\n                                    // Elisions and leading commas are not permitted.\n                                    if (value == \",\") {\n                                        abort();\n                                    }\n                                    results.push(get(value));\n                                }\n                                return results;\n                            } else if (value == \"{\") {\n                                // Parses a JSON object, returning a new JavaScript object.\n                                results = {};\n                                for (;; hasMembers || (hasMembers = true)) {\n                                    value = lex();\n                                    // A closing curly brace marks the end of the object literal.\n                                    if (value == \"}\") {\n                                        break;\n                                    }\n                                    // If the object literal contains members, the current token\n                                    // should be a comma separator.\n                                    if (hasMembers) {\n                                        if (value == \",\") {\n                                            value = lex();\n                                            if (value == \"}\") {\n                                                // Unexpected trailing `,` in object literal.\n                                                abort();\n                                            }\n                                        } else {\n                                            // A `,` must separate each object member.\n                                            abort();\n                                        }\n                                    }\n                                    // Leading commas are not permitted, object property names must be\n                                    // double-quoted strings, and a `:` must separate each property\n                                    // name and value.\n                                    if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                                        abort();\n                                    }\n                                    results[value.slice(1)] = get(lex());\n                                }\n                                return results;\n                            }\n                            // Unexpected token encountered.\n                            abort();\n                        }\n                        return value;\n                    };\n\n                    // Internal: Updates a traversed object member.\n                    var update = function(source, property, callback) {\n                        var element = walk(source, property, callback);\n                        if (element === undef) {\n                            delete source[property];\n                        } else {\n                            source[property] = element;\n                        }\n                    };\n\n                    // Internal: Recursively traverses a parsed JSON object, invoking the\n                    // `callback` function for each value. This is an implementation of the\n                    // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n                    var walk = function (source, property, callback) {\n                        var value = source[property], length;\n                        if (typeof value == \"object\" && value) {\n                            // `forEach` can't be used to traverse an array in Opera <= 8.54\n                            // because its `Object#hasOwnProperty` implementation returns `false`\n                            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n                            if (getClass.call(value) == arrayClass) {\n                                for (length = value.length; length--;) {\n                                    update(value, length, callback);\n                                }\n                            } else {\n                                forEach(value, function (property) {\n                                    update(value, property, callback);\n                                });\n                            }\n                        }\n                        return callback.call(source, property, value);\n                    };\n\n                    // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n                    JSON3.parse = function (source, callback) {\n                        var result, value;\n                        Index = 0;\n                        Source = \"\" + source;\n                        result = get(lex());\n                        // If a JSON string contains multiple tokens, it is invalid.\n                        if (lex() != \"$\") {\n                            abort();\n                        }\n                        // Reset the parser state.\n                        Index = Source = null;\n                        return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n                    };\n                }\n            }\n\n            // Export for asynchronous module loaders.\n            if (isLoader) {\n                define(function () {\n                    return JSON3;\n                });\n            }\n        }(this));\n\n    },{}],44:[function(require,module,exports){\n        var util = require('util');\n        var hark = require('hark');\n        var getScreenMedia = require('getscreenmedia');\n        var WildEmitter = require('wildemitter');\n        var mockconsole = require('mockconsole');\n\n        function isAllTracksEnded(stream) {\n            var isAllTracksEnded = true;\n            stream.getTracks().forEach(function (t) {\n                isAllTracksEnded = t.readyState === 'ended' && isAllTracksEnded;\n            });\n            return isAllTracksEnded;\n        }\n\n        function shouldWorkAroundFirefoxStopStream() {\n            if (typeof window === 'undefined') {\n                return false;\n            }\n            if (!window.navigator.mozGetUserMedia) {\n                return false;\n            }\n            var match = window.navigator.userAgent.match(/Firefox\\/(\\d+)\\./);\n            var version = match && match.length >= 1 && parseInt(match[1], 10);\n            return version < 50;\n        }\n\n        function LocalMedia(opts) {\n            WildEmitter.call(this);\n\n            var config = this.config = {\n                detectSpeakingEvents: false,\n                audioFallback: false,\n                media: {\n                    audio: true,\n                    video: true\n                },\n                harkOptions: null,\n                logger: mockconsole\n            };\n\n            var item;\n            for (item in opts) {\n                if (opts.hasOwnProperty(item)) {\n                    this.config[item] = opts[item];\n                }\n            }\n\n            this.logger = config.logger;\n            this._log = this.logger.log.bind(this.logger, 'LocalMedia:');\n            this._logerror = this.logger.error.bind(this.logger, 'LocalMedia:');\n\n            this.localStreams = [];\n            this.localScreens = [];\n\n            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n                this._logerror('Your browser does not support local media capture.');\n            }\n\n            this._audioMonitors = [];\n            this.on('localStreamStopped', this._stopAudioMonitor.bind(this));\n            this.on('localScreenStopped', this._stopAudioMonitor.bind(this));\n        }\n\n        util.inherits(LocalMedia, WildEmitter);\n\n\n        LocalMedia.prototype.start = function (mediaConstraints, cb) {\n            var self = this;\n            var constraints = mediaConstraints || this.config.media;\n\n            this.emit('localStreamRequested', constraints);\n\n            navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                if (constraints.audio && self.config.detectSpeakingEvents) {\n                    self._setupAudioMonitor(stream, self.config.harkOptions);\n                }\n                self.localStreams.push(stream);\n\n                stream.getTracks().forEach(function (track) {\n                    track.addEventListener('ended', function () {\n                        if (isAllTracksEnded(stream)) {\n                            self._removeStream(stream);\n                        }\n                    });\n                });\n\n                self.emit('localStream', stream);\n\n                if (cb) {\n                    return cb(null, stream);\n                }\n            }).catch(function (err) {\n                // Fallback for users without a camera\n                if (self.config.audioFallback && err.name === 'DevicesNotFoundError' && constraints.video !== false) {\n                    constraints.video = false;\n                    self.start(constraints, cb);\n                    return;\n                }\n\n                self.emit('localStreamRequestFailed', constraints);\n\n                if (cb) {\n                    return cb(err, null);\n                }\n            });\n        };\n\n        LocalMedia.prototype.stop = function (stream) {\n            this.stopStream(stream);\n            this.stopScreenShare(stream);\n        };\n\n        LocalMedia.prototype.stopStream = function (stream) {\n            var self = this;\n\n            if (stream) {\n                var idx = this.localStreams.indexOf(stream);\n                if (idx > -1) {\n                    stream.getTracks().forEach(function (track) { track.stop(); });\n\n                    //Half-working fix for Firefox, see: https://bugzilla.mozilla.org/show_bug.cgi?id=1208373\n                    if (shouldWorkAroundFirefoxStopStream()) {\n                        this._removeStream(stream);\n                    }\n                }\n            } else {\n                this.localStreams.forEach(function (stream) {\n                    stream.getTracks().forEach(function (track) { track.stop(); });\n\n                    //Half-working fix for Firefox, see: https://bugzilla.mozilla.org/show_bug.cgi?id=1208373\n                    if (shouldWorkAroundFirefoxStopStream()) {\n                        self._removeStream(stream);\n                    }\n                });\n            }\n        };\n\n        LocalMedia.prototype.startScreenShare = function (constraints, cb) {\n            var self = this;\n\n            this.emit('localScreenRequested');\n\n            if (typeof constraints === 'function' && !cb) {\n                cb = constraints;\n                constraints = null;\n            }\n\n            getScreenMedia(constraints, function (err, stream) {\n                if (!err) {\n                    self.localScreens.push(stream);\n\n                    stream.getTracks().forEach(function (track) {\n                        track.addEventListener('ended', function () {\n                            var isAllTracksEnded = true;\n                            stream.getTracks().forEach(function (t) {\n                                isAllTracksEnded = t.readyState === 'ended' && isAllTracksEnded;\n                            });\n\n                            if (isAllTracksEnded) {\n                                self._removeStream(stream);\n                            }\n                        });\n                    });\n\n                    self.emit('localScreen', stream);\n                } else {\n                    self.emit('localScreenRequestFailed');\n                }\n\n                // enable the callback\n                if (cb) {\n                    return cb(err, stream);\n                }\n            });\n        };\n\n        LocalMedia.prototype.stopScreenShare = function (stream) {\n            var self = this;\n\n            if (stream) {\n                var idx = this.localScreens.indexOf(stream);\n                if (idx > -1) {\n                    stream.getTracks().forEach(function (track) { track.stop(); });\n\n                    //Half-working fix for Firefox, see: https://bugzilla.mozilla.org/show_bug.cgi?id=1208373\n                    if (shouldWorkAroundFirefoxStopStream()) {\n                        this._removeStream(stream);\n                    }\n                }\n            } else {\n                this.localScreens.forEach(function (stream) {\n                    stream.getTracks().forEach(function (track) { track.stop(); });\n\n                    //Half-working fix for Firefox, see: https://bugzilla.mozilla.org/show_bug.cgi?id=1208373\n                    if (shouldWorkAroundFirefoxStopStream()) {\n                        self._removeStream(stream);\n                    }\n                });\n            }\n        };\n\n// Audio controls\n        LocalMedia.prototype.mute = function () {\n            this._audioEnabled(false);\n            this.emit('audioOff');\n        };\n\n        LocalMedia.prototype.unmute = function () {\n            this._audioEnabled(true);\n            this.emit('audioOn');\n        };\n\n// Video controls\n        LocalMedia.prototype.pauseVideo = function () {\n            this._videoEnabled(false);\n            this.emit('videoOff');\n        };\n        LocalMedia.prototype.resumeVideo = function () {\n            this._videoEnabled(true);\n            this.emit('videoOn');\n        };\n\n// Combined controls\n        LocalMedia.prototype.pause = function () {\n            this.mute();\n            this.pauseVideo();\n        };\n        LocalMedia.prototype.resume = function () {\n            this.unmute();\n            this.resumeVideo();\n        };\n\n// Internal methods for enabling/disabling audio/video\n        LocalMedia.prototype._audioEnabled = function (bool) {\n            this.localStreams.forEach(function (stream) {\n                stream.getAudioTracks().forEach(function (track) {\n                    track.enabled = !!bool;\n                });\n            });\n        };\n        LocalMedia.prototype._videoEnabled = function (bool) {\n            this.localStreams.forEach(function (stream) {\n                stream.getVideoTracks().forEach(function (track) {\n                    track.enabled = !!bool;\n                });\n            });\n        };\n\n// check if all audio streams are enabled\n        LocalMedia.prototype.isAudioEnabled = function () {\n            var enabled = true;\n            this.localStreams.forEach(function (stream) {\n                stream.getAudioTracks().forEach(function (track) {\n                    enabled = enabled && track.enabled;\n                });\n            });\n            return enabled;\n        };\n\n// check if all video streams are enabled\n        LocalMedia.prototype.isVideoEnabled = function () {\n            var enabled = true;\n            this.localStreams.forEach(function (stream) {\n                stream.getVideoTracks().forEach(function (track) {\n                    enabled = enabled && track.enabled;\n                });\n            });\n            return enabled;\n        };\n\n        LocalMedia.prototype._removeStream = function (stream) {\n            var idx = this.localStreams.indexOf(stream);\n            if (idx > -1) {\n                this.localStreams.splice(idx, 1);\n                this.emit('localStreamStopped', stream);\n            } else {\n                idx = this.localScreens.indexOf(stream);\n                if (idx > -1) {\n                    this.localScreens.splice(idx, 1);\n                    this.emit('localScreenStopped', stream);\n                }\n            }\n        };\n\n        LocalMedia.prototype._setupAudioMonitor = function (stream, harkOptions) {\n            this._log('Setup audio');\n            var audio = hark(stream, harkOptions);\n            var self = this;\n            var timeout;\n\n            audio.on('speaking', function () {\n                self.emit('speaking');\n            });\n\n            audio.on('stopped_speaking', function () {\n                if (timeout) {\n                    clearTimeout(timeout);\n                }\n\n                timeout = setTimeout(function () {\n                    self.emit('stoppedSpeaking');\n                }, 1000);\n            });\n            audio.on('volume_change', function (volume, threshold) {\n                self.emit('volumeChange', volume, threshold);\n            });\n\n            this._audioMonitors.push({audio: audio, stream: stream});\n        };\n\n        LocalMedia.prototype._stopAudioMonitor = function (stream) {\n            var idx = -1;\n            this._audioMonitors.forEach(function (monitors, i) {\n                if (monitors.stream === stream) {\n                    idx = i;\n                }\n            });\n\n            if (idx > -1) {\n                this._audioMonitors[idx].audio.stop();\n                this._audioMonitors.splice(idx, 1);\n            }\n        };\n\n        module.exports = LocalMedia;\n\n    },{\"getscreenmedia\":36,\"hark\":38,\"mockconsole\":46,\"util\":73,\"wildemitter\":75}],45:[function(require,module,exports){\n        (function (global){\n            /**\n             * lodash (Custom Build) <https://lodash.com/>\n             * Build: `lodash modularize exports=\"npm\" -o ./`\n             * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n             * Released under MIT license <https://lodash.com/license>\n             * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n             * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n             */\n\n            /** Used as the size to enable large array optimizations. */\n            var LARGE_ARRAY_SIZE = 200;\n\n            /** Used to stand-in for `undefined` hash values. */\n            var HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n            /** Used as references for various `Number` constants. */\n            var MAX_SAFE_INTEGER = 9007199254740991;\n\n            /** `Object#toString` result references. */\n            var argsTag = '[object Arguments]',\n                arrayTag = '[object Array]',\n                boolTag = '[object Boolean]',\n                dateTag = '[object Date]',\n                errorTag = '[object Error]',\n                funcTag = '[object Function]',\n                genTag = '[object GeneratorFunction]',\n                mapTag = '[object Map]',\n                numberTag = '[object Number]',\n                objectTag = '[object Object]',\n                promiseTag = '[object Promise]',\n                regexpTag = '[object RegExp]',\n                setTag = '[object Set]',\n                stringTag = '[object String]',\n                symbolTag = '[object Symbol]',\n                weakMapTag = '[object WeakMap]';\n\n            var arrayBufferTag = '[object ArrayBuffer]',\n                dataViewTag = '[object DataView]',\n                float32Tag = '[object Float32Array]',\n                float64Tag = '[object Float64Array]',\n                int8Tag = '[object Int8Array]',\n                int16Tag = '[object Int16Array]',\n                int32Tag = '[object Int32Array]',\n                uint8Tag = '[object Uint8Array]',\n                uint8ClampedTag = '[object Uint8ClampedArray]',\n                uint16Tag = '[object Uint16Array]',\n                uint32Tag = '[object Uint32Array]';\n\n            /**\n             * Used to match `RegExp`\n             * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n             */\n            var reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n            /** Used to match `RegExp` flags from their coerced string values. */\n            var reFlags = /\\w*$/;\n\n            /** Used to detect host constructors (Safari). */\n            var reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n            /** Used to detect unsigned integer values. */\n            var reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n            /** Used to identify `toStringTag` values supported by `_.clone`. */\n            var cloneableTags = {};\n            cloneableTags[argsTag] = cloneableTags[arrayTag] =\n                cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\n                    cloneableTags[boolTag] = cloneableTags[dateTag] =\n                        cloneableTags[float32Tag] = cloneableTags[float64Tag] =\n                            cloneableTags[int8Tag] = cloneableTags[int16Tag] =\n                                cloneableTags[int32Tag] = cloneableTags[mapTag] =\n                                    cloneableTags[numberTag] = cloneableTags[objectTag] =\n                                        cloneableTags[regexpTag] = cloneableTags[setTag] =\n                                            cloneableTags[stringTag] = cloneableTags[symbolTag] =\n                                                cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\n                                                    cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\n            cloneableTags[errorTag] = cloneableTags[funcTag] =\n                cloneableTags[weakMapTag] = false;\n\n            /** Detect free variable `global` from Node.js. */\n            var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n            /** Detect free variable `self`. */\n            var freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n            /** Used as a reference to the global object. */\n            var root = freeGlobal || freeSelf || Function('return this')();\n\n            /** Detect free variable `exports`. */\n            var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n            /** Detect free variable `module`. */\n            var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n            /** Detect the popular CommonJS extension `module.exports`. */\n            var moduleExports = freeModule && freeModule.exports === freeExports;\n\n            /**\n             * Adds the key-value `pair` to `map`.\n             *\n             * @private\n             * @param {Object} map The map to modify.\n             * @param {Array} pair The key-value pair to add.\n             * @returns {Object} Returns `map`.\n             */\n            function addMapEntry(map, pair) {\n                // Don't return `map.set` because it's not chainable in IE 11.\n                map.set(pair[0], pair[1]);\n                return map;\n            }\n\n            /**\n             * Adds `value` to `set`.\n             *\n             * @private\n             * @param {Object} set The set to modify.\n             * @param {*} value The value to add.\n             * @returns {Object} Returns `set`.\n             */\n            function addSetEntry(set, value) {\n                // Don't return `set.add` because it's not chainable in IE 11.\n                set.add(value);\n                return set;\n            }\n\n            /**\n             * A specialized version of `_.forEach` for arrays without support for\n             * iteratee shorthands.\n             *\n             * @private\n             * @param {Array} [array] The array to iterate over.\n             * @param {Function} iteratee The function invoked per iteration.\n             * @returns {Array} Returns `array`.\n             */\n            function arrayEach(array, iteratee) {\n                var index = -1,\n                    length = array ? array.length : 0;\n\n                while (++index < length) {\n                    if (iteratee(array[index], index, array) === false) {\n                        break;\n                    }\n                }\n                return array;\n            }\n\n            /**\n             * Appends the elements of `values` to `array`.\n             *\n             * @private\n             * @param {Array} array The array to modify.\n             * @param {Array} values The values to append.\n             * @returns {Array} Returns `array`.\n             */\n            function arrayPush(array, values) {\n                var index = -1,\n                    length = values.length,\n                    offset = array.length;\n\n                while (++index < length) {\n                    array[offset + index] = values[index];\n                }\n                return array;\n            }\n\n            /**\n             * A specialized version of `_.reduce` for arrays without support for\n             * iteratee shorthands.\n             *\n             * @private\n             * @param {Array} [array] The array to iterate over.\n             * @param {Function} iteratee The function invoked per iteration.\n             * @param {*} [accumulator] The initial value.\n             * @param {boolean} [initAccum] Specify using the first element of `array` as\n             *  the initial value.\n             * @returns {*} Returns the accumulated value.\n             */\n            function arrayReduce(array, iteratee, accumulator, initAccum) {\n                var index = -1,\n                    length = array ? array.length : 0;\n\n                if (initAccum && length) {\n                    accumulator = array[++index];\n                }\n                while (++index < length) {\n                    accumulator = iteratee(accumulator, array[index], index, array);\n                }\n                return accumulator;\n            }\n\n            /**\n             * The base implementation of `_.times` without support for iteratee shorthands\n             * or max array length checks.\n             *\n             * @private\n             * @param {number} n The number of times to invoke `iteratee`.\n             * @param {Function} iteratee The function invoked per iteration.\n             * @returns {Array} Returns the array of results.\n             */\n            function baseTimes(n, iteratee) {\n                var index = -1,\n                    result = Array(n);\n\n                while (++index < n) {\n                    result[index] = iteratee(index);\n                }\n                return result;\n            }\n\n            /**\n             * Gets the value at `key` of `object`.\n             *\n             * @private\n             * @param {Object} [object] The object to query.\n             * @param {string} key The key of the property to get.\n             * @returns {*} Returns the property value.\n             */\n            function getValue(object, key) {\n                return object == null ? undefined : object[key];\n            }\n\n            /**\n             * Checks if `value` is a host object in IE < 9.\n             *\n             * @private\n             * @param {*} value The value to check.\n             * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n             */\n            function isHostObject(value) {\n                // Many host objects are `Object` objects that can coerce to strings\n                // despite having improperly defined `toString` methods.\n                var result = false;\n                if (value != null && typeof value.toString != 'function') {\n                    try {\n                        result = !!(value + '');\n                    } catch (e) {}\n                }\n                return result;\n            }\n\n            /**\n             * Converts `map` to its key-value pairs.\n             *\n             * @private\n             * @param {Object} map The map to convert.\n             * @returns {Array} Returns the key-value pairs.\n             */\n            function mapToArray(map) {\n                var index = -1,\n                    result = Array(map.size);\n\n                map.forEach(function(value, key) {\n                    result[++index] = [key, value];\n                });\n                return result;\n            }\n\n            /**\n             * Creates a unary function that invokes `func` with its argument transformed.\n             *\n             * @private\n             * @param {Function} func The function to wrap.\n             * @param {Function} transform The argument transform.\n             * @returns {Function} Returns the new function.\n             */\n            function overArg(func, transform) {\n                return function(arg) {\n                    return func(transform(arg));\n                };\n            }\n\n            /**\n             * Converts `set` to an array of its values.\n             *\n             * @private\n             * @param {Object} set The set to convert.\n             * @returns {Array} Returns the values.\n             */\n            function setToArray(set) {\n                var index = -1,\n                    result = Array(set.size);\n\n                set.forEach(function(value) {\n                    result[++index] = value;\n                });\n                return result;\n            }\n\n            /** Used for built-in method references. */\n            var arrayProto = Array.prototype,\n                funcProto = Function.prototype,\n                objectProto = Object.prototype;\n\n            /** Used to detect overreaching core-js shims. */\n            var coreJsData = root['__core-js_shared__'];\n\n            /** Used to detect methods masquerading as native. */\n            var maskSrcKey = (function() {\n                var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n                return uid ? ('Symbol(src)_1.' + uid) : '';\n            }());\n\n            /** Used to resolve the decompiled source of functions. */\n            var funcToString = funcProto.toString;\n\n            /** Used to check objects for own properties. */\n            var hasOwnProperty = objectProto.hasOwnProperty;\n\n            /**\n             * Used to resolve the\n             * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n             * of values.\n             */\n            var objectToString = objectProto.toString;\n\n            /** Used to detect if a method is native. */\n            var reIsNative = RegExp('^' +\n                funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n                    .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n            );\n\n            /** Built-in value references. */\n            var Buffer = moduleExports ? root.Buffer : undefined,\n                Symbol = root.Symbol,\n                Uint8Array = root.Uint8Array,\n                getPrototype = overArg(Object.getPrototypeOf, Object),\n                objectCreate = Object.create,\n                propertyIsEnumerable = objectProto.propertyIsEnumerable,\n                splice = arrayProto.splice;\n\n            /* Built-in method references for those with the same name as other `lodash` methods. */\n            var nativeGetSymbols = Object.getOwnPropertySymbols,\n                nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n                nativeKeys = overArg(Object.keys, Object);\n\n            /* Built-in method references that are verified to be native. */\n            var DataView = getNative(root, 'DataView'),\n                Map = getNative(root, 'Map'),\n                Promise = getNative(root, 'Promise'),\n                Set = getNative(root, 'Set'),\n                WeakMap = getNative(root, 'WeakMap'),\n                nativeCreate = getNative(Object, 'create');\n\n            /** Used to detect maps, sets, and weakmaps. */\n            var dataViewCtorString = toSource(DataView),\n                mapCtorString = toSource(Map),\n                promiseCtorString = toSource(Promise),\n                setCtorString = toSource(Set),\n                weakMapCtorString = toSource(WeakMap);\n\n            /** Used to convert symbols to primitives and strings. */\n            var symbolProto = Symbol ? Symbol.prototype : undefined,\n                symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n            /**\n             * Creates a hash object.\n             *\n             * @private\n             * @constructor\n             * @param {Array} [entries] The key-value pairs to cache.\n             */\n            function Hash(entries) {\n                var index = -1,\n                    length = entries ? entries.length : 0;\n\n                this.clear();\n                while (++index < length) {\n                    var entry = entries[index];\n                    this.set(entry[0], entry[1]);\n                }\n            }\n\n            /**\n             * Removes all key-value entries from the hash.\n             *\n             * @private\n             * @name clear\n             * @memberOf Hash\n             */\n            function hashClear() {\n                this.__data__ = nativeCreate ? nativeCreate(null) : {};\n            }\n\n            /**\n             * Removes `key` and its value from the hash.\n             *\n             * @private\n             * @name delete\n             * @memberOf Hash\n             * @param {Object} hash The hash to modify.\n             * @param {string} key The key of the value to remove.\n             * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n             */\n            function hashDelete(key) {\n                return this.has(key) && delete this.__data__[key];\n            }\n\n            /**\n             * Gets the hash value for `key`.\n             *\n             * @private\n             * @name get\n             * @memberOf Hash\n             * @param {string} key The key of the value to get.\n             * @returns {*} Returns the entry value.\n             */\n            function hashGet(key) {\n                var data = this.__data__;\n                if (nativeCreate) {\n                    var result = data[key];\n                    return result === HASH_UNDEFINED ? undefined : result;\n                }\n                return hasOwnProperty.call(data, key) ? data[key] : undefined;\n            }\n\n            /**\n             * Checks if a hash value for `key` exists.\n             *\n             * @private\n             * @name has\n             * @memberOf Hash\n             * @param {string} key The key of the entry to check.\n             * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n             */\n            function hashHas(key) {\n                var data = this.__data__;\n                return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n            }\n\n            /**\n             * Sets the hash `key` to `value`.\n             *\n             * @private\n             * @name set\n             * @memberOf Hash\n             * @param {string} key The key of the value to set.\n             * @param {*} value The value to set.\n             * @returns {Object} Returns the hash instance.\n             */\n            function hashSet(key, value) {\n                var data = this.__data__;\n                data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n                return this;\n            }\n\n// Add methods to `Hash`.\n            Hash.prototype.clear = hashClear;\n            Hash.prototype['delete'] = hashDelete;\n            Hash.prototype.get = hashGet;\n            Hash.prototype.has = hashHas;\n            Hash.prototype.set = hashSet;\n\n            /**\n             * Creates an list cache object.\n             *\n             * @private\n             * @constructor\n             * @param {Array} [entries] The key-value pairs to cache.\n             */\n            function ListCache(entries) {\n                var index = -1,\n                    length = entries ? entries.length : 0;\n\n                this.clear();\n                while (++index < length) {\n                    var entry = entries[index];\n                    this.set(entry[0], entry[1]);\n                }\n            }\n\n            /**\n             * Removes all key-value entries from the list cache.\n             *\n             * @private\n             * @name clear\n             * @memberOf ListCache\n             */\n            function listCacheClear() {\n                this.__data__ = [];\n            }\n\n            /**\n             * Removes `key` and its value from the list cache.\n             *\n             * @private\n             * @name delete\n             * @memberOf ListCache\n             * @param {string} key The key of the value to remove.\n             * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n             */\n            function listCacheDelete(key) {\n                var data = this.__data__,\n                    index = assocIndexOf(data, key);\n\n                if (index < 0) {\n                    return false;\n                }\n                var lastIndex = data.length - 1;\n                if (index == lastIndex) {\n                    data.pop();\n                } else {\n                    splice.call(data, index, 1);\n                }\n                return true;\n            }\n\n            /**\n             * Gets the list cache value for `key`.\n             *\n             * @private\n             * @name get\n             * @memberOf ListCache\n             * @param {string} key The key of the value to get.\n             * @returns {*} Returns the entry value.\n             */\n            function listCacheGet(key) {\n                var data = this.__data__,\n                    index = assocIndexOf(data, key);\n\n                return index < 0 ? undefined : data[index][1];\n            }\n\n            /**\n             * Checks if a list cache value for `key` exists.\n             *\n             * @private\n             * @name has\n             * @memberOf ListCache\n             * @param {string} key The key of the entry to check.\n             * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n             */\n            function listCacheHas(key) {\n                return assocIndexOf(this.__data__, key) > -1;\n            }\n\n            /**\n             * Sets the list cache `key` to `value`.\n             *\n             * @private\n             * @name set\n             * @memberOf ListCache\n             * @param {string} key The key of the value to set.\n             * @param {*} value The value to set.\n             * @returns {Object} Returns the list cache instance.\n             */\n            function listCacheSet(key, value) {\n                var data = this.__data__,\n                    index = assocIndexOf(data, key);\n\n                if (index < 0) {\n                    data.push([key, value]);\n                } else {\n                    data[index][1] = value;\n                }\n                return this;\n            }\n\n// Add methods to `ListCache`.\n            ListCache.prototype.clear = listCacheClear;\n            ListCache.prototype['delete'] = listCacheDelete;\n            ListCache.prototype.get = listCacheGet;\n            ListCache.prototype.has = listCacheHas;\n            ListCache.prototype.set = listCacheSet;\n\n            /**\n             * Creates a map cache object to store key-value pairs.\n             *\n             * @private\n             * @constructor\n             * @param {Array} [entries] The key-value pairs to cache.\n             */\n            function MapCache(entries) {\n                var index = -1,\n                    length = entries ? entries.length : 0;\n\n                this.clear();\n                while (++index < length) {\n                    var entry = entries[index];\n                    this.set(entry[0], entry[1]);\n                }\n            }\n\n            /**\n             * Removes all key-value entries from the map.\n             *\n             * @private\n             * @name clear\n             * @memberOf MapCache\n             */\n            function mapCacheClear() {\n                this.__data__ = {\n                    'hash': new Hash,\n                    'map': new (Map || ListCache),\n                    'string': new Hash\n                };\n            }\n\n            /**\n             * Removes `key` and its value from the map.\n             *\n             * @private\n             * @name delete\n             * @memberOf MapCache\n             * @param {string} key The key of the value to remove.\n             * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n             */\n            function mapCacheDelete(key) {\n                return getMapData(this, key)['delete'](key);\n            }\n\n            /**\n             * Gets the map value for `key`.\n             *\n             * @private\n             * @name get\n             * @memberOf MapCache\n             * @param {string} key The key of the value to get.\n             * @returns {*} Returns the entry value.\n             */\n            function mapCacheGet(key) {\n                return getMapData(this, key).get(key);\n            }\n\n            /**\n             * Checks if a map value for `key` exists.\n             *\n             * @private\n             * @name has\n             * @memberOf MapCache\n             * @param {string} key The key of the entry to check.\n             * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n             */\n            function mapCacheHas(key) {\n                return getMapData(this, key).has(key);\n            }\n\n            /**\n             * Sets the map `key` to `value`.\n             *\n             * @private\n             * @name set\n             * @memberOf MapCache\n             * @param {string} key The key of the value to set.\n             * @param {*} value The value to set.\n             * @returns {Object} Returns the map cache instance.\n             */\n            function mapCacheSet(key, value) {\n                getMapData(this, key).set(key, value);\n                return this;\n            }\n\n// Add methods to `MapCache`.\n            MapCache.prototype.clear = mapCacheClear;\n            MapCache.prototype['delete'] = mapCacheDelete;\n            MapCache.prototype.get = mapCacheGet;\n            MapCache.prototype.has = mapCacheHas;\n            MapCache.prototype.set = mapCacheSet;\n\n            /**\n             * Creates a stack cache object to store key-value pairs.\n             *\n             * @private\n             * @constructor\n             * @param {Array} [entries] The key-value pairs to cache.\n             */\n            function Stack(entries) {\n                this.__data__ = new ListCache(entries);\n            }\n\n            /**\n             * Removes all key-value entries from the stack.\n             *\n             * @private\n             * @name clear\n             * @memberOf Stack\n             */\n            function stackClear() {\n                this.__data__ = new ListCache;\n            }\n\n            /**\n             * Removes `key` and its value from the stack.\n             *\n             * @private\n             * @name delete\n             * @memberOf Stack\n             * @param {string} key The key of the value to remove.\n             * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n             */\n            function stackDelete(key) {\n                return this.__data__['delete'](key);\n            }\n\n            /**\n             * Gets the stack value for `key`.\n             *\n             * @private\n             * @name get\n             * @memberOf Stack\n             * @param {string} key The key of the value to get.\n             * @returns {*} Returns the entry value.\n             */\n            function stackGet(key) {\n                return this.__data__.get(key);\n            }\n\n            /**\n             * Checks if a stack value for `key` exists.\n             *\n             * @private\n             * @name has\n             * @memberOf Stack\n             * @param {string} key The key of the entry to check.\n             * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n             */\n            function stackHas(key) {\n                return this.__data__.has(key);\n            }\n\n            /**\n             * Sets the stack `key` to `value`.\n             *\n             * @private\n             * @name set\n             * @memberOf Stack\n             * @param {string} key The key of the value to set.\n             * @param {*} value The value to set.\n             * @returns {Object} Returns the stack cache instance.\n             */\n            function stackSet(key, value) {\n                var cache = this.__data__;\n                if (cache instanceof ListCache) {\n                    var pairs = cache.__data__;\n                    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n                        pairs.push([key, value]);\n                        return this;\n                    }\n                    cache = this.__data__ = new MapCache(pairs);\n                }\n                cache.set(key, value);\n                return this;\n            }\n\n// Add methods to `Stack`.\n            Stack.prototype.clear = stackClear;\n            Stack.prototype['delete'] = stackDelete;\n            Stack.prototype.get = stackGet;\n            Stack.prototype.has = stackHas;\n            Stack.prototype.set = stackSet;\n\n            /**\n             * Creates an array of the enumerable property names of the array-like `value`.\n             *\n             * @private\n             * @param {*} value The value to query.\n             * @param {boolean} inherited Specify returning inherited property names.\n             * @returns {Array} Returns the array of property names.\n             */\n            function arrayLikeKeys(value, inherited) {\n                // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n                // Safari 9 makes `arguments.length` enumerable in strict mode.\n                var result = (isArray(value) || isArguments(value))\n                    ? baseTimes(value.length, String)\n                    : [];\n\n                var length = result.length,\n                    skipIndexes = !!length;\n\n                for (var key in value) {\n                    if ((inherited || hasOwnProperty.call(value, key)) &&\n                        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n                        result.push(key);\n                    }\n                }\n                return result;\n            }\n\n            /**\n             * Assigns `value` to `key` of `object` if the existing value is not equivalent\n             * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n             * for equality comparisons.\n             *\n             * @private\n             * @param {Object} object The object to modify.\n             * @param {string} key The key of the property to assign.\n             * @param {*} value The value to assign.\n             */\n            function assignValue(object, key, value) {\n                var objValue = object[key];\n                if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n                    (value === undefined && !(key in object))) {\n                    object[key] = value;\n                }\n            }\n\n            /**\n             * Gets the index at which the `key` is found in `array` of key-value pairs.\n             *\n             * @private\n             * @param {Array} array The array to inspect.\n             * @param {*} key The key to search for.\n             * @returns {number} Returns the index of the matched value, else `-1`.\n             */\n            function assocIndexOf(array, key) {\n                var length = array.length;\n                while (length--) {\n                    if (eq(array[length][0], key)) {\n                        return length;\n                    }\n                }\n                return -1;\n            }\n\n            /**\n             * The base implementation of `_.assign` without support for multiple sources\n             * or `customizer` functions.\n             *\n             * @private\n             * @param {Object} object The destination object.\n             * @param {Object} source The source object.\n             * @returns {Object} Returns `object`.\n             */\n            function baseAssign(object, source) {\n                return object && copyObject(source, keys(source), object);\n            }\n\n            /**\n             * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n             * traversed objects.\n             *\n             * @private\n             * @param {*} value The value to clone.\n             * @param {boolean} [isDeep] Specify a deep clone.\n             * @param {boolean} [isFull] Specify a clone including symbols.\n             * @param {Function} [customizer] The function to customize cloning.\n             * @param {string} [key] The key of `value`.\n             * @param {Object} [object] The parent object of `value`.\n             * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n             * @returns {*} Returns the cloned value.\n             */\n            function baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n                var result;\n                if (customizer) {\n                    result = object ? customizer(value, key, object, stack) : customizer(value);\n                }\n                if (result !== undefined) {\n                    return result;\n                }\n                if (!isObject(value)) {\n                    return value;\n                }\n                var isArr = isArray(value);\n                if (isArr) {\n                    result = initCloneArray(value);\n                    if (!isDeep) {\n                        return copyArray(value, result);\n                    }\n                } else {\n                    var tag = getTag(value),\n                        isFunc = tag == funcTag || tag == genTag;\n\n                    if (isBuffer(value)) {\n                        return cloneBuffer(value, isDeep);\n                    }\n                    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n                        if (isHostObject(value)) {\n                            return object ? value : {};\n                        }\n                        result = initCloneObject(isFunc ? {} : value);\n                        if (!isDeep) {\n                            return copySymbols(value, baseAssign(result, value));\n                        }\n                    } else {\n                        if (!cloneableTags[tag]) {\n                            return object ? value : {};\n                        }\n                        result = initCloneByTag(value, tag, baseClone, isDeep);\n                    }\n                }\n                // Check for circular references and return its corresponding clone.\n                stack || (stack = new Stack);\n                var stacked = stack.get(value);\n                if (stacked) {\n                    return stacked;\n                }\n                stack.set(value, result);\n\n                if (!isArr) {\n                    var props = isFull ? getAllKeys(value) : keys(value);\n                }\n                arrayEach(props || value, function(subValue, key) {\n                    if (props) {\n                        key = subValue;\n                        subValue = value[key];\n                    }\n                    // Recursively populate clone (susceptible to call stack limits).\n                    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n                });\n                return result;\n            }\n\n            /**\n             * The base implementation of `_.create` without support for assigning\n             * properties to the created object.\n             *\n             * @private\n             * @param {Object} prototype The object to inherit from.\n             * @returns {Object} Returns the new object.\n             */\n            function baseCreate(proto) {\n                return isObject(proto) ? objectCreate(proto) : {};\n            }\n\n            /**\n             * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n             * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n             * symbols of `object`.\n             *\n             * @private\n             * @param {Object} object The object to query.\n             * @param {Function} keysFunc The function to get the keys of `object`.\n             * @param {Function} symbolsFunc The function to get the symbols of `object`.\n             * @returns {Array} Returns the array of property names and symbols.\n             */\n            function baseGetAllKeys(object, keysFunc, symbolsFunc) {\n                var result = keysFunc(object);\n                return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n            }\n\n            /**\n             * The base implementation of `getTag`.\n             *\n             * @private\n             * @param {*} value The value to query.\n             * @returns {string} Returns the `toStringTag`.\n             */\n            function baseGetTag(value) {\n                return objectToString.call(value);\n            }\n\n            /**\n             * The base implementation of `_.isNative` without bad shim checks.\n             *\n             * @private\n             * @param {*} value The value to check.\n             * @returns {boolean} Returns `true` if `value` is a native function,\n             *  else `false`.\n             */\n            function baseIsNative(value) {\n                if (!isObject(value) || isMasked(value)) {\n                    return false;\n                }\n                var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n                return pattern.test(toSource(value));\n            }\n\n            /**\n             * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n             *\n             * @private\n             * @param {Object} object The object to query.\n             * @returns {Array} Returns the array of property names.\n             */\n            function baseKeys(object) {\n                if (!isPrototype(object)) {\n                    return nativeKeys(object);\n                }\n                var result = [];\n                for (var key in Object(object)) {\n                    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n                        result.push(key);\n                    }\n                }\n                return result;\n            }\n\n            /**\n             * Creates a clone of  `buffer`.\n             *\n             * @private\n             * @param {Buffer} buffer The buffer to clone.\n             * @param {boolean} [isDeep] Specify a deep clone.\n             * @returns {Buffer} Returns the cloned buffer.\n             */\n            function cloneBuffer(buffer, isDeep) {\n                if (isDeep) {\n                    return buffer.slice();\n                }\n                var result = new buffer.constructor(buffer.length);\n                buffer.copy(result);\n                return result;\n            }\n\n            /**\n             * Creates a clone of `arrayBuffer`.\n             *\n             * @private\n             * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n             * @returns {ArrayBuffer} Returns the cloned array buffer.\n             */\n            function cloneArrayBuffer(arrayBuffer) {\n                var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n                new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n                return result;\n            }\n\n            /**\n             * Creates a clone of `dataView`.\n             *\n             * @private\n             * @param {Object} dataView The data view to clone.\n             * @param {boolean} [isDeep] Specify a deep clone.\n             * @returns {Object} Returns the cloned data view.\n             */\n            function cloneDataView(dataView, isDeep) {\n                var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n                return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n            }\n\n            /**\n             * Creates a clone of `map`.\n             *\n             * @private\n             * @param {Object} map The map to clone.\n             * @param {Function} cloneFunc The function to clone values.\n             * @param {boolean} [isDeep] Specify a deep clone.\n             * @returns {Object} Returns the cloned map.\n             */\n            function cloneMap(map, isDeep, cloneFunc) {\n                var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n                return arrayReduce(array, addMapEntry, new map.constructor);\n            }\n\n            /**\n             * Creates a clone of `regexp`.\n             *\n             * @private\n             * @param {Object} regexp The regexp to clone.\n             * @returns {Object} Returns the cloned regexp.\n             */\n            function cloneRegExp(regexp) {\n                var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n                result.lastIndex = regexp.lastIndex;\n                return result;\n            }\n\n            /**\n             * Creates a clone of `set`.\n             *\n             * @private\n             * @param {Object} set The set to clone.\n             * @param {Function} cloneFunc The function to clone values.\n             * @param {boolean} [isDeep] Specify a deep clone.\n             * @returns {Object} Returns the cloned set.\n             */\n            function cloneSet(set, isDeep, cloneFunc) {\n                var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n                return arrayReduce(array, addSetEntry, new set.constructor);\n            }\n\n            /**\n             * Creates a clone of the `symbol` object.\n             *\n             * @private\n             * @param {Object} symbol The symbol object to clone.\n             * @returns {Object} Returns the cloned symbol object.\n             */\n            function cloneSymbol(symbol) {\n                return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n            }\n\n            /**\n             * Creates a clone of `typedArray`.\n             *\n             * @private\n             * @param {Object} typedArray The typed array to clone.\n             * @param {boolean} [isDeep] Specify a deep clone.\n             * @returns {Object} Returns the cloned typed array.\n             */\n            function cloneTypedArray(typedArray, isDeep) {\n                var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n                return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n            }\n\n            /**\n             * Copies the values of `source` to `array`.\n             *\n             * @private\n             * @param {Array} source The array to copy values from.\n             * @param {Array} [array=[]] The array to copy values to.\n             * @returns {Array} Returns `array`.\n             */\n            function copyArray(source, array) {\n                var index = -1,\n                    length = source.length;\n\n                array || (array = Array(length));\n                while (++index < length) {\n                    array[index] = source[index];\n                }\n                return array;\n            }\n\n            /**\n             * Copies properties of `source` to `object`.\n             *\n             * @private\n             * @param {Object} source The object to copy properties from.\n             * @param {Array} props The property identifiers to copy.\n             * @param {Object} [object={}] The object to copy properties to.\n             * @param {Function} [customizer] The function to customize copied values.\n             * @returns {Object} Returns `object`.\n             */\n            function copyObject(source, props, object, customizer) {\n                object || (object = {});\n\n                var index = -1,\n                    length = props.length;\n\n                while (++index < length) {\n                    var key = props[index];\n\n                    var newValue = customizer\n                        ? customizer(object[key], source[key], key, object, source)\n                        : undefined;\n\n                    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n                }\n                return object;\n            }\n\n            /**\n             * Copies own symbol properties of `source` to `object`.\n             *\n             * @private\n             * @param {Object} source The object to copy symbols from.\n             * @param {Object} [object={}] The object to copy symbols to.\n             * @returns {Object} Returns `object`.\n             */\n            function copySymbols(source, object) {\n                return copyObject(source, getSymbols(source), object);\n            }\n\n            /**\n             * Creates an array of own enumerable property names and symbols of `object`.\n             *\n             * @private\n             * @param {Object} object The object to query.\n             * @returns {Array} Returns the array of property names and symbols.\n             */\n            function getAllKeys(object) {\n                return baseGetAllKeys(object, keys, getSymbols);\n            }\n\n            /**\n             * Gets the data for `map`.\n             *\n             * @private\n             * @param {Object} map The map to query.\n             * @param {string} key The reference key.\n             * @returns {*} Returns the map data.\n             */\n            function getMapData(map, key) {\n                var data = map.__data__;\n                return isKeyable(key)\n                    ? data[typeof key == 'string' ? 'string' : 'hash']\n                    : data.map;\n            }\n\n            /**\n             * Gets the native function at `key` of `object`.\n             *\n             * @private\n             * @param {Object} object The object to query.\n             * @param {string} key The key of the method to get.\n             * @returns {*} Returns the function if it's native, else `undefined`.\n             */\n            function getNative(object, key) {\n                var value = getValue(object, key);\n                return baseIsNative(value) ? value : undefined;\n            }\n\n            /**\n             * Creates an array of the own enumerable symbol properties of `object`.\n             *\n             * @private\n             * @param {Object} object The object to query.\n             * @returns {Array} Returns the array of symbols.\n             */\n            var getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n            /**\n             * Gets the `toStringTag` of `value`.\n             *\n             * @private\n             * @param {*} value The value to query.\n             * @returns {string} Returns the `toStringTag`.\n             */\n            var getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\n            if ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n                (Map && getTag(new Map) != mapTag) ||\n                (Promise && getTag(Promise.resolve()) != promiseTag) ||\n                (Set && getTag(new Set) != setTag) ||\n                (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n                getTag = function(value) {\n                    var result = objectToString.call(value),\n                        Ctor = result == objectTag ? value.constructor : undefined,\n                        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n                    if (ctorString) {\n                        switch (ctorString) {\n                            case dataViewCtorString: return dataViewTag;\n                            case mapCtorString: return mapTag;\n                            case promiseCtorString: return promiseTag;\n                            case setCtorString: return setTag;\n                            case weakMapCtorString: return weakMapTag;\n                        }\n                    }\n                    return result;\n                };\n            }\n\n            /**\n             * Initializes an array clone.\n             *\n             * @private\n             * @param {Array} array The array to clone.\n             * @returns {Array} Returns the initialized clone.\n             */\n            function initCloneArray(array) {\n                var length = array.length,\n                    result = array.constructor(length);\n\n                // Add properties assigned by `RegExp#exec`.\n                if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n                    result.index = array.index;\n                    result.input = array.input;\n                }\n                return result;\n            }\n\n            /**\n             * Initializes an object clone.\n             *\n             * @private\n             * @param {Object} object The object to clone.\n             * @returns {Object} Returns the initialized clone.\n             */\n            function initCloneObject(object) {\n                return (typeof object.constructor == 'function' && !isPrototype(object))\n                    ? baseCreate(getPrototype(object))\n                    : {};\n            }\n\n            /**\n             * Initializes an object clone based on its `toStringTag`.\n             *\n             * **Note:** This function only supports cloning values with tags of\n             * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n             *\n             * @private\n             * @param {Object} object The object to clone.\n             * @param {string} tag The `toStringTag` of the object to clone.\n             * @param {Function} cloneFunc The function to clone values.\n             * @param {boolean} [isDeep] Specify a deep clone.\n             * @returns {Object} Returns the initialized clone.\n             */\n            function initCloneByTag(object, tag, cloneFunc, isDeep) {\n                var Ctor = object.constructor;\n                switch (tag) {\n                    case arrayBufferTag:\n                        return cloneArrayBuffer(object);\n\n                    case boolTag:\n                    case dateTag:\n                        return new Ctor(+object);\n\n                    case dataViewTag:\n                        return cloneDataView(object, isDeep);\n\n                    case float32Tag: case float64Tag:\n                    case int8Tag: case int16Tag: case int32Tag:\n                    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n                    return cloneTypedArray(object, isDeep);\n\n                    case mapTag:\n                        return cloneMap(object, isDeep, cloneFunc);\n\n                    case numberTag:\n                    case stringTag:\n                        return new Ctor(object);\n\n                    case regexpTag:\n                        return cloneRegExp(object);\n\n                    case setTag:\n                        return cloneSet(object, isDeep, cloneFunc);\n\n                    case symbolTag:\n                        return cloneSymbol(object);\n                }\n            }\n\n            /**\n             * Checks if `value` is a valid array-like index.\n             *\n             * @private\n             * @param {*} value The value to check.\n             * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n             * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n             */\n            function isIndex(value, length) {\n                length = length == null ? MAX_SAFE_INTEGER : length;\n                return !!length &&\n                    (typeof value == 'number' || reIsUint.test(value)) &&\n                    (value > -1 && value % 1 == 0 && value < length);\n            }\n\n            /**\n             * Checks if `value` is suitable for use as unique object key.\n             *\n             * @private\n             * @param {*} value The value to check.\n             * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n             */\n            function isKeyable(value) {\n                var type = typeof value;\n                return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n                    ? (value !== '__proto__')\n                    : (value === null);\n            }\n\n            /**\n             * Checks if `func` has its source masked.\n             *\n             * @private\n             * @param {Function} func The function to check.\n             * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n             */\n            function isMasked(func) {\n                return !!maskSrcKey && (maskSrcKey in func);\n            }\n\n            /**\n             * Checks if `value` is likely a prototype object.\n             *\n             * @private\n             * @param {*} value The value to check.\n             * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n             */\n            function isPrototype(value) {\n                var Ctor = value && value.constructor,\n                    proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n                return value === proto;\n            }\n\n            /**\n             * Converts `func` to its source code.\n             *\n             * @private\n             * @param {Function} func The function to process.\n             * @returns {string} Returns the source code.\n             */\n            function toSource(func) {\n                if (func != null) {\n                    try {\n                        return funcToString.call(func);\n                    } catch (e) {}\n                    try {\n                        return (func + '');\n                    } catch (e) {}\n                }\n                return '';\n            }\n\n            /**\n             * This method is like `_.clone` except that it recursively clones `value`.\n             *\n             * @static\n             * @memberOf _\n             * @since 1.0.0\n             * @category Lang\n             * @param {*} value The value to recursively clone.\n             * @returns {*} Returns the deep cloned value.\n             * @see _.clone\n             * @example\n             *\n             * var objects = [{ 'a': 1 }, { 'b': 2 }];\n             *\n             * var deep = _.cloneDeep(objects);\n             * console.log(deep[0] === objects[0]);\n             * // => false\n             */\n            function cloneDeep(value) {\n                return baseClone(value, true, true);\n            }\n\n            /**\n             * Performs a\n             * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n             * comparison between two values to determine if they are equivalent.\n             *\n             * @static\n             * @memberOf _\n             * @since 4.0.0\n             * @category Lang\n             * @param {*} value The value to compare.\n             * @param {*} other The other value to compare.\n             * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n             * @example\n             *\n             * var object = { 'a': 1 };\n             * var other = { 'a': 1 };\n             *\n             * _.eq(object, object);\n             * // => true\n             *\n             * _.eq(object, other);\n             * // => false\n             *\n             * _.eq('a', 'a');\n             * // => true\n             *\n             * _.eq('a', Object('a'));\n             * // => false\n             *\n             * _.eq(NaN, NaN);\n             * // => true\n             */\n            function eq(value, other) {\n                return value === other || (value !== value && other !== other);\n            }\n\n            /**\n             * Checks if `value` is likely an `arguments` object.\n             *\n             * @static\n             * @memberOf _\n             * @since 0.1.0\n             * @category Lang\n             * @param {*} value The value to check.\n             * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n             *  else `false`.\n             * @example\n             *\n             * _.isArguments(function() { return arguments; }());\n             * // => true\n             *\n             * _.isArguments([1, 2, 3]);\n             * // => false\n             */\n            function isArguments(value) {\n                // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n                return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n                    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n            }\n\n            /**\n             * Checks if `value` is classified as an `Array` object.\n             *\n             * @static\n             * @memberOf _\n             * @since 0.1.0\n             * @category Lang\n             * @param {*} value The value to check.\n             * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n             * @example\n             *\n             * _.isArray([1, 2, 3]);\n             * // => true\n             *\n             * _.isArray(document.body.children);\n             * // => false\n             *\n             * _.isArray('abc');\n             * // => false\n             *\n             * _.isArray(_.noop);\n             * // => false\n             */\n            var isArray = Array.isArray;\n\n            /**\n             * Checks if `value` is array-like. A value is considered array-like if it's\n             * not a function and has a `value.length` that's an integer greater than or\n             * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n             *\n             * @static\n             * @memberOf _\n             * @since 4.0.0\n             * @category Lang\n             * @param {*} value The value to check.\n             * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n             * @example\n             *\n             * _.isArrayLike([1, 2, 3]);\n             * // => true\n             *\n             * _.isArrayLike(document.body.children);\n             * // => true\n             *\n             * _.isArrayLike('abc');\n             * // => true\n             *\n             * _.isArrayLike(_.noop);\n             * // => false\n             */\n            function isArrayLike(value) {\n                return value != null && isLength(value.length) && !isFunction(value);\n            }\n\n            /**\n             * This method is like `_.isArrayLike` except that it also checks if `value`\n             * is an object.\n             *\n             * @static\n             * @memberOf _\n             * @since 4.0.0\n             * @category Lang\n             * @param {*} value The value to check.\n             * @returns {boolean} Returns `true` if `value` is an array-like object,\n             *  else `false`.\n             * @example\n             *\n             * _.isArrayLikeObject([1, 2, 3]);\n             * // => true\n             *\n             * _.isArrayLikeObject(document.body.children);\n             * // => true\n             *\n             * _.isArrayLikeObject('abc');\n             * // => false\n             *\n             * _.isArrayLikeObject(_.noop);\n             * // => false\n             */\n            function isArrayLikeObject(value) {\n                return isObjectLike(value) && isArrayLike(value);\n            }\n\n            /**\n             * Checks if `value` is a buffer.\n             *\n             * @static\n             * @memberOf _\n             * @since 4.3.0\n             * @category Lang\n             * @param {*} value The value to check.\n             * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n             * @example\n             *\n             * _.isBuffer(new Buffer(2));\n             * // => true\n             *\n             * _.isBuffer(new Uint8Array(2));\n             * // => false\n             */\n            var isBuffer = nativeIsBuffer || stubFalse;\n\n            /**\n             * Checks if `value` is classified as a `Function` object.\n             *\n             * @static\n             * @memberOf _\n             * @since 0.1.0\n             * @category Lang\n             * @param {*} value The value to check.\n             * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n             * @example\n             *\n             * _.isFunction(_);\n             * // => true\n             *\n             * _.isFunction(/abc/);\n             * // => false\n             */\n            function isFunction(value) {\n                // The use of `Object#toString` avoids issues with the `typeof` operator\n                // in Safari 8-9 which returns 'object' for typed array and other constructors.\n                var tag = isObject(value) ? objectToString.call(value) : '';\n                return tag == funcTag || tag == genTag;\n            }\n\n            /**\n             * Checks if `value` is a valid array-like length.\n             *\n             * **Note:** This method is loosely based on\n             * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n             *\n             * @static\n             * @memberOf _\n             * @since 4.0.0\n             * @category Lang\n             * @param {*} value The value to check.\n             * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n             * @example\n             *\n             * _.isLength(3);\n             * // => true\n             *\n             * _.isLength(Number.MIN_VALUE);\n             * // => false\n             *\n             * _.isLength(Infinity);\n             * // => false\n             *\n             * _.isLength('3');\n             * // => false\n             */\n            function isLength(value) {\n                return typeof value == 'number' &&\n                    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n            }\n\n            /**\n             * Checks if `value` is the\n             * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n             * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n             *\n             * @static\n             * @memberOf _\n             * @since 0.1.0\n             * @category Lang\n             * @param {*} value The value to check.\n             * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n             * @example\n             *\n             * _.isObject({});\n             * // => true\n             *\n             * _.isObject([1, 2, 3]);\n             * // => true\n             *\n             * _.isObject(_.noop);\n             * // => true\n             *\n             * _.isObject(null);\n             * // => false\n             */\n            function isObject(value) {\n                var type = typeof value;\n                return !!value && (type == 'object' || type == 'function');\n            }\n\n            /**\n             * Checks if `value` is object-like. A value is object-like if it's not `null`\n             * and has a `typeof` result of \"object\".\n             *\n             * @static\n             * @memberOf _\n             * @since 4.0.0\n             * @category Lang\n             * @param {*} value The value to check.\n             * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n             * @example\n             *\n             * _.isObjectLike({});\n             * // => true\n             *\n             * _.isObjectLike([1, 2, 3]);\n             * // => true\n             *\n             * _.isObjectLike(_.noop);\n             * // => false\n             *\n             * _.isObjectLike(null);\n             * // => false\n             */\n            function isObjectLike(value) {\n                return !!value && typeof value == 'object';\n            }\n\n            /**\n             * Creates an array of the own enumerable property names of `object`.\n             *\n             * **Note:** Non-object values are coerced to objects. See the\n             * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n             * for more details.\n             *\n             * @static\n             * @since 0.1.0\n             * @memberOf _\n             * @category Object\n             * @param {Object} object The object to query.\n             * @returns {Array} Returns the array of property names.\n             * @example\n             *\n             * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n             *\n             * Foo.prototype.c = 3;\n             *\n             * _.keys(new Foo);\n             * // => ['a', 'b'] (iteration order is not guaranteed)\n             *\n             * _.keys('hi');\n             * // => ['0', '1']\n             */\n            function keys(object) {\n                return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n            }\n\n            /**\n             * This method returns a new empty array.\n             *\n             * @static\n             * @memberOf _\n             * @since 4.13.0\n             * @category Util\n             * @returns {Array} Returns the new empty array.\n             * @example\n             *\n             * var arrays = _.times(2, _.stubArray);\n             *\n             * console.log(arrays);\n             * // => [[], []]\n             *\n             * console.log(arrays[0] === arrays[1]);\n             * // => false\n             */\n            function stubArray() {\n                return [];\n            }\n\n            /**\n             * This method returns `false`.\n             *\n             * @static\n             * @memberOf _\n             * @since 4.13.0\n             * @category Util\n             * @returns {boolean} Returns `false`.\n             * @example\n             *\n             * _.times(2, _.stubFalse);\n             * // => [false, false]\n             */\n            function stubFalse() {\n                return false;\n            }\n\n            module.exports = cloneDeep;\n\n        }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{}],46:[function(require,module,exports){\n        var methods = \"assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn\".split(\",\");\n        var l = methods.length;\n        var fn = function () {};\n        var mockconsole = {};\n\n        while (l--) {\n            mockconsole[methods[l]] = fn;\n        }\n\n        module.exports = mockconsole;\n\n    },{}],47:[function(require,module,exports){\n        /**\n         * Helpers.\n         */\n\n        var s = 1000;\n        var m = s * 60;\n        var h = m * 60;\n        var d = h * 24;\n        var y = d * 365.25;\n\n        /**\n         * Parse or format the given `val`.\n         *\n         * Options:\n         *\n         *  - `long` verbose formatting [false]\n         *\n         * @param {String|Number} val\n         * @param {Object} options\n         * @return {String|Number}\n         * @api public\n         */\n\n        module.exports = function(val, options){\n            options = options || {};\n            if ('string' == typeof val) return parse(val);\n            return options.long\n                ? long(val)\n                : short(val);\n        };\n\n        /**\n         * Parse the given `str` and return milliseconds.\n         *\n         * @param {String} str\n         * @return {Number}\n         * @api private\n         */\n\n        function parse(str) {\n            var match = /^((?:\\d+)?\\.?\\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(str);\n            if (!match) return;\n            var n = parseFloat(match[1]);\n            var type = (match[2] || 'ms').toLowerCase();\n            switch (type) {\n                case 'years':\n                case 'year':\n                case 'y':\n                    return n * y;\n                case 'days':\n                case 'day':\n                case 'd':\n                    return n * d;\n                case 'hours':\n                case 'hour':\n                case 'h':\n                    return n * h;\n                case 'minutes':\n                case 'minute':\n                case 'm':\n                    return n * m;\n                case 'seconds':\n                case 'second':\n                case 's':\n                    return n * s;\n                case 'ms':\n                    return n;\n            }\n        }\n\n        /**\n         * Short format for `ms`.\n         *\n         * @param {Number} ms\n         * @return {String}\n         * @api private\n         */\n\n        function short(ms) {\n            if (ms >= d) return Math.round(ms / d) + 'd';\n            if (ms >= h) return Math.round(ms / h) + 'h';\n            if (ms >= m) return Math.round(ms / m) + 'm';\n            if (ms >= s) return Math.round(ms / s) + 's';\n            return ms + 'ms';\n        }\n\n        /**\n         * Long format for `ms`.\n         *\n         * @param {Number} ms\n         * @return {String}\n         * @api private\n         */\n\n        function long(ms) {\n            return plural(ms, d, 'day')\n                || plural(ms, h, 'hour')\n                || plural(ms, m, 'minute')\n                || plural(ms, s, 'second')\n                || ms + ' ms';\n        }\n\n        /**\n         * Pluralization helper.\n         */\n\n        function plural(ms, n, name) {\n            if (ms < n) return;\n            if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n            return Math.ceil(ms / n) + ' ' + name + 's';\n        }\n\n    },{}],48:[function(require,module,exports){\n\n        /**\n         * HOP ref.\n         */\n\n        var has = Object.prototype.hasOwnProperty;\n\n        /**\n         * Return own keys in `obj`.\n         *\n         * @param {Object} obj\n         * @return {Array}\n         * @api public\n         */\n\n        exports.keys = Object.keys || function(obj){\n            var keys = [];\n            for (var key in obj) {\n                if (has.call(obj, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n\n        /**\n         * Return own values in `obj`.\n         *\n         * @param {Object} obj\n         * @return {Array}\n         * @api public\n         */\n\n        exports.values = function(obj){\n            var vals = [];\n            for (var key in obj) {\n                if (has.call(obj, key)) {\n                    vals.push(obj[key]);\n                }\n            }\n            return vals;\n        };\n\n        /**\n         * Merge `b` into `a`.\n         *\n         * @param {Object} a\n         * @param {Object} b\n         * @return {Object} a\n         * @api public\n         */\n\n        exports.merge = function(a, b){\n            for (var key in b) {\n                if (has.call(b, key)) {\n                    a[key] = b[key];\n                }\n            }\n            return a;\n        };\n\n        /**\n         * Return length of `obj`.\n         *\n         * @param {Object} obj\n         * @return {Number}\n         * @api public\n         */\n\n        exports.length = function(obj){\n            return exports.keys(obj).length;\n        };\n\n        /**\n         * Check if `obj` is empty.\n         *\n         * @param {Object} obj\n         * @return {Boolean}\n         * @api public\n         */\n\n        exports.isEmpty = function(obj){\n            return 0 == exports.length(obj);\n        };\n    },{}],49:[function(require,module,exports){\n        (function (global){\n            /**\n             * JSON parse.\n             *\n             * @see Based on jQuery#parseJSON (MIT) and JSON2\n             * @api private\n             */\n\n            var rvalidchars = /^[\\],:{}\\s]*$/;\n            var rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\n            var rvalidtokens = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\n            var rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g;\n            var rtrimLeft = /^\\s+/;\n            var rtrimRight = /\\s+$/;\n\n            module.exports = function parsejson(data) {\n                if ('string' != typeof data || !data) {\n                    return null;\n                }\n\n                data = data.replace(rtrimLeft, '').replace(rtrimRight, '');\n\n                // Attempt to parse using the native JSON parser first\n                if (global.JSON && JSON.parse) {\n                    return JSON.parse(data);\n                }\n\n                if (rvalidchars.test(data.replace(rvalidescape, '@')\n                    .replace(rvalidtokens, ']')\n                    .replace(rvalidbraces, ''))) {\n                    return (new Function('return ' + data))();\n                }\n            };\n        }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{}],50:[function(require,module,exports){\n        /**\n         * Compiles a querystring\n         * Returns string representation of the object\n         *\n         * @param {Object}\n         * @api private\n         */\n\n        exports.encode = function (obj) {\n            var str = '';\n\n            for (var i in obj) {\n                if (obj.hasOwnProperty(i)) {\n                    if (str.length) str += '&';\n                    str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n                }\n            }\n\n            return str;\n        };\n\n        /**\n         * Parses a simple querystring into an object\n         *\n         * @param {String} qs\n         * @api private\n         */\n\n        exports.decode = function(qs){\n            var qry = {};\n            var pairs = qs.split('&');\n            for (var i = 0, l = pairs.length; i < l; i++) {\n                var pair = pairs[i].split('=');\n                qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n            }\n            return qry;\n        };\n\n    },{}],51:[function(require,module,exports){\n        /**\n         * Parses an URI\n         *\n         * @author Steven Levithan <stevenlevithan.com> (MIT license)\n         * @api private\n         */\n\n        var re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\n        var parts = [\n            'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host'\n            , 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n        ];\n\n        module.exports = function parseuri(str) {\n            var m = re.exec(str || '')\n                , uri = {}\n                , i = 14;\n\n            while (i--) {\n                uri[parts[i]] = m[i] || '';\n            }\n\n            return uri;\n        };\n\n    },{}],52:[function(require,module,exports){\n// shim for using process in browser\n        var process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\n        var cachedSetTimeout;\n        var cachedClearTimeout;\n\n        function defaultSetTimout() {\n            throw new Error('setTimeout has not been defined');\n        }\n        function defaultClearTimeout () {\n            throw new Error('clearTimeout has not been defined');\n        }\n        (function () {\n            try {\n                if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                } else {\n                    cachedSetTimeout = defaultSetTimout;\n                }\n            } catch (e) {\n                cachedSetTimeout = defaultSetTimout;\n            }\n            try {\n                if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                }\n            } catch (e) {\n                cachedClearTimeout = defaultClearTimeout;\n            }\n        } ())\n        function runTimeout(fun) {\n            if (cachedSetTimeout === setTimeout) {\n                //normal enviroments in sane situations\n                return setTimeout(fun, 0);\n            }\n            // if setTimeout wasn't available but was latter defined\n            if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                cachedSetTimeout = setTimeout;\n                return setTimeout(fun, 0);\n            }\n            try {\n                // when when somebody has screwed with setTimeout but no I.E. maddness\n                return cachedSetTimeout(fun, 0);\n            } catch(e){\n                try {\n                    // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n                    return cachedSetTimeout.call(null, fun, 0);\n                } catch(e){\n                    // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n                    return cachedSetTimeout.call(this, fun, 0);\n                }\n            }\n\n\n        }\n        function runClearTimeout(marker) {\n            if (cachedClearTimeout === clearTimeout) {\n                //normal enviroments in sane situations\n                return clearTimeout(marker);\n            }\n            // if clearTimeout wasn't available but was latter defined\n            if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                cachedClearTimeout = clearTimeout;\n                return clearTimeout(marker);\n            }\n            try {\n                // when when somebody has screwed with setTimeout but no I.E. maddness\n                return cachedClearTimeout(marker);\n            } catch (e){\n                try {\n                    // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n                    return cachedClearTimeout.call(null, marker);\n                } catch (e){\n                    // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n                    // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n                    return cachedClearTimeout.call(this, marker);\n                }\n            }\n\n\n\n        }\n        var queue = [];\n        var draining = false;\n        var currentQueue;\n        var queueIndex = -1;\n\n        function cleanUpNextTick() {\n            if (!draining || !currentQueue) {\n                return;\n            }\n            draining = false;\n            if (currentQueue.length) {\n                queue = currentQueue.concat(queue);\n            } else {\n                queueIndex = -1;\n            }\n            if (queue.length) {\n                drainQueue();\n            }\n        }\n\n        function drainQueue() {\n            if (draining) {\n                return;\n            }\n            var timeout = runTimeout(cleanUpNextTick);\n            draining = true;\n\n            var len = queue.length;\n            while(len) {\n                currentQueue = queue;\n                queue = [];\n                while (++queueIndex < len) {\n                    if (currentQueue) {\n                        currentQueue[queueIndex].run();\n                    }\n                }\n                queueIndex = -1;\n                len = queue.length;\n            }\n            currentQueue = null;\n            draining = false;\n            runClearTimeout(timeout);\n        }\n\n        process.nextTick = function (fun) {\n            var args = new Array(arguments.length - 1);\n            if (arguments.length > 1) {\n                for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                }\n            }\n            queue.push(new Item(fun, args));\n            if (queue.length === 1 && !draining) {\n                runTimeout(drainQueue);\n            }\n        };\n\n// v8 likes predictible objects\n        function Item(fun, array) {\n            this.fun = fun;\n            this.array = array;\n        }\n        Item.prototype.run = function () {\n            this.fun.apply(null, this.array);\n        };\n        process.title = 'browser';\n        process.browser = true;\n        process.env = {};\n        process.argv = [];\n        process.version = ''; // empty string to avoid regexp issues\n        process.versions = {};\n\n        function noop() {}\n\n        process.on = noop;\n        process.addListener = noop;\n        process.once = noop;\n        process.off = noop;\n        process.removeListener = noop;\n        process.removeAllListeners = noop;\n        process.emit = noop;\n        process.prependListener = noop;\n        process.prependOnceListener = noop;\n\n        process.listeners = function (name) { return [] }\n\n        process.binding = function (name) {\n            throw new Error('process.binding is not supported');\n        };\n\n        process.cwd = function () { return '/' };\n        process.chdir = function (dir) {\n            throw new Error('process.chdir is not supported');\n        };\n        process.umask = function() { return 0; };\n\n    },{}],53:[function(require,module,exports){\n        var util = require('util');\n        var SJJ = require('sdp-jingle-json');\n        var WildEmitter = require('wildemitter');\n        var cloneDeep = require('lodash.clonedeep');\n\n        function PeerConnection(config, constraints, params) {\n            var self = this;\n            var item;\n            WildEmitter.call(this);\n\n            config = config || {};\n            config.iceServers = config.iceServers || [];\n\n            // make sure this only gets enabled in Google Chrome\n            // EXPERIMENTAL FLAG, might get removed without notice\n            this.enableChromeNativeSimulcast = false;\n            if (constraints && constraints.optional && window.chrome &&\n                navigator.appVersion.match(/Chromium\\//) === null) {\n                constraints.optional.forEach(function (constraint) {\n                    if (constraint.enableChromeNativeSimulcast) {\n                        self.enableChromeNativeSimulcast = true;\n                    }\n                });\n            }\n\n            // EXPERIMENTAL FLAG, might get removed without notice\n            this.enableMultiStreamHacks = false;\n            if (constraints && constraints.optional && window.chrome) {\n                constraints.optional.forEach(function (constraint) {\n                    if (constraint.enableMultiStreamHacks) {\n                        self.enableMultiStreamHacks = true;\n                    }\n                });\n            }\n            // EXPERIMENTAL FLAG, might get removed without notice\n            this.restrictBandwidth = 0;\n            if (constraints && constraints.optional) {\n                constraints.optional.forEach(function (constraint) {\n                    if (constraint.andyetRestrictBandwidth) {\n                        self.restrictBandwidth = constraint.andyetRestrictBandwidth;\n                    }\n                });\n            }\n\n            // EXPERIMENTAL FLAG, might get removed without notice\n            // bundle up ice candidates, only works for jingle mode\n            // number > 0 is the delay to wait for additional candidates\n            // ~20ms seems good\n            this.batchIceCandidates = 0;\n            if (constraints && constraints.optional) {\n                constraints.optional.forEach(function (constraint) {\n                    if (constraint.andyetBatchIce) {\n                        self.batchIceCandidates = constraint.andyetBatchIce;\n                    }\n                });\n            }\n            this.batchedIceCandidates = [];\n\n            // EXPERIMENTAL FLAG, might get removed without notice\n            // this attemps to strip out candidates with an already known foundation\n            // and type -- i.e. those which are gathered via the same TURN server\n            // but different transports (TURN udp, tcp and tls respectively)\n            if (constraints && constraints.optional && window.chrome) {\n                constraints.optional.forEach(function (constraint) {\n                    if (constraint.andyetFasterICE) {\n                        self.eliminateDuplicateCandidates = constraint.andyetFasterICE;\n                    }\n                });\n            }\n            // EXPERIMENTAL FLAG, might get removed without notice\n            // when using a server such as the jitsi videobridge we don't need to signal\n            // our candidates\n            if (constraints && constraints.optional) {\n                constraints.optional.forEach(function (constraint) {\n                    if (constraint.andyetDontSignalCandidates) {\n                        self.dontSignalCandidates = constraint.andyetDontSignalCandidates;\n                    }\n                });\n            }\n\n\n            // EXPERIMENTAL FLAG, might get removed without notice\n            this.assumeSetLocalSuccess = false;\n            if (constraints && constraints.optional) {\n                constraints.optional.forEach(function (constraint) {\n                    if (constraint.andyetAssumeSetLocalSuccess) {\n                        self.assumeSetLocalSuccess = constraint.andyetAssumeSetLocalSuccess;\n                    }\n                });\n            }\n\n            // EXPERIMENTAL FLAG, might get removed without notice\n            // working around https://bugzilla.mozilla.org/show_bug.cgi?id=1087551\n            // pass in a timeout for this\n            if (window.navigator.mozGetUserMedia) {\n                if (constraints && constraints.optional) {\n                    this.wtFirefox = 0;\n                    constraints.optional.forEach(function (constraint) {\n                        if (constraint.andyetFirefoxMakesMeSad) {\n                            self.wtFirefox = constraint.andyetFirefoxMakesMeSad;\n                            if (self.wtFirefox > 0) {\n                                self.firefoxcandidatebuffer = [];\n                            }\n                        }\n                    });\n                }\n            }\n\n\n            this.pc = new RTCPeerConnection(config, constraints);\n\n            ///MLUpdate///\n            this.vidEncoder = params.vidEncoder;\n            this.vidBitrate = params.vidBitrate;\n            this.audEncode = params.audEncoder;\n            this.audBitrate = params.audBitrate;\n            ///MLUpdate///\n\n            if (typeof this.pc.getLocalStreams === 'function') {\n                this.getLocalStreams = this.pc.getLocalStreams.bind(this.pc);\n            } else {\n                this.getLocalStreams = function () {\n                    return [];\n                };\n            }\n\n            this.getRemoteStreams = this.pc.getRemoteStreams.bind(this.pc);\n            this.addStream = this.pc.addStream.bind(this.pc);\n\n            this.removeStream = function (stream) {\n                if (typeof self.pc.removeStream === 'function') {\n                    self.pc.removeStream.apply(self.pc, arguments);\n                } else if (typeof self.pc.removeTrack === 'function') {\n                    stream.getTracks().forEach(function (track) {\n                        self.pc.removeTrack(track);\n                    });\n                }\n            };\n\n            if (typeof this.pc.removeTrack === 'function') {\n                this.removeTrack = this.pc.removeTrack.bind(this.pc);\n            }\n\n            // proxy some events directly\n            this.pc.onremovestream = this.emit.bind(this, 'removeStream');\n            this.pc.onremovetrack = this.emit.bind(this, 'removeTrack');\n            this.pc.onaddstream = this.emit.bind(this, 'addStream');\n            this.pc.onnegotiationneeded = this.emit.bind(this, 'negotiationNeeded');\n            this.pc.oniceconnectionstatechange = this.emit.bind(this, 'iceConnectionStateChange');\n            this.pc.onsignalingstatechange = this.emit.bind(this, 'signalingStateChange');\n\n            // handle ice candidate and data channel events\n            this.pc.onicecandidate = this._onIce.bind(this);\n            this.pc.ondatachannel = this._onDataChannel.bind(this);\n\n            this.localDescription = {\n                contents: []\n            };\n            this.remoteDescription = {\n                contents: []\n            };\n\n            this.config = {\n                debug: false,\n                sid: '',\n                isInitiator: true,\n                sdpSessionID: Date.now(),\n                useJingle: false\n            };\n\n            this.iceCredentials = {\n                local: {},\n                remote: {}\n            };\n\n            // apply our config\n            for (item in config) {\n                this.config[item] = config[item];\n            }\n\n            if (this.config.debug) {\n                this.on('*', function () {\n                    var logger = config.logger || console;\n                    logger.log('PeerConnection event:', arguments);\n                });\n            }\n            this.hadLocalStunCandidate = false;\n            this.hadRemoteStunCandidate = false;\n            this.hadLocalRelayCandidate = false;\n            this.hadRemoteRelayCandidate = false;\n\n            this.hadLocalIPv6Candidate = false;\n            this.hadRemoteIPv6Candidate = false;\n\n            // keeping references for all our data channels\n            // so they dont get garbage collected\n            // can be removed once the following bugs have been fixed\n            // https://crbug.com/405545\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=964092\n            // to be filed for opera\n            this._remoteDataChannels = [];\n            this._localDataChannels = [];\n\n            this._candidateBuffer = [];\n        }\n\n        util.inherits(PeerConnection, WildEmitter);\n\n        Object.defineProperty(PeerConnection.prototype, 'signalingState', {\n            get: function () {\n                return this.pc.signalingState;\n            }\n        });\n        Object.defineProperty(PeerConnection.prototype, 'iceConnectionState', {\n            get: function () {\n                return this.pc.iceConnectionState;\n            }\n        });\n\n        PeerConnection.prototype._role = function () {\n            return this.isInitiator ? 'initiator' : 'responder';\n        };\n\n// Add a stream to the peer connection object\n        PeerConnection.prototype.addStream = function (stream) {\n            this.localStream = stream;\n            this.pc.addStream(stream);\n        };\n\n// helper function to check if a remote candidate is a stun/relay\n// candidate or an ipv6 candidate\n        PeerConnection.prototype._checkLocalCandidate = function (candidate) {\n            var cand = SJJ.toCandidateJSON(candidate);\n            if (cand.type == 'srflx') {\n                this.hadLocalStunCandidate = true;\n            } else if (cand.type == 'relay') {\n                this.hadLocalRelayCandidate = true;\n            }\n            if (cand.ip.indexOf(':') != -1) {\n                this.hadLocalIPv6Candidate = true;\n            }\n        };\n\n// helper function to check if a remote candidate is a stun/relay\n// candidate or an ipv6 candidate\n        PeerConnection.prototype._checkRemoteCandidate = function (candidate) {\n            var cand = SJJ.toCandidateJSON(candidate);\n            if (cand.type == 'srflx') {\n                this.hadRemoteStunCandidate = true;\n            } else if (cand.type == 'relay') {\n                this.hadRemoteRelayCandidate = true;\n            }\n            if (cand.ip.indexOf(':') != -1) {\n                this.hadRemoteIPv6Candidate = true;\n            }\n        };\n\n\n// Init and add ice candidate object with correct constructor\n        PeerConnection.prototype.processIce = function (update, cb) {\n            cb = cb || function () {};\n            var self = this;\n\n            // ignore any added ice candidates to avoid errors. why does the\n            // spec not do this?\n            if (this.pc.signalingState === 'closed') return cb();\n\n            if (update.contents || (update.jingle && update.jingle.contents)) {\n                var contentNames = this.remoteDescription.contents.map(function (c) { return c.name; });\n                var contents = update.contents || update.jingle.contents;\n\n                contents.forEach(function (content) {\n                    var transport = content.transport || {};\n                    var candidates = transport.candidates || [];\n                    var mline = contentNames.indexOf(content.name);\n                    var mid = content.name;\n                    var remoteContent = self.remoteDescription.contents.find(function (c) {\n                        return c.name === content.name;\n                    });\n\n                    // process candidates as a callback, in case we need to\n                    // update ufrag and pwd with offer/answer\n                    var processCandidates = function () {\n                        candidates.forEach(\n                            function (candidate) {\n                                var iceCandidate = SJJ.toCandidateSDP(candidate);\n                                self.pc.addIceCandidate(\n                                    new RTCIceCandidate({\n                                        candidate: iceCandidate,\n                                        sdpMLineIndex: mline,\n                                        sdpMid: mid\n                                    }), function () {\n                                        // well, this success callback is pretty meaningless\n                                    },\n                                    function (err) {\n                                        self.emit('error', err);\n                                    }\n                                );\n                                self._checkRemoteCandidate(iceCandidate);\n                            });\n                        cb();\n                    };\n\n                    if (self.iceCredentials.remote[content.name] && transport.ufrag &&\n                        self.iceCredentials.remote[content.name].ufrag !== transport.ufrag) {\n                        if (remoteContent) {\n                            remoteContent.transport.ufrag = transport.ufrag;\n                            remoteContent.transport.pwd = transport.pwd;\n                            var offer = {\n                                type: 'offer',\n                                jingle: self.remoteDescription\n                            };\n                            offer.sdp = SJJ.toSessionSDP(offer.jingle, {\n                                sid: self.config.sdpSessionID,\n                                role: self._role(),\n                                direction: 'incoming'\n                            });\n                            self.pc.setRemoteDescription(new RTCSessionDescription(offer),\n                                function () {\n                                    processCandidates();\n                                },\n                                function (err) {\n                                    self.emit('error', err);\n                                }\n                            );\n                        } else {\n                            self.emit('error', 'ice restart failed to find matching content');\n                        }\n                    } else {\n                        processCandidates();\n                    }\n                });\n            } else {\n                // working around https://code.google.com/p/webrtc/issues/detail?id=3669\n                if (update.candidate && update.candidate.candidate.indexOf('a=') !== 0) {\n                    update.candidate.candidate = 'a=' + update.candidate.candidate;\n                }\n\n                if (this.wtFirefox && this.firefoxcandidatebuffer !== null) {\n                    // we cant add this yet due to https://bugzilla.mozilla.org/show_bug.cgi?id=1087551\n                    if (this.pc.localDescription && this.pc.localDescription.type === 'offer') {\n                        this.firefoxcandidatebuffer.push(update.candidate);\n                        return cb();\n                    }\n                }\n\n                self.pc.addIceCandidate(\n                    new RTCIceCandidate(update.candidate),\n                    function () { },\n                    function (err) {\n                        self.emit('error', err);\n                    }\n                );\n                self._checkRemoteCandidate(update.candidate.candidate);\n                cb();\n            }\n        };\n\n// Generate and emit an offer with the given constraints\n        PeerConnection.prototype.offer = function (constraints, cb) {\n            var self = this;\n            var hasConstraints = arguments.length === 2;\n            var mediaConstraints = hasConstraints && constraints ? constraints : {\n                offerToReceiveAudio: 1,\n                offerToReceiveVideo: 1\n            };\n            cb = hasConstraints ? cb : constraints;\n            cb = cb || function () {};\n\n            if (this.pc.signalingState === 'closed') return cb('Already closed');\n\n            ///MLUpdate\n            //RTCOfferOptions doesn'y work in Safari. Using transceivers instead\n            var ua = navigator.userAgent.toLowerCase();\n            if (ua.indexOf('safari') != -1) {\n                if (ua.indexOf('chrome') > -1) {\n                } else {\n                    this.pc.addTransceiver('audio');\n                    this.pc.addTransceiver('video');\n                }\n            }\n            ///MLUpdate\n\n            // Actually generate the offer\n            this.pc.createOffer(\n                function (offer) {\n                    // does not work for jingle, but jingle.js doesn't need\n                    // this hack...\n                    var expandedOffer = {\n                        type: 'offer',\n                        sdp: offer.sdp\n                    };\n                    if (self.assumeSetLocalSuccess) {\n                        self.emit('offer', expandedOffer);\n                        cb(null, expandedOffer);\n                    }\n                    self._candidateBuffer = [];\n                    self.pc.setLocalDescription(offer,\n                        function () {\n                            var jingle;\n                            if (self.config.useJingle) {\n                                jingle = SJJ.toSessionJSON(offer.sdp, {\n                                    role: self._role(),\n                                    direction: 'outgoing'\n                                });\n                                jingle.sid = self.config.sid;\n                                self.localDescription = jingle;\n\n                                // Save ICE credentials\n                                jingle.contents.forEach(function (content) {\n                                    var transport = content.transport || {};\n                                    if (transport.ufrag) {\n                                        self.iceCredentials.local[content.name] = {\n                                            ufrag: transport.ufrag,\n                                            pwd: transport.pwd\n                                        };\n                                    }\n                                });\n\n                                expandedOffer.jingle = jingle;\n                            }\n                            expandedOffer.sdp.split('\\r\\n').forEach(function (line) {\n                                if (line.indexOf('a=candidate:') === 0) {\n                                    self._checkLocalCandidate(line);\n                                }\n                            });\n\n                            if (!self.assumeSetLocalSuccess) {\n                                //Trickle encoders\n                                if (self.vidEncoder && self.vidEncoder.toUpperCase() != 'VP8') {\n                                    //Find codec id\n                                    var strCodecId = '';\n                                    var nFound = -1;\n                                    var nFound = expandedOffer.sdp.indexOf(self.vidEncoder.toUpperCase());\n                                    if (nFound == -1)\n                                        nFound = expandedOffer.sdp.indexOf(self.vidEncoder.toLowerCase());\n                                    if (nFound != -1) {\n                                        var strCodecId = expandedOffer.sdp.substr(nFound - 10, 10);\n                                        nFound = strCodecId.indexOf(':');\n                                        if (nFound != -1) {\n                                            strCodecId = strCodecId.substr(nFound + 1, strCodecId.length - nFound);\n                                            strCodecId = strCodecId.replace(' ', '');\n                                        }\n                                    }\n\n                                    if (strCodecId) {\n                                        //Find codecs string\n                                        var nFound = expandedOffer.sdp.indexOf('m=video');\n                                        if (nFound != -1) {\n                                            var strBegin = expandedOffer.sdp.substr(0, nFound);\n                                            var strSDP = expandedOffer.sdp.substr(nFound, expandedOffer.sdp.length - nFound);\n                                            nFound = strSDP.indexOf('\\r\\n');\n                                            var strEnd = strSDP.substr(nFound, strSDP.length - nFound);\n                                            strSDP = strSDP.substr(0, nFound);\n                                            var strSAVPF = 'SAVPF';\n                                            nFound = strSDP.indexOf(strSAVPF);\n                                            if (nFound == -1) {\n                                                strSAVPF = strSAVPF.toLowerCase();\n                                                nFound = strSDP.indexOf(strSAVPF);\n                                            }\n                                            if (nFound != -1) {\n                                                //Modify codecs string\n                                                strSDP = strSDP.replace((strCodecId + ' '), '');\n                                                strSDP = strSDP.replace('SAVPF', 'SAVPF ' + strCodecId);\n                                                expandedOffer.sdp = strBegin + strSDP + strEnd;\n                                            }\n                                        }\n                                    }\n                                }\n\n                                if (self.audEncoder && self.audEncoder.toUpperCase() != 'OPUS') {\n                                    //Find codec id\n                                    var strCodecId = '';\n                                    var nFound = -1;\n                                    var nFound = expandedOffer.sdp.indexOf(self.audEncoder.toUpperCase());\n                                    if (nFound == -1)\n                                        nFound = expandedOffer.sdp.indexOf(self.audEncoder.toLowerCase());\n                                    if (nFound != -1) {\n                                        var strCodecId = expandedOffer.sdp.substr(nFound - 10, 10);\n                                        nFound = strCodecId.indexOf(':');\n                                        if (nFound != -1) {\n                                            strCodecId = strCodecId.substr(nFound + 1, strCodecId.length - nFound);\n                                            strCodecId = strCodecId.replace(' ', '');\n                                        }\n                                    }\n\n                                    if (strCodecId) {\n                                        //Find codecs string\n                                        var nFound = expandedOffer.sdp.indexOf('m=audio');\n                                        if (nFound != -1) {\n                                            var strBegin = expandedOffer.sdp.substr(0, nFound);\n                                            var strSDP = expandedOffer.sdp.substr(nFound, expandedOffer.sdp.length - nFound);\n                                            nFound = strSDP.indexOf('\\r\\n');\n                                            var strEnd = strSDP.substr(nFound, strSDP.length - nFound);\n                                            strSDP = strSDP.substr(0, nFound);\n                                            var strSAVPF = 'SAVPF';\n                                            nFound = strSDP.indexOf(strSAVPF);\n                                            if (nFound == -1) {\n                                                strSAVPF = strSAVPF.toLowerCase();\n                                                nFound = strSDP.indexOf(strSAVPF);\n                                            }\n                                            if (nFound != -1) {\n                                                //Modify codecs string\n                                                strSDP = strSDP.replace((strCodecId + ' '), '');\n                                                strSDP = strSDP.replace('SAVPF', 'SAVPF ' + strCodecId);\n                                                expandedOffer.sdp = strBegin + strSDP + strEnd;\n                                            }\n                                        }\n                                    }\n                                }\n\n                                if (self.audBitrate && self.audBitrate.toLowerCase() != 'default') {\n                                    var audBitrate = parseInt(self.audBitrate);\n                                    if (audBitrate > 0) {\n                                        if (self.audBitrate.includes(\"K\") || self.audBitrate.includes(\"k\"))\n                                            audBitrate = audBitrate * 1000;\n                                        if (self.audBitrate.includes(\"M\") || self.audBitrate.includes(\"M\"))\n                                            audBitrate = audBitrate * 1000000;\n\n                                        expandedOffer.sdp = expandedOffer.sdp.replace(/a=fmtp:111 minptime=10;useinbandfec=1\\r\\n/g, 'a=fmtp:111 minptime=10;useinbandfec=1;maxplaybackrate=48000;sprop-maxcapturerate=48000;maxaveragebitrate=' + audBitrate + ';sprop-stereo=1;stereo=1\\r\\n');\n                                    }\n                                }\n                                if (self.vidBitrate && self.vidBitrate.toLowerCase() != 'default') {\n                                    var vidBitrate = parseInt(self.vidBitrate);\n                                    if (vidBitrate > 0) {\n                                        if (self.vidBitrate.includes(\"K\") || self.vidBitrate.includes(\"k\"))\n                                            vidBitrate = vidBitrate * 1000;\n                                        if (self.vidBitrate.includes(\"M\") || self.vidBitrate.includes(\"M\"))\n                                            vidBitrate = vidBitrate * 1000000;\n\n                                        expandedOffer.sdp = expandedOffer.sdp.replace(/a=mid:video\\r\\n/g, 'a=mid:video\\r\\nb=AS:' + vidBitrate / 1000 + '\\r\\n');\n                                    }\n                                }\n                                self.emit('offer', expandedOffer);\n                                cb(null, expandedOffer);\n                            }\n                        },\n                        function (err) {\n                            self.emit('error', err);\n                            cb(err);\n                        }\n                    );\n                },\n                function (err) {\n                    self.emit('error', err);\n                    cb(err);\n                },\n                mediaConstraints\n            );\n        };\n\n\n// Process an incoming offer so that ICE may proceed before deciding\n// to answer the request.\n        PeerConnection.prototype.handleOffer = function (offer, cb) {\n            cb = cb || function () {};\n            var self = this;\n            offer.type = 'offer';\n            if (offer.jingle) {\n                if (this.enableChromeNativeSimulcast) {\n                    offer.jingle.contents.forEach(function (content) {\n                        if (content.name === 'video') {\n                            content.application.googConferenceFlag = true;\n                        }\n\n                    });\n                }\n                if (this.enableMultiStreamHacks) {\n                    // add a mixed video stream as first stream\n                    offer.jingle.contents.forEach(function (content) {\n                        if (content.name === 'video') {\n                            var sources = content.application.sources || [];\n                            if (sources.length === 0 || sources[0].ssrc !== \"3735928559\") {\n                                sources.unshift({\n                                    ssrc: \"3735928559\", // 0xdeadbeef\n                                    parameters: [\n                                        {\n                                            key: \"cname\",\n                                            value: \"deadbeef\"\n                                        },\n                                        {\n                                            key: \"msid\",\n                                            value: \"mixyourfecintothis please\"\n                                        }\n                                    ]\n                                });\n                                content.application.sources = sources;\n                            }\n                        }\n                    });\n                }\n                if (self.restrictBandwidth > 0) {\n                    if (offer.jingle.contents.length >= 2 && offer.jingle.contents[1].name === 'video') {\n                        var content = offer.jingle.contents[1];\n                        var hasBw = content.application && content.application.bandwidth && content.application.bandwidth.bandwidth;\n                        if (!hasBw) {\n                            offer.jingle.contents[1].application.bandwidth = { type: 'AS', bandwidth: self.restrictBandwidth.toString() };\n                            offer.sdp = SJJ.toSessionSDP(offer.jingle, {\n                                sid: self.config.sdpSessionID,\n                                role: self._role(),\n                                direction: 'outgoing'\n                            });\n                        }\n                    }\n                }\n                // Save ICE credentials\n                offer.jingle.contents.forEach(function (content) {\n                    var transport = content.transport || {};\n                    if (transport.ufrag) {\n                        self.iceCredentials.remote[content.name] = {\n                            ufrag: transport.ufrag,\n                            pwd: transport.pwd\n                        };\n                    }\n                });\n                offer.sdp = SJJ.toSessionSDP(offer.jingle, {\n                    sid: self.config.sdpSessionID,\n                    role: self._role(),\n                    direction: 'incoming'\n                });\n                self.remoteDescription = offer.jingle;\n            }\n            offer.sdp.split('\\r\\n').forEach(function (line) {\n                if (line.indexOf('a=candidate:') === 0) {\n                    self._checkRemoteCandidate(line);\n                }\n            });\n            self.pc.setRemoteDescription(new RTCSessionDescription(offer),\n                function () {\n                    cb();\n                },\n                cb\n            );\n        };\n\n// Answer an offer with audio only\n        PeerConnection.prototype.answerAudioOnly = function (cb) {\n            var mediaConstraints = {\n                mandatory: {\n                    OfferToReceiveAudio: true,\n                    OfferToReceiveVideo: false\n                }\n            };\n            this._answer(mediaConstraints, cb);\n        };\n\n// Answer an offer without offering to recieve\n        PeerConnection.prototype.answerBroadcastOnly = function (cb) {\n            var mediaConstraints = {\n                mandatory: {\n                    OfferToReceiveAudio: false,\n                    OfferToReceiveVideo: false\n                }\n            };\n            this._answer(mediaConstraints, cb);\n        };\n\n// Answer an offer with given constraints default is audio/video\n        PeerConnection.prototype.answer = function (constraints, cb) {\n            var hasConstraints = arguments.length === 2;\n            var callback = hasConstraints ? cb : constraints;\n            var mediaConstraints = hasConstraints && constraints ? constraints : {\n                mandatory: {\n                    OfferToReceiveAudio: true,\n                    OfferToReceiveVideo: true\n                }\n            };\n\n            this._answer(mediaConstraints, callback);\n        };\n\n// Process an answer\n        PeerConnection.prototype.handleAnswer = function (answer, cb) {\n            cb = cb || function () {};\n            var self = this;\n            if (answer.jingle) {\n                answer.sdp = SJJ.toSessionSDP(answer.jingle, {\n                    sid: self.config.sdpSessionID,\n                    role: self._role(),\n                    direction: 'incoming'\n                });\n                self.remoteDescription = answer.jingle;\n\n                // Save ICE credentials\n                answer.jingle.contents.forEach(function (content) {\n                    var transport = content.transport || {};\n                    if (transport.ufrag) {\n                        self.iceCredentials.remote[content.name] = {\n                            ufrag: transport.ufrag,\n                            pwd: transport.pwd\n                        };\n                    }\n                });\n            }\n            answer.sdp.split('\\r\\n').forEach(function (line) {\n                if (line.indexOf('a=candidate:') === 0) {\n                    self._checkRemoteCandidate(line);\n                }\n            });\n            self.pc.setRemoteDescription(\n                new RTCSessionDescription(answer),\n                function () {\n                    if (self.wtFirefox) {\n                        window.setTimeout(function () {\n                            self.firefoxcandidatebuffer.forEach(function (candidate) {\n                                // add candidates later\n                                self.pc.addIceCandidate(\n                                    new RTCIceCandidate(candidate),\n                                    function () { },\n                                    function (err) {\n                                        self.emit('error', err);\n                                    }\n                                );\n                                self._checkRemoteCandidate(candidate.candidate);\n                            });\n                            self.firefoxcandidatebuffer = null;\n                        }, self.wtFirefox);\n                    }\n                    cb(null);\n                },\n                cb\n            );\n        };\n\n// Close the peer connection\n        PeerConnection.prototype.close = function () {\n            if (this._localDataChannels && this._localDataChannels.length > 0) {\n                for (var z = 0; z < this._localDataChannels.length; z++) {\n                    this._localDataChannels[z].close();\n                }\n            }\n            if (this._remoteDataChannels && this._remoteDataChannels.length > 0) {\n                for (var z = 0; z < this._remoteDataChannels.length; z++) {\n                    this._remoteDataChannels[z].close();\n                }\n            }\n\n            // proxy some events directly\n            this.pc.onremovestream = null;\n            this.pc.onremovetrack = null;\n            this.pc.onaddstream = null;\n            this.pc.onnegotiationneeded = null;\n            this.pc.oniceconnectionstatechange = null;\n            this.pc.onsignalingstatechange = null;\n\n            // handle ice candidate and data channel events\n            this.pc.onicecandidate = null;\n            this.pc.ondatachannel = null;\n\n\n            this.pc.close();\n\n            this._localDataChannels = [];\n            this._remoteDataChannels = [];\n\n            this.emit('close');\n        };\n\n// Internal code sharing for various types of answer methods\n        PeerConnection.prototype._answer = function (constraints, cb) {\n            cb = cb || function () {};\n            var self = this;\n            if (!this.pc.remoteDescription) {\n                // the old API is used, call handleOffer\n                throw new Error('remoteDescription not set');\n            }\n\n            if (this.pc.signalingState === 'closed') return cb('Already closed');\n\n            self.pc.createAnswer(\n                function (answer) {\n                    var sim = [];\n                    if (self.enableChromeNativeSimulcast) {\n                        // native simulcast part 1: add another SSRC\n                        answer.jingle = SJJ.toSessionJSON(answer.sdp, {\n                            role: self._role(),\n                            direction: 'outgoing'\n                        });\n                        if (answer.jingle.contents.length >= 2 && answer.jingle.contents[1].name === 'video') {\n                            var groups = answer.jingle.contents[1].application.sourceGroups || [];\n                            var hasSim = false;\n                            groups.forEach(function (group) {\n                                if (group.semantics == 'SIM') hasSim = true;\n                            });\n                            if (!hasSim &&\n                                answer.jingle.contents[1].application.sources.length) {\n                                var newssrc = JSON.parse(JSON.stringify(answer.jingle.contents[1].application.sources[0]));\n                                newssrc.ssrc = '' + Math.floor(Math.random() * 0xffffffff); // FIXME: look for conflicts\n                                answer.jingle.contents[1].application.sources.push(newssrc);\n\n                                sim.push(answer.jingle.contents[1].application.sources[0].ssrc);\n                                sim.push(newssrc.ssrc);\n                                groups.push({\n                                    semantics: 'SIM',\n                                    sources: sim\n                                });\n\n                                // also create an RTX one for the SIM one\n                                var rtxssrc = JSON.parse(JSON.stringify(newssrc));\n                                rtxssrc.ssrc = '' + Math.floor(Math.random() * 0xffffffff); // FIXME: look for conflicts\n                                answer.jingle.contents[1].application.sources.push(rtxssrc);\n                                groups.push({\n                                    semantics: 'FID',\n                                    sources: [newssrc.ssrc, rtxssrc.ssrc]\n                                });\n\n                                answer.jingle.contents[1].application.sourceGroups = groups;\n                                answer.sdp = SJJ.toSessionSDP(answer.jingle, {\n                                    sid: self.config.sdpSessionID,\n                                    role: self._role(),\n                                    direction: 'outgoing'\n                                });\n                            }\n                        }\n                    }\n\n                    if (self.audBitrate && self.audBitrate > 0)\n                        answer.sdp = answer.sdp.replace(/a=fmtp:111 minptime=10;useinbandfec=1\\r\\n/g, 'a=fmtp:111 minptime=10;useinbandfec=1;maxplaybackrate=48000;sprop-maxcapturerate=48000;maxaveragebitrate=' + self.audBitrate + ';sprop-stereo=1;stereo=1\\r\\n');\n                    if (self.vidBitrate && self.vidBitrate > 0)\n                        answer.sdp = answer.sdp.replace(/a=mid:video\\r\\n/g, 'a=mid:video\\r\\nb=AS:' + self.vidBitrate / 1000 + '\\r\\n');\n                    var expandedAnswer = {\n                        type: 'answer',\n                        sdp: answer.sdp\n                    };\n                    if (self.assumeSetLocalSuccess) {\n                        // not safe to do when doing simulcast mangling\n                        var copy = cloneDeep(expandedAnswer);\n                        self.emit('answer', copy);\n                        cb(null, copy);\n                    }\n                    self._candidateBuffer = [];\n                    self.pc.setLocalDescription(answer,\n                        function () {\n                            if (self.config.useJingle) {\n                                var jingle = SJJ.toSessionJSON(answer.sdp, {\n                                    role: self._role(),\n                                    direction: 'outgoing'\n                                });\n                                jingle.sid = self.config.sid;\n                                self.localDescription = jingle;\n                                expandedAnswer.jingle = jingle;\n                            }\n                            if (self.enableChromeNativeSimulcast) {\n                                // native simulcast part 2:\n                                // signal multiple tracks to the receiver\n                                // for anything in the SIM group\n                                if (!expandedAnswer.jingle) {\n                                    expandedAnswer.jingle = SJJ.toSessionJSON(answer.sdp, {\n                                        role: self._role(),\n                                        direction: 'outgoing'\n                                    });\n                                }\n                                expandedAnswer.jingle.contents[1].application.sources.forEach(function (source, idx) {\n                                    // the floor idx/2 is a hack that relies on a particular order\n                                    // of groups, alternating between sim and rtx\n                                    source.parameters = source.parameters.map(function (parameter) {\n                                        if (parameter.key === 'msid') {\n                                            parameter.value += '-' + Math.floor(idx / 2);\n                                        }\n                                        return parameter;\n                                    });\n                                });\n                                expandedAnswer.sdp = SJJ.toSessionSDP(expandedAnswer.jingle, {\n                                    sid: self.sdpSessionID,\n                                    role: self._role(),\n                                    direction: 'outgoing'\n                                });\n                            }\n                            expandedAnswer.sdp.split('\\r\\n').forEach(function (line) {\n                                if (line.indexOf('a=candidate:') === 0) {\n                                    self._checkLocalCandidate(line);\n                                }\n                            });\n                            if (!self.assumeSetLocalSuccess) {\n                                var copy = cloneDeep(expandedAnswer);\n                                self.emit('answer', copy);\n                                cb(null, copy);\n                            }\n                        },\n                        function (err) {\n                            self.emit('error', err);\n                            cb(err);\n                        }\n                    );\n                },\n                function (err) {\n                    self.emit('error', err);\n                    cb(err);\n                },\n                constraints\n            );\n        };\n\n// Internal method for emitting ice candidates on our peer object\n        PeerConnection.prototype._onIce = function (event) {\n            var self = this;\n            if (event.candidate) {\n                if (this.dontSignalCandidates) return;\n                var ice = event.candidate;\n\n                var expandedCandidate = {\n                    candidate: {\n                        candidate: ice.candidate,\n                        sdpMid: ice.sdpMid,\n                        sdpMLineIndex: ice.sdpMLineIndex\n                    }\n                };\n                this._checkLocalCandidate(ice.candidate);\n\n                var cand = SJJ.toCandidateJSON(ice.candidate);\n\n                var already;\n                var idx;\n                if (this.eliminateDuplicateCandidates && cand.type === 'relay') {\n                    // drop candidates with same foundation, component\n                    // take local type pref into account so we don't ignore udp\n                    // ones when we know about a TCP one. unlikely but...\n                    already = this._candidateBuffer.filter(\n                        function (c) {\n                            return c.type === 'relay';\n                        }).map(function (c) {\n                            return c.foundation + ':' + c.component;\n                        }\n                    );\n                    idx = already.indexOf(cand.foundation + ':' + cand.component);\n                    // remember: local type pref of udp is 0, tcp 1, tls 2\n                    if (idx > -1 && ((cand.priority >> 24) >= (already[idx].priority >> 24))) {\n                        // drop it, same foundation with higher (worse) type pref\n                        return;\n                    }\n                }\n                if (this.config.bundlePolicy === 'max-bundle') {\n                    // drop candidates which are duplicate for audio/video/data\n                    // duplicate means same host/port but different sdpMid\n                    already = this._candidateBuffer.filter(\n                        function (c) {\n                            return cand.type === c.type;\n                        }).map(function (cand) {\n                            return cand.address + ':' + cand.port;\n                        }\n                    );\n                    idx = already.indexOf(cand.address + ':' + cand.port);\n                    if (idx > -1) return;\n                }\n                // also drop rtcp candidates since we know the peer supports RTCP-MUX\n                // this is a workaround until browsers implement this natively\n                if (this.config.rtcpMuxPolicy === 'require' && cand.component === '2') {\n                    return;\n                }\n                this._candidateBuffer.push(cand);\n\n                if (self.config.useJingle) {\n                    if (!ice.sdpMid) { // firefox doesn't set this\n                        if (self.pc.remoteDescription && self.pc.remoteDescription.type === 'offer') {\n                            // preserve name from remote\n                            ice.sdpMid = self.remoteDescription.contents[ice.sdpMLineIndex].name;\n                        } else {\n                            ice.sdpMid = self.localDescription.contents[ice.sdpMLineIndex].name;\n                        }\n                    }\n                    if (!self.iceCredentials.local[ice.sdpMid]) {\n                        var jingle = SJJ.toSessionJSON(self.pc.localDescription.sdp, {\n                            role: self._role(),\n                            direction: 'outgoing'\n                        });\n                        jingle.contents.forEach(function (content) {\n                            var transport = content.transport || {};\n                            if (transport.ufrag) {\n                                self.iceCredentials.local[content.name] = {\n                                    ufrag: transport.ufrag,\n                                    pwd: transport.pwd\n                                };\n                            }\n                        });\n                    }\n                    expandedCandidate.jingle = {\n                        contents: [{\n                            name: ice.sdpMid,\n                            creator: self._role(),\n                            transport: {\n                                transportType: 'iceUdp',\n                                ufrag: self.iceCredentials.local[ice.sdpMid].ufrag,\n                                pwd: self.iceCredentials.local[ice.sdpMid].pwd,\n                                candidates: [\n                                    cand\n                                ]\n                            }\n                        }]\n                    };\n                    if (self.batchIceCandidates > 0) {\n                        if (self.batchedIceCandidates.length === 0) {\n                            window.setTimeout(function () {\n                                var contents = {};\n                                self.batchedIceCandidates.forEach(function (content) {\n                                    content = content.contents[0];\n                                    if (!contents[content.name]) contents[content.name] = content;\n                                    contents[content.name].transport.candidates.push(content.transport.candidates[0]);\n                                });\n                                var newCand = {\n                                    jingle: {\n                                        contents: []\n                                    }\n                                };\n                                Object.keys(contents).forEach(function (name) {\n                                    newCand.jingle.contents.push(contents[name]);\n                                });\n                                self.batchedIceCandidates = [];\n                                self.emit('ice', newCand);\n                            }, self.batchIceCandidates);\n                        }\n                        self.batchedIceCandidates.push(expandedCandidate.jingle);\n                        return;\n                    }\n\n                }\n                this.emit('ice', expandedCandidate);\n            } else {\n                this.emit('endOfCandidates');\n            }\n        };\n\n// Internal method for processing a new data channel being added by the\n// other peer.\n        PeerConnection.prototype._onDataChannel = function (event) {\n            // make sure we keep a reference so this doesn't get garbage collected\n            var channel = event.channel;\n            this._remoteDataChannels.push(channel);\n\n            this.emit('addChannel', channel);\n        };\n\n// Create a data channel spec reference:\n// http://dev.w3.org/2011/webrtc/editor/webrtc.html#idl-def-RTCDataChannelInit\n        PeerConnection.prototype.createDataChannel = function (name, opts) {\n            var channel = this.pc.createDataChannel(name, opts);\n\n            // make sure we keep a reference so this doesn't get garbage collected\n            this._localDataChannels.push(channel);\n\n            return channel;\n        };\n\n        PeerConnection.prototype.getStats = function () {\n            if (typeof arguments[0] === 'function') {\n                var cb = arguments[0];\n                this.pc.getStats().then(function (res) {\n                    cb(null, res);\n                }, function (err) {\n                    cb(err);\n                });\n            } else {\n                return this.pc.getStats.apply(this.pc, arguments);\n            }\n        };\n\n        module.exports = PeerConnection;\n\n    },{\"lodash.clonedeep\":45,\"sdp-jingle-json\":54,\"util\":73,\"wildemitter\":75}],54:[function(require,module,exports){\n        var toSDP = require('./lib/tosdp');\n        var toJSON = require('./lib/tojson');\n\n\n// Converstion from JSON to SDP\n\n        exports.toIncomingSDPOffer = function (session) {\n            return toSDP.toSessionSDP(session, {\n                role: 'responder',\n                direction: 'incoming'\n            });\n        };\n        exports.toOutgoingSDPOffer = function (session) {\n            return toSDP.toSessionSDP(session, {\n                role: 'initiator',\n                direction: 'outgoing'\n            });\n        };\n        exports.toIncomingSDPAnswer = function (session) {\n            return toSDP.toSessionSDP(session, {\n                role: 'initiator',\n                direction: 'incoming'\n            });\n        };\n        exports.toOutgoingSDPAnswer = function (session) {\n            return toSDP.toSessionSDP(session, {\n                role: 'responder',\n                direction: 'outgoing'\n            });\n        };\n        exports.toIncomingMediaSDPOffer = function (media) {\n            return toSDP.toMediaSDP(media, {\n                role: 'responder',\n                direction: 'incoming'\n            });\n        };\n        exports.toOutgoingMediaSDPOffer = function (media) {\n            return toSDP.toMediaSDP(media, {\n                role: 'initiator',\n                direction: 'outgoing'\n            });\n        };\n        exports.toIncomingMediaSDPAnswer = function (media) {\n            return toSDP.toMediaSDP(media, {\n                role: 'initiator',\n                direction: 'incoming'\n            });\n        };\n        exports.toOutgoingMediaSDPAnswer = function (media) {\n            return toSDP.toMediaSDP(media, {\n                role: 'responder',\n                direction: 'outgoing'\n            });\n        };\n        exports.toCandidateSDP = toSDP.toCandidateSDP;\n        exports.toMediaSDP = toSDP.toMediaSDP;\n        exports.toSessionSDP = toSDP.toSessionSDP;\n\n\n// Conversion from SDP to JSON\n\n        exports.toIncomingJSONOffer = function (sdp, creators) {\n            return toJSON.toSessionJSON(sdp, {\n                role: 'responder',\n                direction: 'incoming',\n                creators: creators\n            });\n        };\n        exports.toOutgoingJSONOffer = function (sdp, creators) {\n            return toJSON.toSessionJSON(sdp, {\n                role: 'initiator',\n                direction: 'outgoing',\n                creators: creators\n            });\n        };\n        exports.toIncomingJSONAnswer = function (sdp, creators) {\n            return toJSON.toSessionJSON(sdp, {\n                role: 'initiator',\n                direction: 'incoming',\n                creators: creators\n            });\n        };\n        exports.toOutgoingJSONAnswer = function (sdp, creators) {\n            return toJSON.toSessionJSON(sdp, {\n                role: 'responder',\n                direction: 'outgoing',\n                creators: creators\n            });\n        };\n        exports.toIncomingMediaJSONOffer = function (sdp, creator) {\n            return toJSON.toMediaJSON(sdp, {\n                role: 'responder',\n                direction: 'incoming',\n                creator: creator\n            });\n        };\n        exports.toOutgoingMediaJSONOffer = function (sdp, creator) {\n            return toJSON.toMediaJSON(sdp, {\n                role: 'initiator',\n                direction: 'outgoing',\n                creator: creator\n            });\n        };\n        exports.toIncomingMediaJSONAnswer = function (sdp, creator) {\n            return toJSON.toMediaJSON(sdp, {\n                role: 'initiator',\n                direction: 'incoming',\n                creator: creator\n            });\n        };\n        exports.toOutgoingMediaJSONAnswer = function (sdp, creator) {\n            return toJSON.toMediaJSON(sdp, {\n                role: 'responder',\n                direction: 'outgoing',\n                creator: creator\n            });\n        };\n        exports.toCandidateJSON = toJSON.toCandidateJSON;\n        exports.toMediaJSON = toJSON.toMediaJSON;\n        exports.toSessionJSON = toJSON.toSessionJSON;\n\n    },{\"./lib/tojson\":57,\"./lib/tosdp\":58}],55:[function(require,module,exports){\n        exports.lines = function (sdp) {\n            return sdp.split('\\r\\n').filter(function (line) {\n                return line.length > 0;\n            });\n        };\n\n        exports.findLine = function (prefix, mediaLines, sessionLines) {\n            var prefixLength = prefix.length;\n            for (var i = 0; i < mediaLines.length; i++) {\n                if (mediaLines[i].substr(0, prefixLength) === prefix) {\n                    return mediaLines[i];\n                }\n            }\n            // Continue searching in parent session section\n            if (!sessionLines) {\n                return false;\n            }\n\n            for (var j = 0; j < sessionLines.length; j++) {\n                if (sessionLines[j].substr(0, prefixLength) === prefix) {\n                    return sessionLines[j];\n                }\n            }\n\n            return false;\n        };\n\n        exports.findLines = function (prefix, mediaLines, sessionLines) {\n            var results = [];\n            var prefixLength = prefix.length;\n            for (var i = 0; i < mediaLines.length; i++) {\n                if (mediaLines[i].substr(0, prefixLength) === prefix) {\n                    results.push(mediaLines[i]);\n                }\n            }\n            if (results.length || !sessionLines) {\n                return results;\n            }\n            for (var j = 0; j < sessionLines.length; j++) {\n                if (sessionLines[j].substr(0, prefixLength) === prefix) {\n                    results.push(sessionLines[j]);\n                }\n            }\n            return results;\n        };\n\n        exports.mline = function (line) {\n            var parts = line.substr(2).split(' ');\n            var parsed = {\n                media: parts[0],\n                port: parts[1],\n                proto: parts[2],\n                formats: []\n            };\n            for (var i = 3; i < parts.length; i++) {\n                if (parts[i]) {\n                    parsed.formats.push(parts[i]);\n                }\n            }\n            return parsed;\n        };\n\n        exports.rtpmap = function (line) {\n            var parts = line.substr(9).split(' ');\n            var parsed = {\n                id: parts.shift()\n            };\n\n            parts = parts[0].split('/');\n\n            parsed.name = parts[0];\n            parsed.clockrate = parts[1];\n            parsed.channels = parts.length == 3 ? parts[2] : '1';\n            return parsed;\n        };\n\n        exports.sctpmap = function (line) {\n            // based on -05 draft\n            var parts = line.substr(10).split(' ');\n            var parsed = {\n                number: parts.shift(),\n                protocol: parts.shift(),\n                streams: parts.shift()\n            };\n            return parsed;\n        };\n\n\n        exports.fmtp = function (line) {\n            var kv, key, value;\n            var parts = line.substr(line.indexOf(' ') + 1).split(';');\n            var parsed = [];\n            for (var i = 0; i < parts.length; i++) {\n                kv = parts[i].split('=');\n                key = kv[0].trim();\n                value = kv[1];\n                if (key && value) {\n                    parsed.push({key: key, value: value});\n                } else if (key) {\n                    parsed.push({key: '', value: key});\n                }\n            }\n            return parsed;\n        };\n\n        exports.crypto = function (line) {\n            var parts = line.substr(9).split(' ');\n            var parsed = {\n                tag: parts[0],\n                cipherSuite: parts[1],\n                keyParams: parts[2],\n                sessionParams: parts.slice(3).join(' ')\n            };\n            return parsed;\n        };\n\n        exports.fingerprint = function (line) {\n            var parts = line.substr(14).split(' ');\n            return {\n                hash: parts[0],\n                value: parts[1]\n            };\n        };\n\n        exports.extmap = function (line) {\n            var parts = line.substr(9).split(' ');\n            var parsed = {};\n\n            var idpart = parts.shift();\n            var sp = idpart.indexOf('/');\n            if (sp >= 0) {\n                parsed.id = idpart.substr(0, sp);\n                parsed.senders = idpart.substr(sp + 1);\n            } else {\n                parsed.id = idpart;\n                parsed.senders = 'sendrecv';\n            }\n\n            parsed.uri = parts.shift() || '';\n\n            return parsed;\n        };\n\n        exports.rtcpfb = function (line) {\n            var parts = line.substr(10).split(' ');\n            var parsed = {};\n            parsed.id = parts.shift();\n            parsed.type = parts.shift();\n            if (parsed.type === 'trr-int') {\n                parsed.value = parts.shift();\n            } else {\n                parsed.subtype = parts.shift() || '';\n            }\n            parsed.parameters = parts;\n            return parsed;\n        };\n\n        exports.candidate = function (line) {\n            var parts;\n            if (line.indexOf('a=candidate:') === 0) {\n                parts = line.substring(12).split(' ');\n            } else { // no a=candidate\n                parts = line.substring(10).split(' ');\n            }\n\n            var candidate = {\n                foundation: parts[0],\n                component: parts[1],\n                protocol: parts[2].toLowerCase(),\n                priority: parts[3],\n                ip: parts[4],\n                port: parts[5],\n                // skip parts[6] == 'typ'\n                type: parts[7],\n                generation: '0'\n            };\n\n            for (var i = 8; i < parts.length; i += 2) {\n                if (parts[i] === 'raddr') {\n                    candidate.relAddr = parts[i + 1];\n                } else if (parts[i] === 'rport') {\n                    candidate.relPort = parts[i + 1];\n                } else if (parts[i] === 'generation') {\n                    candidate.generation = parts[i + 1];\n                } else if (parts[i] === 'tcptype') {\n                    candidate.tcpType = parts[i + 1];\n                }\n            }\n\n            candidate.network = '1';\n\n            return candidate;\n        };\n\n        exports.sourceGroups = function (lines) {\n            var parsed = [];\n            for (var i = 0; i < lines.length; i++) {\n                var parts = lines[i].substr(13).split(' ');\n                parsed.push({\n                    semantics: parts.shift(),\n                    sources: parts\n                });\n            }\n            return parsed;\n        };\n\n        exports.sources = function (lines) {\n            // http://tools.ietf.org/html/rfc5576\n            var parsed = [];\n            var sources = {};\n            for (var i = 0; i < lines.length; i++) {\n                var parts = lines[i].substr(7).split(' ');\n                var ssrc = parts.shift();\n\n                if (!sources[ssrc]) {\n                    var source = {\n                        ssrc: ssrc,\n                        parameters: []\n                    };\n                    parsed.push(source);\n\n                    // Keep an index\n                    sources[ssrc] = source;\n                }\n\n                parts = parts.join(' ').split(':');\n                var attribute = parts.shift();\n                var value = parts.join(':') || null;\n\n                sources[ssrc].parameters.push({\n                    key: attribute,\n                    value: value\n                });\n            }\n\n            return parsed;\n        };\n\n        exports.groups = function (lines) {\n            // http://tools.ietf.org/html/rfc5888\n            var parsed = [];\n            var parts;\n            for (var i = 0; i < lines.length; i++) {\n                parts = lines[i].substr(8).split(' ');\n                parsed.push({\n                    semantics: parts.shift(),\n                    contents: parts\n                });\n            }\n            return parsed;\n        };\n\n        exports.bandwidth = function (line) {\n            var parts = line.substr(2).split(':');\n            var parsed = {};\n            parsed.type = parts.shift();\n            parsed.bandwidth = parts.shift();\n            return parsed;\n        };\n\n        exports.msid = function (line) {\n            var data = line.substr(7);\n            var parts = data.split(' ');\n            return {\n                msid: data,\n                mslabel: parts[0],\n                label: parts[1]\n            };\n        };\n\n    },{}],56:[function(require,module,exports){\n        module.exports = {\n            initiator: {\n                incoming: {\n                    initiator: 'recvonly',\n                    responder: 'sendonly',\n                    both: 'sendrecv',\n                    none: 'inactive',\n                    recvonly: 'initiator',\n                    sendonly: 'responder',\n                    sendrecv: 'both',\n                    inactive: 'none'\n                },\n                outgoing: {\n                    initiator: 'sendonly',\n                    responder: 'recvonly',\n                    both: 'sendrecv',\n                    none: 'inactive',\n                    recvonly: 'responder',\n                    sendonly: 'initiator',\n                    sendrecv: 'both',\n                    inactive: 'none'\n                }\n            },\n            responder: {\n                incoming: {\n                    initiator: 'sendonly',\n                    responder: 'recvonly',\n                    both: 'sendrecv',\n                    none: 'inactive',\n                    recvonly: 'responder',\n                    sendonly: 'initiator',\n                    sendrecv: 'both',\n                    inactive: 'none'\n                },\n                outgoing: {\n                    initiator: 'recvonly',\n                    responder: 'sendonly',\n                    both: 'sendrecv',\n                    none: 'inactive',\n                    recvonly: 'initiator',\n                    sendonly: 'responder',\n                    sendrecv: 'both',\n                    inactive: 'none'\n                }\n            }\n        };\n\n    },{}],57:[function(require,module,exports){\n        var SENDERS = require('./senders');\n        var parsers = require('./parsers');\n        var idCounter = Math.random();\n\n\n        exports._setIdCounter = function (counter) {\n            idCounter = counter;\n        };\n\n        exports.toSessionJSON = function (sdp, opts) {\n            var i;\n            var creators = opts.creators || [];\n            var role = opts.role || 'initiator';\n            var direction = opts.direction || 'outgoing';\n\n\n            // Divide the SDP into session and media sections.\n            var media = sdp.split('\\r\\nm=');\n            for (i = 1; i < media.length; i++) {\n                media[i] = 'm=' + media[i];\n                if (i !== media.length - 1) {\n                    media[i] += '\\r\\n';\n                }\n            }\n            var session = media.shift() + '\\r\\n';\n            var sessionLines = parsers.lines(session);\n            var parsed = {};\n\n            var contents = [];\n            for (i = 0; i < media.length; i++) {\n                contents.push(exports.toMediaJSON(media[i], session, {\n                    role: role,\n                    direction: direction,\n                    creator: creators[i] || 'initiator'\n                }));\n            }\n            parsed.contents = contents;\n\n            var groupLines = parsers.findLines('a=group:', sessionLines);\n            if (groupLines.length) {\n                parsed.groups = parsers.groups(groupLines);\n            }\n\n            return parsed;\n        };\n\n        exports.toMediaJSON = function (media, session, opts) {\n            var creator = opts.creator || 'initiator';\n            var role = opts.role || 'initiator';\n            var direction = opts.direction || 'outgoing';\n\n            var lines = parsers.lines(media);\n            var sessionLines = parsers.lines(session);\n            var mline = parsers.mline(lines[0]);\n\n            var content = {\n                creator: creator,\n                name: mline.media,\n                application: {\n                    applicationType: 'rtp',\n                    media: mline.media,\n                    payloads: [],\n                    encryption: [],\n                    feedback: [],\n                    headerExtensions: []\n                },\n                transport: {\n                    transportType: 'iceUdp',\n                    candidates: [],\n                    fingerprints: []\n                }\n            };\n            if (mline.media == 'application') {\n                // FIXME: the description is most likely to be independent\n                // of the SDP and should be processed by other parts of the library\n                content.application = {\n                    applicationType: 'datachannel'\n                };\n                content.transport.sctp = [];\n            }\n            var desc = content.application;\n            var trans = content.transport;\n\n            // If we have a mid, use that for the content name instead.\n            var mid = parsers.findLine('a=mid:', lines);\n            if (mid) {\n                content.name = mid.substr(6);\n            }\n\n            if (parsers.findLine('a=sendrecv', lines, sessionLines)) {\n                content.senders = 'both';\n            } else if (parsers.findLine('a=sendonly', lines, sessionLines)) {\n                content.senders = SENDERS[role][direction].sendonly;\n            } else if (parsers.findLine('a=recvonly', lines, sessionLines)) {\n                content.senders = SENDERS[role][direction].recvonly;\n            } else if (parsers.findLine('a=inactive', lines, sessionLines)) {\n                content.senders = 'none';\n            }\n\n            if (desc.applicationType == 'rtp') {\n                var bandwidth = parsers.findLine('b=', lines);\n                if (bandwidth) {\n                    desc.bandwidth = parsers.bandwidth(bandwidth);\n                }\n\n                var ssrc = parsers.findLine('a=ssrc:', lines);\n                if (ssrc) {\n                    desc.ssrc = ssrc.substr(7).split(' ')[0];\n                }\n\n                var rtpmapLines = parsers.findLines('a=rtpmap:', lines);\n                rtpmapLines.forEach(function (line) {\n                    var payload = parsers.rtpmap(line);\n                    payload.parameters = [];\n                    payload.feedback = [];\n\n                    var fmtpLines = parsers.findLines('a=fmtp:' + payload.id, lines);\n                    // There should only be one fmtp line per payload\n                    fmtpLines.forEach(function (line) {\n                        payload.parameters = parsers.fmtp(line);\n                    });\n\n                    var fbLines = parsers.findLines('a=rtcp-fb:' + payload.id, lines);\n                    fbLines.forEach(function (line) {\n                        payload.feedback.push(parsers.rtcpfb(line));\n                    });\n\n                    desc.payloads.push(payload);\n                });\n\n                var cryptoLines = parsers.findLines('a=crypto:', lines, sessionLines);\n                cryptoLines.forEach(function (line) {\n                    desc.encryption.push(parsers.crypto(line));\n                });\n\n                if (parsers.findLine('a=rtcp-mux', lines)) {\n                    desc.mux = true;\n                }\n\n                var fbLines = parsers.findLines('a=rtcp-fb:*', lines);\n                fbLines.forEach(function (line) {\n                    desc.feedback.push(parsers.rtcpfb(line));\n                });\n\n                var extLines = parsers.findLines('a=extmap:', lines);\n                extLines.forEach(function (line) {\n                    var ext = parsers.extmap(line);\n\n                    ext.senders = SENDERS[role][direction][ext.senders];\n\n                    desc.headerExtensions.push(ext);\n                });\n\n                var ssrcGroupLines = parsers.findLines('a=ssrc-group:', lines);\n                desc.sourceGroups = parsers.sourceGroups(ssrcGroupLines || []);\n\n                var ssrcLines = parsers.findLines('a=ssrc:', lines);\n                var sources = desc.sources = parsers.sources(ssrcLines || []);\n\n                var msidLine = parsers.findLine('a=msid:', lines);\n                if (msidLine) {\n                    var msid = parsers.msid(msidLine);\n                    ['msid', 'mslabel', 'label'].forEach(function (key) {\n                        for (var i = 0; i < sources.length; i++) {\n                            var found = false;\n                            for (var j = 0; j < sources[i].parameters.length; j++) {\n                                if (sources[i].parameters[j].key === key) {\n                                    found = true;\n                                }\n                            }\n                            if (!found) {\n                                sources[i].parameters.push({ key: key, value: msid[key] });\n                            }\n                        }\n                    });\n                }\n\n                if (parsers.findLine('a=x-google-flag:conference', lines, sessionLines)) {\n                    desc.googConferenceFlag = true;\n                }\n            }\n\n            // transport specific attributes\n            var fingerprintLines = parsers.findLines('a=fingerprint:', lines, sessionLines);\n            var setup = parsers.findLine('a=setup:', lines, sessionLines);\n            fingerprintLines.forEach(function (line) {\n                var fp = parsers.fingerprint(line);\n                if (setup) {\n                    fp.setup = setup.substr(8);\n                }\n                trans.fingerprints.push(fp);\n            });\n\n            var ufragLine = parsers.findLine('a=ice-ufrag:', lines, sessionLines);\n            var pwdLine = parsers.findLine('a=ice-pwd:', lines, sessionLines);\n            if (ufragLine && pwdLine) {\n                trans.ufrag = ufragLine.substr(12);\n                trans.pwd = pwdLine.substr(10);\n                trans.candidates = [];\n\n                var candidateLines = parsers.findLines('a=candidate:', lines, sessionLines);\n                candidateLines.forEach(function (line) {\n                    trans.candidates.push(exports.toCandidateJSON(line));\n                });\n            }\n\n            if (desc.applicationType == 'datachannel') {\n                var sctpmapLines = parsers.findLines('a=sctpmap:', lines);\n                sctpmapLines.forEach(function (line) {\n                    var sctp = parsers.sctpmap(line);\n                    trans.sctp.push(sctp);\n                });\n            }\n\n            return content;\n        };\n\n        exports.toCandidateJSON = function (line) {\n            var candidate = parsers.candidate(line.split('\\r\\n')[0]);\n            candidate.id = (idCounter++).toString(36).substr(0, 12);\n            return candidate;\n        };\n\n    },{\"./parsers\":55,\"./senders\":56}],58:[function(require,module,exports){\n        var SENDERS = require('./senders');\n\n\n        exports.toSessionSDP = function (session, opts) {\n            var role = opts.role || 'initiator';\n            var direction = opts.direction || 'outgoing';\n            var sid = opts.sid || session.sid || Date.now();\n            var time = opts.time || Date.now();\n\n            var sdp = [\n                'v=0',\n                'o=- ' + sid + ' ' + time + ' IN IP4 0.0.0.0',\n                's=-',\n                't=0 0'\n            ];\n\n            var contents = session.contents || [];\n            var hasSources = false;\n            contents.forEach(function (content) {\n                if (content.application.sources &&\n                    content.application.sources.length) {\n                    hasSources = true;\n                }\n            });\n\n            if (hasSources) {\n                sdp.push('a=msid-semantic: WMS *');\n            }\n\n            var groups = session.groups || [];\n            groups.forEach(function (group) {\n                sdp.push('a=group:' + group.semantics + ' ' + group.contents.join(' '));\n            });\n\n\n            contents.forEach(function (content) {\n                sdp.push(exports.toMediaSDP(content, opts));\n            });\n\n            return sdp.join('\\r\\n') + '\\r\\n';\n        };\n\n        exports.toMediaSDP = function (content, opts) {\n            var sdp = [];\n\n            var role = opts.role || 'initiator';\n            var direction = opts.direction || 'outgoing';\n\n            var desc = content.application;\n            var transport = content.transport;\n            var payloads = desc.payloads || [];\n            var fingerprints = (transport && transport.fingerprints) || [];\n\n            var mline = [];\n            if (desc.applicationType == 'datachannel') {\n                mline.push('application');\n                mline.push('1');\n                mline.push('DTLS/SCTP');\n                if (transport.sctp) {\n                    transport.sctp.forEach(function (map) {\n                        mline.push(map.number);\n                    });\n                }\n            } else {\n                mline.push(desc.media);\n                mline.push('1');\n                if (fingerprints.length > 0) {\n                    mline.push('UDP/TLS/RTP/SAVPF');\n                } else if (desc.encryption && desc.encryption.length > 0) {\n                    mline.push('RTP/SAVPF');\n                } else {\n                    mline.push('RTP/AVPF');\n                }\n                payloads.forEach(function (payload) {\n                    mline.push(payload.id);\n                });\n            }\n\n\n            sdp.push('m=' + mline.join(' '));\n\n            sdp.push('c=IN IP4 0.0.0.0');\n            if (desc.bandwidth && desc.bandwidth.type && desc.bandwidth.bandwidth) {\n                sdp.push('b=' + desc.bandwidth.type + ':' + desc.bandwidth.bandwidth);\n            }\n            if (desc.applicationType == 'rtp') {\n                sdp.push('a=rtcp:1 IN IP4 0.0.0.0');\n            }\n\n            if (transport) {\n                if (transport.ufrag) {\n                    sdp.push('a=ice-ufrag:' + transport.ufrag);\n                }\n                if (transport.pwd) {\n                    sdp.push('a=ice-pwd:' + transport.pwd);\n                }\n\n                var pushedSetup = false;\n                fingerprints.forEach(function (fingerprint) {\n                    sdp.push('a=fingerprint:' + fingerprint.hash + ' ' + fingerprint.value);\n                    if (fingerprint.setup && !pushedSetup) {\n                        sdp.push('a=setup:' + fingerprint.setup);\n                    }\n                });\n\n                if (transport.sctp) {\n                    transport.sctp.forEach(function (map) {\n                        sdp.push('a=sctpmap:' + map.number + ' ' + map.protocol + ' ' + map.streams);\n                    });\n                }\n            }\n\n            if (desc.applicationType == 'rtp') {\n                sdp.push('a=' + (SENDERS[role][direction][content.senders] || 'sendrecv'));\n            }\n            sdp.push('a=mid:' + content.name);\n\n            if (desc.sources && desc.sources.length) {\n                (desc.sources[0].parameters || []).forEach(function (param) {\n                    if (param.key === 'msid') {\n                        sdp.push('a=msid:' + param.value);\n                    }\n                });\n            }\n\n            if (desc.mux) {\n                sdp.push('a=rtcp-mux');\n            }\n\n            var encryption = desc.encryption || [];\n            encryption.forEach(function (crypto) {\n                sdp.push('a=crypto:' + crypto.tag + ' ' + crypto.cipherSuite + ' ' + crypto.keyParams + (crypto.sessionParams ? ' ' + crypto.sessionParams : ''));\n            });\n            if (desc.googConferenceFlag) {\n                sdp.push('a=x-google-flag:conference');\n            }\n\n            payloads.forEach(function (payload) {\n                var rtpmap = 'a=rtpmap:' + payload.id + ' ' + payload.name + '/' + payload.clockrate;\n                if (payload.channels && payload.channels != '1') {\n                    rtpmap += '/' + payload.channels;\n                }\n                sdp.push(rtpmap);\n\n                if (payload.parameters && payload.parameters.length) {\n                    var fmtp = ['a=fmtp:' + payload.id];\n                    var parameters = [];\n                    payload.parameters.forEach(function (param) {\n                        parameters.push((param.key ? param.key + '=' : '') + param.value);\n                    });\n                    fmtp.push(parameters.join(';'));\n                    sdp.push(fmtp.join(' '));\n                }\n\n                if (payload.feedback) {\n                    payload.feedback.forEach(function (fb) {\n                        if (fb.type === 'trr-int') {\n                            sdp.push('a=rtcp-fb:' + payload.id + ' trr-int ' + (fb.value ? fb.value : '0'));\n                        } else {\n                            sdp.push('a=rtcp-fb:' + payload.id + ' ' + fb.type + (fb.subtype ? ' ' + fb.subtype : ''));\n                        }\n                    });\n                }\n            });\n\n            if (desc.feedback) {\n                desc.feedback.forEach(function (fb) {\n                    if (fb.type === 'trr-int') {\n                        sdp.push('a=rtcp-fb:* trr-int ' + (fb.value ? fb.value : '0'));\n                    } else {\n                        sdp.push('a=rtcp-fb:* ' + fb.type + (fb.subtype ? ' ' + fb.subtype : ''));\n                    }\n                });\n            }\n\n            var hdrExts = desc.headerExtensions || [];\n            hdrExts.forEach(function (hdr) {\n                sdp.push('a=extmap:' + hdr.id + (hdr.senders ? '/' + SENDERS[role][direction][hdr.senders] : '') + ' ' + hdr.uri);\n            });\n\n            var ssrcGroups = desc.sourceGroups || [];\n            ssrcGroups.forEach(function (ssrcGroup) {\n                sdp.push('a=ssrc-group:' + ssrcGroup.semantics + ' ' + ssrcGroup.sources.join(' '));\n            });\n\n            var ssrcs = desc.sources || [];\n            ssrcs.forEach(function (ssrc) {\n                for (var i = 0; i < ssrc.parameters.length; i++) {\n                    var param = ssrc.parameters[i];\n                    sdp.push('a=ssrc:' + (ssrc.ssrc || desc.ssrc) + ' ' + param.key + (param.value ? (':' + param.value) : ''));\n                }\n            });\n\n            var candidates = transport.candidates || [];\n            candidates.forEach(function (candidate) {\n                sdp.push(exports.toCandidateSDP(candidate));\n            });\n\n            return sdp.join('\\r\\n');\n        };\n\n        exports.toCandidateSDP = function (candidate) {\n            var sdp = [];\n\n            sdp.push(candidate.foundation);\n            sdp.push(candidate.component);\n            sdp.push(candidate.protocol.toUpperCase());\n            sdp.push(candidate.priority);\n            sdp.push(candidate.ip);\n            sdp.push(candidate.port);\n\n            var type = candidate.type;\n            sdp.push('typ');\n            sdp.push(type);\n            if (type === 'srflx' || type === 'prflx' || type === 'relay') {\n                if (candidate.relAddr && candidate.relPort) {\n                    sdp.push('raddr');\n                    sdp.push(candidate.relAddr);\n                    sdp.push('rport');\n                    sdp.push(candidate.relPort);\n                }\n            }\n            if (candidate.tcpType && candidate.protocol.toUpperCase() == 'TCP') {\n                sdp.push('tcptype');\n                sdp.push(candidate.tcpType);\n            }\n\n            sdp.push('generation');\n            sdp.push(candidate.generation || '0');\n\n            // FIXME: apparently this is wrong per spec\n            // but then, we need this when actually putting this into\n            // SDP so it's going to stay.\n            // decision needs to be revisited when browsers dont\n            // accept this any longer\n            return 'a=candidate:' + sdp.join(' ');\n        };\n\n    },{\"./senders\":56}],59:[function(require,module,exports){\n        /* eslint-env node */\n        'use strict';\n\n// SDP helpers.\n        var SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\n        SDPUtils.generateIdentifier = function() {\n            return Math.random().toString(36).substr(2, 10);\n        };\n\n// The RTCP CNAME used by all peerconnections from the same JS.\n        SDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\n        SDPUtils.splitLines = function(blob) {\n            return blob.trim().split('\\n').map(function(line) {\n                return line.trim();\n            });\n        };\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\n        SDPUtils.splitSections = function(blob) {\n            var parts = blob.split('\\nm=');\n            return parts.map(function(part, index) {\n                return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n            });\n        };\n\n// Returns lines that start with a certain prefix.\n        SDPUtils.matchPrefix = function(blob, prefix) {\n            return SDPUtils.splitLines(blob).filter(function(line) {\n                return line.indexOf(prefix) === 0;\n            });\n        };\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\n        SDPUtils.parseCandidate = function(line) {\n            var parts;\n            // Parse both variants.\n            if (line.indexOf('a=candidate:') === 0) {\n                parts = line.substring(12).split(' ');\n            } else {\n                parts = line.substring(10).split(' ');\n            }\n\n            var candidate = {\n                foundation: parts[0],\n                component: parts[1],\n                protocol: parts[2].toLowerCase(),\n                priority: parseInt(parts[3], 10),\n                ip: parts[4],\n                port: parseInt(parts[5], 10),\n                // skip parts[6] == 'typ'\n                type: parts[7]\n            };\n\n            for (var i = 8; i < parts.length; i += 2) {\n                switch (parts[i]) {\n                    case 'raddr':\n                        candidate.relatedAddress = parts[i + 1];\n                        break;\n                    case 'rport':\n                        candidate.relatedPort = parseInt(parts[i + 1], 10);\n                        break;\n                    case 'tcptype':\n                        candidate.tcpType = parts[i + 1];\n                        break;\n                    default: // extension handling, in particular ufrag\n                        candidate[parts[i]] = parts[i + 1];\n                        break;\n                }\n            }\n            return candidate;\n        };\n\n// Translates a candidate object into SDP candidate attribute.\n        SDPUtils.writeCandidate = function(candidate) {\n            var sdp = [];\n            sdp.push(candidate.foundation);\n            sdp.push(candidate.component);\n            sdp.push(candidate.protocol.toUpperCase());\n            sdp.push(candidate.priority);\n            sdp.push(candidate.ip);\n            sdp.push(candidate.port);\n\n            var type = candidate.type;\n            sdp.push('typ');\n            sdp.push(type);\n            if (type !== 'host' && candidate.relatedAddress &&\n                candidate.relatedPort) {\n                sdp.push('raddr');\n                sdp.push(candidate.relatedAddress); // was: relAddr\n                sdp.push('rport');\n                sdp.push(candidate.relatedPort); // was: relPort\n            }\n            if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n                sdp.push('tcptype');\n                sdp.push(candidate.tcpType);\n            }\n            return 'candidate:' + sdp.join(' ');\n        };\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\n        SDPUtils.parseIceOptions = function(line) {\n            return line.substr(14).split(' ');\n        }\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\n        SDPUtils.parseRtpMap = function(line) {\n            var parts = line.substr(9).split(' ');\n            var parsed = {\n                payloadType: parseInt(parts.shift(), 10) // was: id\n            };\n\n            parts = parts[0].split('/');\n\n            parsed.name = parts[0];\n            parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n            // was: channels\n            parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n            return parsed;\n        };\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\n        SDPUtils.writeRtpMap = function(codec) {\n            var pt = codec.payloadType;\n            if (codec.preferredPayloadType !== undefined) {\n                pt = codec.preferredPayloadType;\n            }\n            return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n                (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\n        };\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\n        SDPUtils.parseExtmap = function(line) {\n            var parts = line.substr(9).split(' ');\n            return {\n                id: parseInt(parts[0], 10),\n                direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n                uri: parts[1]\n            };\n        };\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\n        SDPUtils.writeExtmap = function(headerExtension) {\n            return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n                (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n                    ? '/' + headerExtension.direction\n                    : '') +\n                ' ' + headerExtension.uri + '\\r\\n';\n        };\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\n        SDPUtils.parseFmtp = function(line) {\n            var parsed = {};\n            var kv;\n            var parts = line.substr(line.indexOf(' ') + 1).split(';');\n            for (var j = 0; j < parts.length; j++) {\n                kv = parts[j].trim().split('=');\n                parsed[kv[0].trim()] = kv[1];\n            }\n            return parsed;\n        };\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\n        SDPUtils.writeFmtp = function(codec) {\n            var line = '';\n            var pt = codec.payloadType;\n            if (codec.preferredPayloadType !== undefined) {\n                pt = codec.preferredPayloadType;\n            }\n            if (codec.parameters && Object.keys(codec.parameters).length) {\n                var params = [];\n                Object.keys(codec.parameters).forEach(function(param) {\n                    params.push(param + '=' + codec.parameters[param]);\n                });\n                line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n            }\n            return line;\n        };\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\n        SDPUtils.parseRtcpFb = function(line) {\n            var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n            return {\n                type: parts.shift(),\n                parameter: parts.join(' ')\n            };\n        };\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\n        SDPUtils.writeRtcpFb = function(codec) {\n            var lines = '';\n            var pt = codec.payloadType;\n            if (codec.preferredPayloadType !== undefined) {\n                pt = codec.preferredPayloadType;\n            }\n            if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n                // FIXME: special handling for trr-int?\n                codec.rtcpFeedback.forEach(function(fb) {\n                    lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n                        (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n                        '\\r\\n';\n                });\n            }\n            return lines;\n        };\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\n        SDPUtils.parseSsrcMedia = function(line) {\n            var sp = line.indexOf(' ');\n            var parts = {\n                ssrc: parseInt(line.substr(7, sp - 7), 10)\n            };\n            var colon = line.indexOf(':', sp);\n            if (colon > -1) {\n                parts.attribute = line.substr(sp + 1, colon - sp - 1);\n                parts.value = line.substr(colon + 1);\n            } else {\n                parts.attribute = line.substr(sp + 1);\n            }\n            return parts;\n        };\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\n        SDPUtils.getMid = function(mediaSection) {\n            var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n            if (mid) {\n                return mid.substr(6);\n            }\n        }\n\n        SDPUtils.parseFingerprint = function(line) {\n            var parts = line.substr(14).split(' ');\n            return {\n                algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n                value: parts[1]\n            };\n        };\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\n        SDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n            var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n                'a=fingerprint:');\n            // Note: a=setup line is ignored since we use the 'auto' role.\n            // Note2: 'algorithm' is not case sensitive except in Edge.\n            return {\n                role: 'auto',\n                fingerprints: lines.map(SDPUtils.parseFingerprint)\n            };\n        };\n\n// Serializes DTLS parameters to SDP.\n        SDPUtils.writeDtlsParameters = function(params, setupType) {\n            var sdp = 'a=setup:' + setupType + '\\r\\n';\n            params.fingerprints.forEach(function(fp) {\n                sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n            });\n            return sdp;\n        };\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\n        SDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n            var lines = SDPUtils.splitLines(mediaSection);\n            // Search in session part, too.\n            lines = lines.concat(SDPUtils.splitLines(sessionpart));\n            var iceParameters = {\n                usernameFragment: lines.filter(function(line) {\n                    return line.indexOf('a=ice-ufrag:') === 0;\n                })[0].substr(12),\n                password: lines.filter(function(line) {\n                    return line.indexOf('a=ice-pwd:') === 0;\n                })[0].substr(10)\n            };\n            return iceParameters;\n        };\n\n// Serializes ICE parameters to SDP.\n        SDPUtils.writeIceParameters = function(params) {\n            return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n                'a=ice-pwd:' + params.password + '\\r\\n';\n        };\n\n// Parses the SDP media section and returns RTCRtpParameters.\n        SDPUtils.parseRtpParameters = function(mediaSection) {\n            var description = {\n                codecs: [],\n                headerExtensions: [],\n                fecMechanisms: [],\n                rtcp: []\n            };\n            var lines = SDPUtils.splitLines(mediaSection);\n            var mline = lines[0].split(' ');\n            for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n                var pt = mline[i];\n                var rtpmapline = SDPUtils.matchPrefix(\n                    mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n                if (rtpmapline) {\n                    var codec = SDPUtils.parseRtpMap(rtpmapline);\n                    var fmtps = SDPUtils.matchPrefix(\n                        mediaSection, 'a=fmtp:' + pt + ' ');\n                    // Only the first a=fmtp:<pt> is considered.\n                    codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n                    codec.rtcpFeedback = SDPUtils.matchPrefix(\n                        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n                        .map(SDPUtils.parseRtcpFb);\n                    description.codecs.push(codec);\n                    // parse FEC mechanisms from rtpmap lines.\n                    switch (codec.name.toUpperCase()) {\n                        case 'RED':\n                        case 'ULPFEC':\n                            description.fecMechanisms.push(codec.name.toUpperCase());\n                            break;\n                        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n                            break;\n                    }\n                }\n            }\n            SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n                description.headerExtensions.push(SDPUtils.parseExtmap(line));\n            });\n            // FIXME: parse rtcp.\n            return description;\n        };\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\n        SDPUtils.writeRtpDescription = function(kind, caps) {\n            var sdp = '';\n\n            // Build the mline.\n            sdp += 'm=' + kind + ' ';\n            sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n            sdp += ' UDP/TLS/RTP/SAVPF ';\n            sdp += caps.codecs.map(function(codec) {\n                if (codec.preferredPayloadType !== undefined) {\n                    return codec.preferredPayloadType;\n                }\n                return codec.payloadType;\n            }).join(' ') + '\\r\\n';\n\n            sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n            sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n            // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n            caps.codecs.forEach(function(codec) {\n                sdp += SDPUtils.writeRtpMap(codec);\n                sdp += SDPUtils.writeFmtp(codec);\n                sdp += SDPUtils.writeRtcpFb(codec);\n            });\n            var maxptime = 0;\n            caps.codecs.forEach(function(codec) {\n                if (codec.maxptime > maxptime) {\n                    maxptime = codec.maxptime;\n                }\n            });\n            if (maxptime > 0) {\n                sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n            }\n            sdp += 'a=rtcp-mux\\r\\n';\n\n            caps.headerExtensions.forEach(function(extension) {\n                sdp += SDPUtils.writeExtmap(extension);\n            });\n            // FIXME: write fecMechanisms.\n            return sdp;\n        };\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\n        SDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n            var encodingParameters = [];\n            var description = SDPUtils.parseRtpParameters(mediaSection);\n            var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n            var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n            // filter a=ssrc:... cname:, ignore PlanB-msid\n            var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                .map(function(line) {\n                    return SDPUtils.parseSsrcMedia(line);\n                })\n                .filter(function(parts) {\n                    return parts.attribute === 'cname';\n                });\n            var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n            var secondarySsrc;\n\n            var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n                .map(function(line) {\n                    var parts = line.split(' ');\n                    parts.shift();\n                    return parts.map(function(part) {\n                        return parseInt(part, 10);\n                    });\n                });\n            if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n                secondarySsrc = flows[0][1];\n            }\n\n            description.codecs.forEach(function(codec) {\n                if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n                    var encParam = {\n                        ssrc: primarySsrc,\n                        codecPayloadType: parseInt(codec.parameters.apt, 10),\n                        rtx: {\n                            ssrc: secondarySsrc\n                        }\n                    };\n                    encodingParameters.push(encParam);\n                    if (hasRed) {\n                        encParam = JSON.parse(JSON.stringify(encParam));\n                        encParam.fec = {\n                            ssrc: secondarySsrc,\n                            mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n                        };\n                        encodingParameters.push(encParam);\n                    }\n                }\n            });\n            if (encodingParameters.length === 0 && primarySsrc) {\n                encodingParameters.push({\n                    ssrc: primarySsrc\n                });\n            }\n\n            // we support both b=AS and b=TIAS but interpret AS as TIAS.\n            var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n            if (bandwidth.length) {\n                if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n                    bandwidth = parseInt(bandwidth[0].substr(7), 10);\n                } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n                    bandwidth = parseInt(bandwidth[0].substr(5), 10);\n                }\n                encodingParameters.forEach(function(params) {\n                    params.maxBitrate = bandwidth;\n                });\n            }\n            return encodingParameters;\n        };\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\n        SDPUtils.parseRtcpParameters = function(mediaSection) {\n            var rtcpParameters = {};\n\n            var cname;\n            // Gets the first SSRC. Note that with RTX there might be multiple\n            // SSRCs.\n            var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                .map(function(line) {\n                    return SDPUtils.parseSsrcMedia(line);\n                })\n                .filter(function(obj) {\n                    return obj.attribute === 'cname';\n                })[0];\n            if (remoteSsrc) {\n                rtcpParameters.cname = remoteSsrc.value;\n                rtcpParameters.ssrc = remoteSsrc.ssrc;\n            }\n\n            // Edge uses the compound attribute instead of reducedSize\n            // compound is !reducedSize\n            var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n            rtcpParameters.reducedSize = rsize.length > 0;\n            rtcpParameters.compound = rsize.length === 0;\n\n            // parses the rtcp-mux attrbute.\n            // Note that Edge does not support unmuxed RTCP.\n            var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n            rtcpParameters.mux = mux.length > 0;\n\n            return rtcpParameters;\n        };\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\n        SDPUtils.parseMsid = function(mediaSection) {\n            var parts;\n            var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n            if (spec.length === 1) {\n                parts = spec[0].substr(7).split(' ');\n                return {stream: parts[0], track: parts[1]};\n            }\n            var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                .map(function(line) {\n                    return SDPUtils.parseSsrcMedia(line);\n                })\n                .filter(function(parts) {\n                    return parts.attribute === 'msid';\n                });\n            if (planB.length > 0) {\n                parts = planB[0].value.split(' ');\n                return {stream: parts[0], track: parts[1]};\n            }\n        };\n\n        SDPUtils.writeSessionBoilerplate = function() {\n            // FIXME: sess-id should be an NTP timestamp.\n            return 'v=0\\r\\n' +\n                'o=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\\r\\n' +\n                's=-\\r\\n' +\n                't=0 0\\r\\n';\n        };\n\n        SDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n            var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n            // Map ICE parameters (ufrag, pwd) to SDP.\n            sdp += SDPUtils.writeIceParameters(\n                transceiver.iceGatherer.getLocalParameters());\n\n            // Map DTLS parameters to SDP.\n            sdp += SDPUtils.writeDtlsParameters(\n                transceiver.dtlsTransport.getLocalParameters(),\n                type === 'offer' ? 'actpass' : 'active');\n\n            sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n            if (transceiver.direction) {\n                sdp += 'a=' + transceiver.direction + '\\r\\n';\n            } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n                sdp += 'a=sendrecv\\r\\n';\n            } else if (transceiver.rtpSender) {\n                sdp += 'a=sendonly\\r\\n';\n            } else if (transceiver.rtpReceiver) {\n                sdp += 'a=recvonly\\r\\n';\n            } else {\n                sdp += 'a=inactive\\r\\n';\n            }\n\n            if (transceiver.rtpSender) {\n                // spec.\n                var msid = 'msid:' + stream.id + ' ' +\n                    transceiver.rtpSender.track.id + '\\r\\n';\n                sdp += 'a=' + msid;\n\n                // for Chrome.\n                sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n                    ' ' + msid;\n                if (transceiver.sendEncodingParameters[0].rtx) {\n                    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n                        ' ' + msid;\n                    sdp += 'a=ssrc-group:FID ' +\n                        transceiver.sendEncodingParameters[0].ssrc + ' ' +\n                        transceiver.sendEncodingParameters[0].rtx.ssrc +\n                        '\\r\\n';\n                }\n            }\n            // FIXME: this should be written by writeRtpDescription.\n            sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n                ' cname:' + SDPUtils.localCName + '\\r\\n';\n            if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n                sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n                    ' cname:' + SDPUtils.localCName + '\\r\\n';\n            }\n            return sdp;\n        };\n\n// Gets the direction from the mediaSection or the sessionpart.\n        SDPUtils.getDirection = function(mediaSection, sessionpart) {\n            // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n            var lines = SDPUtils.splitLines(mediaSection);\n            for (var i = 0; i < lines.length; i++) {\n                switch (lines[i]) {\n                    case 'a=sendrecv':\n                    case 'a=sendonly':\n                    case 'a=recvonly':\n                    case 'a=inactive':\n                        return lines[i].substr(2);\n                    default:\n                    // FIXME: What should happen here?\n                }\n            }\n            if (sessionpart) {\n                return SDPUtils.getDirection(sessionpart);\n            }\n            return 'sendrecv';\n        };\n\n        SDPUtils.getKind = function(mediaSection) {\n            var lines = SDPUtils.splitLines(mediaSection);\n            var mline = lines[0].split(' ');\n            return mline[0].substr(2);\n        };\n\n        SDPUtils.isRejected = function(mediaSection) {\n            return mediaSection.split(' ', 2)[1] === '0';\n        };\n\n// Expose public methods.\n        module.exports = SDPUtils;\n\n    },{}],60:[function(require,module,exports){\n\n        module.exports = require('./lib/');\n\n    },{\"./lib/\":61}],61:[function(require,module,exports){\n\n        /**\n         * Module dependencies.\n         */\n\n        var url = require('./url');\n        var parser = require('socket.io-parser');\n        var Manager = require('./manager');\n        var debug = require('debug')('socket.io-client');\n\n        /**\n         * Module exports.\n         */\n\n        module.exports = exports = lookup;\n\n        /**\n         * Managers cache.\n         */\n\n        var cache = exports.managers = {};\n\n        /**\n         * Looks up an existing `Manager` for multiplexing.\n         * If the user summons:\n         *\n         *   `io('http://localhost/a');`\n         *   `io('http://localhost/b');`\n         *\n         * We reuse the existing instance based on same scheme/port/host,\n         * and we initialize sockets for each namespace.\n         *\n         * @api public\n         */\n\n        function lookup(uri, opts) {\n            if (typeof uri == 'object') {\n                opts = uri;\n                uri = undefined;\n            }\n\n            opts = opts || {};\n\n            var parsed = url(uri);\n            var source = parsed.source;\n            var id = parsed.id;\n            var io;\n\n            if (opts.forceNew || opts['force new connection'] || false === opts.multiplex) {\n                debug('ignoring socket cache for %s', source);\n                io = Manager(source, opts);\n            } else {\n                if (!cache[id]) {\n                    debug('new io instance for %s', source);\n                    cache[id] = Manager(source, opts);\n                }\n                io = cache[id];\n            }\n\n            return io.socket(parsed.path);\n        }\n\n        /**\n         * Protocol version.\n         *\n         * @api public\n         */\n\n        exports.protocol = parser.protocol;\n\n        /**\n         * `connect`.\n         *\n         * @param {String} uri\n         * @api public\n         */\n\n        exports.connect = lookup;\n\n        /**\n         * Expose constructors for standalone build.\n         *\n         * @api public\n         */\n\n        exports.Manager = require('./manager');\n        exports.Socket = require('./socket');\n\n    },{\"./manager\":62,\"./socket\":64,\"./url\":65,\"debug\":19,\"socket.io-parser\":67}],62:[function(require,module,exports){\n\n        /**\n         * Module dependencies.\n         */\n\n        var url = require('./url');\n        var eio = require('engine.io-client');\n        var Socket = require('./socket');\n        var Emitter = require('component-emitter');\n        var parser = require('socket.io-parser');\n        var on = require('./on');\n        var bind = require('component-bind');\n        var object = require('object-component');\n        var debug = require('debug')('socket.io-client:manager');\n        var indexOf = require('indexof');\n        var Backoff = require('backo2');\n\n        /**\n         * Module exports\n         */\n\n        module.exports = Manager;\n\n        /**\n         * `Manager` constructor.\n         *\n         * @param {String} engine instance or engine uri/opts\n         * @param {Object} options\n         * @api public\n         */\n\n        function Manager(uri, opts){\n            if (!(this instanceof Manager)) return new Manager(uri, opts);\n            if (uri && ('object' == typeof uri)) {\n                opts = uri;\n                uri = undefined;\n            }\n            opts = opts || {};\n\n            opts.path = opts.path || '/socket.io';\n            this.nsps = {};\n            this.subs = [];\n            this.opts = opts;\n            this.reconnection(opts.reconnection !== false);\n            this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n            this.reconnectionDelay(opts.reconnectionDelay || 1000);\n            this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n            this.randomizationFactor(opts.randomizationFactor || 0.5);\n            this.backoff = new Backoff({\n                min: this.reconnectionDelay(),\n                max: this.reconnectionDelayMax(),\n                jitter: this.randomizationFactor()\n            });\n            this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n            this.readyState = 'closed';\n            this.uri = uri;\n            this.connected = [];\n            this.encoding = false;\n            this.packetBuffer = [];\n            this.encoder = new parser.Encoder();\n            this.decoder = new parser.Decoder();\n            this.autoConnect = opts.autoConnect !== false;\n            if (this.autoConnect) this.open();\n        }\n\n        /**\n         * Propagate given event to sockets and emit on `this`\n         *\n         * @api private\n         */\n\n        Manager.prototype.emitAll = function() {\n            this.emit.apply(this, arguments);\n            for (var nsp in this.nsps) {\n                this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n            }\n        };\n\n        /**\n         * Update `socket.id` of all sockets\n         *\n         * @api private\n         */\n\n        Manager.prototype.updateSocketIds = function(){\n            for (var nsp in this.nsps) {\n                this.nsps[nsp].id = this.engine.id;\n            }\n        };\n\n        /**\n         * Mix in `Emitter`.\n         */\n\n        Emitter(Manager.prototype);\n\n        /**\n         * Sets the `reconnection` config.\n         *\n         * @param {Boolean} true/false if it should automatically reconnect\n         * @return {Manager} self or value\n         * @api public\n         */\n\n        Manager.prototype.reconnection = function(v){\n            if (!arguments.length) return this._reconnection;\n            this._reconnection = !!v;\n            return this;\n        };\n\n        /**\n         * Sets the reconnection attempts config.\n         *\n         * @param {Number} max reconnection attempts before giving up\n         * @return {Manager} self or value\n         * @api public\n         */\n\n        Manager.prototype.reconnectionAttempts = function(v){\n            if (!arguments.length) return this._reconnectionAttempts;\n            this._reconnectionAttempts = v;\n            return this;\n        };\n\n        /**\n         * Sets the delay between reconnections.\n         *\n         * @param {Number} delay\n         * @return {Manager} self or value\n         * @api public\n         */\n\n        Manager.prototype.reconnectionDelay = function(v){\n            if (!arguments.length) return this._reconnectionDelay;\n            this._reconnectionDelay = v;\n            this.backoff && this.backoff.setMin(v);\n            return this;\n        };\n\n        Manager.prototype.randomizationFactor = function(v){\n            if (!arguments.length) return this._randomizationFactor;\n            this._randomizationFactor = v;\n            this.backoff && this.backoff.setJitter(v);\n            return this;\n        };\n\n        /**\n         * Sets the maximum delay between reconnections.\n         *\n         * @param {Number} delay\n         * @return {Manager} self or value\n         * @api public\n         */\n\n        Manager.prototype.reconnectionDelayMax = function(v){\n            if (!arguments.length) return this._reconnectionDelayMax;\n            this._reconnectionDelayMax = v;\n            this.backoff && this.backoff.setMax(v);\n            return this;\n        };\n\n        /**\n         * Sets the connection timeout. `false` to disable\n         *\n         * @return {Manager} self or value\n         * @api public\n         */\n\n        Manager.prototype.timeout = function(v){\n            if (!arguments.length) return this._timeout;\n            this._timeout = v;\n            return this;\n        };\n\n        /**\n         * Starts trying to reconnect if reconnection is enabled and we have not\n         * started reconnecting yet\n         *\n         * @api private\n         */\n\n        Manager.prototype.maybeReconnectOnOpen = function() {\n            // Only try to reconnect if it's the first time we're connecting\n            if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n                // keeps reconnection from firing twice for the same reconnection loop\n                this.reconnect();\n            }\n        };\n\n\n        /**\n         * Sets the current transport `socket`.\n         *\n         * @param {Function} optional, callback\n         * @return {Manager} self\n         * @api public\n         */\n\n        Manager.prototype.open =\n            Manager.prototype.connect = function(fn){\n                debug('readyState %s', this.readyState);\n                if (~this.readyState.indexOf('open')) return this;\n\n                debug('opening %s', this.uri);\n                this.engine = eio(this.uri, this.opts);\n                var socket = this.engine;\n                var self = this;\n                this.readyState = 'opening';\n                this.skipReconnect = false;\n\n                // emit `open`\n                var openSub = on(socket, 'open', function() {\n                    self.onopen();\n                    fn && fn();\n                });\n\n                // emit `connect_error`\n                var errorSub = on(socket, 'error', function(data){\n                    debug('connect_error');\n                    self.cleanup();\n                    self.readyState = 'closed';\n                    self.emitAll('connect_error', data);\n                    if (fn) {\n                        var err = new Error('Connection error');\n                        err.data = data;\n                        fn(err);\n                    } else {\n                        // Only do this if there is no fn to handle the error\n                        self.maybeReconnectOnOpen();\n                    }\n                });\n\n                // emit `connect_timeout`\n                if (false !== this._timeout) {\n                    var timeout = this._timeout;\n                    debug('connect attempt will timeout after %d', timeout);\n\n                    // set timer\n                    var timer = setTimeout(function(){\n                        debug('connect attempt timed out after %d', timeout);\n                        openSub.destroy();\n                        socket.close();\n                        socket.emit('error', 'timeout');\n                        self.emitAll('connect_timeout', timeout);\n                    }, timeout);\n\n                    this.subs.push({\n                        destroy: function(){\n                            clearTimeout(timer);\n                        }\n                    });\n                }\n\n                this.subs.push(openSub);\n                this.subs.push(errorSub);\n\n                return this;\n            };\n\n        /**\n         * Called upon transport open.\n         *\n         * @api private\n         */\n\n        Manager.prototype.onopen = function(){\n            debug('open');\n\n            // clear old subs\n            this.cleanup();\n\n            // mark as open\n            this.readyState = 'open';\n            this.emit('open');\n\n            // add new subs\n            var socket = this.engine;\n            this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n            this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n            this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n            this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n        };\n\n        /**\n         * Called with data.\n         *\n         * @api private\n         */\n\n        Manager.prototype.ondata = function(data){\n            this.decoder.add(data);\n        };\n\n        /**\n         * Called when parser fully decodes a packet.\n         *\n         * @api private\n         */\n\n        Manager.prototype.ondecoded = function(packet) {\n            this.emit('packet', packet);\n        };\n\n        /**\n         * Called upon socket error.\n         *\n         * @api private\n         */\n\n        Manager.prototype.onerror = function(err){\n            debug('error', err);\n            this.emitAll('error', err);\n        };\n\n        /**\n         * Creates a new socket for the given `nsp`.\n         *\n         * @return {Socket}\n         * @api public\n         */\n\n        Manager.prototype.socket = function(nsp){\n            var socket = this.nsps[nsp];\n            if (!socket) {\n                socket = new Socket(this, nsp);\n                this.nsps[nsp] = socket;\n                var self = this;\n                socket.on('connect', function(){\n                    socket.id = self.engine.id;\n                    if (!~indexOf(self.connected, socket)) {\n                        self.connected.push(socket);\n                    }\n                });\n            }\n            return socket;\n        };\n\n        /**\n         * Called upon a socket close.\n         *\n         * @param {Socket} socket\n         */\n\n        Manager.prototype.destroy = function(socket){\n            var index = indexOf(this.connected, socket);\n            if (~index) this.connected.splice(index, 1);\n            if (this.connected.length) return;\n\n            this.close();\n        };\n\n        /**\n         * Writes a packet.\n         *\n         * @param {Object} packet\n         * @api private\n         */\n\n        Manager.prototype.packet = function(packet){\n            debug('writing packet %j', packet);\n            var self = this;\n\n            if (!self.encoding) {\n                // encode, then write to engine with result\n                self.encoding = true;\n                this.encoder.encode(packet, function(encodedPackets) {\n                    for (var i = 0; i < encodedPackets.length; i++) {\n                        self.engine.write(encodedPackets[i]);\n                    }\n                    self.encoding = false;\n                    self.processPacketQueue();\n                });\n            } else { // add packet to the queue\n                self.packetBuffer.push(packet);\n            }\n        };\n\n        /**\n         * If packet buffer is non-empty, begins encoding the\n         * next packet in line.\n         *\n         * @api private\n         */\n\n        Manager.prototype.processPacketQueue = function() {\n            if (this.packetBuffer.length > 0 && !this.encoding) {\n                var pack = this.packetBuffer.shift();\n                this.packet(pack);\n            }\n        };\n\n        /**\n         * Clean up transport subscriptions and packet buffer.\n         *\n         * @api private\n         */\n\n        Manager.prototype.cleanup = function(){\n            var sub;\n            while (sub = this.subs.shift()) sub.destroy();\n\n            this.packetBuffer = [];\n            this.encoding = false;\n\n            this.decoder.destroy();\n        };\n\n        /**\n         * Close the current socket.\n         *\n         * @api private\n         */\n\n        Manager.prototype.close =\n            Manager.prototype.disconnect = function(){\n                this.skipReconnect = true;\n                this.backoff.reset();\n                this.readyState = 'closed';\n                this.engine && this.engine.close();\n            };\n\n        /**\n         * Called upon engine close.\n         *\n         * @api private\n         */\n\n        Manager.prototype.onclose = function(reason){\n            debug('close');\n            this.cleanup();\n            this.backoff.reset();\n            this.readyState = 'closed';\n            this.emit('close', reason);\n            if (this._reconnection && !this.skipReconnect) {\n                this.reconnect();\n            }\n        };\n\n        /**\n         * Attempt a reconnection.\n         *\n         * @api private\n         */\n\n        Manager.prototype.reconnect = function(){\n            if (this.reconnecting || this.skipReconnect) return this;\n\n            var self = this;\n\n            if (this.backoff.attempts >= this._reconnectionAttempts) {\n                debug('reconnect failed');\n                this.backoff.reset();\n                this.emitAll('reconnect_failed');\n                this.reconnecting = false;\n            } else {\n                var delay = this.backoff.duration();\n                debug('will wait %dms before reconnect attempt', delay);\n\n                this.reconnecting = true;\n                var timer = setTimeout(function(){\n                    if (self.skipReconnect) return;\n\n                    debug('attempting reconnect');\n                    self.emitAll('reconnect_attempt', self.backoff.attempts);\n                    self.emitAll('reconnecting', self.backoff.attempts);\n\n                    // check again for the case socket closed in above events\n                    if (self.skipReconnect) return;\n\n                    self.open(function(err){\n                        if (err) {\n                            debug('reconnect attempt error');\n                            self.reconnecting = false;\n                            self.reconnect();\n                            self.emitAll('reconnect_error', err.data);\n                        } else {\n                            debug('reconnect success');\n                            self.onreconnect();\n                        }\n                    });\n                }, delay);\n\n                this.subs.push({\n                    destroy: function(){\n                        clearTimeout(timer);\n                    }\n                });\n            }\n        };\n\n        /**\n         * Called upon successful reconnect.\n         *\n         * @api private\n         */\n\n        Manager.prototype.onreconnect = function(){\n            var attempt = this.backoff.attempts;\n            this.reconnecting = false;\n            this.backoff.reset();\n            this.updateSocketIds();\n            this.emitAll('reconnect', attempt);\n        };\n\n    },{\"./on\":63,\"./socket\":64,\"./url\":65,\"backo2\":13,\"component-bind\":16,\"component-emitter\":17,\"debug\":19,\"engine.io-client\":20,\"indexof\":41,\"object-component\":48,\"socket.io-parser\":67}],63:[function(require,module,exports){\n\n        /**\n         * Module exports.\n         */\n\n        module.exports = on;\n\n        /**\n         * Helper for subscriptions.\n         *\n         * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n         * @param {String} event name\n         * @param {Function} callback\n         * @api public\n         */\n\n        function on(obj, ev, fn) {\n            obj.on(ev, fn);\n            return {\n                destroy: function(){\n                    obj.removeListener(ev, fn);\n                }\n            };\n        }\n\n    },{}],64:[function(require,module,exports){\n\n        /**\n         * Module dependencies.\n         */\n\n        var parser = require('socket.io-parser');\n        var Emitter = require('component-emitter');\n        var toArray = require('to-array');\n        var on = require('./on');\n        var bind = require('component-bind');\n        var debug = require('debug')('socket.io-client:socket');\n        var hasBin = require('has-binary');\n\n        /**\n         * Module exports.\n         */\n\n        module.exports = exports = Socket;\n\n        /**\n         * Internal events (blacklisted).\n         * These events can't be emitted by the user.\n         *\n         * @api private\n         */\n\n        var events = {\n            connect: 1,\n            connect_error: 1,\n            connect_timeout: 1,\n            disconnect: 1,\n            error: 1,\n            reconnect: 1,\n            reconnect_attempt: 1,\n            reconnect_failed: 1,\n            reconnect_error: 1,\n            reconnecting: 1\n        };\n\n        /**\n         * Shortcut to `Emitter#emit`.\n         */\n\n        var emit = Emitter.prototype.emit;\n\n        /**\n         * `Socket` constructor.\n         *\n         * @api public\n         */\n\n        function Socket(io, nsp){\n            this.io = io;\n            this.nsp = nsp;\n            this.json = this; // compat\n            this.ids = 0;\n            this.acks = {};\n            if (this.io.autoConnect) this.open();\n            this.receiveBuffer = [];\n            this.sendBuffer = [];\n            this.connected = false;\n            this.disconnected = true;\n        }\n\n        /**\n         * Mix in `Emitter`.\n         */\n\n        Emitter(Socket.prototype);\n\n        /**\n         * Subscribe to open, close and packet events\n         *\n         * @api private\n         */\n\n        Socket.prototype.subEvents = function() {\n            if (this.subs) return;\n\n            var io = this.io;\n            this.subs = [\n                on(io, 'open', bind(this, 'onopen')),\n                on(io, 'packet', bind(this, 'onpacket')),\n                on(io, 'close', bind(this, 'onclose'))\n            ];\n        };\n\n        /**\n         * \"Opens\" the socket.\n         *\n         * @api public\n         */\n\n        Socket.prototype.open =\n            Socket.prototype.connect = function(){\n                if (this.connected) return this;\n\n                this.subEvents();\n                this.io.open(); // ensure open\n                if ('open' == this.io.readyState) this.onopen();\n                return this;\n            };\n\n        /**\n         * Sends a `message` event.\n         *\n         * @return {Socket} self\n         * @api public\n         */\n\n        Socket.prototype.send = function(){\n            var args = toArray(arguments);\n            args.unshift('message');\n            this.emit.apply(this, args);\n            return this;\n        };\n\n        /**\n         * Override `emit`.\n         * If the event is in `events`, it's emitted normally.\n         *\n         * @param {String} event name\n         * @return {Socket} self\n         * @api public\n         */\n\n        Socket.prototype.emit = function(ev){\n            if (events.hasOwnProperty(ev)) {\n                emit.apply(this, arguments);\n                return this;\n            }\n\n            var args = toArray(arguments);\n            var parserType = parser.EVENT; // default\n            if (hasBin(args)) { parserType = parser.BINARY_EVENT; } // binary\n            var packet = { type: parserType, data: args };\n\n            // event ack callback\n            if ('function' == typeof args[args.length - 1]) {\n                debug('emitting packet with ack id %d', this.ids);\n                this.acks[this.ids] = args.pop();\n                packet.id = this.ids++;\n            }\n\n            if (this.connected) {\n                this.packet(packet);\n            } else {\n                this.sendBuffer.push(packet);\n            }\n\n            return this;\n        };\n\n        /**\n         * Sends a packet.\n         *\n         * @param {Object} packet\n         * @api private\n         */\n\n        Socket.prototype.packet = function(packet){\n            packet.nsp = this.nsp;\n            this.io.packet(packet);\n        };\n\n        /**\n         * Called upon engine `open`.\n         *\n         * @api private\n         */\n\n        Socket.prototype.onopen = function(){\n            debug('transport is open - connecting');\n\n            // write connect packet if necessary\n            if ('/' != this.nsp) {\n                this.packet({ type: parser.CONNECT });\n            }\n        };\n\n        /**\n         * Called upon engine `close`.\n         *\n         * @param {String} reason\n         * @api private\n         */\n\n        Socket.prototype.onclose = function(reason){\n            debug('close (%s)', reason);\n            this.connected = false;\n            this.disconnected = true;\n            delete this.id;\n            this.emit('disconnect', reason);\n        };\n\n        /**\n         * Called with socket packet.\n         *\n         * @param {Object} packet\n         * @api private\n         */\n\n        Socket.prototype.onpacket = function(packet){\n            if (packet.nsp != this.nsp) return;\n\n            switch (packet.type) {\n                case parser.CONNECT:\n                    this.onconnect();\n                    break;\n\n                case parser.EVENT:\n                    this.onevent(packet);\n                    break;\n\n                case parser.BINARY_EVENT:\n                    this.onevent(packet);\n                    break;\n\n                case parser.ACK:\n                    this.onack(packet);\n                    break;\n\n                case parser.BINARY_ACK:\n                    this.onack(packet);\n                    break;\n\n                case parser.DISCONNECT:\n                    this.ondisconnect();\n                    break;\n\n                case parser.ERROR:\n                    this.emit('error', packet.data);\n                    break;\n            }\n        };\n\n        /**\n         * Called upon a server event.\n         *\n         * @param {Object} packet\n         * @api private\n         */\n\n        Socket.prototype.onevent = function(packet){\n            var args = packet.data || [];\n            debug('emitting event %j', args);\n\n            if (null != packet.id) {\n                debug('attaching ack callback to event');\n                args.push(this.ack(packet.id));\n            }\n\n            if (this.connected) {\n                emit.apply(this, args);\n            } else {\n                this.receiveBuffer.push(args);\n            }\n        };\n\n        /**\n         * Produces an ack callback to emit with an event.\n         *\n         * @api private\n         */\n\n        Socket.prototype.ack = function(id){\n            var self = this;\n            var sent = false;\n            return function(){\n                // prevent double callbacks\n                if (sent) return;\n                sent = true;\n                var args = toArray(arguments);\n                debug('sending ack %j', args);\n\n                var type = hasBin(args) ? parser.BINARY_ACK : parser.ACK;\n                self.packet({\n                    type: type,\n                    id: id,\n                    data: args\n                });\n            };\n        };\n\n        /**\n         * Called upon a server acknowlegement.\n         *\n         * @param {Object} packet\n         * @api private\n         */\n\n        Socket.prototype.onack = function(packet){\n            debug('calling ack %s with %j', packet.id, packet.data);\n            var fn = this.acks[packet.id];\n            fn.apply(this, packet.data);\n            delete this.acks[packet.id];\n        };\n\n        /**\n         * Called upon server connect.\n         *\n         * @api private\n         */\n\n        Socket.prototype.onconnect = function(){\n            this.connected = true;\n            this.disconnected = false;\n            this.emit('connect');\n            this.emitBuffered();\n        };\n\n        /**\n         * Emit buffered events (received and emitted).\n         *\n         * @api private\n         */\n\n        Socket.prototype.emitBuffered = function(){\n            var i;\n            for (i = 0; i < this.receiveBuffer.length; i++) {\n                emit.apply(this, this.receiveBuffer[i]);\n            }\n            this.receiveBuffer = [];\n\n            for (i = 0; i < this.sendBuffer.length; i++) {\n                this.packet(this.sendBuffer[i]);\n            }\n            this.sendBuffer = [];\n        };\n\n        /**\n         * Called upon server disconnect.\n         *\n         * @api private\n         */\n\n        Socket.prototype.ondisconnect = function(){\n            debug('server disconnect (%s)', this.nsp);\n            this.destroy();\n            this.onclose('io server disconnect');\n        };\n\n        /**\n         * Called upon forced client/server side disconnections,\n         * this method ensures the manager stops tracking us and\n         * that reconnections don't get triggered for this.\n         *\n         * @api private.\n         */\n\n        Socket.prototype.destroy = function(){\n            if (this.subs) {\n                // clean subscriptions to avoid reconnections\n                for (var i = 0; i < this.subs.length; i++) {\n                    this.subs[i].destroy();\n                }\n                this.subs = null;\n            }\n\n            this.io.destroy(this);\n        };\n\n        /**\n         * Disconnects the socket manually.\n         *\n         * @return {Socket} self\n         * @api public\n         */\n\n        Socket.prototype.close =\n            Socket.prototype.disconnect = function(){\n                if (this.connected) {\n                    debug('performing disconnect (%s)', this.nsp);\n                    this.packet({ type: parser.DISCONNECT });\n                }\n\n                // remove socket from pool\n                this.destroy();\n\n                if (this.connected) {\n                    // fire events\n                    this.onclose('io client disconnect');\n                }\n                return this;\n            };\n\n    },{\"./on\":63,\"component-bind\":16,\"component-emitter\":17,\"debug\":19,\"has-binary\":39,\"socket.io-parser\":67,\"to-array\":69}],65:[function(require,module,exports){\n        (function (global){\n\n            /**\n             * Module dependencies.\n             */\n\n            var parseuri = require('parseuri');\n            var debug = require('debug')('socket.io-client:url');\n\n            /**\n             * Module exports.\n             */\n\n            module.exports = url;\n\n            /**\n             * URL parser.\n             *\n             * @param {String} url\n             * @param {Object} An object meant to mimic window.location.\n             *                 Defaults to window.location.\n             * @api public\n             */\n\n            function url(uri, loc){\n                var obj = uri;\n\n                // default to window.location\n                var loc = loc || global.location;\n                if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n                // relative path support\n                if ('string' == typeof uri) {\n                    if ('/' == uri.charAt(0)) {\n                        if ('/' == uri.charAt(1)) {\n                            uri = loc.protocol + uri;\n                        } else {\n                            uri = loc.hostname + uri;\n                        }\n                    }\n\n                    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n                        debug('protocol-less url %s', uri);\n                        if ('undefined' != typeof loc) {\n                            uri = loc.protocol + '//' + uri;\n                        } else {\n                            uri = 'https://' + uri;\n                        }\n                    }\n\n                    // parse\n                    debug('parse %s', uri);\n                    obj = parseuri(uri);\n                }\n\n                // make sure we treat `localhost:80` and `localhost` equally\n                if (!obj.port) {\n                    if (/^(http|ws)$/.test(obj.protocol)) {\n                        obj.port = '80';\n                    }\n                    else if (/^(http|ws)s$/.test(obj.protocol)) {\n                        obj.port = '443';\n                    }\n                }\n\n                obj.path = obj.path || '/';\n\n                // define unique id\n                obj.id = obj.protocol + '://' + obj.host + ':' + obj.port;\n                // define href\n                obj.href = obj.protocol + '://' + obj.host + (loc && loc.port == obj.port ? '' : (':' + obj.port));\n\n                return obj;\n            }\n\n        }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{\"debug\":19,\"parseuri\":51}],66:[function(require,module,exports){\n        (function (global){\n            /*global Blob,File*/\n\n            /**\n             * Module requirements\n             */\n\n            var isArray = require('isarray');\n            var isBuf = require('./is-buffer');\n\n            /**\n             * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n             * Anything with blobs or files should be fed through removeBlobs before coming\n             * here.\n             *\n             * @param {Object} packet - socket.io event packet\n             * @return {Object} with deconstructed packet and list of buffers\n             * @api public\n             */\n\n            exports.deconstructPacket = function(packet){\n                var buffers = [];\n                var packetData = packet.data;\n\n                function _deconstructPacket(data) {\n                    if (!data) return data;\n\n                    if (isBuf(data)) {\n                        var placeholder = { _placeholder: true, num: buffers.length };\n                        buffers.push(data);\n                        return placeholder;\n                    } else if (isArray(data)) {\n                        var newData = new Array(data.length);\n                        for (var i = 0; i < data.length; i++) {\n                            newData[i] = _deconstructPacket(data[i]);\n                        }\n                        return newData;\n                    } else if ('object' == typeof data && !(data instanceof Date)) {\n                        var newData = {};\n                        for (var key in data) {\n                            newData[key] = _deconstructPacket(data[key]);\n                        }\n                        return newData;\n                    }\n                    return data;\n                }\n\n                var pack = packet;\n                pack.data = _deconstructPacket(packetData);\n                pack.attachments = buffers.length; // number of binary 'attachments'\n                return {packet: pack, buffers: buffers};\n            };\n\n            /**\n             * Reconstructs a binary packet from its placeholder packet and buffers\n             *\n             * @param {Object} packet - event packet with placeholders\n             * @param {Array} buffers - binary buffers to put in placeholder positions\n             * @return {Object} reconstructed packet\n             * @api public\n             */\n\n            exports.reconstructPacket = function(packet, buffers) {\n                var curPlaceHolder = 0;\n\n                function _reconstructPacket(data) {\n                    if (data && data._placeholder) {\n                        var buf = buffers[data.num]; // appropriate buffer (should be natural order anyway)\n                        return buf;\n                    } else if (isArray(data)) {\n                        for (var i = 0; i < data.length; i++) {\n                            data[i] = _reconstructPacket(data[i]);\n                        }\n                        return data;\n                    } else if (data && 'object' == typeof data) {\n                        for (var key in data) {\n                            data[key] = _reconstructPacket(data[key]);\n                        }\n                        return data;\n                    }\n                    return data;\n                }\n\n                packet.data = _reconstructPacket(packet.data);\n                packet.attachments = undefined; // no longer useful\n                return packet;\n            };\n\n            /**\n             * Asynchronously removes Blobs or Files from data via\n             * FileReader's readAsArrayBuffer method. Used before encoding\n             * data as msgpack. Calls callback with the blobless data.\n             *\n             * @param {Object} data\n             * @param {Function} callback\n             * @api private\n             */\n\n            exports.removeBlobs = function(data, callback) {\n                function _removeBlobs(obj, curKey, containingObject) {\n                    if (!obj) return obj;\n\n                    // convert any blob\n                    if ((global.Blob && obj instanceof Blob) ||\n                        (global.File && obj instanceof File)) {\n                        pendingBlobs++;\n\n                        // async filereader\n                        var fileReader = new FileReader();\n                        fileReader.onload = function() { // this.result == arraybuffer\n                            if (containingObject) {\n                                containingObject[curKey] = this.result;\n                            }\n                            else {\n                                bloblessData = this.result;\n                            }\n\n                            // if nothing pending its callback time\n                            if(! --pendingBlobs) {\n                                callback(bloblessData);\n                            }\n                        };\n\n                        fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n                    } else if (isArray(obj)) { // handle array\n                        for (var i = 0; i < obj.length; i++) {\n                            _removeBlobs(obj[i], i, obj);\n                        }\n                    } else if (obj && 'object' == typeof obj && !isBuf(obj)) { // and object\n                        for (var key in obj) {\n                            _removeBlobs(obj[key], key, obj);\n                        }\n                    }\n                }\n\n                var pendingBlobs = 0;\n                var bloblessData = data;\n                _removeBlobs(bloblessData);\n                if (!pendingBlobs) {\n                    callback(bloblessData);\n                }\n            };\n\n        }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{\"./is-buffer\":68,\"isarray\":42}],67:[function(require,module,exports){\n\n        /**\n         * Module dependencies.\n         */\n\n        var debug = require('debug')('socket.io-parser');\n        var json = require('json3');\n        var isArray = require('isarray');\n        var Emitter = require('component-emitter');\n        var binary = require('./binary');\n        var isBuf = require('./is-buffer');\n\n        /**\n         * Protocol version.\n         *\n         * @api public\n         */\n\n        exports.protocol = 4;\n\n        /**\n         * Packet types.\n         *\n         * @api public\n         */\n\n        exports.types = [\n            'CONNECT',\n            'DISCONNECT',\n            'EVENT',\n            'BINARY_EVENT',\n            'ACK',\n            'BINARY_ACK',\n            'ERROR'\n        ];\n\n        /**\n         * Packet type `connect`.\n         *\n         * @api public\n         */\n\n        exports.CONNECT = 0;\n\n        /**\n         * Packet type `disconnect`.\n         *\n         * @api public\n         */\n\n        exports.DISCONNECT = 1;\n\n        /**\n         * Packet type `event`.\n         *\n         * @api public\n         */\n\n        exports.EVENT = 2;\n\n        /**\n         * Packet type `ack`.\n         *\n         * @api public\n         */\n\n        exports.ACK = 3;\n\n        /**\n         * Packet type `error`.\n         *\n         * @api public\n         */\n\n        exports.ERROR = 4;\n\n        /**\n         * Packet type 'binary event'\n         *\n         * @api public\n         */\n\n        exports.BINARY_EVENT = 5;\n\n        /**\n         * Packet type `binary ack`. For acks with binary arguments.\n         *\n         * @api public\n         */\n\n        exports.BINARY_ACK = 6;\n\n        /**\n         * Encoder constructor.\n         *\n         * @api public\n         */\n\n        exports.Encoder = Encoder;\n\n        /**\n         * Decoder constructor.\n         *\n         * @api public\n         */\n\n        exports.Decoder = Decoder;\n\n        /**\n         * A socket.io Encoder instance\n         *\n         * @api public\n         */\n\n        function Encoder() {}\n\n        /**\n         * Encode a packet as a single string if non-binary, or as a\n         * buffer sequence, depending on packet type.\n         *\n         * @param {Object} obj - packet object\n         * @param {Function} callback - function to handle encodings (likely engine.write)\n         * @return Calls callback with Array of encodings\n         * @api public\n         */\n\n        Encoder.prototype.encode = function(obj, callback){\n            debug('encoding packet %j', obj);\n\n            if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n                encodeAsBinary(obj, callback);\n            }\n            else {\n                var encoding = encodeAsString(obj);\n                callback([encoding]);\n            }\n        };\n\n        /**\n         * Encode packet as string.\n         *\n         * @param {Object} packet\n         * @return {String} encoded\n         * @api private\n         */\n\n        function encodeAsString(obj) {\n            var str = '';\n            var nsp = false;\n\n            // first is type\n            str += obj.type;\n\n            // attachments if we have them\n            if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n                str += obj.attachments;\n                str += '-';\n            }\n\n            // if we have a namespace other than `/`\n            // we append it followed by a comma `,`\n            if (obj.nsp && '/' != obj.nsp) {\n                nsp = true;\n                str += obj.nsp;\n            }\n\n            // immediately followed by the id\n            if (null != obj.id) {\n                if (nsp) {\n                    str += ',';\n                    nsp = false;\n                }\n                str += obj.id;\n            }\n\n            // json data\n            if (null != obj.data) {\n                if (nsp) str += ',';\n                str += json.stringify(obj.data);\n            }\n\n            debug('encoded %j as %s', obj, str);\n            return str;\n        }\n\n        /**\n         * Encode packet as 'buffer sequence' by removing blobs, and\n         * deconstructing packet into object with placeholders and\n         * a list of buffers.\n         *\n         * @param {Object} packet\n         * @return {Buffer} encoded\n         * @api private\n         */\n\n        function encodeAsBinary(obj, callback) {\n\n            function writeEncoding(bloblessData) {\n                var deconstruction = binary.deconstructPacket(bloblessData);\n                var pack = encodeAsString(deconstruction.packet);\n                var buffers = deconstruction.buffers;\n\n                buffers.unshift(pack); // add packet info to beginning of data list\n                callback(buffers); // write all the buffers\n            }\n\n            binary.removeBlobs(obj, writeEncoding);\n        }\n\n        /**\n         * A socket.io Decoder instance\n         *\n         * @return {Object} decoder\n         * @api public\n         */\n\n        function Decoder() {\n            this.reconstructor = null;\n        }\n\n        /**\n         * Mix in `Emitter` with Decoder.\n         */\n\n        Emitter(Decoder.prototype);\n\n        /**\n         * Decodes an ecoded packet string into packet JSON.\n         *\n         * @param {String} obj - encoded packet\n         * @return {Object} packet\n         * @api public\n         */\n\n        Decoder.prototype.add = function(obj) {\n            var packet;\n            if ('string' == typeof obj) {\n                packet = decodeString(obj);\n                if (exports.BINARY_EVENT == packet.type || exports.BINARY_ACK == packet.type) { // binary packet's json\n                    this.reconstructor = new BinaryReconstructor(packet);\n\n                    // no attachments, labeled binary but no binary data to follow\n                    if (this.reconstructor.reconPack.attachments === 0) {\n                        this.emit('decoded', packet);\n                    }\n                } else { // non-binary full packet\n                    this.emit('decoded', packet);\n                }\n            }\n            else if (isBuf(obj) || obj.base64) { // raw binary data\n                if (!this.reconstructor) {\n                    throw new Error('got binary data when not reconstructing a packet');\n                } else {\n                    packet = this.reconstructor.takeBinaryData(obj);\n                    if (packet) { // received final buffer\n                        this.reconstructor = null;\n                        this.emit('decoded', packet);\n                    }\n                }\n            }\n            else {\n                throw new Error('Unknown type: ' + obj);\n            }\n        };\n\n        /**\n         * Decode a packet String (JSON data)\n         *\n         * @param {String} str\n         * @return {Object} packet\n         * @api private\n         */\n\n        function decodeString(str) {\n            var p = {};\n            var i = 0;\n\n            // look up type\n            p.type = Number(str.charAt(0));\n            if (null == exports.types[p.type]) return error();\n\n            // look up attachments if type binary\n            if (exports.BINARY_EVENT == p.type || exports.BINARY_ACK == p.type) {\n                var buf = '';\n                while (str.charAt(++i) != '-') {\n                    buf += str.charAt(i);\n                    if (i == str.length) break;\n                }\n                if (buf != Number(buf) || str.charAt(i) != '-') {\n                    throw new Error('Illegal attachments');\n                }\n                p.attachments = Number(buf);\n            }\n\n            // look up namespace (if any)\n            if ('/' == str.charAt(i + 1)) {\n                p.nsp = '';\n                while (++i) {\n                    var c = str.charAt(i);\n                    if (',' == c) break;\n                    p.nsp += c;\n                    if (i == str.length) break;\n                }\n            } else {\n                p.nsp = '/';\n            }\n\n            // look up id\n            var next = str.charAt(i + 1);\n            if ('' !== next && Number(next) == next) {\n                p.id = '';\n                while (++i) {\n                    var c = str.charAt(i);\n                    if (null == c || Number(c) != c) {\n                        --i;\n                        break;\n                    }\n                    p.id += str.charAt(i);\n                    if (i == str.length) break;\n                }\n                p.id = Number(p.id);\n            }\n\n            // look up json data\n            if (str.charAt(++i)) {\n                try {\n                    p.data = json.parse(str.substr(i));\n                } catch(e){\n                    return error();\n                }\n            }\n\n            debug('decoded %s as %j', str, p);\n            return p;\n        }\n\n        /**\n         * Deallocates a parser's resources\n         *\n         * @api public\n         */\n\n        Decoder.prototype.destroy = function() {\n            if (this.reconstructor) {\n                this.reconstructor.finishedReconstruction();\n            }\n        };\n\n        /**\n         * A manager of a binary event's 'buffer sequence'. Should\n         * be constructed whenever a packet of type BINARY_EVENT is\n         * decoded.\n         *\n         * @param {Object} packet\n         * @return {BinaryReconstructor} initialized reconstructor\n         * @api private\n         */\n\n        function BinaryReconstructor(packet) {\n            this.reconPack = packet;\n            this.buffers = [];\n        }\n\n        /**\n         * Method to be called when binary data received from connection\n         * after a BINARY_EVENT packet.\n         *\n         * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n         * @return {null | Object} returns null if more binary data is expected or\n         *   a reconstructed packet object if all buffers have been received.\n         * @api private\n         */\n\n        BinaryReconstructor.prototype.takeBinaryData = function(binData) {\n            this.buffers.push(binData);\n            if (this.buffers.length == this.reconPack.attachments) { // done with buffer list\n                var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n                this.finishedReconstruction();\n                return packet;\n            }\n            return null;\n        };\n\n        /**\n         * Cleans up binary packet reconstruction variables.\n         *\n         * @api private\n         */\n\n        BinaryReconstructor.prototype.finishedReconstruction = function() {\n            this.reconPack = null;\n            this.buffers = [];\n        };\n\n        function error(data){\n            return {\n                type: exports.ERROR,\n                data: 'parser error'\n            };\n        }\n\n    },{\"./binary\":66,\"./is-buffer\":68,\"component-emitter\":17,\"debug\":19,\"isarray\":42,\"json3\":43}],68:[function(require,module,exports){\n        (function (global){\n\n            module.exports = isBuf;\n\n            /**\n             * Returns true if obj is a buffer or an arraybuffer.\n             *\n             * @api private\n             */\n\n            function isBuf(obj) {\n                return (global.Buffer && global.Buffer.isBuffer(obj)) ||\n                    (global.ArrayBuffer && obj instanceof ArrayBuffer);\n            }\n\n        }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{}],69:[function(require,module,exports){\n        module.exports = toArray\n\n        function toArray(list, index) {\n            var array = []\n\n            index = index || 0\n\n            for (var i = index || 0; i < list.length; i++) {\n                array[i - index] = list[i]\n            }\n\n            return array\n        }\n\n    },{}],70:[function(require,module,exports){\n        (function (global){\n            /*! https://mths.be/utf8js v2.0.0 by @mathias */\n            ;(function(root) {\n\n                // Detect free variables `exports`\n                var freeExports = typeof exports == 'object' && exports;\n\n                // Detect free variable `module`\n                var freeModule = typeof module == 'object' && module &&\n                    module.exports == freeExports && module;\n\n                // Detect free variable `global`, from Node.js or Browserified code,\n                // and use it as `root`\n                var freeGlobal = typeof global == 'object' && global;\n                if (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n                    root = freeGlobal;\n                }\n\n                /*--------------------------------------------------------------------------*/\n\n                var stringFromCharCode = String.fromCharCode;\n\n                // Taken from https://mths.be/punycode\n                function ucs2decode(string) {\n                    var output = [];\n                    var counter = 0;\n                    var length = string.length;\n                    var value;\n                    var extra;\n                    while (counter < length) {\n                        value = string.charCodeAt(counter++);\n                        if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n                            // high surrogate, and there is a next character\n                            extra = string.charCodeAt(counter++);\n                            if ((extra & 0xFC00) == 0xDC00) { // low surrogate\n                                output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n                            } else {\n                                // unmatched surrogate; only append this code unit, in case the next\n                                // code unit is the high surrogate of a surrogate pair\n                                output.push(value);\n                                counter--;\n                            }\n                        } else {\n                            output.push(value);\n                        }\n                    }\n                    return output;\n                }\n\n                // Taken from https://mths.be/punycode\n                function ucs2encode(array) {\n                    var length = array.length;\n                    var index = -1;\n                    var value;\n                    var output = '';\n                    while (++index < length) {\n                        value = array[index];\n                        if (value > 0xFFFF) {\n                            value -= 0x10000;\n                            output += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n                            value = 0xDC00 | value & 0x3FF;\n                        }\n                        output += stringFromCharCode(value);\n                    }\n                    return output;\n                }\n\n                function checkScalarValue(codePoint) {\n                    if (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n                        throw Error(\n                            'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n                            ' is not a scalar value'\n                        );\n                    }\n                }\n                /*--------------------------------------------------------------------------*/\n\n                function createByte(codePoint, shift) {\n                    return stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n                }\n\n                function encodeCodePoint(codePoint) {\n                    if ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n                        return stringFromCharCode(codePoint);\n                    }\n                    var symbol = '';\n                    if ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n                        symbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n                    }\n                    else if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n                        checkScalarValue(codePoint);\n                        symbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n                        symbol += createByte(codePoint, 6);\n                    }\n                    else if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n                        symbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n                        symbol += createByte(codePoint, 12);\n                        symbol += createByte(codePoint, 6);\n                    }\n                    symbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n                    return symbol;\n                }\n\n                function utf8encode(string) {\n                    var codePoints = ucs2decode(string);\n                    var length = codePoints.length;\n                    var index = -1;\n                    var codePoint;\n                    var byteString = '';\n                    while (++index < length) {\n                        codePoint = codePoints[index];\n                        byteString += encodeCodePoint(codePoint);\n                    }\n                    return byteString;\n                }\n\n                /*--------------------------------------------------------------------------*/\n\n                function readContinuationByte() {\n                    if (byteIndex >= byteCount) {\n                        throw Error('Invalid byte index');\n                    }\n\n                    var continuationByte = byteArray[byteIndex] & 0xFF;\n                    byteIndex++;\n\n                    if ((continuationByte & 0xC0) == 0x80) {\n                        return continuationByte & 0x3F;\n                    }\n\n                    // If we end up here, its not a continuation byte\n                    throw Error('Invalid continuation byte');\n                }\n\n                function decodeSymbol() {\n                    var byte1;\n                    var byte2;\n                    var byte3;\n                    var byte4;\n                    var codePoint;\n\n                    if (byteIndex > byteCount) {\n                        throw Error('Invalid byte index');\n                    }\n\n                    if (byteIndex == byteCount) {\n                        return false;\n                    }\n\n                    // Read first byte\n                    byte1 = byteArray[byteIndex] & 0xFF;\n                    byteIndex++;\n\n                    // 1-byte sequence (no continuation bytes)\n                    if ((byte1 & 0x80) == 0) {\n                        return byte1;\n                    }\n\n                    // 2-byte sequence\n                    if ((byte1 & 0xE0) == 0xC0) {\n                        var byte2 = readContinuationByte();\n                        codePoint = ((byte1 & 0x1F) << 6) | byte2;\n                        if (codePoint >= 0x80) {\n                            return codePoint;\n                        } else {\n                            throw Error('Invalid continuation byte');\n                        }\n                    }\n\n                    // 3-byte sequence (may include unpaired surrogates)\n                    if ((byte1 & 0xF0) == 0xE0) {\n                        byte2 = readContinuationByte();\n                        byte3 = readContinuationByte();\n                        codePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n                        if (codePoint >= 0x0800) {\n                            checkScalarValue(codePoint);\n                            return codePoint;\n                        } else {\n                            throw Error('Invalid continuation byte');\n                        }\n                    }\n\n                    // 4-byte sequence\n                    if ((byte1 & 0xF8) == 0xF0) {\n                        byte2 = readContinuationByte();\n                        byte3 = readContinuationByte();\n                        byte4 = readContinuationByte();\n                        codePoint = ((byte1 & 0x0F) << 0x12) | (byte2 << 0x0C) |\n                            (byte3 << 0x06) | byte4;\n                        if (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n                            return codePoint;\n                        }\n                    }\n\n                    throw Error('Invalid UTF-8 detected');\n                }\n\n                var byteArray;\n                var byteCount;\n                var byteIndex;\n                function utf8decode(byteString) {\n                    byteArray = ucs2decode(byteString);\n                    byteCount = byteArray.length;\n                    byteIndex = 0;\n                    var codePoints = [];\n                    var tmp;\n                    while ((tmp = decodeSymbol()) !== false) {\n                        codePoints.push(tmp);\n                    }\n                    return ucs2encode(codePoints);\n                }\n\n                /*--------------------------------------------------------------------------*/\n\n                var utf8 = {\n                    'version': '2.0.0',\n                    'encode': utf8encode,\n                    'decode': utf8decode\n                };\n\n                // Some AMD build optimizers, like r.js, check for specific condition patterns\n                // like the following:\n                if (\n                    typeof define == 'function' &&\n                    typeof define.amd == 'object' &&\n                    define.amd\n                ) {\n                    define(function() {\n                        return utf8;\n                    });\n                }\telse if (freeExports && !freeExports.nodeType) {\n                    if (freeModule) { // in Node.js or RingoJS v0.8.0+\n                        freeModule.exports = utf8;\n                    } else { // in Narwhal or RingoJS v0.7.0-\n                        var object = {};\n                        var hasOwnProperty = object.hasOwnProperty;\n                        for (var key in utf8) {\n                            hasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\n                        }\n                    }\n                } else { // in Rhino or a web browser\n                    root.utf8 = utf8;\n                }\n\n            }(this));\n\n        }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{}],71:[function(require,module,exports){\n        if (typeof Object.create === 'function') {\n            // implementation from standard node.js 'util' module\n            module.exports = function inherits(ctor, superCtor) {\n                ctor.super_ = superCtor\n                ctor.prototype = Object.create(superCtor.prototype, {\n                    constructor: {\n                        value: ctor,\n                        enumerable: false,\n                        writable: true,\n                        configurable: true\n                    }\n                });\n            };\n        } else {\n            // old school shim for old browsers\n            module.exports = function inherits(ctor, superCtor) {\n                ctor.super_ = superCtor\n                var TempCtor = function () {}\n                TempCtor.prototype = superCtor.prototype\n                ctor.prototype = new TempCtor()\n                ctor.prototype.constructor = ctor\n            }\n        }\n\n    },{}],72:[function(require,module,exports){\n        module.exports = function isBuffer(arg) {\n            return arg && typeof arg === 'object'\n                && typeof arg.copy === 'function'\n                && typeof arg.fill === 'function'\n                && typeof arg.readUInt8 === 'function';\n        }\n    },{}],73:[function(require,module,exports){\n        (function (process,global){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n            var formatRegExp = /%[sdj%]/g;\n            exports.format = function(f) {\n                if (!isString(f)) {\n                    var objects = [];\n                    for (var i = 0; i < arguments.length; i++) {\n                        objects.push(inspect(arguments[i]));\n                    }\n                    return objects.join(' ');\n                }\n\n                var i = 1;\n                var args = arguments;\n                var len = args.length;\n                var str = String(f).replace(formatRegExp, function(x) {\n                    if (x === '%%') return '%';\n                    if (i >= len) return x;\n                    switch (x) {\n                        case '%s': return String(args[i++]);\n                        case '%d': return Number(args[i++]);\n                        case '%j':\n                            try {\n                                return JSON.stringify(args[i++]);\n                            } catch (_) {\n                                return '[Circular]';\n                            }\n                        default:\n                            return x;\n                    }\n                });\n                for (var x = args[i]; i < len; x = args[++i]) {\n                    if (isNull(x) || !isObject(x)) {\n                        str += ' ' + x;\n                    } else {\n                        str += ' ' + inspect(x);\n                    }\n                }\n                return str;\n            };\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\n            exports.deprecate = function(fn, msg) {\n                // Allow for deprecating things in the process of starting up.\n                if (isUndefined(global.process)) {\n                    return function() {\n                        return exports.deprecate(fn, msg).apply(this, arguments);\n                    };\n                }\n\n                if (process.noDeprecation === true) {\n                    return fn;\n                }\n\n                var warned = false;\n                function deprecated() {\n                    if (!warned) {\n                        if (process.throwDeprecation) {\n                            throw new Error(msg);\n                        } else if (process.traceDeprecation) {\n                            console.trace(msg);\n                        } else {\n                            console.error(msg);\n                        }\n                        warned = true;\n                    }\n                    return fn.apply(this, arguments);\n                }\n\n                return deprecated;\n            };\n\n\n            var debugs = {};\n            var debugEnviron;\n            exports.debuglog = function(set) {\n                if (isUndefined(debugEnviron))\n                    debugEnviron = process.env.NODE_DEBUG || '';\n                set = set.toUpperCase();\n                if (!debugs[set]) {\n                    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n                        var pid = process.pid;\n                        debugs[set] = function() {\n                            var msg = exports.format.apply(exports, arguments);\n                            console.error('%s %d: %s', set, pid, msg);\n                        };\n                    } else {\n                        debugs[set] = function() {};\n                    }\n                }\n                return debugs[set];\n            };\n\n\n            /**\n             * Echos the value of a value. Trys to print the value out\n             * in the best way possible given the different types.\n             *\n             * @param {Object} obj The object to print out.\n             * @param {Object} opts Optional options object that alters the output.\n             */\n            /* legacy: obj, showHidden, depth, colors*/\n            function inspect(obj, opts) {\n                // default options\n                var ctx = {\n                    seen: [],\n                    stylize: stylizeNoColor\n                };\n                // legacy...\n                if (arguments.length >= 3) ctx.depth = arguments[2];\n                if (arguments.length >= 4) ctx.colors = arguments[3];\n                if (isBoolean(opts)) {\n                    // legacy...\n                    ctx.showHidden = opts;\n                } else if (opts) {\n                    // got an \"options\" object\n                    exports._extend(ctx, opts);\n                }\n                // set default options\n                if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n                if (isUndefined(ctx.depth)) ctx.depth = 2;\n                if (isUndefined(ctx.colors)) ctx.colors = false;\n                if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n                if (ctx.colors) ctx.stylize = stylizeWithColor;\n                return formatValue(ctx, obj, ctx.depth);\n            }\n            exports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\n            inspect.colors = {\n                'bold' : [1, 22],\n                'italic' : [3, 23],\n                'underline' : [4, 24],\n                'inverse' : [7, 27],\n                'white' : [37, 39],\n                'grey' : [90, 39],\n                'black' : [30, 39],\n                'blue' : [34, 39],\n                'cyan' : [36, 39],\n                'green' : [32, 39],\n                'magenta' : [35, 39],\n                'red' : [31, 39],\n                'yellow' : [33, 39]\n            };\n\n// Don't use 'blue' not visible on cmd.exe\n            inspect.styles = {\n                'special': 'cyan',\n                'number': 'yellow',\n                'boolean': 'yellow',\n                'undefined': 'grey',\n                'null': 'bold',\n                'string': 'green',\n                'date': 'magenta',\n                // \"name\": intentionally not styling\n                'regexp': 'red'\n            };\n\n\n            function stylizeWithColor(str, styleType) {\n                var style = inspect.styles[styleType];\n\n                if (style) {\n                    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n                        '\\u001b[' + inspect.colors[style][1] + 'm';\n                } else {\n                    return str;\n                }\n            }\n\n\n            function stylizeNoColor(str, styleType) {\n                return str;\n            }\n\n\n            function arrayToHash(array) {\n                var hash = {};\n\n                array.forEach(function(val, idx) {\n                    hash[val] = true;\n                });\n\n                return hash;\n            }\n\n\n            function formatValue(ctx, value, recurseTimes) {\n                // Provide a hook for user-specified inspect functions.\n                // Check that value is an object with an inspect function on it\n                if (ctx.customInspect &&\n                    value &&\n                    isFunction(value.inspect) &&\n                    // Filter out the util module, it's inspect function is special\n                    value.inspect !== exports.inspect &&\n                    // Also filter out any prototype objects using the circular check.\n                    !(value.constructor && value.constructor.prototype === value)) {\n                    var ret = value.inspect(recurseTimes, ctx);\n                    if (!isString(ret)) {\n                        ret = formatValue(ctx, ret, recurseTimes);\n                    }\n                    return ret;\n                }\n\n                // Primitive types cannot have properties\n                var primitive = formatPrimitive(ctx, value);\n                if (primitive) {\n                    return primitive;\n                }\n\n                // Look up the keys of the object.\n                var keys = Object.keys(value);\n                var visibleKeys = arrayToHash(keys);\n\n                if (ctx.showHidden) {\n                    keys = Object.getOwnPropertyNames(value);\n                }\n\n                // IE doesn't make error fields non-enumerable\n                // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n                if (isError(value)\n                    && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n                    return formatError(value);\n                }\n\n                // Some type of object without properties can be shortcutted.\n                if (keys.length === 0) {\n                    if (isFunction(value)) {\n                        var name = value.name ? ': ' + value.name : '';\n                        return ctx.stylize('[Function' + name + ']', 'special');\n                    }\n                    if (isRegExp(value)) {\n                        return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n                    }\n                    if (isDate(value)) {\n                        return ctx.stylize(Date.prototype.toString.call(value), 'date');\n                    }\n                    if (isError(value)) {\n                        return formatError(value);\n                    }\n                }\n\n                var base = '', array = false, braces = ['{', '}'];\n\n                // Make Array say that they are Array\n                if (isArray(value)) {\n                    array = true;\n                    braces = ['[', ']'];\n                }\n\n                // Make functions say that they are functions\n                if (isFunction(value)) {\n                    var n = value.name ? ': ' + value.name : '';\n                    base = ' [Function' + n + ']';\n                }\n\n                // Make RegExps say that they are RegExps\n                if (isRegExp(value)) {\n                    base = ' ' + RegExp.prototype.toString.call(value);\n                }\n\n                // Make dates with properties first say the date\n                if (isDate(value)) {\n                    base = ' ' + Date.prototype.toUTCString.call(value);\n                }\n\n                // Make error with message first say the error\n                if (isError(value)) {\n                    base = ' ' + formatError(value);\n                }\n\n                if (keys.length === 0 && (!array || value.length == 0)) {\n                    return braces[0] + base + braces[1];\n                }\n\n                if (recurseTimes < 0) {\n                    if (isRegExp(value)) {\n                        return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n                    } else {\n                        return ctx.stylize('[Object]', 'special');\n                    }\n                }\n\n                ctx.seen.push(value);\n\n                var output;\n                if (array) {\n                    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n                } else {\n                    output = keys.map(function(key) {\n                        return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n                    });\n                }\n\n                ctx.seen.pop();\n\n                return reduceToSingleString(output, base, braces);\n            }\n\n\n            function formatPrimitive(ctx, value) {\n                if (isUndefined(value))\n                    return ctx.stylize('undefined', 'undefined');\n                if (isString(value)) {\n                    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                        .replace(/'/g, \"\\\\'\")\n                        .replace(/\\\\\"/g, '\"') + '\\'';\n                    return ctx.stylize(simple, 'string');\n                }\n                if (isNumber(value))\n                    return ctx.stylize('' + value, 'number');\n                if (isBoolean(value))\n                    return ctx.stylize('' + value, 'boolean');\n                // For some reason typeof null is \"object\", so special case here.\n                if (isNull(value))\n                    return ctx.stylize('null', 'null');\n            }\n\n\n            function formatError(value) {\n                return '[' + Error.prototype.toString.call(value) + ']';\n            }\n\n\n            function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n                var output = [];\n                for (var i = 0, l = value.length; i < l; ++i) {\n                    if (hasOwnProperty(value, String(i))) {\n                        output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n                            String(i), true));\n                    } else {\n                        output.push('');\n                    }\n                }\n                keys.forEach(function(key) {\n                    if (!key.match(/^\\d+$/)) {\n                        output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n                            key, true));\n                    }\n                });\n                return output;\n            }\n\n\n            function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n                var name, str, desc;\n                desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n                if (desc.get) {\n                    if (desc.set) {\n                        str = ctx.stylize('[Getter/Setter]', 'special');\n                    } else {\n                        str = ctx.stylize('[Getter]', 'special');\n                    }\n                } else {\n                    if (desc.set) {\n                        str = ctx.stylize('[Setter]', 'special');\n                    }\n                }\n                if (!hasOwnProperty(visibleKeys, key)) {\n                    name = '[' + key + ']';\n                }\n                if (!str) {\n                    if (ctx.seen.indexOf(desc.value) < 0) {\n                        if (isNull(recurseTimes)) {\n                            str = formatValue(ctx, desc.value, null);\n                        } else {\n                            str = formatValue(ctx, desc.value, recurseTimes - 1);\n                        }\n                        if (str.indexOf('\\n') > -1) {\n                            if (array) {\n                                str = str.split('\\n').map(function(line) {\n                                    return '  ' + line;\n                                }).join('\\n').substr(2);\n                            } else {\n                                str = '\\n' + str.split('\\n').map(function(line) {\n                                    return '   ' + line;\n                                }).join('\\n');\n                            }\n                        }\n                    } else {\n                        str = ctx.stylize('[Circular]', 'special');\n                    }\n                }\n                if (isUndefined(name)) {\n                    if (array && key.match(/^\\d+$/)) {\n                        return str;\n                    }\n                    name = JSON.stringify('' + key);\n                    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n                        name = name.substr(1, name.length - 2);\n                        name = ctx.stylize(name, 'name');\n                    } else {\n                        name = name.replace(/'/g, \"\\\\'\")\n                            .replace(/\\\\\"/g, '\"')\n                            .replace(/(^\"|\"$)/g, \"'\");\n                        name = ctx.stylize(name, 'string');\n                    }\n                }\n\n                return name + ': ' + str;\n            }\n\n\n            function reduceToSingleString(output, base, braces) {\n                var numLinesEst = 0;\n                var length = output.reduce(function(prev, cur) {\n                    numLinesEst++;\n                    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n                    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n                }, 0);\n\n                if (length > 60) {\n                    return braces[0] +\n                        (base === '' ? '' : base + '\\n ') +\n                        ' ' +\n                        output.join(',\\n  ') +\n                        ' ' +\n                        braces[1];\n                }\n\n                return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n            }\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n            function isArray(ar) {\n                return Array.isArray(ar);\n            }\n            exports.isArray = isArray;\n\n            function isBoolean(arg) {\n                return typeof arg === 'boolean';\n            }\n            exports.isBoolean = isBoolean;\n\n            function isNull(arg) {\n                return arg === null;\n            }\n            exports.isNull = isNull;\n\n            function isNullOrUndefined(arg) {\n                return arg == null;\n            }\n            exports.isNullOrUndefined = isNullOrUndefined;\n\n            function isNumber(arg) {\n                return typeof arg === 'number';\n            }\n            exports.isNumber = isNumber;\n\n            function isString(arg) {\n                return typeof arg === 'string';\n            }\n            exports.isString = isString;\n\n            function isSymbol(arg) {\n                return typeof arg === 'symbol';\n            }\n            exports.isSymbol = isSymbol;\n\n            function isUndefined(arg) {\n                return arg === void 0;\n            }\n            exports.isUndefined = isUndefined;\n\n            function isRegExp(re) {\n                return isObject(re) && objectToString(re) === '[object RegExp]';\n            }\n            exports.isRegExp = isRegExp;\n\n            function isObject(arg) {\n                return typeof arg === 'object' && arg !== null;\n            }\n            exports.isObject = isObject;\n\n            function isDate(d) {\n                return isObject(d) && objectToString(d) === '[object Date]';\n            }\n            exports.isDate = isDate;\n\n            function isError(e) {\n                return isObject(e) &&\n                    (objectToString(e) === '[object Error]' || e instanceof Error);\n            }\n            exports.isError = isError;\n\n            function isFunction(arg) {\n                return typeof arg === 'function';\n            }\n            exports.isFunction = isFunction;\n\n            function isPrimitive(arg) {\n                return arg === null ||\n                    typeof arg === 'boolean' ||\n                    typeof arg === 'number' ||\n                    typeof arg === 'string' ||\n                    typeof arg === 'symbol' ||  // ES6 symbol\n                    typeof arg === 'undefined';\n            }\n            exports.isPrimitive = isPrimitive;\n\n            exports.isBuffer = require('./support/isBuffer');\n\n            function objectToString(o) {\n                return Object.prototype.toString.call(o);\n            }\n\n\n            function pad(n) {\n                return n < 10 ? '0' + n.toString(10) : n.toString(10);\n            }\n\n\n            var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n                'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\n            function timestamp() {\n                var d = new Date();\n                var time = [pad(d.getHours()),\n                    pad(d.getMinutes()),\n                    pad(d.getSeconds())].join(':');\n                return [d.getDate(), months[d.getMonth()], time].join(' ');\n            }\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\n            exports.log = function() {\n                console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n            };\n\n\n            /**\n             * Inherit the prototype methods from one constructor into another.\n             *\n             * The Function.prototype.inherits from lang.js rewritten as a standalone\n             * function (not on Function.prototype). NOTE: If this file is to be loaded\n             * during bootstrapping this function needs to be rewritten using some native\n             * functions as prototype setup using normal JavaScript does not work as\n             * expected during bootstrapping (see mirror.js in r114903).\n             *\n             * @param {function} ctor Constructor function which needs to inherit the\n             *     prototype.\n             * @param {function} superCtor Constructor function to inherit prototype from.\n             */\n            exports.inherits = require('inherits');\n\n            exports._extend = function(origin, add) {\n                // Don't do anything if add isn't an object\n                if (!add || !isObject(add)) return origin;\n\n                var keys = Object.keys(add);\n                var i = keys.length;\n                while (i--) {\n                    origin[keys[i]] = add[keys[i]];\n                }\n                return origin;\n            };\n\n            function hasOwnProperty(obj, prop) {\n                return Object.prototype.hasOwnProperty.call(obj, prop);\n            }\n\n        }).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{\"./support/isBuffer\":72,\"_process\":52,\"inherits\":71}],74:[function(require,module,exports){\n// created by @HenrikJoreteg\n        var prefix;\n        var version;\n\n        if (window.mozRTCPeerConnection || navigator.mozGetUserMedia) {\n            prefix = 'moz';\n            version = parseInt(navigator.userAgent.match(/Firefox\\/([0-9]+)\\./)[1], 10);\n        } else if (window.webkitRTCPeerConnection || navigator.webkitGetUserMedia) {\n            prefix = 'webkit';\n            version = navigator.userAgent.match(/Chrom(e|ium)/) && parseInt(navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)[2], 10);\n        }\n\n        var PC = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;\n        var IceCandidate = window.mozRTCIceCandidate || window.RTCIceCandidate;\n        var SessionDescription = window.mozRTCSessionDescription || window.RTCSessionDescription;\n        var MediaStream = window.webkitMediaStream || window.MediaStream;\n        var screenSharing = window.location.protocol === 'https:' &&\n            ((prefix === 'webkit' && version >= 26) ||\n                (prefix === 'moz' && version >= 33))\n        var AudioContext = window.AudioContext || window.webkitAudioContext;\n        var videoEl = document.createElement('video');\n        var supportVp8 = videoEl && videoEl.canPlayType && videoEl.canPlayType('video/webm; codecs=\"vp8\", vorbis') === \"probably\";\n        var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.msGetUserMedia || navigator.mozGetUserMedia;\n\n// export support flags and constructors.prototype && PC\n        module.exports = {\n            prefix: prefix,\n            browserVersion: version,\n            support: !!PC && !!getUserMedia,\n            // new support style\n            supportRTCPeerConnection: !!PC,\n            supportVp8: supportVp8,\n            supportGetUserMedia: !!getUserMedia,\n            supportDataChannel: !!(PC && PC.prototype && PC.prototype.createDataChannel),\n            supportWebAudio: !!(AudioContext && AudioContext.prototype.createMediaStreamSource),\n            supportMediaStream: !!(MediaStream && MediaStream.prototype.removeTrack),\n            supportScreenSharing: !!screenSharing,\n            // constructors\n            AudioContext: AudioContext,\n            PeerConnection: PC,\n            SessionDescription: SessionDescription,\n            IceCandidate: IceCandidate,\n            MediaStream: MediaStream,\n            getUserMedia: getUserMedia\n        };\n\n    },{}],75:[function(require,module,exports){\n        /*\nWildEmitter.js is a slim little event emitter by @henrikjoreteg largely based\non @visionmedia's Emitter from UI Kit.\n\nWhy? I wanted it standalone.\n\nI also wanted support for wildcard emitters like this:\n\nemitter.on('*', function (eventName, other, event, payloads) {\n\n});\n\nemitter.on('somenamespace*', function (eventName, payloads) {\n\n});\n\nPlease note that callbacks triggered by wildcard registered events also get\nthe event name as the first argument.\n*/\n\n        module.exports = WildEmitter;\n\n        function WildEmitter() { }\n\n        WildEmitter.mixin = function (constructor) {\n            var prototype = constructor.prototype || constructor;\n\n            prototype.isWildEmitter= true;\n\n            // Listen on the given `event` with `fn`. Store a group name if present.\n            prototype.on = function (event, groupName, fn) {\n                this.callbacks = this.callbacks || {};\n                var hasGroup = (arguments.length === 3),\n                    group = hasGroup ? arguments[1] : undefined,\n                    func = hasGroup ? arguments[2] : arguments[1];\n                func._groupName = group;\n                (this.callbacks[event] = this.callbacks[event] || []).push(func);\n                return this;\n            };\n\n            // Adds an `event` listener that will be invoked a single\n            // time then automatically removed.\n            prototype.once = function (event, groupName, fn) {\n                var self = this,\n                    hasGroup = (arguments.length === 3),\n                    group = hasGroup ? arguments[1] : undefined,\n                    func = hasGroup ? arguments[2] : arguments[1];\n                function on() {\n                    self.off(event, on);\n                    func.apply(this, arguments);\n                }\n                this.on(event, group, on);\n                return this;\n            };\n\n            // Unbinds an entire group\n            prototype.releaseGroup = function (groupName) {\n                this.callbacks = this.callbacks || {};\n                var item, i, len, handlers;\n                for (item in this.callbacks) {\n                    handlers = this.callbacks[item];\n                    for (i = 0, len = handlers.length; i < len; i++) {\n                        if (handlers[i]._groupName === groupName) {\n                            //console.log('removing');\n                            // remove it and shorten the array we're looping through\n                            handlers.splice(i, 1);\n                            i--;\n                            len--;\n                        }\n                    }\n                }\n                return this;\n            };\n\n            // Remove the given callback for `event` or all\n            // registered callbacks.\n            prototype.off = function (event, fn) {\n                this.callbacks = this.callbacks || {};\n                var callbacks = this.callbacks[event],\n                    i;\n\n                if (!callbacks) return this;\n\n                // remove all handlers\n                if (arguments.length === 1) {\n                    delete this.callbacks[event];\n                    return this;\n                }\n\n                // remove specific handler\n                i = callbacks.indexOf(fn);\n                callbacks.splice(i, 1);\n                if (callbacks.length === 0) {\n                    delete this.callbacks[event];\n                }\n                return this;\n            };\n\n            /// Emit `event` with the given args.\n            // also calls any `*` handlers\n            prototype.emit = function (event) {\n                this.callbacks = this.callbacks || {};\n                var args = [].slice.call(arguments, 1),\n                    callbacks = this.callbacks[event],\n                    specialCallbacks = this.getWildcardCallbacks(event),\n                    i,\n                    len,\n                    item,\n                    listeners;\n\n                if (callbacks) {\n                    listeners = callbacks.slice();\n                    for (i = 0, len = listeners.length; i < len; ++i) {\n                        if (!listeners[i]) {\n                            break;\n                        }\n                        listeners[i].apply(this, args);\n                    }\n                }\n\n                if (specialCallbacks) {\n                    len = specialCallbacks.length;\n                    listeners = specialCallbacks.slice();\n                    for (i = 0, len = listeners.length; i < len; ++i) {\n                        if (!listeners[i]) {\n                            break;\n                        }\n                        listeners[i].apply(this, [event].concat(args));\n                    }\n                }\n\n                return this;\n            };\n\n            // Helper for for finding special wildcard event handlers that match the event\n            prototype.getWildcardCallbacks = function (eventName) {\n                this.callbacks = this.callbacks || {};\n                var item,\n                    split,\n                    result = [];\n\n                for (item in this.callbacks) {\n                    split = item.split('*');\n                    if (item === '*' || (split.length === 2 && eventName.slice(0, split[0].length) === split[0])) {\n                        result = result.concat(this.callbacks[item]);\n                    }\n                }\n                return result;\n            };\n\n        };\n\n        WildEmitter.mixin(WildEmitter);\n\n    },{}],76:[function(require,module,exports){\n\n        /**\n         * Module dependencies.\n         */\n\n        var global = window//(function() { return this; })();\n\n        /**\n         * WebSocket constructor.\n         */\n\n        var WebSocket = global.WebSocket || global.MozWebSocket;\n\n        /**\n         * Module exports.\n         */\n\n        module.exports = WebSocket ? ws : null;\n\n        /**\n         * WebSocket constructor.\n         *\n         * The third `opts` options object gets ignored in web browsers, since it's\n         * non-standard, and throws a TypeError if passed to the constructor.\n         * See: https://github.com/einaros/ws/issues/227\n         *\n         * @param {String} uri\n         * @param {Array} protocols (optional)\n         * @param {Object) opts (optional)\n         * @api public\n         */\n\n        function ws(uri, protocols, opts) {\n            var instance;\n            if (protocols) {\n                instance = new WebSocket(uri, protocols);\n            } else {\n                instance = new WebSocket(uri);\n            }\n            return instance;\n        }\n\n        if (WebSocket) ws.prototype = WebSocket.prototype;\n\n    },{}],77:[function(require,module,exports){\n        var util = require('util');\n        var webrtcSupport = require('webrtcsupport');\n        var PeerConnection = require('rtcpeerconnection');\n        var WildEmitter = require('wildemitter');\n        var FileTransfer = require('filetransfer');\n\n// the inband-v1 protocol is sending metadata inband in a serialized JSON object\n// followed by the actual data. Receiver closes the datachannel upon completion\n        var INBAND_FILETRANSFER_V1 = 'https://simplewebrtc.com/protocol/filetransfer#inband-v1';\n\n        function isAllTracksEnded(stream) {\n            var isAllTracksEnded = true;\n            stream.getTracks().forEach(function (t) {\n                isAllTracksEnded = t.readyState === 'ended' && isAllTracksEnded;\n            });\n            return isAllTracksEnded;\n        }\n\n        function Peer(options) {\n            ///MLUpdate///\n            this.chunkedMessages = new Object();\n            this.nickName = options.nickName;\n            this.mode = options.mode;\n            ///MLUpdate///\n\n            var self = this;\n\n            // call emitter constructor\n            WildEmitter.call(this);\n\n            this.id = options.id;\n            this.parent = options.parent;\n            this.type = options.type || 'video';\n            this.oneway = options.oneway || false;\n            this.sharemyscreen = options.sharemyscreen || false;\n            this.browserPrefix = options.prefix;\n            this.stream = options.stream;\n            this.enableDataChannels = options.enableDataChannels === undefined ? this.parent.config.enableDataChannels : options.enableDataChannels;\n            this.receiveMedia = options.receiveMedia || this.parent.config.receiveMedia;\n            this.channels = {};\n            this.sid = options.sid || Date.now().toString();\n            // Create an RTCPeerConnection via the polyfill\n\n            ///MLUpdate///\n            var params = {\n                vidEncoder: options.vidEncoder,\n                vidBitrate: options.vidBitrate,\n                audEncoder: options.audEncoder,\n                audBitrate: options.audBitrate,\n            }\n\n            ///MLUpdate///\n            this.pc = new PeerConnection(this.parent.config.peerConnectionConfig, this.parent.config.peerConnectionConstraints, params);\n            this.pc.on('ice', this.onIceCandidate.bind(this));\n            this.pc.on('endOfCandidates', function (event) {\n                self.send('endOfCandidates', event);\n            });\n            this.pc.on('offer', function (offer) {\n                if (self.parent.config.nick) offer.nick = self.parent.config.nick;\n                self.send('offer', offer);\n            });\n            this.pc.on('answer', function (answer) {\n                if (self.parent.config.nick) answer.nick = self.parent.config.nick;\n                self.send('answer', answer);\n            });\n            this.pc.on('addStream', this.handleRemoteStreamAdded.bind(this));\n            this.pc.on('addChannel', this.handleDataChannelAdded.bind(this));\n            this.pc.on('removeStream', this.handleStreamRemoved.bind(this));\n            // Just fire negotiation needed events for now\n            // When browser re-negotiation handling seems to work\n            // we can use this as the trigger for starting the offer/answer process\n            // automatically. We'll just leave it be for now while this stabalizes.\n            this.pc.on('negotiationNeeded', this.emit.bind(this, 'negotiationNeeded'));\n            this.pc.on('iceConnectionStateChange', this.emit.bind(this, 'iceConnectionStateChange'));\n            this.pc.on('iceConnectionStateChange', function () {\n                switch (self.pc.iceConnectionState) {\n                    case 'failed':\n                        // currently, in chrome only the initiator goes to failed\n                        // so we need to signal this to the peer\n                        if (self.pc.pc.localDescription.type === 'offer') {\n                            self.parent.emit('iceFailed', self);\n                            self.send('connectivityError');\n                        }\n                        break;\n                }\n            });\n            this.pc.on('signalingStateChange', this.emit.bind(this, 'signalingStateChange'));\n            this.logger = this.parent.logger;\n\n            // handle screensharing/broadcast mode\n            if (options.type === 'screen') {\n                if (this.parent.localScreens && this.parent.localScreens[0] && this.sharemyscreen) {\n                    this.logger.log('adding local screen stream to peer connection');\n                    this.pc.addStream(this.parent.localScreens[0]);\n                    this.broadcaster = options.broadcaster;\n                }\n            } else {\n                this.parent.localStreams.forEach(function (stream) {\n                    self.pc.addStream(stream);\n                });\n            }\n\n            this.on('channelOpen', function (channel) {\n\n                ///MLUpdate///\n                this.parent.emit('dataChannelOpened', channel, this);\n                ///MLUpdate///\n                if (channel.protocol === INBAND_FILETRANSFER_V1) {\n                    channel.onmessage = function (event) {\n                        var metadata = JSON.parse(event.data);\n                        var receiver = new FileTransfer.Receiver();\n                        receiver.receive(metadata, channel);\n                        self.emit('fileTransfer', metadata, receiver);\n                        receiver.on('receivedFile', function (file, metadata) {\n                            receiver.channel.close();\n                        });\n                    };\n                }\n            });\n\n            // proxy events to parent\n            this.on('*', function () {\n                self.parent.emit.apply(self.parent, arguments);\n            });\n        }\n\n        util.inherits(Peer, WildEmitter);\n\n        Peer.prototype.handleMessage = function (message) {\n            var self = this;\n\n            this.logger.log('getting', message.type, message);\n\n            if (message.prefix) this.browserPrefix = message.prefix;\n\n            if (message.type === 'offer') {\n                if (!this.nick) this.nick = message.payload.nick;\n                delete message.payload.nick;\n                this.pc.handleOffer(message.payload, function (err) {\n                    if (err) {\n                        return;\n                    }\n                    // auto-accept\n                    self.pc.answer(function (err, sessionDescription) {\n                        //self.send('answer', sessionDescription);\n                    });\n                });\n            } else if (message.type === 'answer') {\n                if (!this.nick) this.nick = message.payload.nick;\n                delete message.payload.nick;\n                this.pc.handleAnswer(message.payload);\n            } else if (message.type === 'candidate') {\n                this.pc.processIce(message.payload);\n            } else if (message.type === 'connectivityError') {\n                this.parent.emit('connectivityError', self);\n            } else if (message.type === 'mute') {\n                this.parent.emit('mute', {id: message.from, name: message.payload.name});\n            } else if (message.type === 'unmute') {\n                this.parent.emit('unmute', {id: message.from, name: message.payload.name});\n            } else if (message.type === 'endOfCandidates') {\n                // Edge requires an end-of-candidates. Since only Edge will have mLines or tracks on the\n                // shim this will only be called in Edge.\n                var mLines = this.pc.pc.transceivers || [];\n                mLines.forEach(function (mLine) {\n                    if (mLine.iceTransport) {\n                        mLine.iceTransport.addRemoteCandidate({});\n                    }\n                });\n            }\n            else if (message.type === 'customMessage') {\n                this.parent.emit('customMessage', { id: message.from, message: message.payload });\n            }\n        };\n\n// send via signalling channel\n        Peer.prototype.send = function (messageType, payload) {\n            var message = {\n                to: this.id,\n                sid: this.sid,\n                broadcaster: this.broadcaster,\n                roomType: this.type,\n                type: messageType,\n                payload: payload,\n                prefix: webrtcSupport.prefix\n            };\n            this.logger.log('sending', messageType, message);\n            this.parent.emit('message', message);\n        };\n\n// send via data channel\n// returns true when message was sent and false if channel is not open\n        Peer.prototype.sendDirectly = function (channel, messageType, payload) {\n            var message = {\n                type: messageType,\n                payload: payload\n            };\n            this.logger.log('sending via datachannel', channel, messageType, message);\n            var dc = this.getDataChannel(channel);\n            if (dc.readyState != 'open') return false;\n            var splitted = message.payload.match(/(.|[\\r\\10000]){1,10000}/g);\n\n            function guid() {\n                function s4() {\n                    return Math.floor((1 + Math.random()) * 0x10000)\n                        .toString(16)\n                        .substring(1);\n                }\n                return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n                    s4() + '-' + s4() + s4() + s4();\n            }\n            //Chunkify message and send through datachannel\n            var guid = guid();\n            for (var i = 0; i < splitted.length; i++) {\n                message.payload = splitted[i];\n                message.messageId = guid;\n                message.chunk = i;\n                message.chunksCount = splitted.length;\n                dc.send(JSON.stringify(message));\n            }\n            return true;\n        };\n\n// Internal method registering handlers for a data channel and emitting events on the peer\n        Peer.prototype._observeDataChannel = function (channel) {\n            var self = this;\n            channel.onclose = this.emit.bind(this, 'channelClose', channel);\n            channel.onerror = this.emit.bind(this, 'channelError', channel);\n            channel.onmessage = function (event) {\n                var message = JSON.parse(event.data);\n                var nChunksCount = parseInt(message.chunksCount, 10);\n                var nChunk = parseInt(message.chunk, 10)\n\n                if (message.chunksCount && nChunksCount > 1) {\n                    if (self.chunkedMessages[message.messageId]) {\n\n                        var temp = self.chunkedMessages[message.messageId];\n                        self.chunkedMessages[message.messageId] = temp + message.payload;\n\n                        if (nChunksCount == nChunk + 1) {\n\n                            message.payload = self.chunkedMessages[message.messageId]\n                            delete self.chunkedMessages[message.messageId];\n                        }\n                        else\n                            return;\n                    }\n                    else if (message.chunk == 0) {\n                        self.chunkedMessages[message.messageId] = message.payload;\n                        return;\n                    }\n                }\n                self.emit('channelMessage', self, channel.label, message, channel, event);\n            };\n            channel.onopen = this.emit.bind(this, 'channelOpen', channel);\n        };\n\n// Fetch or create a data channel by the given name\n        Peer.prototype.getDataChannel = function (name, opts) {\n            if (!webrtcSupport.supportDataChannel) return this.emit('error', new Error('createDataChannel not supported'));\n            var channel = this.channels[name];\n            opts || (opts = {});\n            if (channel) return channel;\n            // if we don't have one by this label, create it\n            channel = this.channels[name] = this.pc.createDataChannel(name, opts);\n            this._observeDataChannel(channel);\n            return channel;\n        };\n\n        Peer.prototype.onIceCandidate = function (candidate) {\n            if (this.closed) return;\n            if (candidate) {\n                var pcConfig = this.parent.config.peerConnectionConfig;\n                if (webrtcSupport.prefix === 'moz' && pcConfig && pcConfig.iceTransports &&\n                    candidate.candidate && candidate.candidate.candidate &&\n                    candidate.candidate.candidate.indexOf(pcConfig.iceTransports) < 0) {\n                    this.logger.log('Ignoring ice candidate not matching pcConfig iceTransports type: ', pcConfig.iceTransports);\n                } else {\n                    this.send('candidate', candidate);\n                }\n            } else {\n                this.logger.log(\"End of candidates.\");\n            }\n        };\n\n        Peer.prototype.start = function () {\n            var self = this;\n\n            // well, the webrtc api requires that we either\n            // a) create a datachannel a priori\n            // b) do a renegotiation later to add the SCTP m-line\n            // Let's do (a) first...\n            if (this.enableDataChannels) {\n                this.getDataChannel('simplewebrtc');\n            }\n\n            this.pc.offer(this.receiveMedia, function (err, sessionDescription) {\n                //self.send('offer', sessionDescription);\n            });\n        };\n\n        Peer.prototype.icerestart = function () {\n            var constraints = this.receiveMedia;\n            constraints.mandatory.IceRestart = true;\n            this.pc.offer(constraints, function (err, success) { });\n        };\n\n        Peer.prototype.end = function () {\n            if (this.closed) return;\n            this.pc.close();\n            this.handleStreamRemoved();\n        };\n\n        Peer.prototype.handleRemoteStreamAdded = function (event) {\n            var self = this;\n            if (this.stream) {\n                this.logger.warn('Already have a remote stream');\n            } else {\n                this.stream = event.stream;\n\n                this.stream.getTracks().forEach(function (track) {\n                    track.addEventListener('ended', function () {\n                        if (isAllTracksEnded(self.stream)) {\n                            self.end();\n                        }\n                    });\n                });\n\n                this.parent.emit('peerStreamAdded', this);\n            }\n        };\n\n        Peer.prototype.handleStreamRemoved = function () {\n            var peerIndex = this.parent.peers.indexOf(this);\n            if (peerIndex > -1) {\n                this.parent.peers.splice(peerIndex, 1);\n                this.closed = true;\n                this.parent.emit('peerStreamRemoved', this);\n                this.pc = null;\n            }\n        };\n\n        Peer.prototype.handleDataChannelAdded = function (channel) {\n            this.channels[channel.label] = channel;\n            this._observeDataChannel(channel);\n        };\n\n        Peer.prototype.sendFile = function (file) {\n            var sender = new FileTransfer.Sender();\n            var dc = this.getDataChannel('filetransfer' + (new Date()).getTime(), {\n                protocol: INBAND_FILETRANSFER_V1\n            });\n            // override onopen\n            dc.onopen = function () {\n                dc.send(JSON.stringify({\n                    size: file.size,\n                    name: file.name\n                }));\n                sender.send(file, dc);\n            };\n            // override onclose\n            dc.onclose = function () {\n                console.log('sender received transfer');\n                sender.emit('complete');\n            };\n            return sender;\n        };\n\n        module.exports = Peer;\n\n    },{\"filetransfer\":35,\"rtcpeerconnection\":53,\"util\":73,\"webrtcsupport\":74,\"wildemitter\":75}],78:[function(require,module,exports){\n        var WebRTC = require('./webrtc');\n        var WildEmitter = require('wildemitter');\n        var webrtcSupport = require('webrtcsupport');\n        var attachMediaStream = require('attachmediastream');\n        var mockconsole = require('mockconsole');\n        var SocketIoConnection = require('./socketioconnection');\n\n        function SimpleWebRTC(opts) {\n            var self = this;\n            var options = opts || {};\n            var config = this.config = {\n                target: '',\n                url: 'https://sandbox.simplewebrtc.com:443/',\n                socketio: {/* 'force new connection':true*/},\n                connection: null,\n                debug: false,\n                localVideoEl: '',\n                remoteVideosEl: '',\n                enableDataChannels: true,\n                autoRequestMedia: false,\n                autoRemoveVideos: true,\n                adjustPeerVolume: false,\n                peerVolumeWhenSpeaking: 0.25,\n                media: {\n                    video: true,\n                    audio: true\n                },\n                receiveMedia: {\n                    offerToReceiveAudio: 1,\n                    offerToReceiveVideo: 1\n                },\n                localVideo: {\n                    autoplay: true,\n                    mirror: true,\n                    muted: true\n                }\n            };\n            var item, connection;\n\n            // We also allow a 'logger' option. It can be any object that implements\n            // log, warn, and error methods.\n            // We log nothing by default, following \"the rule of silence\":\n            // http://www.linfo.org/rule_of_silence.html\n            this.logger = function () {\n                // we assume that if you're in debug mode and you didn't\n                // pass in a logger, you actually want to log as much as\n                // possible.\n                if (opts.debug) {\n                    return opts.logger || console;\n                } else {\n                    // or we'll use your logger which should have its own logic\n                    // for output. Or we'll return the no-op.\n                    return opts.logger || mockconsole;\n                }\n            }();\n\n            // set our config from options\n            for (item in options) {\n                if (options.hasOwnProperty(item)) {\n                    this.config[item] = options[item];\n                }\n            }\n\n            // attach detected support for convenience\n            this.capabilities = webrtcSupport;\n\n            // call WildEmitter constructor\n            WildEmitter.call(this);\n\n            // create default SocketIoConnection if it's not passed in\n            if (this.config.connection === null) {\n                connection = this.connection = new SocketIoConnection(this.config);\n            } else {\n                connection = this.connection = this.config.connection;\n            }\n\n            connection.on('connect', function () {\n                self.emit('connectionReady', connection.getSessionid());\n                self.sessionReady = true;\n                self.testReadiness();\n            });\n\n            connection.on('message', function (message) {\n                var peers = self.webrtc.getPeers(message.from, message.roomType);\n                var peer;\n\n                if (message.type === 'offer') {\n                    if (peers.length) {\n                        peers.forEach(function (p) {\n                            if (p.sid == message.sid) peer = p;\n                        });\n                        //if (!peer) peer = peers[0]; // fallback for old protocol versions\n                    }\n                    if (!peer) {\n                        peer = self.webrtc.createPeer({\n                            id: message.from,\n                            sid: message.sid,\n                            nickName: message.fromNickName,\n                            type: message.roomType,\n                            enableDataChannels: self.config.enableDataChannels && message.roomType !== 'screen',\n                            sharemyscreen: message.roomType === 'screen' && !message.broadcaster,\n                            broadcaster: message.roomType === 'screen' && !message.broadcaster ? self.connection.getSessionid() : null\n                        });\n                        self.emit('createdPeer', peer);\n                    }\n                    peer.handleMessage(message);\n                } else if (peers.length) {\n                    peers.forEach(function (peer) {\n                        if (message.sid) {\n                            if (peer.sid === message.sid) {\n                                peer.handleMessage(message);\n                            }\n                        } else {\n                            peer.handleMessage(message);\n                        }\n                    });\n                }\n            });\n\n            connection.on('remove', function (room) {\n                if (room.id !== self.connection.getSessionid()) {\n                    self.webrtc.removePeers(room.id, room.type);\n                }\n            });\n\n            // instantiate our main WebRTC helper\n            // using same logger from logic here\n            opts.logger = this.logger;\n            opts.debug = false;\n            this.webrtc = new WebRTC(opts);\n\n            // attach a few methods from underlying lib to simple.\n            ['mute', 'unmute', 'pauseVideo', 'resumeVideo', 'pause', 'resume', 'sendToAll', 'sendDirectlyToAll', 'getPeers'].forEach(function (method) {\n                self[method] = self.webrtc[method].bind(self.webrtc);\n            });\n\n            // proxy events from WebRTC\n            this.webrtc.on('*', function () {\n                self.emit.apply(self, arguments);\n            });\n\n            // log all events in debug mode\n            if (config.debug) {\n                this.on('*', this.logger.log.bind(this.logger, 'SimpleWebRTC event:'));\n            }\n\n            // check for readiness\n            this.webrtc.on('localStream', function () {\n                self.testReadiness();\n            });\n\n            this.webrtc.on('message', function (payload) {\n                self.connection.emit('message', payload);\n            });\n\n            this.webrtc.on('peerStreamAdded', this.handlePeerStreamAdded.bind(this));\n            this.webrtc.on('peerStreamRemoved', this.handlePeerStreamRemoved.bind(this));\n\n            // echo cancellation attempts\n            if (this.config.adjustPeerVolume) {\n                this.webrtc.on('speaking', this.setVolumeForAll.bind(this, this.config.peerVolumeWhenSpeaking));\n                this.webrtc.on('stoppedSpeaking', this.setVolumeForAll.bind(this, 1));\n            }\n\n            connection.on('stunservers', function (args) {\n                // resets/overrides the config\n                //Changes url to urls\n                var length = args.length;\n                if (length > 0) {\n                    self.webrtc.config.peerConnectionConfig.iceServers = [];\n                    for (var i = 0; i < length; i++) {\n                        if (args[i].url)\n                            self.webrtc.config.peerConnectionConfig.iceServers.push({ \"urls\": args[i].url });\n                        else\n                            self.webrtc.config.peerConnectionConfig.iceServers.push(args[i]);\n                    }\n                }\n                self.emit('stunservers', self.webrtc.config.peerConnectionConfig.iceServers);\n            });\n            connection.on('turnservers', function (args) {\n                // appends to the config\n                self.webrtc.config.peerConnectionConfig.iceServers = self.webrtc.config.peerConnectionConfig.iceServers.concat(args);\n                self.emit('turnservers', args);\n            });\n\n            connection.on('loginjanusrequest', function (args) {\n                var peer = self.webrtc.createPeer({\n                    id: 'janus',\n                    type: 'video',\n                    // nickName: client.nickName,\n                    mode: 'sender',\n                    //vidEncoder: client.vidEncoder,\n                    //vidBitrate: client.vidBitrate,\n                    //audEncoder: client.audEncoder,\n                    //audBitrate: client.audBitrate,\n                    enableDataChannels: false,\n                    receiveMedia: {\n                        offerToReceiveAudio: 1,\n                        offerToReceiveVideo: 1\n                    }\n                });\n                self.emit('createdPeer', peer);\n                peer.start();\n            });\n\n            this.webrtc.on('iceFailed', function (peer) {\n                // local ice failure\n            });\n            this.webrtc.on('connectivityError', function (peer) {\n                // remote ice failure\n            });\n\n\n            // sending mute/unmute to all peers\n            this.webrtc.on('audioOn', function () {\n                self.webrtc.sendToAll('unmute', {name: 'audio'});\n            });\n            this.webrtc.on('audioOff', function () {\n                self.webrtc.sendToAll('mute', {name: 'audio'});\n            });\n            this.webrtc.on('videoOn', function () {\n                self.webrtc.sendToAll('unmute', {name: 'video'});\n            });\n            this.webrtc.on('videoOff', function () {\n                self.webrtc.sendToAll('mute', {name: 'video'});\n            });\n\n            // screensharing events\n            this.webrtc.on('localScreen', function (stream) {\n                var item,\n                    el = document.createElement('video'),\n                    container = self.getRemoteVideoContainer();\n\n                el.oncontextmenu = function () { return false; };\n                el.id = 'localScreen';\n                attachMediaStream(stream, el);\n                if (container) {\n                    container.appendChild(el);\n                }\n\n                self.emit('localScreenAdded', el);\n                self.connection.emit('shareScreen');\n\n                self.webrtc.peers.forEach(function (existingPeer) {\n                    var peer;\n                    if (existingPeer.type === 'video') {\n                        peer = self.webrtc.createPeer({\n                            id: existingPeer.id,\n                            nickName: existingPeer.nickName,\n                            mode: existingPeer.mode,\n                            type: 'screen',\n                            sharemyscreen: true,\n                            enableDataChannels: false,\n                            receiveMedia: {\n                                offerToReceiveAudio: 0,\n                                offerToReceiveVideo: 0\n                            },\n                            broadcaster: self.connection.getSessionid(),\n                        });\n                        self.emit('createdPeer', peer);\n                        peer.start();\n                    }\n                });\n            });\n            this.webrtc.on('localScreenStopped', function (stream) {\n                if (self.getLocalScreen()) {\n                    self.stopScreenShare();\n                }\n                /*\n        self.connection.emit('unshareScreen');\n        self.webrtc.peers.forEach(function (peer) {\n            if (peer.sharemyscreen) {\n                peer.end();\n            }\n        });\n        */\n            });\n\n            this.webrtc.on('channelMessage', function (peer, label, data) {\n                if (data.type == 'volume') {\n                    self.emit('remoteVolumeChange', peer, data.volume);\n                }\n            });\n\n            if (this.config.autoRequestMedia) this.startLocalVideo();\n        }\n\n\n        SimpleWebRTC.prototype = Object.create(WildEmitter.prototype, {\n            constructor: {\n                value: SimpleWebRTC\n            }\n        });\n\n        SimpleWebRTC.prototype.leaveRoom = function () {\n            if (this.roomName) {\n                this.connection.emit('leave');\n                while (this.webrtc.peers.length) {\n                    this.webrtc.peers[0].end();\n                }\n                if (this.getLocalScreen()) {\n                    this.stopScreenShare();\n                }\n                this.emit('leftRoom', this.roomName);\n                this.roomName = undefined;\n            }\n        };\n\n        SimpleWebRTC.prototype.disconnect = function () {\n            this.connection.disconnect();\n            delete this.connection;\n        };\n        ///MLUpdate///\n        SimpleWebRTC.prototype.sendDataChannelMessageToAll = function (message) {\n            this.webrtc.sendDirectlyToAll('simplewebrtc', 'custommessage', message);\n        };\n\n        SimpleWebRTC.prototype.sendDataChannelMessageToPeer = function (peerId, message) {\n            var foundId = false;\n            this.webrtc.peers.forEach(function (peer) {\n                if (peer.enableDataChannels && peer.id == peerId) {\n                    peer.sendDirectly('simplewebrtc', 'custommessage', message);\n                    foundId = true;\n                }\n            });\n            //Try to find peer by name\n            if (!foundId) {\n                this.webrtc.peers.forEach(function (peer) {\n                    if (peer.enableDataChannels && peer.nickName == peerId) {\n                        peer.sendDirectly('simplewebrtc', 'custommessage', message);\n                    }\n                });\n            }\n        };\n        ///MLUpdate///\n\n        SimpleWebRTC.prototype.handlePeerStreamAdded = function (peer) {\n            var self = this;\n            var container = this.getRemoteVideoContainer();\n            var video = attachMediaStream(peer.stream);\n\n            // store video element as part of peer for easy removal\n            peer.videoEl = video;\n            video.id = this.getDomId(peer);\n\n            if (container) container.appendChild(video);\n\n            this.emit('videoAdded', video, peer);\n\n            // send our mute status to new peer if we're muted\n            // currently called with a small delay because it arrives before\n            // the video element is created otherwise (which happens after\n            // the async setRemoteDescription-createAnswer)\n            window.setTimeout(function () {\n                if (!self.webrtc.isAudioEnabled()) {\n                    peer.send('mute', {name: 'audio'});\n                }\n                if (!self.webrtc.isVideoEnabled()) {\n                    peer.send('mute', {name: 'video'});\n                }\n            }, 250);\n        };\n\n        SimpleWebRTC.prototype.handlePeerStreamRemoved = function (peer) {\n            var container = this.getRemoteVideoContainer();\n            var videoEl = peer.videoEl;\n            if (this.config.autoRemoveVideos && container && videoEl) {\n                container.removeChild(videoEl);\n            }\n            if (videoEl) this.emit('videoRemoved', videoEl, peer);\n        };\n\n        SimpleWebRTC.prototype.getDomId = function (peer) {\n            return [peer.id, peer.type, peer.broadcaster ? 'broadcasting' : 'incoming'].join('_');\n        };\n\n// set volume on video tag for all peers takse a value between 0 and 1\n        SimpleWebRTC.prototype.setVolumeForAll = function (volume) {\n            this.webrtc.peers.forEach(function (peer) {\n                if (peer.videoEl) peer.videoEl.volume = volume;\n            });\n        };\n\n        SimpleWebRTC.prototype.joinRoom = function (name, cb) {\n            var self = this;\n            this.roomName = name;\n            this.connection.emit('join', name, function (err, roomDescription) {\n                console.log('join CB', err, roomDescription);\n                if (err) {\n                    self.emit('error', err);\n                } else {\n                    var id,\n                        client,\n                        type,\n                        peer;\n                    for (id in roomDescription.clients) {\n                        client = roomDescription.clients[id];\n                        for (type in client) {\n                            if (self.config.target) {\n                                if (typeof client[type] === 'boolean' && client[type] && (id == self.config.target || client.nickName == self.config.target)) {\n                                    peer = self.webrtc.createPeer({\n                                        id: id,\n                                        type: type,\n                                        nickName: client.nickName,\n                                        mode: client.mode,\n                                        vidEncoder: client.vidEncoder,\n                                        vidBitrate: client.vidBitrate,\n                                        audEncoder: client.audEncoder,\n                                        audBitrate: client.audBitrate,\n                                        enableDataChannels: self.config.enableDataChannels && type !== 'screen',\n                                        receiveMedia: {\n                                            offerToReceiveAudio: type !== 'screen' && self.config.receiveMedia.offerToReceiveAudio ? 1 : 0,\n                                            offerToReceiveVideo: self.config.receiveMedia.offerToReceiveVideo\n                                        }\n                                    });\n                                    self.emit('createdPeer', peer);\n                                    if (client.multicastType && client.multicastType == 'janus')\n                                    {\n                                        var janusLisnterMsg = { to: id, toName: client.nickName, type: 'januslistner'}\n                                        self.connection.emit('message', janusLisnterMsg);\n                                    }\n                                    else\n                                        peer.start();\n                                }\n                            }\n                            else {\n                                if (typeof client[type] === 'boolean' && client[type]) {\n                                    peer = self.webrtc.createPeer({\n                                        id: id,\n                                        type: type,\n                                        nickName: client.nickName,\n                                        mode: client.mode,\n                                        vidEncoder: client.vidEncoder,\n                                        vidBitrate: client.vidBitrate,\n                                        audEncoder: client.audEncoder,\n                                        audBitrate: client.audBitrate,\n                                        enableDataChannels: self.config.enableDataChannels && type !== 'screen',\n                                        receiveMedia: {\n                                            offerToReceiveAudio: type !== 'screen' && self.config.receiveMedia.offerToReceiveAudio ? 1 : 0,\n                                            offerToReceiveVideo: self.config.receiveMedia.offerToReceiveVideo\n                                        }\n                                    });\n                                    self.emit('createdPeer', peer);\n                                    peer.start();\n                                }\n                            }\n                        }\n                    }\n                }\n\n                if (cb) cb(err, roomDescription);\n                self.emit('joinedRoom', name);\n            });\n        };\n\n        SimpleWebRTC.prototype.getEl = function (idOrEl) {\n            if (typeof idOrEl === 'string') {\n                return document.getElementById(idOrEl);\n            } else {\n                return idOrEl;\n            }\n        };\n\n        SimpleWebRTC.prototype.startLocalVideo = function () {\n            var self = this;\n            this.webrtc.start(this.config.media, function (err, stream) {\n                if (err) {\n                    self.emit('localMediaError', err);\n                } else {\n                    attachMediaStream(stream, self.getLocalVideoContainer(), self.config.localVideo);\n                }\n            });\n        };\n\n        SimpleWebRTC.prototype.stopLocalVideo = function () {\n            this.webrtc.stop();\n        };\n\n// this accepts either element ID or element\n// and either the video tag itself or a container\n// that will be used to put the video tag into.\n        SimpleWebRTC.prototype.getLocalVideoContainer = function () {\n            var el = this.getEl(this.config.localVideoEl);\n            if (el && el.tagName === 'VIDEO') {\n                el.oncontextmenu = function () { return false; };\n                return el;\n            } else if (el) {\n                var video = document.createElement('video');\n                video.oncontextmenu = function () { return false; };\n                el.appendChild(video);\n                return video;\n            } else {\n                return;\n            }\n        };\n\n        SimpleWebRTC.prototype.getRemoteVideoContainer = function () {\n            return this.getEl(this.config.remoteVideosEl);\n        };\n\n        SimpleWebRTC.prototype.shareScreen = function (cb) {\n            this.webrtc.startScreenShare(cb);\n        };\n\n        SimpleWebRTC.prototype.getLocalScreen = function () {\n            return this.webrtc.localScreens && this.webrtc.localScreens[0];\n        };\n\n        SimpleWebRTC.prototype.stopScreenShare = function () {\n            this.connection.emit('unshareScreen');\n            var videoEl = document.getElementById('localScreen');\n            var container = this.getRemoteVideoContainer();\n\n            if (this.config.autoRemoveVideos && container && videoEl) {\n                container.removeChild(videoEl);\n            }\n\n            // a hack to emit the event the removes the video\n            // element that we want\n            if (videoEl) {\n                this.emit('videoRemoved', videoEl);\n            }\n            if (this.getLocalScreen()) {\n                this.webrtc.stopScreenShare();\n            }\n            this.webrtc.peers.forEach(function (peer) {\n                if (peer.broadcaster) {\n                    peer.end();\n                }\n            });\n        };\n\n        SimpleWebRTC.prototype.testReadiness = function () {\n            var self = this;\n            if (this.sessionReady) {\n                self.emit('readyToCall', self.connection.getSessionid());\n                //if (!this.config.media.video && !this.config.media.audio) {\n                //    self.emit('readyToCall', self.connection.getSessionid());\n                //} else if (this.webrtc.localStreams.length > 0) {\n                //    self.emit('readyToCall', self.connection.getSessionid());\n                //}\n            }\n        };\n\n        SimpleWebRTC.prototype.createRoom = function (name, cb) {\n            this.roomName = name;\n            if (arguments.length === 2) {\n                this.connection.emit('create', name, cb);\n            } else {\n                this.connection.emit('create', name);\n            }\n        };\n\n        SimpleWebRTC.prototype.sendFile = function () {\n            if (!webrtcSupport.dataChannel) {\n                return this.emit('error', new Error('DataChannelNotSupported'));\n            }\n\n        };\n        SimpleWebRTC.prototype.getNickName = function () {\n            if (this.nickName) {\n                return this.nickName;\n            }\n        };\n\n        SimpleWebRTC.prototype.setNickName = function (nickName) {\n            if (nickName && typeof nickName === 'string') {\n                this.nickName = nickName;\n                this.connection.emit('nickname', nickName)\n            }\n        };\n\n        SimpleWebRTC.prototype.setInfo = function (nickName, strongId, mode, multicast) {\n            if (arguments.length > 1) {\n                var nick = nickName || '';\n                var sId = strongId || '';\n                var mod = mode || '';\n                var mc = multicast || '';\n                if (nickName)\n                    this.nickName = nickName;\n\n                if (strongId && !this.strongId)\n                    this.strongId = strongId;\n\n                if (mode)\n                    this.mode = mode;\n\n                if (multicast)\n                    this.multicastType = multicast;\n\n                this.connection.emit('setinfo', { nickName: nick, strongId: sId, mode: mod, multicastType: mc});\n            }\n            else if (arguments.length == 1 && typeof nickName == 'object') {\n                this.connection.emit('setinfo', nickName);\n            }\n        };\n\n        module.exports = SimpleWebRTC;\n\n    },{\"./socketioconnection\":79,\"./webrtc\":80,\"attachmediastream\":3,\"mockconsole\":46,\"webrtcsupport\":74,\"wildemitter\":75}],79:[function(require,module,exports){\n        var io = require('socket.io-client');\n\n        function SocketIoConnection(config) {\n            this.connection = io.connect(config.url, config.socketio);\n        }\n\n        SocketIoConnection.prototype.on = function (ev, fn) {\n            this.connection.on(ev, fn);\n        };\n\n        SocketIoConnection.prototype.emit = function () {\n            this.connection.emit.apply(this.connection, arguments);\n        };\n\n        SocketIoConnection.prototype.getSessionid = function () {\n            return this.connection.id;\n        };\n\n        SocketIoConnection.prototype.disconnect = function () {\n            return this.connection.disconnect();\n        };\n\n        module.exports = SocketIoConnection;\n\n    },{\"socket.io-client\":60}],80:[function(require,module,exports){\n        var util = require('util');\n        var webrtcSupport = require('webrtcsupport');\n        var mockconsole = require('mockconsole');\n        var localMedia = require('localmedia');\n        var Peer = require('./peer');\n\n        function WebRTC(opts) {\n            var self = this;\n            var options = opts || {};\n            var config = this.config = {\n                debug: false,\n                // makes the entire PC config overridable\n                peerConnectionConfig: {\n                },\n                peerConnectionConstraints: {\n                    optional: []\n                },\n                receiveMedia: {\n                    offerToReceiveAudio: 1,\n                    offerToReceiveVideo: 1\n                },\n                enableDataChannels: true\n            };\n            var item;\n\n            if (options.iceServers) {\n                config.peerConnectionConfig.iceServersiceServers = options.iceServers;\n            }\n\n            // We also allow a 'logger' option. It can be any object that implements\n            // log, warn, and error methods.\n            // We log nothing by default, following \"the rule of silence\":\n            // http://www.linfo.org/rule_of_silence.html\n            this.logger = function () {\n                // we assume that if you're in debug mode and you didn't\n                // pass in a logger, you actually want to log as much as\n                // possible.\n                if (opts.debug) {\n                    return opts.logger || console;\n                } else {\n                    // or we'll use your logger which should have its own logic\n                    // for output. Or we'll return the no-op.\n                    return opts.logger || mockconsole;\n                }\n            }();\n\n            // set options\n            for (item in options) {\n                if (options.hasOwnProperty(item)) {\n                    this.config[item] = options[item];\n                }\n            }\n\n            // check for support\n            if (!webrtcSupport.support) {\n                this.logger.error('Your browser doesn\\'t seem to support WebRTC');\n            }\n\n            // where we'll store our peer connections\n            this.peers = [];\n\n            // call localMedia constructor\n            localMedia.call(this, this.config);\n\n            this.on('speaking', function () {\n                if (!self.hardMuted) {\n                    // FIXME: should use sendDirectlyToAll, but currently has different semantics wrt payload\n                    self.peers.forEach(function (peer) {\n                        if (peer.enableDataChannels) {\n                            var dc = peer.getDataChannel('hark');\n                            if (dc.readyState != 'open') return;\n                            dc.send(JSON.stringify({type: 'speaking'}));\n                        }\n                    });\n                }\n            });\n            this.on('stoppedSpeaking', function () {\n                if (!self.hardMuted) {\n                    // FIXME: should use sendDirectlyToAll, but currently has different semantics wrt payload\n                    self.peers.forEach(function (peer) {\n                        if (peer.enableDataChannels) {\n                            var dc = peer.getDataChannel('hark');\n                            if (dc.readyState != 'open') return;\n                            dc.send(JSON.stringify({type: 'stoppedSpeaking'}));\n                        }\n                    });\n                }\n            });\n            this.on('volumeChange', function (volume, treshold) {\n                if (!self.hardMuted) {\n                    // FIXME: should use sendDirectlyToAll, but currently has different semantics wrt payload\n                    self.peers.forEach(function (peer) {\n                        if (peer.enableDataChannels) {\n                            var dc = peer.getDataChannel('hark');\n                            if (dc.readyState != 'open') return;\n                            dc.send(JSON.stringify({type: 'volume', volume: volume }));\n                        }\n                    });\n                }\n            });\n\n            // log events in debug mode\n            if (this.config.debug) {\n                this.on('*', function (event, val1, val2) {\n                    var logger;\n                    // if you didn't pass in a logger and you explicitly turning on debug\n                    // we're just going to assume you're wanting log output with console\n                    if (self.config.logger === mockconsole) {\n                        logger = console;\n                    } else {\n                        logger = self.logger;\n                    }\n                    logger.log('event:', event, val1, val2);\n                });\n            }\n        }\n\n        util.inherits(WebRTC, localMedia);\n\n        WebRTC.prototype.createPeer = function (opts) {\n            var peer;\n            opts.parent = this;\n            peer = new Peer(opts);\n            this.peers.push(peer);\n            return peer;\n        };\n\n// removes peers\n        WebRTC.prototype.removePeers = function (id, type) {\n            this.getPeers(id, type).forEach(function (peer) {\n                peer.end();\n            });\n        };\n\n// fetches all Peer objects by session id and/or type\n        WebRTC.prototype.getPeers = function (sessionId, type) {\n            return this.peers.filter(function (peer) {\n                return (!sessionId || peer.id === sessionId) && (!type || peer.type === type);\n            });\n        };\n\n// sends message to all\n        WebRTC.prototype.sendToAll = function (message, payload) {\n            this.peers.forEach(function (peer) {\n                peer.send(message, payload);\n            });\n        };\n\n// sends message to all using a datachannel\n// only sends to anyone who has an open datachannel\n        WebRTC.prototype.sendDirectlyToAll = function (channel, message, payload) {\n            this.peers.forEach(function (peer) {\n                if (peer.enableDataChannels) {\n                    peer.sendDirectly(channel, message, payload);\n                }\n            });\n        };\n\n        module.exports = WebRTC;\n\n    },{\"./peer\":77,\"localmedia\":44,\"mockconsole\":46,\"util\":73,\"webrtcsupport\":74}]},{},[78])(78)\n});\n\n\n// WEBPACK FOOTER //\n// ./src/core/webrtc/simplewebrtc.bundle.js","import {getByPath, setByPath, deepExtend} from '../utils/helpers';\nimport {vffData} from './vffData';\nimport {EXPOSE_DELIMITER} from './consts';\nimport {bindSyncEvents} from './interactionEvents';\n\nfunction initDOM(){\n    let untitledTemplateCount = 0;\n    let templates = {};\n\n\n    document.querySelectorAll('[vff-template]').forEach(function(template){\n        if(!template.hasAttribute('vff-name') && !template.querySelector('[vff-name]')){\n            template.setAttribute('vff-name', '');\n        }\n    });\n\n    let controls = document.querySelectorAll('[vff-name]');\n\n    controls.forEach((control) => {\n        let template = closest(control, '[vff-template]');\n        if(!template) {\n            control.setAttribute('vff-template', 'Untitled Template ' + (++untitledTemplateCount));\n        }\n        //Set options object\n        let options = (template || control).getAttribute('vff-options') || '{}';\n        try {\n            options = JSON.parse(options.replace((/'/g), \"\\\"\"));\n        } catch (err){\n            options = {};\n        }\n        if(control.options && typeof control.options === 'function'){\n            options = Object.assign({}, control.options(), options);\n        }\n        options.element = (template || control);\n\n\n        let templateName = (template || control).getAttribute('vff-template');\n        let controlName = control.getAttribute('vff-name');\n        let exposed = control.expose? control.expose() : {};\n        let data = {};\n        for (let prop in exposed) {\n            if (exposed.hasOwnProperty(prop)) {\n\n                let path = typeof exposed[prop] === 'object'? exposed[prop].path : exposed[prop];\n\n                if(prop === path){ //Slightly change the name of the property to avoid infinite looping\n                    prop = prop[0] === prop[0].toUpperCase()? (prop.charAt(0).toLowerCase() + prop.substr(1)) : (prop.charAt(0).toUpperCase() + prop.substr(1));\n                }\n\n                data[controlName + EXPOSE_DELIMITER + prop] = getByPath(control, path);\n\n                Object.defineProperty(control, prop, {\n                    get (){\n                        return getByPath(this, path);\n                    },\n                    set (newVal){\n                        setByPath(this, path, newVal);\n                    },\n                    configurable : true,\n                });\n            }\n        }\n        if(!templates[templateName]){\n            templates[templateName] = {data : data, options : options};\n        } else {\n            deepExtend(templates[templateName], {data : data, options : options});\n        }\n    });\n    for (let template in templates) {\n        vffData.registerTemplate(template, templates[template].data, templates[template].options);\n    }\n    initSync();\n}\n\nfunction closest(element, selector){\n\n    while (element) {\n        if (element.matches(selector)) {\n            return element;\n        }\n        element = element.parentElement;\n    }\n\n}\n\nfunction initSync(){\n    let elements = document.querySelectorAll('[vff-sync]');\n    elements.forEach((element) => {\n        bindSyncEvents(element);\n    });\n}\n\n\nmodule.exports = {\n    init : () => {\n        window.addEventListener('load', function(){\n            initDOM();\n        });\n    },\n    _init : initDOM\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/initDOM.js","import {observe} from '../observer/htmlAccessorObserver';\n\n\nclass VffElement{\n    constructor(selector){\n        this.selector = selector;\n        this.element = null;\n        this._init();\n        this._observe();\n    }\n    _init(){\n        switch(this.selector[0]){\n            case '<' : {\n                //create element\n                let matches = this.selector.match(/<([\\w-]*)>/);\n                if (matches === null || matches === undefined) {\n                    throw 'Invalid Selector / Node';\n                }\n                let nodeName = matches[0].replace('<', '').replace('>', '');\n                this.element = document.createElement(nodeName);\n                break;\n            }\n            default : {\n                this.element = document.querySelector(this.selector);\n            }\n        }\n    }\n    onChange(){\n        let prop = arguments.length > 1? arguments[0] : null;\n        let cb   = arguments.length > 1? arguments[1] : arguments[0];\n        let event = prop? \"vff-change-\" + prop : 'vff-change';\n        let listener = function(e){\n            if(prop){\n                cb(e.detail.value);\n            } else {\n                cb(e.detail.property, e.detail.value, e.detail.path);\n            }\n        };\n        this.element.addEventListener(event, listener, false);\n        let self = this;\n        return () => {\n            self.element.removeEventListener(event, listener, false);\n        };\n    }\n    _observe(){\n        let self = this;\n        observe(this.element, null, function(event, data){\n            self.element.dispatchEvent(new CustomEvent(event, data));\n        });\n        return this;\n    }\n}\n\nexport default VffElement;\n\n\n// WEBPACK FOOTER //\n// ./src/core/vffElement.js","import {trim} from '../utils/helpers';\nimport {getByPath, setByPath} from '../utils/helpers';\n\nfunction getExposed(provider, prop){\n    if(provider.expose){\n        return typeof provider.expose()[prop] === 'object'? provider.expose()[prop].path : provider.expose()[prop];\n    }\n}\n\nfunction stringifyPath(path){\n    let str = '';\n    for (let i = 0; i < path.length; i++) {\n        str += (trim(path[i],\"_\") + '.');\n    }\n    return str;\n}\n\nfunction observePrimitive(provider, prop, path, dispatcher){\n    let value = provider[prop];\n    let pathString = stringifyPath(path);\n    let exposedPath = getExposed(provider, prop);\n    Object.defineProperty(provider, prop, {\n        get () {\n            if(exposedPath){\n              return getByPath(provider,exposedPath);\n            }\n            return value;\n        },\n        set (newValue) {\n            if(newValue !== provider[prop]){\n                if(dispatcher){\n                    let event = 'vff-change-' + pathString + trim(prop, \"_\");\n                    dispatcher(event, { detail: {value : newValue}});\n                    dispatcher('vff-change', { detail: {value : newValue, property : prop, path : path}});\n                }\n                if(exposedPath){\n                    setByPath(provider, exposedPath, newValue);\n                } else {\n                    value = newValue;\n                }\n            }\n        }\n    });\n}\n\nfunction observeObject(provider, path, dispatcher){\n    path = path || [];\n    let props = Object.getOwnPropertyNames(provider);\n    for (let i = 0; i < props.length; i++) {\n\n        if (typeof provider[props[i]] === 'object') {\n            path.push(props[i]);\n            observeObject(provider[props[i]], path.slice(), dispatcher);\n        } else {\n            observePrimitive(provider, props[i], path.slice(), dispatcher);\n        }\n    }\n}\n\nmodule.exports = {\n    observe : observeObject,\n};\n\n\n// WEBPACK FOOTER //\n// ./src/observer/htmlAccessorObserver.js","HTMLHeadingElement.prototype.expose = function(){\n    return {text : 'innerText', color : {path : 'style.color', ui : 'color'}};\n};\nHTMLSpanElement.prototype.expose = function(){\n    return {text : 'innerText'};\n};\nHTMLParagraphElement.prototype.expose = function(){\n    return {text : 'innerText'};\n};\nHTMLImageElement.prototype.expose = function(){\n    return {source : 'src'};\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/defaultExpose.js","import \"../../scripts/custom-elements.min\";\nimport \"../../scripts/custom-elements-es5-adapter.exec\";\nimport Emoji from \"./emoji.js\";\nimport DragArea from \"./drag-area\";\nimport Telestrator from \"./telestrator/telestrator-element\";\nimport Clock from \"./clocks/clock-simple\";\nimport SystemClock from \"./clocks/system-clock\";\nimport Countdown from \"./clocks/countdown\";\nimport Stopwatch from \"./clocks/stopwatch\";\nimport BasicClock from \"./clocks/basic-clock\";\n\n\nfunction define(name, element) {\n    customElements.define(name, element);\n}\n\n\ndefine('drag-area', DragArea);\ndefine('my-element', Emoji);\ndefine('telestrator-element', Telestrator);\ndefine('clock-element', Clock);\ndefine('system-clock', SystemClock);\ndefine('countdown-clock', Countdown);\ndefine('stopwatch-clock', Stopwatch);\ndefine('basic-clock', BasicClock);\n\n\n// function isDefined(name) {\n//     return document.createElement(name).constructor !== HTMLElement;\n// }\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.js","(function(){\n    'use strict';var h=new function(){};var aa=new Set(\"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph\".split(\" \"));function m(b){var a=aa.has(b);b=/^[a-z][.0-9_a-z]*-[\\-.0-9_a-z]*$/.test(b);return!a&&b}function n(b){var a=b.isConnected;if(void 0!==a)return a;for(;b&&!(b.__CE_isImportDocument||b instanceof Document);)b=b.parentNode||(window.ShadowRoot&&b instanceof ShadowRoot?b.host:void 0);return!(!b||!(b.__CE_isImportDocument||b instanceof Document))}\n    function p(b,a){for(;a&&a!==b&&!a.nextSibling;)a=a.parentNode;return a&&a!==b?a.nextSibling:null}\n    function t(b,a,c){c=c?c:new Set;for(var d=b;d;){if(d.nodeType===Node.ELEMENT_NODE){var e=d;a(e);var f=e.localName;if(\"link\"===f&&\"import\"===e.getAttribute(\"rel\")){d=e.import;if(d instanceof Node&&!c.has(d))for(c.add(d),d=d.firstChild;d;d=d.nextSibling)t(d,a,c);d=p(b,e);continue}else if(\"template\"===f){d=p(b,e);continue}if(e=e.__CE_shadowRoot)for(e=e.firstChild;e;e=e.nextSibling)t(e,a,c)}d=d.firstChild?d.firstChild:p(b,d)}}function u(b,a,c){b[a]=c};function v(){this.a=new Map;this.s=new Map;this.f=[];this.b=!1}function ba(b,a,c){b.a.set(a,c);b.s.set(c.constructor,c)}function w(b,a){b.b=!0;b.f.push(a)}function x(b,a){b.b&&t(a,function(a){return y(b,a)})}function y(b,a){if(b.b&&!a.__CE_patched){a.__CE_patched=!0;for(var c=0;c<b.f.length;c++)b.f[c](a)}}function z(b,a){var c=[];t(a,function(b){return c.push(b)});for(a=0;a<c.length;a++){var d=c[a];1===d.__CE_state?b.connectedCallback(d):A(b,d)}}\n    function B(b,a){var c=[];t(a,function(b){return c.push(b)});for(a=0;a<c.length;a++){var d=c[a];1===d.__CE_state&&b.disconnectedCallback(d)}}\n    function C(b,a,c){c=c?c:{};var d=c.w||new Set,e=c.i||function(a){return A(b,a)},f=[];t(a,function(a){if(\"link\"===a.localName&&\"import\"===a.getAttribute(\"rel\")){var c=a.import;c instanceof Node&&(c.__CE_isImportDocument=!0,c.__CE_hasRegistry=!0);c&&\"complete\"===c.readyState?c.__CE_documentLoadHandled=!0:a.addEventListener(\"load\",function(){var c=a.import;if(!c.__CE_documentLoadHandled){c.__CE_documentLoadHandled=!0;var f=new Set(d);f.delete(c);C(b,c,{w:f,i:e})}})}else f.push(a)},d);if(b.b)for(a=0;a<\n    f.length;a++)y(b,f[a]);for(a=0;a<f.length;a++)e(f[a])}\n    function A(b,a){if(void 0===a.__CE_state){var c=a.ownerDocument;if(c.defaultView||c.__CE_isImportDocument&&c.__CE_hasRegistry)if(c=b.a.get(a.localName)){c.constructionStack.push(a);var d=c.constructor;try{try{if(new d!==a)throw Error(\"The custom element constructor did not produce the element being upgraded.\");}finally{c.constructionStack.pop()}}catch(r){throw a.__CE_state=2,r;}a.__CE_state=1;a.__CE_definition=c;if(c.attributeChangedCallback)for(c=c.observedAttributes,d=0;d<c.length;d++){var e=c[d],\n        f=a.getAttribute(e);null!==f&&b.attributeChangedCallback(a,e,null,f,null)}n(a)&&b.connectedCallback(a)}}}v.prototype.connectedCallback=function(b){var a=b.__CE_definition;a.connectedCallback&&a.connectedCallback.call(b)};v.prototype.disconnectedCallback=function(b){var a=b.__CE_definition;a.disconnectedCallback&&a.disconnectedCallback.call(b)};\n    v.prototype.attributeChangedCallback=function(b,a,c,d,e){var f=b.__CE_definition;f.attributeChangedCallback&&-1<f.observedAttributes.indexOf(a)&&f.attributeChangedCallback.call(b,a,c,d,e)};function D(b,a){this.c=b;this.a=a;this.b=void 0;C(this.c,this.a);\"loading\"===this.a.readyState&&(this.b=new MutationObserver(this.f.bind(this)),this.b.observe(this.a,{childList:!0,subtree:!0}))}function E(b){b.b&&b.b.disconnect()}D.prototype.f=function(b){var a=this.a.readyState;\"interactive\"!==a&&\"complete\"!==a||E(this);for(a=0;a<b.length;a++)for(var c=b[a].addedNodes,d=0;d<c.length;d++)C(this.c,c[d])};function ca(){var b=this;this.b=this.a=void 0;this.f=new Promise(function(a){b.b=a;b.a&&a(b.a)})}function F(b){if(b.a)throw Error(\"Already resolved.\");b.a=void 0;b.b&&b.b(void 0)};function G(b){this.j=!1;this.c=b;this.o=new Map;this.l=function(b){return b()};this.g=!1;this.m=[];this.u=new D(b,document)}\n    G.prototype.define=function(b,a){var c=this;if(!(a instanceof Function))throw new TypeError(\"Custom element constructors must be functions.\");if(!m(b))throw new SyntaxError(\"The element name '\"+b+\"' is not valid.\");if(this.c.a.get(b))throw Error(\"A custom element with name '\"+b+\"' has already been defined.\");if(this.j)throw Error(\"A custom element is already being defined.\");this.j=!0;var d,e,f,r,k;try{var g=function(b){var a=l[b];if(void 0!==a&&!(a instanceof Function))throw Error(\"The '\"+b+\"' callback must be a function.\");\n        return a},l=a.prototype;if(!(l instanceof Object))throw new TypeError(\"The custom element constructor's prototype is not an object.\");d=g(\"connectedCallback\");e=g(\"disconnectedCallback\");f=g(\"adoptedCallback\");r=g(\"attributeChangedCallback\");k=a.observedAttributes||[]}catch(q){return}finally{this.j=!1}a={localName:b,constructor:a,connectedCallback:d,disconnectedCallback:e,adoptedCallback:f,attributeChangedCallback:r,observedAttributes:k,constructionStack:[]};ba(this.c,b,a);this.m.push(a);this.g||\n    (this.g=!0,this.l(function(){return da(c)}))};G.prototype.i=function(b){C(this.c,b)};function da(b){if(!1!==b.g){b.g=!1;for(var a=b.m,c=[],d=new Map,e=0;e<a.length;e++)d.set(a[e].localName,[]);C(b.c,document,{i:function(a){if(void 0===a.__CE_state){var e=a.localName,f=d.get(e);f?f.push(a):b.c.a.get(e)&&c.push(a)}}});for(e=0;e<c.length;e++)A(b.c,c[e]);for(;0<a.length;){for(var f=a.shift(),e=f.localName,f=d.get(f.localName),r=0;r<f.length;r++)A(b.c,f[r]);(e=b.o.get(e))&&F(e)}}}\n    G.prototype.get=function(b){if(b=this.c.a.get(b))return b.constructor};G.prototype.whenDefined=function(b){if(!m(b))return Promise.reject(new SyntaxError(\"'\"+b+\"' is not a valid custom element name.\"));var a=this.o.get(b);if(a)return a.f;a=new ca;this.o.set(b,a);this.c.a.get(b)&&!this.m.some(function(a){return a.localName===b})&&F(a);return a.f};G.prototype.v=function(b){E(this.u);var a=this.l;this.l=function(c){return b(function(){return a(c)})}};window.CustomElementRegistry=G;\n    G.prototype.define=G.prototype.define;G.prototype.upgrade=G.prototype.i;G.prototype.get=G.prototype.get;G.prototype.whenDefined=G.prototype.whenDefined;G.prototype.polyfillWrapFlushCallback=G.prototype.v;var H=window.Document.prototype.createElement,I=window.Document.prototype.createElementNS,ea=window.Document.prototype.importNode,fa=window.Document.prototype.prepend,ga=window.Document.prototype.append,ha=window.DocumentFragment.prototype.prepend,ia=window.DocumentFragment.prototype.append,J=window.Node.prototype.cloneNode,K=window.Node.prototype.appendChild,L=window.Node.prototype.insertBefore,M=window.Node.prototype.removeChild,N=window.Node.prototype.replaceChild,O=Object.getOwnPropertyDescriptor(window.Node.prototype,\n        \"textContent\"),P=window.Element.prototype.attachShadow,Q=Object.getOwnPropertyDescriptor(window.Element.prototype,\"innerHTML\"),R=window.Element.prototype.getAttribute,S=window.Element.prototype.setAttribute,T=window.Element.prototype.removeAttribute,U=window.Element.prototype.getAttributeNS,ja=window.Element.prototype.setAttributeNS,ka=window.Element.prototype.removeAttributeNS,la=window.Element.prototype.insertAdjacentElement,ma=window.Element.prototype.insertAdjacentHTML,na=window.Element.prototype.prepend,\n        oa=window.Element.prototype.append,V=window.Element.prototype.before,pa=window.Element.prototype.after,qa=window.Element.prototype.replaceWith,ra=window.Element.prototype.remove,sa=window.HTMLElement,W=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,\"innerHTML\"),ta=window.HTMLElement.prototype.insertAdjacentElement,ua=window.HTMLElement.prototype.insertAdjacentHTML;function va(){var b=X;window.HTMLElement=function(){function a(){var a=this.constructor,d=b.s.get(a);if(!d)throw Error(\"The custom element being constructed was not registered with `customElements`.\");var e=d.constructionStack;if(!e.length)return e=H.call(document,d.localName),Object.setPrototypeOf(e,a.prototype),e.__CE_state=1,e.__CE_definition=d,y(b,e),e;var d=e.length-1,f=e[d];if(f===h)throw Error(\"The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.\");\n        e[d]=h;Object.setPrototypeOf(f,a.prototype);y(b,f);return f}a.prototype=sa.prototype;Object.defineProperty(a.prototype,\"constructor\",{writable:!0,configurable:!0,enumerable:!1,value:a});return a}()};function Y(b,a,c){function d(a){return function(c){for(var e=[],d=0;d<arguments.length;++d)e[d-0]=arguments[d];for(var d=[],f=[],l=0;l<e.length;l++){var q=e[l];q instanceof Element&&n(q)&&f.push(q);if(q instanceof DocumentFragment)for(q=q.firstChild;q;q=q.nextSibling)d.push(q);else d.push(q)}a.apply(this,e);for(e=0;e<f.length;e++)B(b,f[e]);if(n(this))for(e=0;e<d.length;e++)f=d[e],f instanceof Element&&z(b,f)}}c.h&&(a.prepend=d(c.h));c.append&&(a.append=d(c.append))};function wa(){var b=X;u(Document.prototype,\"createElement\",function(a){if(this.__CE_hasRegistry){var c=b.a.get(a);if(c)return new c.constructor}a=H.call(this,a);y(b,a);return a});u(Document.prototype,\"importNode\",function(a,c){a=ea.call(this,a,c);this.__CE_hasRegistry?C(b,a):x(b,a);return a});u(Document.prototype,\"createElementNS\",function(a,c){if(this.__CE_hasRegistry&&(null===a||\"http://www.w3.org/1999/xhtml\"===a)){var d=b.a.get(c);if(d)return new d.constructor}a=I.call(this,a,c);y(b,a);return a});\n        Y(b,Document.prototype,{h:fa,append:ga})};function xa(){var b=X;function a(a,d){Object.defineProperty(a,\"textContent\",{enumerable:d.enumerable,configurable:!0,get:d.get,set:function(a){if(this.nodeType===Node.TEXT_NODE)d.set.call(this,a);else{var e=void 0;if(this.firstChild){var c=this.childNodes,k=c.length;if(0<k&&n(this))for(var e=Array(k),g=0;g<k;g++)e[g]=c[g]}d.set.call(this,a);if(e)for(a=0;a<e.length;a++)B(b,e[a])}}})}u(Node.prototype,\"insertBefore\",function(a,d){if(a instanceof DocumentFragment){var e=Array.prototype.slice.apply(a.childNodes);\n        a=L.call(this,a,d);if(n(this))for(d=0;d<e.length;d++)z(b,e[d]);return a}e=n(a);d=L.call(this,a,d);e&&B(b,a);n(this)&&z(b,a);return d});u(Node.prototype,\"appendChild\",function(a){if(a instanceof DocumentFragment){var c=Array.prototype.slice.apply(a.childNodes);a=K.call(this,a);if(n(this))for(var e=0;e<c.length;e++)z(b,c[e]);return a}c=n(a);e=K.call(this,a);c&&B(b,a);n(this)&&z(b,a);return e});u(Node.prototype,\"cloneNode\",function(a){a=J.call(this,a);this.ownerDocument.__CE_hasRegistry?C(b,a):x(b,a);\n        return a});u(Node.prototype,\"removeChild\",function(a){var c=n(a),e=M.call(this,a);c&&B(b,a);return e});u(Node.prototype,\"replaceChild\",function(a,d){if(a instanceof DocumentFragment){var e=Array.prototype.slice.apply(a.childNodes);a=N.call(this,a,d);if(n(this))for(B(b,d),d=0;d<e.length;d++)z(b,e[d]);return a}var e=n(a),f=N.call(this,a,d),c=n(this);c&&B(b,d);e&&B(b,a);c&&z(b,a);return f});O&&O.get?a(Node.prototype,O):w(b,function(b){a(b,{enumerable:!0,configurable:!0,get:function(){for(var a=[],b=\n        0;b<this.childNodes.length;b++)a.push(this.childNodes[b].textContent);return a.join(\"\")},set:function(a){for(;this.firstChild;)M.call(this,this.firstChild);K.call(this,document.createTextNode(a))}})})};function ya(b){var a=Element.prototype;function c(a){return function(e){for(var c=[],d=0;d<arguments.length;++d)c[d-0]=arguments[d];for(var d=[],k=[],g=0;g<c.length;g++){var l=c[g];l instanceof Element&&n(l)&&k.push(l);if(l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)d.push(l);else d.push(l)}a.apply(this,c);for(c=0;c<k.length;c++)B(b,k[c]);if(n(this))for(c=0;c<d.length;c++)k=d[c],k instanceof Element&&z(b,k)}}V&&(a.before=c(V));V&&(a.after=c(pa));qa&&u(a,\"replaceWith\",function(a){for(var e=\n        [],c=0;c<arguments.length;++c)e[c-0]=arguments[c];for(var c=[],d=[],k=0;k<e.length;k++){var g=e[k];g instanceof Element&&n(g)&&d.push(g);if(g instanceof DocumentFragment)for(g=g.firstChild;g;g=g.nextSibling)c.push(g);else c.push(g)}k=n(this);qa.apply(this,e);for(e=0;e<d.length;e++)B(b,d[e]);if(k)for(B(b,this),e=0;e<c.length;e++)d=c[e],d instanceof Element&&z(b,d)});ra&&u(a,\"remove\",function(){var a=n(this);ra.call(this);a&&B(b,this)})};function za(){var b=X;function a(a,c){Object.defineProperty(a,\"innerHTML\",{enumerable:c.enumerable,configurable:!0,get:c.get,set:function(a){var e=this,d=void 0;n(this)&&(d=[],t(this,function(a){a!==e&&d.push(a)}));c.set.call(this,a);if(d)for(var f=0;f<d.length;f++){var r=d[f];1===r.__CE_state&&b.disconnectedCallback(r)}this.ownerDocument.__CE_hasRegistry?C(b,this):x(b,this);return a}})}function c(a,c){u(a,\"insertAdjacentElement\",function(a,e){var d=n(e);a=c.call(this,a,e);d&&B(b,e);n(a)&&z(b,e);\n        return a})}function d(a,c){function e(a,e){for(var c=[];a!==e;a=a.nextSibling)c.push(a);for(e=0;e<c.length;e++)C(b,c[e])}u(a,\"insertAdjacentHTML\",function(a,b){a=a.toLowerCase();if(\"beforebegin\"===a){var d=this.previousSibling;c.call(this,a,b);e(d||this.parentNode.firstChild,this)}else if(\"afterbegin\"===a)d=this.firstChild,c.call(this,a,b),e(this.firstChild,d);else if(\"beforeend\"===a)d=this.lastChild,c.call(this,a,b),e(d||this.firstChild,null);else if(\"afterend\"===a)d=this.nextSibling,c.call(this,\n        a,b),e(this.nextSibling,d);else throw new SyntaxError(\"The value provided (\"+String(a)+\") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.\");})}P&&u(Element.prototype,\"attachShadow\",function(a){return this.__CE_shadowRoot=a=P.call(this,a)});Q&&Q.get?a(Element.prototype,Q):W&&W.get?a(HTMLElement.prototype,W):w(b,function(b){a(b,{enumerable:!0,configurable:!0,get:function(){return J.call(this,!0).innerHTML},set:function(a){var b=\"template\"===this.localName,e=b?this.content:this,\n        c=I.call(document,this.namespaceURI,this.localName);for(c.innerHTML=a;0<e.childNodes.length;)M.call(e,e.childNodes[0]);for(a=b?c.content:c;0<a.childNodes.length;)K.call(e,a.childNodes[0])}})});u(Element.prototype,\"setAttribute\",function(a,c){if(1!==this.__CE_state)return S.call(this,a,c);var e=R.call(this,a);S.call(this,a,c);c=R.call(this,a);b.attributeChangedCallback(this,a,e,c,null)});u(Element.prototype,\"setAttributeNS\",function(a,c,d){if(1!==this.__CE_state)return ja.call(this,a,c,d);var e=U.call(this,\n        a,c);ja.call(this,a,c,d);d=U.call(this,a,c);b.attributeChangedCallback(this,c,e,d,a)});u(Element.prototype,\"removeAttribute\",function(a){if(1!==this.__CE_state)return T.call(this,a);var c=R.call(this,a);T.call(this,a);null!==c&&b.attributeChangedCallback(this,a,c,null,null)});u(Element.prototype,\"removeAttributeNS\",function(a,c){if(1!==this.__CE_state)return ka.call(this,a,c);var d=U.call(this,a,c);ka.call(this,a,c);var e=U.call(this,a,c);d!==e&&b.attributeChangedCallback(this,c,d,e,a)});ta?c(HTMLElement.prototype,\n        ta):la?c(Element.prototype,la):console.warn(\"Custom Elements: `Element#insertAdjacentElement` was not patched.\");ua?d(HTMLElement.prototype,ua):ma?d(Element.prototype,ma):console.warn(\"Custom Elements: `Element#insertAdjacentHTML` was not patched.\");Y(b,Element.prototype,{h:na,append:oa});ya(b)};/*\n     Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n     This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n     The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n     The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n     Code distributed by Google as part of the polymer project is also\n     subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n     */\n    var Z=window.customElements;if(!Z||Z.forcePolyfill||\"function\"!=typeof Z.define||\"function\"!=typeof Z.get){var X=new v;va();wa();Y(X,DocumentFragment.prototype,{h:ha,append:ia});xa();za();document.__CE_hasRegistry=!0;var customElements=new G(X);Object.defineProperty(window,\"customElements\",{configurable:!0,enumerable:!0,value:customElements})};\n}).call(self);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./scripts/custom-elements.min.js\n// module id = 33\n// module chunks = 0","/* eslint-disable */\n(function () {\n'use strict';\n\n(()=>{'use strict';if(!window.customElements)return;const a=window.HTMLElement,b=window.customElements.define,c=window.customElements.get,d=new Map,e=new Map;let f=!1,g=!1;window.HTMLElement=function(){if(!f){const a=d.get(this.constructor),b=c.call(window.customElements,a);g=!0;const e=new b;return e}f=!1;},window.HTMLElement.prototype=a.prototype;Object.defineProperty(window,'customElements',{value:window.customElements,configurable:!0,writable:!0}),Object.defineProperty(window.customElements,'define',{value:(c,h)=>{const i=h.prototype,j=class extends a{constructor(){super(),Object.setPrototypeOf(this,i),g||(f=!0,h.call(this)),g=!1;}},k=j.prototype;j.observedAttributes=h.observedAttributes,k.connectedCallback=i.connectedCallback,k.disconnectedCallback=i.disconnectedCallback,k.attributeChangedCallback=i.attributeChangedCallback,k.adoptedCallback=i.adoptedCallback,d.set(h,c),e.set(c,h),b.call(window.customElements,c,j);},configurable:!0,writable:!0}),Object.defineProperty(window.customElements,'get',{value:(a)=>e.get(a),configurable:!0,writable:!0});})();\n\n/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n}());\n\n/* eslint-enable */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./scripts/custom-elements-es5-adapter.exec.js\n// module id = 34\n// module chunks = 0","export default class MyElement extends HTMLElement {\n    constructor() {\n        super();\n    }\n\n    connectedCallback() {\n        this.style.cursor = 'pointer';\n        this.style.userSelect = 'none';\n        this.render();\n\n        this.addEventListener('click', this.onClick);\n    }\n\n    disconnectedCallback() {\n        this.removeEventListener('click', this.onClick);\n    }\n\n    /**\n     * Render the content. Will render a\n     * happy face if the `happy` attribute\n     * is set, sad otherwise.\n     */\n    render() {\n        this.innerHTML = this.happy ? '&#x1f603;' : '&#x1f620;';\n    }\n\n    /**\n     * Click handler. Toggles the `happy`\n     * property.\n     */\n    onClick() {\n        this.happy = !this.happy;\n    }\n\n    static get observedAttributes() {\n        return ['happy'];\n    }\n\n    attributeChangedCallback() {\n        this.render();\n    }\n\n    get happy() {\n        return this.hasAttribute('happy');\n    }\n\n    set happy(value) {\n        if (value) {\n            this.setAttribute('happy', '');\n        } else {\n            this.removeAttribute('happy');\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/emoji.js","export default class DragArea extends HTMLElement {\n    constructor() {\n        super();\n        this._dragging = false;\n        this._result = {x:0, y:0};\n    }\n\n    connectedCallback() {\n        this.style.cursor = 'pointer';\n        this.style.userSelect = 'none';\n        this.addEventListener('mousedown', this.mouseDown);\n        this.addEventListener('touchstart', this.touchStart);\n        this.addEventListener('mouseup', this.mouseUp);\n        this.addEventListener('touchend', this.touchEnd);\n        this.addEventListener('mousemove', this.mouseMove);\n        this.addEventListener('touchmove', this.touchMove);\n    }\n\n    disconnectedCallback() {\n        this.removeEventListener('mousedown', this.mouseDown);\n        this.removeEventListener('touchstart', this.touchStart);\n        this.removeEventListener('mouseup', this.mouseUp);\n        this.removeEventListener('touchend', this.touchEnd);\n        this.removeEventListener('mousemove', this.mouseMove);\n        this.removeEventListener('touchmove', this.touchMove);\n    }\n\n    get isDragging() {\n        return this._dragging;\n    }\n\n\n    calc(e) {\n        if(this._dragging) {\n            let bounds = this.getBoundingClientRect();\n            let x = 0;\n            let y = 0;\n            if (this.mode === \"screen\") {\n                x = e.screenX;\n                y = e.screenY;\n            }\n            else if (this.mode === \"linear\") {\n\n                x = this.minValueX + (((e.clientX - bounds.left) / bounds.width) * (this.maxValueX - this.minValueX));\n                y = this.minValueY + (((e.clientY - bounds.top) / bounds.height) * (this.maxValueY - this.minValueY));\n\n\n            } else {\n                x = e.clientX - bounds.left;\n                y = e.clientY - bounds.top;\n            }\n\n            if (this.precision === \"int\") {\n                x = Math.floor(x);\n                y = Math.floor(y);\n            }\n\n            this._result.x = x;\n            this._result.y = y;\n\n\n            // console.log(x + \" : \" + y);\n        }\n    }\n\n\n    mouseDown(e) {\n        this._dragging = true;\n        this.calc(e);\n    }\n    touchStart(e) {\n        this._dragging = true;\n        this.calc(e.originalEvent.touches[0]);\n    }\n\n    mouseUp() {\n        this._dragging = false;\n    }\n    touchEnd() {\n        this._dragging = false;\n    }\n    mouseMove(e) {\n        this.calc(e);\n    }\n    touchMove(e){\n        this.calc(e.originalEvent.touches[0]);\n    }\n\n    static get observedAttributes() {\n        return ['result','mode', 'minValueX', 'minValueY', 'maxValueX', 'maxValueY', 'precision'];\n    }\n\n    attributeChangedCallback() {\n    }\n\n    get result() {\n        return this._result;\n    }\n    get mode() {\n        return this.getAttribute(\"mode\");\n    }\n    get minValueX() {\n        return parseInt(this.getAttribute(\"min-value-x\"));\n    }\n    get minValueY() {\n        return parseInt(this.getAttribute(\"min-value-y\"));\n    }\n    get maxValueX() {\n        return parseInt(this.getAttribute(\"max-value-x\"));\n    }\n    get maxValueY() {\n        return parseInt(this.getAttribute(\"max-value-y\"));\n    }\n    get precision() {\n        return this.getAttribute(\"precision\");\n    }\n    expose(){\n        return {\n            xValue : {\n                path : 'result.x',\n            },\n            yValue : 'result.y'\n        };\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/drag-area.js","import './telestrator-element.scss';\nexport default class Telestrator extends HTMLElement {\n    constructor() {\n        super();\n\n        this.clickX = [];\n        this.clickY = [];\n        this.clickDrag = [];\n        this.lastStroke = 0;\n    }\n\n    connectedCallback() {\n        this.innerHTML = '<canvas id=\"telestrator-canvas\" width=\"1920\" height=\"1080\"></canvas>';\n        this.canvas =  this.querySelector('#telestrator-canvas');\n        this.context = this.canvas.getContext(\"2d\");\n\n        this.canvas.addEventListener('mousedown', this.mouseDown);\n        this.canvas.addEventListener('touchstart', this.touchStart);\n        this.canvas.addEventListener('mouseup', this.mouseUp);\n        this.canvas.addEventListener('touchend', this.touchEnd);\n        this.canvas.addEventListener('mousemove', this.mouseMove);\n        this.canvas.addEventListener('touchmove', this.touchMove);\n        this.canvas.addEventListener('mouseleave', this.mouseLeave);\n\n    }\n\n    disconnectedCallback() {\n        this.canvas.removeEventListener('mousedown', this.mouseDown);\n        this.canvas.removeEventListener('touchstart', this.touchStart);\n        this.canvas.removeEventListener('mouseup', this.mouseUp);\n        this.canvas.removeEventListener('touchend', this.touchEnd);\n        this.canvas.removeEventListener('mousemove', this.mouseMove);\n        this.canvas.removeEventListener('touchmove', this.touchMove);\n        this.canvas.removeEventListener('mouseleave', this.mouseLeave);\n    }\n\n    clear(){\n        this.clickX = [];\n        this.clickY = [];\n        this.clickDrag = [];\n        this.context.clearRect(0, 0, this.context.canvas.width, this.context.canvas.height);\n        this.lastStroke = 0;\n    }\n\n    addClick(x, y, dragging){\n        this.clickX.push(x);\n        this.clickY.push(y);\n        this.clickDrag.push(dragging);\n    }\n    redraw(){\n        this.context.strokeStyle = this.color;\n        this.context.lineJoin = \"round\";\n        this.context.lineCap = \"round\";\n        this.context.lineWidth = this.size;\n\n        for(let i = this.lastStroke; i < this.clickX.length; i++) {\n            this.context.beginPath();\n            if(this.clickDrag[i] && i){\n                this.context.moveTo(this.clickX[i-1], this.clickY[i-1]);\n            }else{\n                this.context.moveTo(this.clickX[i]-1, this.clickY[i]);\n            }\n            this.context.lineTo(this.clickX[i], this.clickY[i]);\n            this.context.closePath();\n            this.context.stroke();\n        }\n        this.lastStroke = this.clickX.length;\n    }\n\n    mouseDown(e) {\n        let bounds = this.getBoundingClientRect();\n        let mouseX = ((e.clientX-bounds.left)/bounds.width) * this.width;\n        let mouseY = ((e.clientY-bounds.top)/bounds.height) * this.height;\n\n        this.parentElement.paint = true;\n        this.parentElement.addClick(mouseX, mouseY);\n        this.parentElement.redraw();\n    }\n    touchStart(e) {\n        let bounds = this.getBoundingClientRect();\n        let mouseX = ((e.originalEvent.touches[0].clientX-bounds.left)/bounds.width) * this.width;\n        let mouseY = ((e.originalEvent.touches[0].clientY-bounds.top)/bounds.height) * this.height;\n\n        this.parentElement.paint = true;\n        this.parentElement.addClick(mouseX, mouseY);\n        this.parentElement.redraw();\n    }\n\n    mouseUp() {\n        this.parentElement.paint = false;\n        this.parentElement.context.closePath();\n    }\n    touchEnd() {\n        this.parentElement.paint = false;\n        this.parentElement.context.closePath();\n    }\n    mouseLeave() {\n        this.parentElement.paint = false;\n        this.parentElement.context.closePath();\n    }\n    mouseMove(e) {\n        if(this.parentElement.paint){\n            let bounds = this.getBoundingClientRect();\n            let mouseX = ((e.clientX-bounds.left)/bounds.width) * this.width;\n            let mouseY = ((e.clientY-bounds.top)/bounds.height) * this.height;\n\n            this.parentElement.addClick(mouseX, mouseY, true);\n            this.parentElement.redraw();\n        }\n    }\n    touchMove(e){\n        if(this.parentElement.paint){\n            let bounds = this.getBoundingClientRect();\n            let mouseX = ((e.originalEvent.touches[0].clientX-bounds.left)/bounds.width) * this.width;\n            let mouseY = ((e.originalEvent.touches[0].clientY-bounds.top)/bounds.height) * this.height;\n\n            this.parentElement.addClick(mouseX, mouseY, true);\n            this.parentElement.redraw();\n        }\n    }\n\n    static get observedAttributes() {\n        return [];\n    }\n\n    attributeChangedCallback() {\n    }\n\n    get color() {\n        return this.getAttribute(\"color\") || 'black';\n    }\n    set color(value) {\n        this.setAttribute('color', value);\n    }\n    get size() {\n        return parseInt(this.getAttribute(\"size\")) || 5;\n    }\n    set size(value) {\n        this.setAttribute('size', value);\n    }\n    expose(){\n        return {\n            Color : \"color\",\n            Size    : {\n                path : \"size\"\n            },\n        };\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/telestrator/telestrator-element.js","\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./telestrator-element.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./telestrator-element.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./telestrator-element.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/telestrator/telestrator-element.scss\n// module id = 38\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"telestrator-element #telestrator-canvas {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/components/telestrator/telestrator-element.scss\n// module id = 39\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/css-base.js\n// module id = 40\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/style-loader/lib/addStyles.js\n// module id = 41\n// module chunks = 0","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/style-loader/lib/urls.js\n// module id = 42\n// module chunks = 0","var work = require('./clock-worker');\n\nfunction createWorker(){\n    var blobURL = URL.createObjectURL( new Blob([ '(', work.toString(),')()' ], { type: 'application/javascript' } ) );\n    var worker = new Worker( blobURL );\n    URL.revokeObjectURL( blobURL );\n    return worker;\n}\n\n\nexport default class Clock extends HTMLElement {\n    constructor() {\n        super();\n\n        var self = this;\n        this._worker = createWorker();\n        this._time = 0 + this.initial;\n        this._memo = this._time;\n        this._worker.onmessage = function(e){\n\n            if(!self.running){\n                return;\n            }\n\n            if(self.limit >= 0 && e.data - self.interval > self.limit){\n                self.pause();\n                self._time = self.limit;\n                self.update();\n                var event = new Event('limit-reached');\n                self.dispatchEvent(event);\n            } else {\n                self._time = e.data;\n                self.update();\n            }\n        };\n        this.running = false;\n    }\n\n    connectedCallback() {\n        this.innerHTML = '<div class=\"clock\"></div>';\n        this.update();\n    }\n\n    disconnectedCallback() {\n        this.running = false;\n    }\n\n    pad(num) {\n        return ('0' + num).slice(-2);\n    }\n\n    limitReached(){\n        return this.limit >= 0 && this._time >= this.limit;\n    }\n\n    formatTime(){\n        return this._time;\n    }\n\n    update(){\n        this.querySelector('.clock').innerHTML = this.formatTime();\n    }\n    pause(){\n        this._worker.postMessage({cmd: 'pause'});\n        this.running = false;\n    }\n    stop(){\n        this._worker.postMessage({cmd: 'stop'});\n        this._time = this.initial;\n        this.running = false;\n        this.update();\n    }\n    start(){\n        this.initial = this._time || this.initial;\n        this._memo = this._time || this.initial;\n        this._time = 0;\n        this.running = true;\n        this._worker.postMessage({cmd: 'start', interval : this.interval, offset : (this.__timecode__ || 0), initial : this._memo});\n    }\n\n    static get observedAttributes() {\n        return [];\n    }\n\n    attributeChangedCallback() {\n    }\n\n    get type(){\n        return this.getAttribute(\"type\") || 'system';\n    }\n    set type(value){\n        this.setAttribute('type', value);\n    }\n\n    get format(){\n        return this.getAttribute(\"format\") || 'hh:mm:ss';\n    }\n    set format(value){\n        this.setAttribute('format', value);\n    }\n\n    get countFrom(){\n        return this.getAttribute(\"count-from\") || 60000;\n    }\n    set countFrom(value){\n        this.setAttribute('count-from', value);\n    }\n    get interval(){\n        return parseInt(this.getAttribute(\"interval\")) || 100;\n    }\n    set interval(value){\n        this.setAttribute('interval', value);\n    }\n\n    get run(){\n        return this.running;\n    }\n    set run(value){\n        if(this.running !== value){\n            this.running = value;\n            this.running? this.start() : this.pause();\n        }\n    }\n\n    get reset(){\n        return false;\n    }\n    set reset(value){\n        if(value){\n            var wasRunning = this.running;\n            this.stop();\n            if(wasRunning){\n                this.start();\n            }\n        }\n    }\n\n    get initial(){\n        return parseInt(this.getAttribute(\"initial\")) || 0;\n    }\n    set initial(value){\n        if(this.initial !== value){\n            this.setAttribute('initial', value);\n            this._time = value;\n            this.update();\n        }\n    }\n    get limit(){\n        var limit = parseInt(this.getAttribute(\"limit\"));\n        return Number.isInteger(limit)? limit : -1;\n\n    }\n    set limit(value){\n        this.setAttribute('limit', value);\n    }\n\n    get show(){\n        var vis = this.getAttribute(\"show\");\n        if(vis !== null){\n            return vis === 'true';\n        } else {\n            return true;\n        }\n    }\n    set show(value){\n        if(value){\n            this.style.visibility = 'visible';\n        } else {\n            this.style.visibility = 'hidden';\n        }\n        this.setAttribute('show', value);\n    }\n\n    expose(){\n        return {\n            Run : 'run',\n            Reset : 'reset',\n            Initial : 'initial',\n            Limit: 'limit',\n            Show: 'show'\n        };\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/clocks/clock-simple.js","\nfunction worker(){\n    var now = Date.now || function () { return (new Date()).getTime(); };\n    var delay;\n    var startedAt;\n    var delayed;\n    var timeoutId = null;\n    var offset;\n\n    self.onmessage = function (event) {\n\n        var data = event.data;\n\n        switch (data.cmd){\n\n            case 'stop':\n\n                clearTimeout(timeoutId);\n                timeoutId = null;\n                break;\n            case 'pause':\n                clearTimeout(timeoutId);\n                timeoutId = null;\n                break;\n            case 'resume':\n                break;\n            case 'reset':\n                break;\n            case 'start':\n\n            delay = data.interval;\n            offset = data.offset || 0;\n            var isLive = data.offset > 100000000;\n            var initial = data.initial || 0;\n\n            startedAt = isLive? new Date(offset - initial) : now() - initial;\n            delayed = 0;\n            timeoutId = self.setTimeout(tick, delay);\n\n            break;\n        }\n    };\n\n    function tick() {\n        delayed += delay;\n        var tickedAt = now();\n        var elapsed = tickedAt - startedAt;\n        var drifted = elapsed - delayed;\n        self.postMessage(elapsed);\n        timeoutId = self.setTimeout(tick, delay - drifted);\n    }\n\n}\n\n\nmodule.exports = worker;\n\n\n// WEBPACK FOOTER //\n// ./src/components/clocks/clock-worker.js","import BasicClock from \"./basic-clock\";\n\nexport default class Countdown extends BasicClock {\n    constructor() {\n        super();\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n    }\n\n\n    init(){\n        return Date.now();\n    }\n    onInterval(){\n        this.set(Date.now());\n    }\n\n    _pad(num) {\n        return ('0' + num).slice(-2);\n    }\n\n    format(timestamp){\n        var seconds         = parseInt((timestamp / 1000) % 60),\n            minutes         = parseInt((timestamp / (1000 * 60)) % 60),\n            hours           = parseInt((timestamp / (1000 * 60 * 60)) % 24),\n            milliseconds    = parseInt((timestamp % 1000) / 100);\n\n        return this._pad(hours) + \":\" + this._pad(minutes) + \":\" + this._pad(seconds) + '.' + milliseconds;\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/clocks/system-clock.js","function work() {\n\n    var now = Date.now || function () {\n            return (new Date()).getTime();\n        };\n    var interval, delayed, startedAt;\n    var timeoutId = null;\n\n    self.onmessage = function (event) {\n        var data = event.data;\n\n        switch (data.cmd) {\n\n            case 'stop':\n                clearTimeout(timeoutId);\n                timeoutId = null;\n                break;\n            case 'start':\n                if(!timeoutId) {\n                    interval = data.interval || 30;\n                    startedAt = now();\n                    delayed = 0;\n                    timeoutId = self.setTimeout(tick, interval);\n                }\n                break;\n        }\n    };\n\n    function tick() {\n        delayed += interval;\n        var tickedAt = now();\n        var elapsed = tickedAt - startedAt;\n        var drifted = elapsed - delayed;\n        self.postMessage(interval);\n        timeoutId = self.setTimeout(tick, interval - drifted);\n    }\n}\n\n\nfunction createWorker(){\n    var blobURL = URL.createObjectURL( new Blob([ '(', work.toString(),')()' ], { type: 'application/javascript' } ) );\n    var worker = new Worker( blobURL );\n    URL.revokeObjectURL( blobURL );\n    return worker;\n}\n\n\nclass Interval {\n    constructor(cb, options){\n        this._options = options || {};\n        this._worker = createWorker();\n        this._worker.onmessage = function(e){\n            cb(e.data);\n        };\n    }\n    start(){\n        this._worker.postMessage({cmd: 'start', interval : this._options.interval});\n    }\n    stop(){\n        this._worker.postMessage({cmd: 'stop', interval : this._options.interval});\n    }\n\n}\n\n\n\nmodule.exports = Interval;\n\n\n// WEBPACK FOOTER //\n// ./src/components/clocks/interval-worker.js","import BasicClock from \"./basic-clock\";\n\n\nexport default class Countdown extends BasicClock {\n    constructor() {\n        super();\n\n    }\n    connectedCallback() {\n        super.connectedCallback();\n    }\n\n    init(){\n        return 15000;\n    }\n\n    onInterval(i){\n        if(this.get() - i > 0){\n            this.set(this.get() - i);\n        } else {\n            this.set(0);\n            this.stop();\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/clocks/countdown.js","import BasicClock from \"./basic-clock\";\n\nexport default class Stopwatch extends BasicClock {\n    constructor() {\n        super();\n        this._limit = '';\n        this._initial = '';\n        this._reset = {\n            ui      : 'pulse',\n            value   : true,\n            label   : 'Click to reset'\n        };\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n    }\n\n    _pad(num) {\n        return ('0' + num).slice(-2);\n    }\n\n    _update(){\n        super._update();\n        if(this._limit !== '' && this._limit > 0 && this._time >= this._limit * 1000){\n            this.run = false;\n            this.dispatchEvent(new Event(\"limit\"));\n        }\n    }\n\n    format(timecode){\n\n        var seconds         = parseInt((timecode / 1000) % 60),\n            minutes         = parseInt((timecode / (1000 * 60)));\n\n        return this._pad(minutes) + \":\" + this._pad(seconds);\n    }\n\n\n    get limit(){\n        return this._limit;\n    }\n\n    set limit(value){\n        this._limit = value;\n    }\n    get initial(){\n        return this._initial;\n    }\n\n    set initial(value){\n        if(value !== undefined){\n            this._initial = parseInt(value)|| 0;\n            // this._time = this._initial;\n            // this._update();\n        }\n    }\n    get reset(){\n        return this._reset;\n    }\n    set reset(value){\n        this._time = this._initial * 1000 || 0;\n        this._update();\n    }\n\n\n\n    expose(){\n        var exposed = super.expose();\n        exposed['fromTime'] = \"initial\";\n        exposed['toTime'] = \"limit\";\n        exposed.Reset = 'reset';\n        return exposed;\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/clocks/stopwatch.js","import {VFF_EVENT, TRACK_EVENT} from '../../utils/events.js';\nimport {findKey} from '../../utils/helpers';\nimport {send} from '../../utils/messenger';\nimport {vffData} from '../../core/vffData';\nlet timeouts = {};\n\n\nmodule.exports = {\n\n    onEvent : (arg1, arg2, arg3) => {\n\n        let template, callback, options;\n        switch (arguments.length){\n            case 0:\n                throw new Error(\"onEvent was called without arguments\");\n            case 1:\n                callback = arg1;\n                break;\n            default:\n                if(typeof arg1 === 'string'){\n                    template = arg1;\n                    callback = arg2;\n                    options = arg3 || {};\n                } else if(typeof arg1 === 'function'){\n                    callback = arg1;\n                    options = arg2 || {};\n                }\n                break;\n        }\n\n        function runCB(data){\n            if(options.consolidate || options.throttle){\n                clearTimeout(timeouts[template || '__global_event__']);\n                timeouts[template || '__global_event__'] = setTimeout(function(){\n                    callback(data);\n                }, (typeof options.throttle === 'number')? options.throttle : 50);\n            } else {\n                callback(data);\n            }\n        }\n\n        function listener(event){\n            if(template){\n                let key = findKey(event.detail, template);\n                if(key){\n                    runCB(event.detail[key]);\n                }\n            } else {\n                runCB(event.detail);\n            }\n        }\n\n        document.addEventListener(VFF_EVENT, listener);\n    },\n\n    track : (name, data) => {\n        let payload = {};\n        payload.name = name;\n        payload.data = data;\n        payload.query = vffData.getQueryParams();\n        send(TRACK_EVENT, payload);\n    }\n\n    // emit : (data) => {\n    //     let payload = {};\n    //     payload.data = data;\n    //     payload.query = vffData.getQueryParams();\n    //     send(OUTGOING_EVENT, payload);\n    // }\n\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/api/events.js","import {send} from '../../utils/messenger.js';\nimport {GO} from '../../utils/events.js';\nimport {noop} from '../../utils/helpers';\n\n\nfunction go(target, time){\n    send(GO,{\n        target  : target,\n        time    : time\n    });\n}\n\n\nmodule.exports = {\n    go          : go,\n    next        : noop,\n    previous    : noop,\n    home        : noop,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/api/player.js","import {vffData} from '../vffData.js';\n\n\nmodule.exports = {\n    show        : (template) => {return vffData.show(template);},\n    hide        : (template) => {return vffData.hide(template);},\n    toggle      : (template) => {return vffData.toggle(template);}\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/api/visibility.js","import {defer} from \"../../utils/helpers\";\n\nfunction get(url, callback) {\n    let deferred = defer();\n    var xmlHttp = new XMLHttpRequest();\n    xmlHttp.onreadystatechange = function() {\n        if (xmlHttp.readyState == 4) {\n            if(xmlHttp.status == 200){\n                if(callback){\n                    callback(xmlHttp.responseText);\n                }\n                deferred.resolve(xmlHttp.responseText);\n            } else {\n                deferred.reject(xmlHttp.status);\n            }\n\n        }\n    };\n    xmlHttp.open(\"GET\", url, true); // true for asynchronous\n    xmlHttp.send(null);\n    return deferred.promise;\n}\n\n\nmodule.exports = {\n    get          : get\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/api/http.js"],"sourceRoot":""}